<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<root file="DotNetNuke.Web.dll" version="08.00.02" generated="2017-06-19 23:15:43Z" generationTime="25.5129038">
  <namespace name="">
    <class name="&lt;PrivateImplementationDetails&gt;">
      <declaration><![CDATA[internal sealed class <PrivateImplementationDetails>]]></declaration>
      <documentation>
      </documentation>
      <constructors>
      </constructors>
      <methods>
        <method name="ComputeStringHash">
          <declaration><![CDATA[internal static uint ComputeStringHash(string s)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="25C9B37AE36A0A08318D4DCA7CA57EA98D776821">
          <declaration><![CDATA[internal static readonly <PrivateImplementationDetails>.__StaticArrayInitTypeSize=6 25C9B37AE36A0A08318D4DCA7CA57EA98D776821;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="4CAECE539B039B16E16206EA2478F8C5FFB2CA05">
          <declaration><![CDATA[internal static readonly long 4CAECE539B039B16E16206EA2478F8C5FFB2CA05;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="E166B4A8D2182BA8711B37DB8367C73E08226CDC">
          <declaration><![CDATA[internal static readonly <PrivateImplementationDetails>.__StaticArrayInitTypeSize=6 E166B4A8D2182BA8711B37DB8367C73E08226CDC;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
  </namespace>
  <namespace name="DotNetNuke.Web.Api">
    <class name="AuthFilterBase">
      <declaration><![CDATA[public abstract class AuthFilterBase : IAuthorizationFilter, IFilter]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[protected AuthFilterBase()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="IsAuthorized">
          <declaration><![CDATA[public abstract bool IsAuthorized(AuthFilterContext context);]]></declaration>
          <documentation>
            <summary>
 Tests if the request passes the authorization requirements
 </summary>
 <param name="context">The auth filter context</param>
 <returns>True when authorization is succesful</returns></documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="OnAuthorization">
          <declaration><![CDATA[protected virtual void OnAuthorization(HttpActionContext actionContext)]]></declaration>
          <documentation>
            <summary>
 Co-ordinates check of authorization and handles Auth failure.  Should rarely be overridden.
 </summary>
 <param name="actionContext"></param></documentation>
          <codeblock>
            <location sl="45" sc="9" el="54" ec="10">Api\AuthFilterBase.cs</location>
            <body hash="be9bdf8837a64e610554677ab8aa2231"><![CDATA[{
            Requires.NotNull("actionContext", actionContext);

            const string failureMessage = "Authorization has been denied for this request.";
            var authFilterContext = new AuthFilterContext(actionContext, failureMessage);
            if (!IsAuthorized(authFilterContext))
            {
                authFilterContext.HandleUnauthorizedRequest();
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="System.Web.Http.Filters.IAuthorizationFilter.ExecuteAuthorizationFilterAsync">
          <declaration><![CDATA[Task<HttpResponseMessage> IAuthorizationFilter.ExecuteAuthorizationFilterAsync(HttpActionContext actionContext, CancellationToken cancellationToken, Func<Task<HttpResponseMessage>> continuation)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="62" sc="9" el="85" ec="10">Api\AuthFilterBase.cs</location>
            <body hash="7811e984e0486e224cccdedbb6dfdcb9"><![CDATA[{
            Requires.NotNull("actionContext", actionContext);
            Requires.NotNull("continuation", continuation);

            try
            {
                OnAuthorization(actionContext);
            }
            catch (Exception e)
            {
                var tcs = new TaskCompletionSource<HttpResponseMessage>();
                tcs.SetException(e);
                return tcs.Task;
            }

            if (actionContext.Response != null)
            {
                var tcs = new TaskCompletionSource<HttpResponseMessage>();
                tcs.SetResult(actionContext.Response);
                return tcs.Task;
            }
            
            return continuation();
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="AllowMultiple">
          <declaration><![CDATA[public abstract bool AllowMultiple]]></declaration>
          <documentation>
            <summary>
 Gets or sets a value indicating whether more than one instance of the indicated attribute can be specified for a single program element.
 </summary>
          </documentation>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="AuthFilterContext">
      <declaration><![CDATA[public class AuthFilterContext]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public AuthFilterContext(HttpActionContext actionContext, string authFailureMessage)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="30" sc="9" el="34" ec="10">Api\AuthFilterContext.cs</location>
            <body hash="061d75d8c115b965e41acb8818c7c315"><![CDATA[public AuthFilterContext(HttpActionContext actionContext, string authFailureMessage)
        {
            ActionContext = actionContext;
            AuthFailureMessage = authFailureMessage;
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="HandleUnauthorizedRequest">
          <declaration><![CDATA[public virtual void HandleUnauthorizedRequest()]]></declaration>
          <documentation>
            <summary>
 Processes requests that fail authorization. This default implementation creates a new response with the
 Unauthorized status code. Override this method to provide your own handling for unauthorized requests.
 </summary>
          </documentation>
          <codeblock>
            <location sl="44" sc="9" el="46" ec="10">Api\AuthFilterContext.cs</location>
            <body hash="fe80d3aa4305ab2c3110865842b04992"><![CDATA[{
            ActionContext.Response = ActionContext.ControllerContext.Request.CreateErrorResponse(HttpStatusCode.Unauthorized, AuthFailureMessage);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="ActionContext">
          <declaration><![CDATA[public HttpActionContext ActionContext]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="36" sc="50" el="36" ec="54">Api\AuthFilterContext.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="36" sc="55" el="36" ec="67">Api\AuthFilterContext.cs</location>
            <body hash="5dbe2cc086ebbf5db6b03610487cca4c"><![CDATA[private set]]></body>
          </codeblock>
        </property>
        <property name="AuthFailureMessage">
          <declaration><![CDATA[public string AuthFailureMessage]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="37" sc="44" el="37" ec="48">Api\AuthFilterContext.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="37" sc="49" el="37" ec="53">Api\AuthFilterContext.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="AuthorizeAttributeBase">
      <declaration><![CDATA[public abstract class AuthorizeAttributeBase : AuthorizationFilterAttribute]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[protected AuthorizeAttributeBase()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="IsAnonymousAttributePresent">
          <declaration><![CDATA[public static bool IsAnonymousAttributePresent(HttpActionContext actionContext)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="71" sc="9" el="74" ec="10">Api\AuthorizeAttributeBase.cs</location>
            <body hash="f604e541fdb25f319307f47f2b2f1316"><![CDATA[{
            return actionContext.ActionDescriptor.GetCustomAttributes<AllowAnonymousAttribute>().Any()
                   || actionContext.ControllerContext.ControllerDescriptor.GetCustomAttributes<AllowAnonymousAttribute>().Any();
        }]]></body>
          </codeblock>
        </method>
        <method name="IsAuthorized">
          <declaration><![CDATA[public abstract bool IsAuthorized(AuthFilterContext context);]]></declaration>
          <documentation>
            <summary>
 Tests if the request passes the authorization requirements
 </summary>
 <param name="context">The auth filter context</param>
 <returns>True when authorization is succesful</returns></documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="OnAuthorization">
          <declaration><![CDATA[public override void OnAuthorization(HttpActionContext actionContext)]]></declaration>
          <documentation>
            <summary>
 Called by framework at start of Auth process, check if auth should be skipped and handles auth failure.  Should rarely need to be overridden.
 </summary>
 <param name="actionContext"></param></documentation>
          <codeblock>
            <location sl="44" sc="9" el="58" ec="10">Api\AuthorizeAttributeBase.cs</location>
            <body hash="af2847acf04b5d2b07d865f3d47ddc23"><![CDATA[{
            Requires.NotNull("actionContext", actionContext);

            if (SkipAuthorization(actionContext))
            {
                return;
            }

            const string failureMessage = "Authorization has been denied for this request.";
            var authFilterContext = new AuthFilterContext(actionContext, failureMessage);
            if (!IsAuthorized(authFilterContext))
            {
                authFilterContext.HandleUnauthorizedRequest();
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="SkipAuthorization">
          <declaration><![CDATA[protected virtual bool SkipAuthorization(HttpActionContext actionContext)]]></declaration>
          <documentation>
            <summary>
 Skips this authorization step if anonymous attribute is applied, override if auth should never be skipped, or other conditions are required
 </summary>
 <param name="actionContext"></param>
 <returns></returns></documentation>
          <codeblock>
            <location sl="66" sc="9" el="68" ec="10">Api\AuthorizeAttributeBase.cs</location>
            <body hash="28088e492200814854afeedf7ba9dd39"><![CDATA[{
            return IsAnonymousAttributePresent(actionContext);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnApiController">
      <declaration><![CDATA[public abstract class DnnApiController : ApiController]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[protected DnnApiController()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="34" sc="9" el="37" ec="10">Api\DnnApiController.cs</location>
            <body hash="867f979e2db238b2936a172683fde1af"><![CDATA[protected DnnApiController()
        {
            _activeModule = new Lazy<ModuleInfo>(InitModuleInfo);
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="InitModuleInfo">
          <declaration><![CDATA[private ModuleInfo InitModuleInfo()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="40" sc="9" el="42" ec="10">Api\DnnApiController.cs</location>
            <body hash="9cfa19faae86632bc000f16df56b2193"><![CDATA[{
            return Request.FindModuleInfo();
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_activeModule">
          <declaration><![CDATA[private readonly Lazy<ModuleInfo> _activeModule;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="ActiveModule">
          <declaration><![CDATA[public ModuleInfo ActiveModule]]></declaration>
          <documentation>
            <summary>
 ModuleInfo for the current module
 <remarks>Will be null unless a valid pair of module and tab ids were provided in the request</remarks>
 </summary>
          </documentation>
        </property>
        <property name="PortalSettings">
          <declaration><![CDATA[public PortalSettings PortalSettings]]></declaration>
          <documentation>
            <summary>
 PortalSettings for the current portal
 </summary>
          </documentation>
          <codeblock>
            <location sl="50" sc="13" el="52" ec="14">Api\DnnApiController.cs</location>
            <body hash="5ab4f2f069ec3680a0fc11e1d9f2b05e"><![CDATA[{
                return PortalController.Instance.GetCurrentPortalSettings();
            }]]></body>
          </codeblock>
        </property>
        <property name="UserInfo">
          <declaration><![CDATA[public UserInfo UserInfo]]></declaration>
          <documentation>
            <summary>
 UserInfo for the current user
 </summary>
          </documentation>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnAuthorizeAttribute">
      <declaration><![CDATA[public sealed class DnnAuthorizeAttribute : AuthorizeAttributeBase, IOverrideDefaultAuthLevel]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[private string[] _staticRolesSplit = new string[0];]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="33" sc="9" el="39" ec="58">Api\DnnAuthorizeAttribute.cs</location>
            <body hash="6124c4d153141c6e93d2c37ab33e6d80"><![CDATA[private string[] _staticRolesSplit = new string[0];

        private string _denyRoles;
        private string[] _denyRolesSplit = new string[0];

        private string _authTypes;
        private string[] _authTypesSplit = new string[0];]]></body>
          </codeblock>
        </constructor>
        <constructor name=".cctor">
          <declaration><![CDATA[static DnnAuthorizeAttribute()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="41" sc="9" el="134" ec="69">Api\DnnAuthorizeAttribute.cs</location>
            <body hash="8d61a633c7ec1349119ff5328a44a0d4"><![CDATA[private static readonly List<string> DefaultAuthTypes = new List<string>();

        internal static void AppendToDefaultAuthTypes(string authType)
        {
            if (!string.IsNullOrEmpty(authType))
            {
                DefaultAuthTypes.Add(authType.Trim());
            }
        }

        /// <summary>
        /// Gets or sets the authorized roles (separated by comma) 
        /// </summary>
        public string StaticRoles
        {
            get { return _staticRoles; }
            set
            {
                _staticRoles = value;
                _staticRolesSplit = SplitString(_staticRoles);
            }
        }

        /// <summary>
        /// Gets or sets the denied roles (separated by comma)
        /// </summary>
        public string DenyRoles
        {
            get { return _denyRoles; }
            set 
            { 
                _denyRoles = value;
                _denyRolesSplit = SplitString(_denyRoles);
            }
        }

        /// <summary>
        /// Gets or sets the allowed authentication types (separated by comma)
        /// </summary>
        public string AuthTypes
        {
            get { return _authTypes; }
            set 
            {
                _authTypes = value;
                _authTypesSplit = SplitString(_authTypes);
            }
        }

        public override bool IsAuthorized(AuthFilterContext context)
        {
            Requires.NotNull("context", context);

            var identity = Thread.CurrentPrincipal.Identity;
            if(!identity.IsAuthenticated)
            {
                return false;
            }

            if(_denyRolesSplit.Any())
            {
                var currentUser = PortalController.Instance.GetCurrentPortalSettings().UserInfo;
                if (!currentUser.IsSuperUser && _denyRolesSplit.Any(currentUser.IsInRole))
                {
                    return false;
                }
            }

            if (_staticRolesSplit.Any())
            {
                var currentUser = PortalController.Instance.GetCurrentPortalSettings().UserInfo;
                if (!_staticRolesSplit.Any(currentUser.IsInRole))
                {
                    return false;
                }
            }

            // if the attribute opted in explicitly for specific authentication types, then 
            // use it; otherwise use the defaults according to settings in the web.config.
            var currentAuthType = (identity.AuthenticationType ?? "").Trim();
            if (currentAuthType.Length > 0)
            {
                if (_authTypesSplit.Any())
                {
                    return _authTypesSplit.Contains(currentAuthType);
                }

                return DefaultAuthTypes.Contains(currentAuthType);
            }

            return true;
        }

        private static readonly string[] EmptyArray = new string[0];]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="AppendToDefaultAuthTypes">
          <declaration><![CDATA[internal static void AppendToDefaultAuthTypes(string authType)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="44" sc="9" el="49" ec="10">Api\DnnAuthorizeAttribute.cs</location>
            <body hash="6d5f8cbcb06fadd47ee93f997798c90b"><![CDATA[{
            if (!string.IsNullOrEmpty(authType))
            {
                DefaultAuthTypes.Add(authType.Trim());
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="IsAuthorized">
          <declaration><![CDATA[public override bool IsAuthorized(AuthFilterContext context)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="91" sc="9" el="132" ec="10">Api\DnnAuthorizeAttribute.cs</location>
            <body hash="1b918bf6acaac00db96a560952108128"><![CDATA[{
            Requires.NotNull("context", context);

            var identity = Thread.CurrentPrincipal.Identity;
            if(!identity.IsAuthenticated)
            {
                return false;
            }

            if(_denyRolesSplit.Any())
            {
                var currentUser = PortalController.Instance.GetCurrentPortalSettings().UserInfo;
                if (!currentUser.IsSuperUser && _denyRolesSplit.Any(currentUser.IsInRole))
                {
                    return false;
                }
            }

            if (_staticRolesSplit.Any())
            {
                var currentUser = PortalController.Instance.GetCurrentPortalSettings().UserInfo;
                if (!_staticRolesSplit.Any(currentUser.IsInRole))
                {
                    return false;
                }
            }

            // if the attribute opted in explicitly for specific authentication types, then 
            // use it; otherwise use the defaults according to settings in the web.config.
            var currentAuthType = (identity.AuthenticationType ?? "").Trim();
            if (currentAuthType.Length > 0)
            {
                if (_authTypesSplit.Any())
                {
                    return _authTypesSplit.Contains(currentAuthType);
                }

                return DefaultAuthTypes.Contains(currentAuthType);
            }

            return true;
        }]]></body>
          </codeblock>
        </method>
        <method name="SplitString">
          <declaration><![CDATA[private static string[] SplitString(string original)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="136" sc="9" el="145" ec="10">Api\DnnAuthorizeAttribute.cs</location>
            <body hash="c437af5fbeb90ea66a714cd3a9a40d9d"><![CDATA[{
            if (string.IsNullOrEmpty(original))
            {
                return EmptyArray;
            }

            var split = original.Split(new[] {','}, StringSplitOptions.RemoveEmptyEntries)
                .Select(s => s.Trim()).Where(s => !string.IsNullOrEmpty(s));
            return split.ToArray();
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_authTypes">
          <declaration><![CDATA[private string _authTypes;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_authTypesSplit">
          <declaration><![CDATA[private string[] _authTypesSplit = new string[0];]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_denyRoles">
          <declaration><![CDATA[private string _denyRoles;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_denyRolesSplit">
          <declaration><![CDATA[private string[] _denyRolesSplit = new string[0];]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_staticRoles">
          <declaration><![CDATA[private string _staticRoles;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_staticRolesSplit">
          <declaration><![CDATA[private string[] _staticRolesSplit = new string[0];]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="DefaultAuthTypes">
          <declaration><![CDATA[private static readonly List<string> DefaultAuthTypes = new List<string>();]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="EmptyArray">
          <declaration><![CDATA[private static readonly string[] EmptyArray = new string[0];]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="AuthTypes">
          <declaration><![CDATA[public string AuthTypes]]></declaration>
          <documentation>
            <summary>
 Gets or sets the allowed authentication types (separated by comma)
 </summary>
          </documentation>
          <codeblock>
            <location sl="84" sc="13" el="87" ec="14">Api\DnnAuthorizeAttribute.cs</location>
            <body hash="74a66f9a70db066b815feb71f0483ea5"><![CDATA[{
                _authTypes = value;
                _authTypesSplit = SplitString(_authTypes);
            }]]></body>
          </codeblock>
        </property>
        <property name="DenyRoles">
          <declaration><![CDATA[public string DenyRoles]]></declaration>
          <documentation>
            <summary>
 Gets or sets the denied roles (separated by comma)
 </summary>
          </documentation>
          <codeblock>
            <location sl="71" sc="13" el="74" ec="14">Api\DnnAuthorizeAttribute.cs</location>
            <body hash="caddee689c16219a47f104b97827948c"><![CDATA[{ 
                _denyRoles = value;
                _denyRolesSplit = SplitString(_denyRoles);
            }]]></body>
          </codeblock>
        </property>
        <property name="StaticRoles">
          <declaration><![CDATA[public string StaticRoles]]></declaration>
          <documentation>
            <summary>
 Gets or sets the authorized roles (separated by comma)
 </summary>
          </documentation>
          <codeblock>
            <location sl="58" sc="13" el="61" ec="14">Api\DnnAuthorizeAttribute.cs</location>
            <body hash="48c619ee7a85e7467974e4080097151a"><![CDATA[{
                _staticRoles = value;
                _staticRolesSplit = SplitString(_staticRoles);
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnExceptionFilterAttribute">
      <declaration><![CDATA[public class DnnExceptionFilterAttribute : ExceptionFilterAttribute]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnExceptionFilterAttribute()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="OnException">
          <declaration><![CDATA[public override void OnException(HttpActionExecutedContext actionExecutedContext)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="40" sc="9" el="64" ec="10">Api\DnnExceptionAttribute.cs</location>
            <body hash="8848d6af6fb6770e0c295c5a4a8cba0c"><![CDATA[{
            if (actionExecutedContext.Exception != null)
            {

                var exception = actionExecutedContext.Exception;
                var actionName = actionExecutedContext.ActionContext.ActionDescriptor.ActionName;
                var controllerName = actionExecutedContext.ActionContext.ControllerContext.ControllerDescriptor.ControllerName;

                string resourceFile = String.IsNullOrEmpty(LocalResourceFile) 
                                        ? Localization.ExceptionsResourceFile 
                                        : LocalResourceFile;

                string key = String.IsNullOrEmpty(MessageKey) ? controllerName + "_" + actionName + ".Error" : MessageKey;

                var response = new HttpResponseMessage
                                        {
                                            StatusCode = HttpStatusCode.InternalServerError,
                                            ReasonPhrase = Localization.GetString(key, resourceFile)
                                        };
                
                actionExecutedContext.Response = response;

                Exceptions.LogException(exception);
            }
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="LocalResourceFile">
          <declaration><![CDATA[public string LocalResourceFile]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="37" sc="43" el="37" ec="47">Api\DnnExceptionAttribute.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="37" sc="48" el="37" ec="52">Api\DnnExceptionAttribute.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="MessageKey">
          <declaration><![CDATA[public string MessageKey]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="35" sc="36" el="35" ec="40">Api\DnnExceptionAttribute.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="35" sc="41" el="35" ec="45">Api\DnnExceptionAttribute.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnHttpControllerSelector">
      <declaration><![CDATA[internal class DnnHttpControllerSelector : IHttpControllerSelector]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnHttpControllerSelector(HttpConfiguration configuration)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="47" sc="9" el="54" ec="10">Api\DnnHttpControllerSelector.cs</location>
            <body hash="57915088ff71a7eb43b380f9d40defb0"><![CDATA[public DnnHttpControllerSelector(HttpConfiguration configuration)
        {
            Requires.NotNull("configuration", configuration);

            _configuration = configuration;
            _descriptorCache = new Lazy<ConcurrentDictionary<string, HttpControllerDescriptor>>(InitTypeCache,
                                                                                                isThreadSafe: true);
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="GetControllerMapping">
          <declaration><![CDATA[public IDictionary<string, HttpControllerDescriptor> GetControllerMapping()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="101" sc="9" el="103" ec="10">Api\DnnHttpControllerSelector.cs</location>
            <body hash="4ed0ce3a3abf490e39eaca6c346828d6"><![CDATA[{
            return DescriptorCache;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetControllerName">
          <declaration><![CDATA[private string GetControllerName(HttpRequestMessage request)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="122" sc="9" el="133" ec="10">Api\DnnHttpControllerSelector.cs</location>
            <body hash="f5ca00df878a95315fe5d20e36c9f328"><![CDATA[{
            IHttpRouteData routeData = request.GetRouteData();
            if (routeData == null)
            {
                return null;
            }

            // Look up controller in route data
            object controllerName;
            routeData.Values.TryGetValue(ControllerKey, out controllerName);
            return controllerName as string;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetFullName">
          <declaration><![CDATA[private string GetFullName(string controllerName, string ns)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="106" sc="9" el="108" ec="10">Api\DnnHttpControllerSelector.cs</location>
            <body hash="5fddef86a06e18e753760eec2e225e33"><![CDATA[{
            return string.Format("{0}.{1}{2}", ns, controllerName, ControllerSuffix).ToLowerInvariant();
        }]]></body>
          </codeblock>
        </method>
        <method name="GetNameSpaces">
          <declaration><![CDATA[private string[] GetNameSpaces(HttpRequestMessage request)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="111" sc="9" el="119" ec="10">Api\DnnHttpControllerSelector.cs</location>
            <body hash="0807618714e3464275962e738ab066b8"><![CDATA[{
            IHttpRouteData routeData = request.GetRouteData();
            if (routeData == null)
            {
                return null;
            }

            return routeData.Route.GetNameSpaces();
        }]]></body>
          </codeblock>
        </method>
        <method name="InitTypeCache">
          <declaration><![CDATA[private ConcurrentDictionary<string, HttpControllerDescriptor> InitTypeCache()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="136" sc="9" el="154" ec="10">Api\DnnHttpControllerSelector.cs</location>
            <body hash="34d9a7af658ca1b8ecf96c526dff753b"><![CDATA[{
            IAssembliesResolver assembliesResolver = _configuration.Services.GetAssembliesResolver();
            IHttpControllerTypeResolver controllersResolver = _configuration.Services.GetHttpControllerTypeResolver();

            ICollection<Type> controllerTypes = controllersResolver.GetControllerTypes(assembliesResolver);

            var dict = new ConcurrentDictionary<string, HttpControllerDescriptor>();

            foreach (Type type in controllerTypes)
            {
                if (type.FullName != null)
                {
                    string controllerName = type.Name.Substring(0, type.Name.Length - ControllerSuffix.Length);
                    dict.TryAdd(type.FullName.ToLowerInvariant(), new HttpControllerDescriptor(_configuration, controllerName, type));
                }
            }

            return dict;
        }]]></body>
          </codeblock>
        </method>
        <method name="SelectController">
          <declaration><![CDATA[public HttpControllerDescriptor SelectController(HttpRequestMessage request)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="62" sc="9" el="98" ec="10">Api\DnnHttpControllerSelector.cs</location>
            <body hash="6e111c013ab7c5cf7e16dbaf1145d409"><![CDATA[{
            Requires.NotNull("request", request);

            string controllerName = GetControllerName(request);
            IEnumerable<string> namespaces = GetNameSpaces(request);
            if (namespaces == null || !namespaces.Any() || String.IsNullOrEmpty(controllerName))
            {
                throw new HttpResponseException(request.CreateErrorResponse(HttpStatusCode.NotFound,
                                                                            "Unable to locate a controller for " +
                                                                            request.RequestUri));
            }

            var matches = new List<HttpControllerDescriptor>();
            foreach (string ns in namespaces)
            {
                string fullName = GetFullName(controllerName, ns);

                HttpControllerDescriptor descriptor;
                if (DescriptorCache.TryGetValue(fullName, out descriptor))
                {
                    matches.Add(descriptor);
                }
            }

            if(matches.Count == 1)
            {
                return matches.First();
            }

            //only errors thrown beyond this point
            if (matches.Count == 0)
            {
                throw new HttpResponseException(request.CreateErrorResponse(HttpStatusCode.NotFound, string.Format(Localization.GetString("ControllerNotFound", Localization.ExceptionsResourceFile), request.RequestUri, string.Join(", ", namespaces))));
            }

            throw new HttpResponseException(request.CreateErrorResponse(HttpStatusCode.Conflict, string.Format(Localization.GetString("AmbiguousController", Localization.ExceptionsResourceFile), controllerName, string.Join(", ", namespaces))));
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_configuration">
          <declaration><![CDATA[private readonly HttpConfiguration _configuration;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_descriptorCache">
          <declaration><![CDATA[private readonly Lazy<ConcurrentDictionary<string, HttpControllerDescriptor>> _descriptorCache;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ControllerKey">
          <declaration><![CDATA[private const string ControllerKey = "controller";]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ControllerSuffix">
          <declaration><![CDATA[private const string ControllerSuffix = "Controller";]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="DescriptorCache">
          <declaration><![CDATA[private ConcurrentDictionary<string, HttpControllerDescriptor> DescriptorCache]]></declaration>
          <documentation>
          </documentation>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnModuleAuthorizeAttribute">
      <declaration><![CDATA[public class DnnModuleAuthorizeAttribute : AuthorizeAttributeBase, IOverrideDefaultAuthLevel]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnModuleAuthorizeAttribute()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="31" sc="9" el="34" ec="10">Api\DnnModuleAuthorizeAttribute.cs</location>
            <body hash="31494bb857e2f91b252d8589a862da09"><![CDATA[public DnnModuleAuthorizeAttribute()
        {
            AccessLevel = SecurityAccessLevel.Host;
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="FindModuleInfo">
          <declaration><![CDATA[protected virtual ModuleInfo FindModuleInfo(HttpRequestMessage request)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="52" sc="9" el="54" ec="10">Api\DnnModuleAuthorizeAttribute.cs</location>
            <body hash="d2c2476a96bc904bc0453ca4339972f3"><![CDATA[{
            return request.FindModuleInfo();
        }]]></body>
          </codeblock>
        </method>
        <method name="IsAuthorized">
          <declaration><![CDATA[public override bool IsAuthorized(AuthFilterContext context)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="40" sc="9" el="49" ec="10">Api\DnnModuleAuthorizeAttribute.cs</location>
            <body hash="caa161c1b5620fdeab603f0c96eb16f1"><![CDATA[{
            var activeModule = FindModuleInfo(context.ActionContext.Request);

            if (activeModule != null)
            {
                return ModulePermissionController.HasModuleAccess(AccessLevel, PermissionKey, activeModule);
            }

            return false;
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="AccessLevel">
          <declaration><![CDATA[public SecurityAccessLevel AccessLevel]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="37" sc="50" el="37" ec="54">Api\DnnModuleAuthorizeAttribute.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="37" sc="55" el="37" ec="59">Api\DnnModuleAuthorizeAttribute.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="PermissionKey">
          <declaration><![CDATA[public string PermissionKey]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="36" sc="39" el="36" ec="43">Api\DnnModuleAuthorizeAttribute.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="36" sc="44" el="36" ec="48">Api\DnnModuleAuthorizeAttribute.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="HttpConfigurationExtensions">
      <declaration><![CDATA[public static class HttpConfigurationExtensions]]></declaration>
      <documentation>
      </documentation>
      <constructors>
      </constructors>
      <methods>
        <method name="AddTabAndModuleInfoProvider">
          <declaration><![CDATA[public static void AddTabAndModuleInfoProvider(this HttpConfiguration configuration, ITabAndModuleInfoProvider tabAndModuleInfoProvider)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="14" sc="9" el="27" ec="10">Api\HttpConfigurationExtensions.cs</location>
            <body hash="1554afdc10f3e90f5e01cba360828be1"><![CDATA[{
            Requires.NotNull("configuration", configuration);
            Requires.NotNull("tabAndModuleInfoProvider", tabAndModuleInfoProvider);

            var providers = configuration.Properties.GetOrAdd(Key, InitValue) as ConcurrentQueue<ITabAndModuleInfoProvider>;

            if(providers == null)
            {
                providers = new ConcurrentQueue<ITabAndModuleInfoProvider>();
                configuration.Properties[Key] = providers;
            }

            providers.Enqueue(tabAndModuleInfoProvider);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetTabAndModuleInfoProviders">
          <declaration><![CDATA[public static IEnumerable<ITabAndModuleInfoProvider> GetTabAndModuleInfoProviders(this HttpConfiguration configuration)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="35" sc="9" el="47" ec="10">Api\HttpConfigurationExtensions.cs</location>
            <body hash="5fa2626a8a9b262a3e675d6e9a3a63b5"><![CDATA[{
            Requires.NotNull("configuration", configuration);

            var providers = configuration.Properties.GetOrAdd(Key, InitValue) as ConcurrentQueue<ITabAndModuleInfoProvider>;

            if (providers == null)
            {
                //shouldn't ever happen outside of unit tests
                return new ITabAndModuleInfoProvider[]{};
            }

            return providers.ToArray();
        }]]></body>
          </codeblock>
        </method>
        <method name="InitValue">
          <declaration><![CDATA[private static object InitValue(object o)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="30" sc="9" el="32" ec="10">Api\HttpConfigurationExtensions.cs</location>
            <body hash="3aa91d9bf3f6b67440e168d63528ce64"><![CDATA[{
            return new ConcurrentQueue<ITabAndModuleInfoProvider>();
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="Key">
          <declaration><![CDATA[private const string Key = "TabAndModuleInfoProvider";]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="HttpRequestMessageExtensions">
      <declaration><![CDATA[public static class HttpRequestMessageExtensions]]></declaration>
      <documentation>
      </documentation>
      <constructors>
      </constructors>
      <methods>
        <method name="FindModuleId">
          <declaration><![CDATA[public static int FindModuleId(this HttpRequestMessage request)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="53" sc="9" el="55" ec="10">Api\HttpRequestMessageExtensions.cs</location>
            <body hash="67e31b164d146e540ff33ba17f3d137d"><![CDATA[{
            return IterateTabAndModuleInfoProviders(request, TryFindModuleId, -1);
        }]]></body>
          </codeblock>
        </method>
        <method name="FindModuleInfo">
          <declaration><![CDATA[public static ModuleInfo FindModuleInfo(this HttpRequestMessage request)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="43" sc="9" el="45" ec="10">Api\HttpRequestMessageExtensions.cs</location>
            <body hash="a0ccf83071485d000328613fcaa1c7b6"><![CDATA[{
            return IterateTabAndModuleInfoProviders<ModuleInfo>(request, TryFindModuleInfo, null);
        }]]></body>
          </codeblock>
        </method>
        <method name="FindTabId">
          <declaration><![CDATA[public static int FindTabId(this HttpRequestMessage request)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="33" sc="9" el="35" ec="10">Api\HttpRequestMessageExtensions.cs</location>
            <body hash="6a913109ee577078e76c3393d2ab3f46"><![CDATA[{
            return IterateTabAndModuleInfoProviders(request, TryFindTabId, -1);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetHttpContext">
          <declaration><![CDATA[public static HttpContextBase GetHttpContext(this HttpRequestMessage request)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="81" sc="9" el="86" ec="10">Api\HttpRequestMessageExtensions.cs</location>
            <body hash="ff70f55b9d2e802d27ed2ad2c749067f"><![CDATA[{
            object context;
            request.Properties.TryGetValue("MS_HttpContext", out context);

            return context as HttpContextBase;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetIPAddress">
          <declaration><![CDATA[public static string GetIPAddress(this HttpRequestMessage request)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="89" sc="9" el="91" ec="10">Api\HttpRequestMessageExtensions.cs</location>
            <body hash="5c0bfc150c112ad41a631405141ae426"><![CDATA[{
            return GetHttpContext(request).Request.UserHostAddress;
        }]]></body>
          </codeblock>
        </method>
        <method name="IterateTabAndModuleInfoProviders">
          <declaration><![CDATA[private static T IterateTabAndModuleInfoProviders<T>(HttpRequestMessage request, HttpRequestMessageExtensions.TryMethod<T> func, T fallback)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="65" sc="9" el="78" ec="10">Api\HttpRequestMessageExtensions.cs</location>
            <body hash="3d6af5b45c7e9f78f049d687fb3c3543"><![CDATA[{
            var providers = request.GetConfiguration().GetTabAndModuleInfoProviders();

            foreach (var provider in providers)
            {
                T output;
                if (func(provider, request, out output))
                {
                    return output;
                }
            }

            return fallback;
        }]]></body>
          </codeblock>
        </method>
        <method name="TryFindModuleId">
          <declaration><![CDATA[private static bool TryFindModuleId(ITabAndModuleInfoProvider provider, HttpRequestMessage request, out int output)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="58" sc="9" el="60" ec="10">Api\HttpRequestMessageExtensions.cs</location>
            <body hash="725d56bc8d6c8296bab1337b2b13e6ea"><![CDATA[{
            return provider.TryFindModuleId(request, out output);
        }]]></body>
          </codeblock>
        </method>
        <method name="TryFindModuleInfo">
          <declaration><![CDATA[private static bool TryFindModuleInfo(ITabAndModuleInfoProvider provider, HttpRequestMessage request, out ModuleInfo output)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="48" sc="9" el="50" ec="10">Api\HttpRequestMessageExtensions.cs</location>
            <body hash="a650d43fd4ae5bdf40138ffc7148557c"><![CDATA[{
            return provider.TryFindModuleInfo(request, out output);
        }]]></body>
          </codeblock>
        </method>
        <method name="TryFindTabId">
          <declaration><![CDATA[private static bool TryFindTabId(ITabAndModuleInfoProvider provider, HttpRequestMessage request, out int output)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="38" sc="9" el="40" ec="10">Api\HttpRequestMessageExtensions.cs</location>
            <body hash="d69f8a2bba5f4b650a97bca41aa98600"><![CDATA[{
            return provider.TryFindTabId(request, out output);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="HttpStatusCodeAdditions">
      <declaration><![CDATA[public enum HttpStatusCodeAdditions]]></declaration>
      <documentation>
        <summary>
 Enumeration that contains HTTP Status Codes that are not included in the HttpStatusCode enumeration provided by the .NET framework
 </summary>
      </documentation>
      <constructors>
      </constructors>
      <methods>
      </methods>
      <fields>
        <field name="UnprocessableEntity">
          <declaration><![CDATA[public const HttpStatusCodeAdditions UnprocessableEntity = 422;]]></declaration>
          <documentation>
            <summary>
 Equivalent to HTTP Status 422. Unprocessable Entity status code means the server understands the content type of the request entity (hence a
 415 (Unsupported Media Type) status code is inappropriate), and the syntax of the request entity is correct (thus a 400 (Bad Request)
 status code is inappropriate) but was unable to process the contained instructions.
 <see>
     <cref>http://tools.ietf.org/html/rfc4918</cref>
 </see>
 </summary>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="IMapRoute">
      <declaration><![CDATA[public interface IMapRoute]]></declaration>
      <documentation>
      </documentation>
      <constructors>
      </constructors>
      <methods>
        <method name="MapHttpRoute">
          <declaration><![CDATA[IList<Route> MapHttpRoute(string moduleFolderName, string routeName, string url, object defaults, object constraints, string[] namespaces);]]></declaration>
          <documentation>
            <summary>
 Sets up the route(s) for DotNetNuke services
 </summary>
 <param name="moduleFolderName">The name of the folder under DesktopModules in which your module resides</param>
 <param name="routeName">A unique name for the route</param>
 <param name="url">The parameterized portion of the route</param>
 <param name="defaults">Default values for the route parameters</param>
 <param name="constraints">The constraints</param>
 <param name="namespaces">The namespace(s) in which to search for the controllers for this route</param>
 <returns>A list of all routes that were registered.</returns>
 <remarks>The combination of moduleFolderName and routeName must be unique for each route</remarks></documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="MapHttpRoute">
          <declaration><![CDATA[IList<Route> MapHttpRoute(string moduleFolderName, string routeName, string url, object defaults, string[] namespaces);]]></declaration>
          <documentation>
            <summary>
 Sets up the route(s) for DotNetNuke services
 </summary>
 <param name="moduleFolderName">The name of the folder under DesktopModules in which your module resides</param>
 <param name="routeName">A unique name for the route</param>
 <param name="url">The parameterized portion of the route</param>
 <param name="defaults">Default values for the route parameters</param>
 <param name="namespaces">The namespace(s) in which to search for the controllers for this route</param>
 <returns>A list of all routes that were registered.</returns>
 <remarks>The combination of moduleFolderName and routeName must be unique for each route</remarks></documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="MapHttpRoute">
          <declaration><![CDATA[IList<Route> MapHttpRoute(string moduleFolderName, string routeName, string url, string[] namespaces);]]></declaration>
          <documentation>
            <summary>
 Sets up the route(s) for DotNetNuke services
 </summary>
 <param name="moduleFolderName">The name of the folder under DesktopModules in which your module resides</param>
 <param name="routeName">A unique name for the route</param>
 <param name="url">The parameterized portion of the route</param>
 <param name="namespaces">The namespace(s) in which to search for the controllers for this route</param>
 <returns>A list of all routes that were registered.</returns>
 <remarks>The combination of moduleFolderName and routeName must be unique for each route</remarks></documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="IOverrideDefaultAuthLevel">
      <declaration><![CDATA[public interface IOverrideDefaultAuthLevel]]></declaration>
      <documentation>
        <summary>
 Implementing this interface on an Auth filter will allow the filter to override the default
 Host level auth provided by DnnController
 </summary>
      </documentation>
      <constructors>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="IPortalAliasRouteManager">
      <declaration><![CDATA[internal interface IPortalAliasRouteManager]]></declaration>
      <documentation>
      </documentation>
      <constructors>
      </constructors>
      <methods>
        <method name="ClearCachedData">
          <declaration><![CDATA[void ClearCachedData();]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="GetAllRouteValues">
          <declaration><![CDATA[HttpRouteValueDictionary GetAllRouteValues(PortalAliasInfo portalAliasInfo, object routeValues);]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="GetRouteName">
          <declaration><![CDATA[string GetRouteName(string moduleFolderName, string routeName, int count);]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="GetRouteName">
          <declaration><![CDATA[string GetRouteName(string moduleFolderName, string routeName, PortalAliasInfo portalAlias);]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="GetRoutePrefixCounts">
          <declaration><![CDATA[IEnumerable<int> GetRoutePrefixCounts();]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="GetRouteUrl">
          <declaration><![CDATA[string GetRouteUrl(string moduleFolderName, string url, int count);]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="IServiceRouteMapper">
      <declaration><![CDATA[public interface IServiceRouteMapper]]></declaration>
      <documentation>
      </documentation>
      <constructors>
      </constructors>
      <methods>
        <method name="RegisterRoutes">
          <declaration><![CDATA[void RegisterRoutes(IMapRoute mapRouteManager);]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="ITabAndModuleInfoProvider">
      <declaration><![CDATA[public interface ITabAndModuleInfoProvider]]></declaration>
      <documentation>
      </documentation>
      <constructors>
      </constructors>
      <methods>
        <method name="TryFindModuleId">
          <declaration><![CDATA[bool TryFindModuleId(HttpRequestMessage request, out int moduleId);]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="TryFindModuleInfo">
          <declaration><![CDATA[bool TryFindModuleInfo(HttpRequestMessage request, out ModuleInfo moduleInfo);]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="TryFindTabId">
          <declaration><![CDATA[bool TryFindTabId(HttpRequestMessage request, out int tabId);]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="PortalAliasRouteManager">
      <declaration><![CDATA[internal class PortalAliasRouteManager : IPortalAliasRouteManager]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public PortalAliasRouteManager()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="CalcAliasPrefixCount">
          <declaration><![CDATA[private static int CalcAliasPrefixCount(string alias)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="136" sc="9" el="138" ec="10">Api\PortalAliasRouteManager.cs</location>
            <body hash="16e9497480cf91b376338f188db3495e"><![CDATA[{
            return alias.Count(c => c == '/');
        }]]></body>
          </codeblock>
        </method>
        <method name="ClearCachedData">
          <declaration><![CDATA[public void ClearCachedData()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="95" sc="9" el="97" ec="10">Api\PortalAliasRouteManager.cs</location>
            <body hash="4763d974c59bff73391a35eb3f531026"><![CDATA[{
            _prefixCounts = null;
        }]]></body>
          </codeblock>
        </method>
        <method name="GeneratePrefixString">
          <declaration><![CDATA[private string GeneratePrefixString(int count)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="51" sc="9" el="65" ec="10">Api\PortalAliasRouteManager.cs</location>
            <body hash="50fee268ae943101ed13c1d36e294ff2"><![CDATA[{
            if (count == 0)
            {
                return "";
            }
            
            string prefix = "";

            for (int i = count - 1; i >= 0; i--)
            {
                prefix = "{prefix" + i + "}/" + prefix;
            }

            return prefix;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetAllRouteValues">
          <declaration><![CDATA[public HttpRouteValueDictionary GetAllRouteValues(PortalAliasInfo portalAliasInfo, object routeValues)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="68" sc="9" el="84" ec="10">Api\PortalAliasRouteManager.cs</location>
            <body hash="ebda421921e734c2074aadad39b453d0"><![CDATA[{
            var allRouteValues = new HttpRouteValueDictionary(routeValues);

            var segments = portalAliasInfo.HTTPAlias.Split('/');
            
            if(segments.Length > 1)
            {
                  for(int i = 1; i < segments.Length; i++)
                  {
                      var key = "prefix" + (i - 1).ToString(CultureInfo.InvariantCulture);
                      var value = segments[i];
                      allRouteValues.Add(key, value);
                  }
            }

            return allRouteValues;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetRouteName">
          <declaration><![CDATA[public string GetRouteName(string moduleFolderName, string routeName, int count)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="38" sc="9" el="43" ec="10">Api\PortalAliasRouteManager.cs</location>
            <body hash="16b5bff4c8e47b78fcb150404bc5a82e"><![CDATA[{
            Requires.NotNullOrEmpty("moduleFolderName", moduleFolderName);
            Requires.NotNegative("count", count);
            
            return moduleFolderName + "-" + routeName + "-" + count.ToString(CultureInfo.InvariantCulture);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetRouteName">
          <declaration><![CDATA[public string GetRouteName(string moduleFolderName, string routeName, PortalAliasInfo portalAlias)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="46" sc="9" el="48" ec="10">Api\PortalAliasRouteManager.cs</location>
            <body hash="be8fe984ba8c336fd726141fd2836ca4"><![CDATA[{
            return GetRouteName(moduleFolderName, routeName, CalcAliasPrefixCount(portalAlias.HTTPAlias));
        }]]></body>
          </codeblock>
        </method>
        <method name="GetRoutePrefixCounts">
          <declaration><![CDATA[public IEnumerable<int> GetRoutePrefixCounts()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="100" sc="9" el="133" ec="10">Api\PortalAliasRouteManager.cs</location>
            <body hash="bda0d5805786d378b053449b5b045f16"><![CDATA[{
            if (_prefixCounts == null)
            {
                //prefixCounts are required for each route that is mapped but they only change
                //when a new portal is added so cache them until that time

                
                var portals = PortalController.Instance.GetPortals();
               

                var segmentCounts1 = new List<int>();

                foreach (PortalInfo portal in portals)
                {
                    IEnumerable<string> aliases = PortalAliasController.Instance.GetPortalAliasesByPortalId(portal.PortalID).Select(x => x.HTTPAlias);

                    aliases = StripApplicationPath(aliases);

                    foreach (string alias in aliases)
                    {
                        var count = CalcAliasPrefixCount(alias);

                        if (!segmentCounts1.Contains(count))
                        {
                            segmentCounts1.Add(count);
                        }
                    }
                }
                IEnumerable<int> segmentCounts = segmentCounts1;
                _prefixCounts = segmentCounts.OrderByDescending(x => x).ToList();
            }

            return _prefixCounts;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetRouteUrl">
          <declaration><![CDATA[public string GetRouteUrl(string moduleFolderName, string url, int count)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="87" sc="9" el="92" ec="10">Api\PortalAliasRouteManager.cs</location>
            <body hash="668e7b1edbc1762fdd152cde7ab44d18"><![CDATA[{
            Requires.NotNegative("count", count);
            Requires.NotNullOrEmpty("moduleFolderName", moduleFolderName);

            return string.Format("{0}DesktopModules/{1}/API/{2}", GeneratePrefixString(count), moduleFolderName, url);
        }]]></body>
          </codeblock>
        </method>
        <method name="StripApplicationPath">
          <declaration><![CDATA[private IEnumerable<string> StripApplicationPath(IEnumerable<string> aliases)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="141" sc="9" el="150" ec="10">Api\PortalAliasRouteManager.cs</location>
            <body hash="b19ffe6d2f1ba871bfa414d3d206f192"><![CDATA[{
            string appPath = TestableGlobals.Instance.ApplicationPath;

            if (String.IsNullOrEmpty(appPath))
            {
                return aliases;
            }

            return StripApplicationPathIterable(aliases, appPath);
        }]]></body>
          </codeblock>
        </method>
        <method name="StripApplicationPathIterable">
          <declaration><![CDATA[private static IEnumerable<string> StripApplicationPathIterable(IEnumerable<string> aliases, string appPath)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_prefixCounts">
          <declaration><![CDATA[private List<int> _prefixCounts;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="RequireHostAttribute">
      <declaration><![CDATA[public class RequireHostAttribute : AuthorizeAttributeBase]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public RequireHostAttribute()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="IsAuthorized">
          <declaration><![CDATA[public override bool IsAuthorized(AuthFilterContext context)]]></declaration>
          <documentation>
            <summary>
 Tests if the request passes the authorization requirements
 </summary>
 <param name="context">The auth filter context</param>
 <returns>True when authorization is succesful</returns></documentation>
          <codeblock>
            <location sl="35" sc="9" el="44" ec="10">Api\RequireHostAttribute.cs</location>
            <body hash="232605a4f6dab7e912ee5108a7cab9d5"><![CDATA[{
            var principal = Thread.CurrentPrincipal;
            if (!principal.Identity.IsAuthenticated)
            {
                return false;
            }

            var currentUser = PortalController.Instance.GetCurrentPortalSettings().UserInfo;
            return currentUser.IsSuperUser;
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="RouteExtensions">
      <declaration><![CDATA[public static class RouteExtensions]]></declaration>
      <documentation>
      </documentation>
      <constructors>
      </constructors>
      <methods>
        <method name="GetName">
          <declaration><![CDATA[public static string GetName(this Route route)]]></declaration>
          <documentation>
            <summary>
 Get the name of the route
 </summary>
 <returns>Route name</returns></documentation>
          <codeblock>
            <location sl="75" sc="9" el="77" ec="10">Api\RouteExtensions.cs</location>
            <body hash="15ab7de71c6cc798a238f36b752b2392"><![CDATA[{
            return (string) route.DataTokens[NameKey];
        }]]></body>
          </codeblock>
        </method>
        <method name="GetName">
          <declaration><![CDATA[public static string GetName(this IHttpRoute route)]]></declaration>
          <documentation>
            <summary>
 Get the name of the route
 </summary>
 <returns>Route name</returns></documentation>
          <codeblock>
            <location sl="84" sc="9" el="86" ec="10">Api\RouteExtensions.cs</location>
            <body hash="1984011865195309064e9d4c7551950c"><![CDATA[{
            return (string)route.DataTokens[NameKey];
        }]]></body>
          </codeblock>
        </method>
        <method name="GetNameSpaces">
          <declaration><![CDATA[internal static string[] GetNameSpaces(this Route route)]]></declaration>
          <documentation>
            <summary>
 Get Namespaces that are searched for controllers for this route
 </summary>
 <returns>Namespaces</returns></documentation>
          <codeblock>
            <location sl="47" sc="9" el="49" ec="10">Api\RouteExtensions.cs</location>
            <body hash="ada8dd3f9c946a8db2d9fd29ea4a1be7"><![CDATA[{
            return (string[]) route.DataTokens[NamespaceKey];
        }]]></body>
          </codeblock>
        </method>
        <method name="GetNameSpaces">
          <declaration><![CDATA[internal static string[] GetNameSpaces(this IHttpRoute route)]]></declaration>
          <documentation>
            <summary>
 Get Namespaces that are searched for controllers for this route
 </summary>
 <returns>Namespaces</returns></documentation>
          <codeblock>
            <location sl="56" sc="9" el="58" ec="10">Api\RouteExtensions.cs</location>
            <body hash="98a0381b4e22de5bd82d876412fcba69"><![CDATA[{
            return (string[])route.DataTokens[NamespaceKey];
        }]]></body>
          </codeblock>
        </method>
        <method name="SetName">
          <declaration><![CDATA[internal static void SetName(this Route route, string name)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="61" sc="9" el="63" ec="10">Api\RouteExtensions.cs</location>
            <body hash="1ef30d76c5dbd07f26e0bffe34a1ca61"><![CDATA[{
            route.DataTokens[NameKey] = name;
        }]]></body>
          </codeblock>
        </method>
        <method name="SetName">
          <declaration><![CDATA[internal static void SetName(this IHttpRoute route, string name)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="66" sc="9" el="68" ec="10">Api\RouteExtensions.cs</location>
            <body hash="1ef30d76c5dbd07f26e0bffe34a1ca61"><![CDATA[{
            route.DataTokens[NameKey] = name;
        }]]></body>
          </codeblock>
        </method>
        <method name="SetNameSpaces">
          <declaration><![CDATA[internal static void SetNameSpaces(this Route route, string[] namespaces)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="33" sc="9" el="35" ec="10">Api\RouteExtensions.cs</location>
            <body hash="9d7a060b24ca32336a077953b201173f"><![CDATA[{
            route.DataTokens[NamespaceKey] = namespaces;
        }]]></body>
          </codeblock>
        </method>
        <method name="SetNameSpaces">
          <declaration><![CDATA[internal static void SetNameSpaces(this IHttpRoute route, string[] namespaces)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="38" sc="9" el="40" ec="10">Api\RouteExtensions.cs</location>
            <body hash="9d7a060b24ca32336a077953b201173f"><![CDATA[{
            route.DataTokens[NamespaceKey] = namespaces;
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="NameKey">
          <declaration><![CDATA[private const string NameKey = "name";]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="NamespaceKey">
          <declaration><![CDATA[private const string NamespaceKey = "namespaces";]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="StandardTabAndModuleInfoProvider">
      <declaration><![CDATA[public sealed class StandardTabAndModuleInfoProvider : ITabAndModuleInfoProvider]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public StandardTabAndModuleInfoProvider()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
        <constructor name=".cctor">
          <declaration><![CDATA[static StandardTabAndModuleInfoProvider()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="14" sc="9" el="14" ec="121">Api\StandardTabAndModuleInfoProvider.cs</location>
            <body hash="da3e3b402ea6e254b1ebafa384f83307"><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof(StandardTabAndModuleInfoProvider))]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="FindInt">
          <declaration><![CDATA[private static int FindInt(HttpRequestMessage requestMessage, string key)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="87" sc="9" el="103" ec="10">Api\StandardTabAndModuleInfoProvider.cs</location>
            <body hash="0a1e1e83ff2b5c426b2d3c125b6caac7"><![CDATA[{
            string value = null;
            IEnumerable<string> values;
            if (requestMessage.Headers.TryGetValues(key, out values))
            {
                value = values.FirstOrDefault();
            }

            if (string.IsNullOrEmpty(value) && requestMessage.RequestUri != null)
            {
                var queryString = HttpUtility.ParseQueryString(requestMessage.RequestUri.Query);
                value = queryString[key];
            }

            int id;
            return int.TryParse(value, out id) ? id : Null.NullInteger;
        }]]></body>
          </codeblock>
        </method>
        <method name="FindIntInHeader">
          <declaration><![CDATA[private static int FindIntInHeader(HttpRequestMessage requestMessage, string key)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="118" sc="9" el="127" ec="10">Api\StandardTabAndModuleInfoProvider.cs</location>
            <body hash="2a89348645574383ee91375c6f5cb5bd"><![CDATA[{
            IEnumerable<string> values;
            string value = null;
            if (requestMessage.Headers.TryGetValues(key, out values))
            {
                value = values.FirstOrDefault();
            }

            return GetTabModuleInfoFromMoniker(value);
        }]]></body>
          </codeblock>
        </method>
        <method name="FindIntInQueryString">
          <declaration><![CDATA[private static int FindIntInQueryString(HttpRequestMessage requestMessage, string key)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="130" sc="9" el="139" ec="10">Api\StandardTabAndModuleInfoProvider.cs</location>
            <body hash="ada154e316282443cfbda6d6aba59fae"><![CDATA[{
            string value = null;
            if (requestMessage.RequestUri != null)
            {
                var queryString = HttpUtility.ParseQueryString(requestMessage.RequestUri.Query);
                value = queryString[key];
            }

            return GetTabModuleInfoFromMoniker(value);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetTabModuleInfoFromMoniker">
          <declaration><![CDATA[private static int GetTabModuleInfoFromMoniker(string monikerValue)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="142" sc="9" el="159" ec="10">Api\StandardTabAndModuleInfoProvider.cs</location>
            <body hash="bf795ae4cc187bd3d8fde1993e86d57a"><![CDATA[{
            monikerValue = (monikerValue ?? "").Trim();
            if (monikerValue.Length > 0)
            {
                var ids = TabModulesController.Instance.GetTabModuleIdsBySetting(MonikerSettingsKey, monikerValue);
                if (ids != null && ids.Any())
                {
                    return ids.First();
                }
            }

            if (Logger.IsWarnEnabled)
            {
                Logger.WarnFormat("The specified moniker ({0}) is not defined in the system", monikerValue);
            }

            return Null.NullInteger;
        }]]></body>
          </codeblock>
        </method>
        <method name="TryFindByMoniker">
          <declaration><![CDATA[private static bool TryFindByMoniker(HttpRequestMessage requestMessage, out ModuleInfo moduleInfo)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="106" sc="9" el="115" ec="10">Api\StandardTabAndModuleInfoProvider.cs</location>
            <body hash="ae4b0913c9b4ef88f5ea0f8ff73e23eb"><![CDATA[{
            var id = FindIntInHeader(requestMessage, MonikerHeaderKey);
            if (id <= Null.NullInteger)
            {
                id = FindIntInQueryString(requestMessage, MonikerQueryKey);
            }

            moduleInfo = id > Null.NullInteger ? ModuleController.Instance.GetTabModule(id) : null;
            return moduleInfo != null;
        }]]></body>
          </codeblock>
        </method>
        <method name="TryFindModuleId">
          <declaration><![CDATA[public bool TryFindModuleId(HttpRequestMessage request, out int moduleId)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="49" sc="9" el="51" ec="10">Api\StandardTabAndModuleInfoProvider.cs</location>
            <body hash="38d4fb35fd821cfa8b97c02482c02e26"><![CDATA[{
            return TryFindModuleId(request, out moduleId, true);
        }]]></body>
          </codeblock>
        </method>
        <method name="TryFindModuleId">
          <declaration><![CDATA[private static bool TryFindModuleId(HttpRequestMessage request, out int moduleId, bool tryMoniker)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="54" sc="9" el="72" ec="10">Api\StandardTabAndModuleInfoProvider.cs</location>
            <body hash="37d94af8c6321b207e61547af5d8ecfa"><![CDATA[{
            moduleId = FindInt(request, ModuleIdKey);
            if (moduleId > Null.NullInteger)
            {
                return true;
            }

            if (tryMoniker)
            {
                ModuleInfo moduleInfo;
                if (TryFindByMoniker(request, out moduleInfo))
                {
                    moduleId = moduleInfo.ModuleID;
                    return true;
                }
            }

            return false;
        }]]></body>
          </codeblock>
        </method>
        <method name="TryFindModuleInfo">
          <declaration><![CDATA[public bool TryFindModuleInfo(HttpRequestMessage request, out ModuleInfo moduleInfo)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="75" sc="9" el="84" ec="10">Api\StandardTabAndModuleInfoProvider.cs</location>
            <body hash="200c76576a7d81b8d461ff4ca347f54b"><![CDATA[{
            int tabId, moduleId;
            if (TryFindTabId(request, out tabId, false) && TryFindModuleId(request, out moduleId, false))
            {
                moduleInfo = ModuleController.Instance.GetModule(moduleId, tabId, false);
                return moduleInfo != null;
            }

            return TryFindByMoniker(request, out moduleInfo);
        }]]></body>
          </codeblock>
        </method>
        <method name="TryFindTabId">
          <declaration><![CDATA[public bool TryFindTabId(HttpRequestMessage request, out int tabId)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="23" sc="9" el="25" ec="10">Api\StandardTabAndModuleInfoProvider.cs</location>
            <body hash="5d29869ca20039a8d29ad8a8234bf692"><![CDATA[{
            return TryFindTabId(request, out tabId, true);
        }]]></body>
          </codeblock>
        </method>
        <method name="TryFindTabId">
          <declaration><![CDATA[private static bool TryFindTabId(HttpRequestMessage request, out int tabId, bool tryMoniker)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="28" sc="9" el="46" ec="10">Api\StandardTabAndModuleInfoProvider.cs</location>
            <body hash="752dab5a9b40e116c971b930a285ccf8"><![CDATA[{
            tabId = FindInt(request, TabIdKey);
            if (tabId > Null.NullInteger)
            {
                return true;
            }

            if (tryMoniker)
            {
                ModuleInfo moduleInfo;
                if (TryFindByMoniker(request, out moduleInfo))
                {
                    tabId = moduleInfo.TabID;
                    return true;
                }
            }

            return false;
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="Logger">
          <declaration><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof(StandardTabAndModuleInfoProvider));]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ModuleIdKey">
          <declaration><![CDATA[private const string ModuleIdKey = "ModuleId";]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="MonikerHeaderKey">
          <declaration><![CDATA[private const string MonikerHeaderKey = "X-DNN-MONIKER";]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="MonikerQueryKey">
          <declaration><![CDATA[private const string MonikerQueryKey = "Moniker";]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="MonikerSettingsKey">
          <declaration><![CDATA[private const string MonikerSettingsKey = "Moniker";]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="TabIdKey">
          <declaration><![CDATA[private const string TabIdKey = "TabId";]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="StringPassThroughMediaTypeFormatter">
      <declaration><![CDATA[public class StringPassThroughMediaTypeFormatter : MediaTypeFormatter]]></declaration>
      <documentation>
        <summary>
 A MediaTypeFormatter that simply allows strings to pass through WebAPI and be associated with the specified MIME type
 </summary>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public StringPassThroughMediaTypeFormatter() : this(new string[]]]></declaration>
          <documentation>
            <summary>
 Initialize a formatter that can handle text/plain and text/html
 </summary>
          </documentation>
          <codeblock>
            <location sl="39" sc="56" el="39" ec="96">Api\StringPassThroughMediaTypeFormatter.cs</location>
            <body hash="c42842f9392ca13c89aa5e3f4f47a684"><![CDATA[this(new [] {"text/plain", "text/html"}]]></body>
          </codeblock>
        </constructor>
        <constructor name=".ctor">
          <declaration><![CDATA[public StringPassThroughMediaTypeFormatter(IEnumerable<string> mediaTypes)]]></declaration>
          <documentation>
            <summary>
 Initialize a formatter that can handle the specified media types
 </summary>
          </documentation>
          <codeblock>
            <location sl="44" sc="9" el="50" ec="10">Api\StringPassThroughMediaTypeFormatter.cs</location>
            <body hash="231d4977043857108ad3f30680a79445"><![CDATA[public StringPassThroughMediaTypeFormatter(IEnumerable<string> mediaTypes)
        {
            foreach (var type in mediaTypes)
            {
                SupportedMediaTypes.Add(new MediaTypeHeaderValue(type));
            }
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="CanReadType">
          <declaration><![CDATA[public override bool CanReadType(Type type)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="53" sc="9" el="55" ec="10">Api\StringPassThroughMediaTypeFormatter.cs</location>
            <body hash="cbb2ff78bf04b4b6b47a4c09ccefe35a"><![CDATA[{
            return type == typeof(string);
        }]]></body>
          </codeblock>
        </method>
        <method name="CanWriteType">
          <declaration><![CDATA[public override bool CanWriteType(Type type)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="58" sc="9" el="60" ec="10">Api\StringPassThroughMediaTypeFormatter.cs</location>
            <body hash="cbb2ff78bf04b4b6b47a4c09ccefe35a"><![CDATA[{
            return type == typeof(string);
        }]]></body>
          </codeblock>
        </method>
        <method name="ReadFromStreamAsync">
          <declaration><![CDATA[public override Task<object> ReadFromStreamAsync(Type type, Stream readStream, HttpContent content, IFormatterLogger formatterLogger)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="63" sc="9" el="70" ec="10">Api\StringPassThroughMediaTypeFormatter.cs</location>
            <body hash="c3447b507732ca494f4589ec1add8e6d"><![CDATA[{
            var reader = new StreamReader(readStream);
            string value = reader.ReadToEnd();

            var completionSource = new TaskCompletionSource<object>();
            completionSource.SetResult(value);
            return completionSource.Task;
        }]]></body>
          </codeblock>
        </method>
        <method name="WriteToStreamAsync">
          <declaration><![CDATA[public override Task WriteToStreamAsync(Type type, object value, Stream writeStream, HttpContent content, TransportContext transportContext)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="73" sc="9" el="81" ec="10">Api\StringPassThroughMediaTypeFormatter.cs</location>
            <body hash="74457d9148708fa9c8b122a2e831cf31"><![CDATA[{
            var writer = new StreamWriter(writeStream);
            writer.Write((string)value);
            writer.Flush();

            var completionSource = new TaskCompletionSource<object>();
            completionSource.SetResult(null);
            return completionSource.Task;
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="SupportedModulesAttribute">
      <declaration><![CDATA[public class SupportedModulesAttribute : AuthorizeAttributeBase]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public SupportedModulesAttribute(string supportedModules)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="34" sc="9" el="37" ec="10">Api\SupportedModulesAttribute.cs</location>
            <body hash="4984ff6f013a6388a5fba0d090b2a4ea"><![CDATA[public SupportedModulesAttribute(string supportedModules)
        {
            _supportedModules = supportedModules.Split(new[] { ',' });
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="FindModuleInfo">
          <declaration><![CDATA[protected virtual ModuleInfo FindModuleInfo(HttpRequestMessage request)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="57" sc="9" el="59" ec="10">Api\SupportedModulesAttribute.cs</location>
            <body hash="d2c2476a96bc904bc0453ca4339972f3"><![CDATA[{
            return request.FindModuleInfo();
        }]]></body>
          </codeblock>
        </method>
        <method name="IsAuthorized">
          <declaration><![CDATA[public override bool IsAuthorized(AuthFilterContext context)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="40" sc="9" el="49" ec="10">Api\SupportedModulesAttribute.cs</location>
            <body hash="733803e9e51ad9c0008792bd9d7ef849"><![CDATA[{
            var module = FindModuleInfo(context.ActionContext.Request);

            if (module != null)
            {
                return ModuleIsSupported(module);
            }

            return false;
        }]]></body>
          </codeblock>
        </method>
        <method name="ModuleIsSupported">
          <declaration><![CDATA[private bool ModuleIsSupported(ModuleInfo module)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="52" sc="9" el="54" ec="10">Api\SupportedModulesAttribute.cs</location>
            <body hash="390a69254e07f7a42a7e135ef246cf7e"><![CDATA[{
            return _supportedModules.Contains(module.DesktopModule.ModuleName);
        }]]></body>
          </codeblock>
        </method>
        <method name="SkipAuthorization">
          <declaration><![CDATA[protected override bool SkipAuthorization(HttpActionContext actionContext)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="62" sc="9" el="64" ec="10">Api\SupportedModulesAttribute.cs</location>
            <body hash="a2b947a21611f14a9299bee8133a69fe"><![CDATA[{
            return false;
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_supportedModules">
          <declaration><![CDATA[private readonly string[] _supportedModules;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="TraceWriter">
      <declaration><![CDATA[internal sealed class TraceWriter : ITraceWriter]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public TraceWriter(bool isTracingEnabled)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="35" sc="9" el="38" ec="10">Api\TraceWriter.cs</location>
            <body hash="c1a083fe063ac2a2eacedc475a6335ab"><![CDATA[public TraceWriter(bool isTracingEnabled)
        {
            _enabled = isTracingEnabled;
        }]]></body>
          </codeblock>
        </constructor>
        <constructor name=".cctor">
          <declaration><![CDATA[static TraceWriter()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="32" sc="6" el="32" ec="98">Api\TraceWriter.cs</location>
            <body hash="f21d0f9ad84b1b00132f0a84d9c05abb"><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof (TraceWriter))]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="Log">
          <declaration><![CDATA[private void Log(TraceRecord rec)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="53" sc="9" el="102" ec="10">Api\TraceWriter.cs</location>
            <body hash="f05d8d9c28caedf92c4dd7f2a738c303"><![CDATA[{
            var message = new StringBuilder();

            if (rec.Request != null)
            {
                if (rec.Request.Method != null)
                {
                    message.Append(" ").Append(rec.Request.Method.Method);
                }

                if (rec.Request.RequestUri != null)
                {
                    message.Append(" ").Append(rec.Request.RequestUri.AbsoluteUri);
                }
            }

            if (!string.IsNullOrEmpty(rec.Category))
            {
                message.Append(" ").Append(rec.Category);
            }

            if (!string.IsNullOrEmpty(rec.Message))
            {
                message.Append(" ").Append(rec.Message);
            }

            string output = message.ToString();

            if (!String.IsNullOrEmpty(output))
            {
                switch (rec.Level)
                {
                    case TraceLevel.Debug:
                        Logger.Debug(output);
                        break;
                    case TraceLevel.Info:
                        Logger.Info(output);
                        break;
                    case TraceLevel.Warn:
                        Logger.Warn(output);
                        break;
                    case TraceLevel.Error:
                        Logger.Error(output);
                        break;
                    case TraceLevel.Fatal:
                        Logger.Fatal(output);
                        break;
                }
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="Trace">
          <declaration><![CDATA[public void Trace(HttpRequestMessage request, string category, TraceLevel level, Action<TraceRecord> traceAction)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="41" sc="9" el="50" ec="10">Api\TraceWriter.cs</location>
            <body hash="5ee3e80ae4661ccb284380f03d4afd0b"><![CDATA[{
            if(!_enabled || level == TraceLevel.Off)
            {
                return;
            }

            var rec = new TraceRecord(request, category, level);
            traceAction(rec);
            Log(rec);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_enabled">
          <declaration><![CDATA[private readonly bool _enabled;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="Logger">
          <declaration><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof(TraceWriter));]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="UrlHelperExtensions">
      <declaration><![CDATA[public static class UrlHelperExtensions]]></declaration>
      <documentation>
      </documentation>
      <constructors>
      </constructors>
      <methods>
        <method name="DnnLink">
          <declaration><![CDATA[public static string DnnLink(this UrlHelper urlHelper, string moduleFolderName, string routeName, object routeValues)]]></declaration>
          <documentation>
            <summary>
 Generate WebAPI Links compatible with DNN Services Framework
 </summary>
 <param name="urlHelper">The UrlHelper</param>
 <param name="moduleFolderName">ModuleFolderName for the route</param>
 <param name="routeName">RouteName for the route</param>
 <param name="routeValues">Values to be passed to the route</param>
 <returns>a url</returns></documentation>
          <codeblock>
            <location sl="37" sc="9" el="39" ec="10">Api\UrlHelperExtensions.cs</location>
            <body hash="d2ad15d03602266d91e3954b8e89d17b"><![CDATA[{
            return DnnLink(urlHelper, moduleFolderName, routeName, routeValues, PortalController.Instance.GetCurrentPortalSettings().PortalAlias);
        }]]></body>
          </codeblock>
        </method>
        <method name="DnnLink">
          <declaration><![CDATA[public static string DnnLink(this UrlHelper urlHelper, string moduleFolderName, string routeName, object routeValues, PortalAliasInfo portalAliasInfo)]]></declaration>
          <documentation>
            <summary>
 Generate WebAPI Links compatible with DNN Services Framework
 </summary>
 <param name="urlHelper">The UrlHelper</param>
 <param name="moduleFolderName">ModuleFolderName for the route</param>
 <param name="routeName">RouteName for the route</param>
 <param name="routeValues">Values to be passed to the route</param>
 <param name="portalAliasInfo">The PortalAlias to use in the Url </param>
 <returns>a url</returns></documentation>
          <codeblock>
            <location sl="51" sc="9" el="57" ec="10">Api\UrlHelperExtensions.cs</location>
            <body hash="392d29f150215f311ac0870f0030aadf"><![CDATA[{
            var parm = new PortalAliasRouteManager();
            var fullName = parm.GetRouteName(moduleFolderName, routeName, PortalController.Instance.GetCurrentPortalSettings().PortalAlias);
            HttpRouteValueDictionary allRouteValues = parm.GetAllRouteValues(portalAliasInfo, routeValues);

            return urlHelper.Link(fullName, allRouteValues);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="ValidateAntiForgeryTokenAttribute">
      <declaration><![CDATA[public class ValidateAntiForgeryTokenAttribute : AuthorizeAttributeBase]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public ValidateAntiForgeryTokenAttribute()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
        <constructor name=".cctor">
          <declaration><![CDATA[static ValidateAntiForgeryTokenAttribute()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="32" sc="9" el="32" ec="85">Api\ValidateAntiForgeryTokenAttribute.cs</location>
            <body hash="7c355ccc791144c0db3ef6a10548207c"><![CDATA[private static readonly List<string> BypassedAuthTypes = new List<string>()]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="AppendToBypassAuthTypes">
          <declaration><![CDATA[internal static void AppendToBypassAuthTypes(string authType)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="35" sc="9" el="41" ec="10">Api\ValidateAntiForgeryTokenAttribute.cs</location>
            <body hash="f9b4c89a406f0b1d7a022e7ae6aa8a8f"><![CDATA[{
            var text = (authType ?? "").Trim();
            if (text.Length > 0)
            {
                BypassedAuthTypes.Add(text);
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="BypassTokenCheck">
          <declaration><![CDATA[private static bool BypassTokenCheck()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="44" sc="9" el="48" ec="10">Api\ValidateAntiForgeryTokenAttribute.cs</location>
            <body hash="c670a6bfba3ad2634ef7fea17185eed7"><![CDATA[{
            // bypass anti-forgery for those handllers that request so.
            var authType = Thread.CurrentPrincipal?.Identity?.AuthenticationType;
            return !string.IsNullOrEmpty(authType) && BypassedAuthTypes.Contains(authType);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetAntiForgeryCookieValue">
          <declaration><![CDATA[protected string GetAntiForgeryCookieValue(AuthFilterContext context)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="72" sc="9" el="86" ec="10">Api\ValidateAntiForgeryTokenAttribute.cs</location>
            <body hash="2d7fbee1745af76777a95ba339fccb61"><![CDATA[{
            foreach (var cookieValue in context.ActionContext.Request.Headers.GetValues("Cookie"))
            {
                var nameIndex = cookieValue.IndexOf(AntiForgery.Instance.CookieName, StringComparison.InvariantCultureIgnoreCase);

                if(nameIndex > -1)
                {
                    var valueIndex = nameIndex + AntiForgery.Instance.CookieName.Length + 1;
                    var valueEndIndex = cookieValue.Substring(valueIndex).IndexOf(';');
                    return valueEndIndex > -1 ? cookieValue.Substring(valueIndex, valueEndIndex) : cookieValue.Substring(valueIndex);
                }
            }
            
            return "";
        }]]></body>
          </codeblock>
        </method>
        <method name="IsAuthorized">
          <declaration><![CDATA[public override bool IsAuthorized(AuthFilterContext context)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="51" sc="9" el="69" ec="10">Api\ValidateAntiForgeryTokenAttribute.cs</location>
            <body hash="ffc0aea087b30024aca6f7f0dfa27d15"><![CDATA[{
            try
            {
                if (!BypassTokenCheck())
                {
                    var headers = context.ActionContext.Request.Headers;
                    var token = headers.GetValues("RequestVerificationToken").FirstOrDefault();
                    var cookieValue = GetAntiForgeryCookieValue(context);
                    AntiForgery.Instance.Validate(cookieValue, token);
                }
            }
            catch(Exception e)
            {
                context.AuthFailureMessage = e.Message;
                return false;
            }

            return true;
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="BypassedAuthTypes">
          <declaration><![CDATA[private static readonly List<string> BypassedAuthTypes = new List<string>();]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="AllowMultiple">
          <declaration><![CDATA[public override bool AllowMultiple]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="88" sc="47" el="88" ec="52">Api\ValidateAntiForgeryTokenAttribute.cs</location>
            <body hash="3980a4cdffafcd2015e95e03aba8ede1"><![CDATA[fals]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
  </namespace>
  <namespace name="DotNetNuke.Web.Api.Auth">
    <class name="AuthMessageHandlerBase">
      <declaration><![CDATA[public abstract class AuthMessageHandlerBase : DelegatingHandler]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[protected AuthMessageHandlerBase(bool includeByDefault, bool forceSsl)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="41" sc="9" el="45" ec="10">Api\Auth\AuthMessageHandlerBase.cs</location>
            <body hash="835fcc8b0bfb43cefcf662d5e005b2a9"><![CDATA[protected AuthMessageHandlerBase(bool includeByDefault, bool forceSsl)
        {
            DefaultInclude = includeByDefault;
            ForceSsl = forceSsl;
        }]]></body>
          </codeblock>
        </constructor>
        <constructor name=".cctor">
          <declaration><![CDATA[static AuthMessageHandlerBase()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="34" sc="9" el="34" ec="111">Api\Auth\AuthMessageHandlerBase.cs</location>
            <body hash="de61dcccfabbaa75c6e005708538994d"><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof(AuthMessageHandlerBase))]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="IsXmlHttpRequest">
          <declaration><![CDATA[protected static bool IsXmlHttpRequest(HttpRequestMessage request)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="98" sc="9" el="104" ec="10">Api\Auth\AuthMessageHandlerBase.cs</location>
            <body hash="fe3e84baacaf0df51c2e21195af0a462"><![CDATA[{
            const string requestedWithHeader = "X-REQUESTED-WITH";
            if (!request.Headers.Contains(requestedWithHeader)) return false;
            var header = request.Headers.GetValues(requestedWithHeader).FirstOrDefault();
            return !string.IsNullOrEmpty(header) &&
                   header.Equals("XmlHttpRequest", StringComparison.InvariantCultureIgnoreCase);
        }]]></body>
          </codeblock>
        </method>
        <method name="MustEnforceSslInRequest">
          <declaration><![CDATA[private bool MustEnforceSslInRequest(HttpRequestMessage request)]]></declaration>
          <documentation>
            <summary>
 Validated the <see cref="P:DotNetNuke.Web.Api.Auth.AuthMessageHandlerBase.ForceSsl" /> setting of the instane against the HTTP(S) request.
 </summary>
 <returns>True if <see cref="P:DotNetNuke.Web.Api.Auth.AuthMessageHandlerBase.ForceSsl" /> matcher the request scheme; false otherwise.</returns></documentation>
          <codeblock>
            <location sl="111" sc="9" el="113" ec="10">Api\Auth\AuthMessageHandlerBase.cs</location>
            <body hash="d4dd9fcf2fa0d35987e803f79562c82d"><![CDATA[{
            return !ForceSsl || request.RequestUri.Scheme.Equals("HTTPS", StringComparison.InvariantCultureIgnoreCase);
        }]]></body>
          </codeblock>
        </method>
        <method name="NeedsAuthentication">
          <declaration><![CDATA[protected bool NeedsAuthentication(HttpRequestMessage request)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="82" sc="9" el="95" ec="10">Api\Auth\AuthMessageHandlerBase.cs</location>
            <body hash="e3ca4e292dae05efae53a652843cfcf0"><![CDATA[{
            if (MustEnforceSslInRequest(request))
            {
                return !Thread.CurrentPrincipal.Identity.IsAuthenticated;
            }

            if (Logger.IsTraceEnabled)
            {
                Logger.Trace($"{AuthScheme}: Validating request vs. SSL mode ({ForceSsl}) failed. ");
            }

            // will let callers to return without authenticating the user
            return false;
        }]]></body>
          </codeblock>
        </method>
        <method name="OnInboundRequest">
          <declaration><![CDATA[public virtual HttpResponseMessage OnInboundRequest(HttpRequestMessage request, CancellationToken cancellationToken)]]></declaration>
          <documentation>
            <summary>
 A chance to process inbound requests
 </summary>
 <param name="request">the request message</param>
 <param name="cancellationToken">a cancellationtoken</param>
 <returns>null normally, if a response is returned all inbound processing is terminated and the resposne is returned</returns></documentation>
          <codeblock>
            <location sl="66" sc="9" el="68" ec="10">Api\Auth\AuthMessageHandlerBase.cs</location>
            <body hash="e58ece320c3127efb710b9676c9d552e"><![CDATA[{
            return null;
        }]]></body>
          </codeblock>
        </method>
        <method name="OnOutboundResponse">
          <declaration><![CDATA[public virtual HttpResponseMessage OnOutboundResponse(HttpResponseMessage response, CancellationToken cancellationToken)]]></declaration>
          <documentation>
            <summary>
 A change to process outbound responses
 </summary>
 <param name="response">The response message</param>
 <param name="cancellationToken">a cancellationtoken</param>
 <returns>the responsemessage</returns></documentation>
          <codeblock>
            <location sl="77" sc="9" el="79" ec="10">Api\Auth\AuthMessageHandlerBase.cs</location>
            <body hash="ffcc12242fd3809a47b1d4c6be220960"><![CDATA[{
            return response;
        }]]></body>
          </codeblock>
        </method>
        <method name="SendAsync">
          <declaration><![CDATA[protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="48" sc="9" el="57" ec="10">Api\Auth\AuthMessageHandlerBase.cs</location>
            <body hash="2c5a16a695efba8e736136b16c782e2f"><![CDATA[{
            var response = OnInboundRequest(request, cancellationToken);
            if(response != null)
            {
                response.RequestMessage = response.RequestMessage ?? request; //if someone returns new HttpResponseMessage(), fill in the requestMessage for other handlers in the chain
                return Task<HttpResponseMessage>.Factory.StartNew(() => response, cancellationToken);
            }

            return base.SendAsync(request, cancellationToken).ContinueWith(x => OnOutboundResponse(x.Result, cancellationToken), cancellationToken);
        }]]></body>
          </codeblock>
        </method>
        <method name="SetCurrentPrincipal">
          <declaration><![CDATA[protected static void SetCurrentPrincipal(IPrincipal principal, HttpRequestMessage request)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="116" sc="9" el="119" ec="10">Api\Auth\AuthMessageHandlerBase.cs</location>
            <body hash="fee539a92f856ca03998ba6175e4dccf"><![CDATA[{
            Thread.CurrentPrincipal = principal;
            request.GetHttpContext().User = principal;
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="Logger">
          <declaration><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof(AuthMessageHandlerBase));]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="AuthScheme">
          <declaration><![CDATA[public abstract string AuthScheme]]></declaration>
          <documentation>
          </documentation>
        </property>
        <property name="BypassAntiForgeryToken">
          <declaration><![CDATA[public virtual bool BypassAntiForgeryToken]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="37" sc="55" el="37" ec="60">Api\Auth\AuthMessageHandlerBase.cs</location>
            <body hash="3980a4cdffafcd2015e95e03aba8ede1"><![CDATA[fals]]></body>
          </codeblock>
        </property>
        <property name="DefaultInclude">
          <declaration><![CDATA[public bool DefaultInclude]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="38" sc="38" el="38" ec="42">Api\Auth\AuthMessageHandlerBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
        </property>
        <property name="ForceSsl">
          <declaration><![CDATA[public bool ForceSsl]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="39" sc="32" el="39" ec="36">Api\Auth\AuthMessageHandlerBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="BasicAuthMessageHandler">
      <declaration><![CDATA[public class BasicAuthMessageHandler : AuthMessageHandlerBase]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[private readonly Encoding _encoding = Encoding.GetEncoding("iso-8859-1");]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="40" sc="9" el="45" ec="10">Api\Auth\BasicAuthMessageHandler.cs</location>
            <body hash="04eda7366b2eccc3178a9c0fc8b0035b"><![CDATA[private readonly Encoding _encoding = Encoding.GetEncoding("iso-8859-1");

        public BasicAuthMessageHandler(bool includeByDefault, bool forceSsl)
            : base(includeByDefault, forceSsl)
        {
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="GetCredentials">
          <declaration><![CDATA[private BasicAuthMessageHandler.UserCredentials GetCredentials(HttpRequestMessage request)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="98" sc="9" el="124" ec="10">Api\Auth\BasicAuthMessageHandler.cs</location>
            <body hash="c4b10c93b87fe0a6c90291caf7d17151"><![CDATA[{
            if (request.Headers.Authorization == null)
            {
                return null;
            }

            if (request.Headers.Authorization.Scheme.ToLower() != AuthScheme.ToLower())
            {
                return null;
            }

            string authorization = request.Headers.Authorization.Parameter;
            if (String.IsNullOrEmpty(authorization))
            {
                return null;
            }

            string decoded = _encoding.GetString(Convert.FromBase64String(authorization));

            string[] parts = decoded.Split(new[] {':'}, 2);
            if (parts.Length < 2)
            {
                return null;
            }

            return new UserCredentials(parts[0], parts[1]);
        }]]></body>
          </codeblock>
        </method>
        <method name="OnInboundRequest">
          <declaration><![CDATA[public override HttpResponseMessage OnInboundRequest(HttpRequestMessage request, CancellationToken cancellationToken)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="48" sc="9" el="59" ec="10">Api\Auth\BasicAuthMessageHandler.cs</location>
            <body hash="d45725e6bcceb537ddda57c23d87a106"><![CDATA[{
            if(NeedsAuthentication(request))
            {
                var portalSettings = PortalController.Instance.GetCurrentPortalSettings();
                if (portalSettings != null)
                {
                    TryToAuthenticate(request, portalSettings.PortalId);
                }
            }

            return base.OnInboundRequest(request, cancellationToken);
        }]]></body>
          </codeblock>
        </method>
        <method name="OnOutboundResponse">
          <declaration><![CDATA[public override HttpResponseMessage OnOutboundResponse(HttpResponseMessage response, CancellationToken cancellationToken)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="62" sc="9" el="69" ec="10">Api\Auth\BasicAuthMessageHandler.cs</location>
            <body hash="0ce1253c0b0bc867e02efb82c2d64235"><![CDATA[{
            if (response.StatusCode == HttpStatusCode.Unauthorized && SupportsBasicAuth(response.RequestMessage))
            {
                response.Headers.WwwAuthenticate.Add(new AuthenticationHeaderValue(AuthScheme, "realm=\"DNNAPI\""));
            }

            return base.OnOutboundResponse(response, cancellationToken);
        }]]></body>
          </codeblock>
        </method>
        <method name="SupportsBasicAuth">
          <declaration><![CDATA[private bool SupportsBasicAuth(HttpRequestMessage request)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="72" sc="9" el="74" ec="10">Api\Auth\BasicAuthMessageHandler.cs</location>
            <body hash="f356a3887aa05e0091483bea4005d067"><![CDATA[{
            return !IsXmlHttpRequest(request);
        }]]></body>
          </codeblock>
        </method>
        <method name="TryToAuthenticate">
          <declaration><![CDATA[private void TryToAuthenticate(HttpRequestMessage request, int portalId)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="77" sc="9" el="95" ec="10">Api\Auth\BasicAuthMessageHandler.cs</location>
            <body hash="02d5db0e11a90178d3c4cff8c881103a"><![CDATA[{
            UserCredentials credentials = GetCredentials(request);

            if (credentials == null)
            {
                return;
            }

            var status = UserLoginStatus.LOGIN_FAILURE;
            string ipAddress = request.GetIPAddress();

            UserInfo user = UserController.ValidateUser(portalId, credentials.UserName, credentials.Password, "DNN", "",
                                                        "a portal", ipAddress ?? "", ref status);

            if (user != null)
            {
                SetCurrentPrincipal(new GenericPrincipal(new GenericIdentity(credentials.UserName, AuthScheme), null), request);
            }
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_encoding">
          <declaration><![CDATA[private readonly Encoding _encoding = Encoding.GetEncoding("iso-8859-1");]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="AuthScheme">
          <declaration><![CDATA[public override string AuthScheme]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="38" sc="46" el="38" ec="53">Api\Auth\BasicAuthMessageHandler.cs</location>
            <body hash="2056e90ed167286b5da6bfdfbc6ed5c9"><![CDATA["Basic]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DigestAuthMessageHandler">
      <declaration><![CDATA[public class DigestAuthMessageHandler : AuthMessageHandlerBase]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DigestAuthMessageHandler(bool includeByDefault, bool forceSsl) : base(includeByDefault, forceSsl)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="40" sc="15" el="42" ec="10">Api\Auth\DigestAuthMessageHandler.cs</location>
            <body hash="fad4e30cc56923d9f1fd3656e4ad3786"><![CDATA[base(includeByDefault, forceSsl)
        {
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="AddStaleWwwAuthenticateHeader">
          <declaration><![CDATA[private void AddStaleWwwAuthenticateHeader(HttpResponseMessage response)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="77" sc="9" el="79" ec="10">Api\Auth\DigestAuthMessageHandler.cs</location>
            <body hash="4d6be10d2f767f68accd45835fcccbb1"><![CDATA[{
            AddWwwAuthenticateHeader(response, true);
        }]]></body>
          </codeblock>
        </method>
        <method name="AddWwwAuthenticateHeader">
          <declaration><![CDATA[private void AddWwwAuthenticateHeader(HttpResponseMessage response, bool isStale = false)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="82" sc="9" el="85" ec="10">Api\Auth\DigestAuthMessageHandler.cs</location>
            <body hash="5f9d8e48428eef530db467a43979fbb9"><![CDATA[{
            var value = string.Format("realm=\"DNNAPI\", nonce=\"{0}\",  opaque=\"0000000000000000\", stale={1}, algorithm=MD5, qop=\"auth\"", CreateNewNonce(), isStale);
            response.Headers.WwwAuthenticate.Add(new AuthenticationHeaderValue(AuthScheme, value));
        }]]></body>
          </codeblock>
        </method>
        <method name="CreateNewNonce">
          <declaration><![CDATA[private static string CreateNewNonce()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="88" sc="9" el="97" ec="10">Api\Auth\DigestAuthMessageHandler.cs</location>
            <body hash="f40a738da605db9602759731293e14d8"><![CDATA[{
            DateTime nonceTime = DateTime.Now + TimeSpan.FromMinutes(1);
            string expireStr = nonceTime.ToString("G");

            byte[] expireBytes = Encoding.Default.GetBytes(expireStr);
            string nonce = Convert.ToBase64String(expireBytes);

            nonce = nonce.TrimEnd(new[] { '=' });
            return nonce;
        }]]></body>
          </codeblock>
        </method>
        <method name="OnInboundRequest">
          <declaration><![CDATA[public override HttpResponseMessage OnInboundRequest(HttpRequestMessage request, CancellationToken cancellationToken)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="45" sc="9" el="64" ec="10">Api\Auth\DigestAuthMessageHandler.cs</location>
            <body hash="0e4c680605d3e27f18a0a805a7609fd5"><![CDATA[{
            if (NeedsAuthentication(request))
            {
                var portalSettings = PortalController.Instance.GetCurrentPortalSettings();
                if (portalSettings != null)
                {
                    var isStale = TryToAuthenticate(request, portalSettings.PortalId);

                    if (isStale)
                    {
                        var staleResponse = request.CreateResponse(HttpStatusCode.Unauthorized);
                        AddStaleWwwAuthenticateHeader(staleResponse);

                        return staleResponse;
                    }
                }
            }

            return base.OnInboundRequest(request, cancellationToken);
        }]]></body>
          </codeblock>
        </method>
        <method name="OnOutboundResponse">
          <declaration><![CDATA[public override HttpResponseMessage OnOutboundResponse(HttpResponseMessage response, CancellationToken cancellationToken)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="67" sc="9" el="74" ec="10">Api\Auth\DigestAuthMessageHandler.cs</location>
            <body hash="52001bef264e8aa550a33607fcc34551"><![CDATA[{
            if (response.StatusCode == HttpStatusCode.Unauthorized && SupportsDigestAuth(response.RequestMessage))
            {
                AddWwwAuthenticateHeader(response);
            }

            return base.OnOutboundResponse(response, cancellationToken);
        }]]></body>
          </codeblock>
        </method>
        <method name="SupportsDigestAuth">
          <declaration><![CDATA[private bool SupportsDigestAuth(HttpRequestMessage request)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="123" sc="9" el="125" ec="10">Api\Auth\DigestAuthMessageHandler.cs</location>
            <body hash="cbaba453fc2e69abca69e571fda4b1af"><![CDATA[{
            return !IsXmlHttpRequest(request) && MembershipProviderConfig.PasswordRetrievalEnabled;
        }]]></body>
          </codeblock>
        </method>
        <method name="TryToAuthenticate">
          <declaration><![CDATA[private static bool TryToAuthenticate(HttpRequestMessage request, int portalId)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="100" sc="9" el="120" ec="10">Api\Auth\DigestAuthMessageHandler.cs</location>
            <body hash="5de1c493550d87be90d8ca10be4d89ed"><![CDATA[{
            if (request.Headers.Authorization == null)
            {
                return false;
            }

            string authHeader = request.Headers.Authorization.ToString();

            var digestAuthentication = new DigestAuthentication(new DigestAuthenticationRequest(authHeader, request.Method.Method), portalId, request.GetIPAddress());

            if (digestAuthentication.IsValid)
            {
                SetCurrentPrincipal(digestAuthentication.User, request);
            }
            else if(digestAuthentication.IsNonceStale)
            {
                return true;
            }

            return false;
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="AuthScheme">
          <declaration><![CDATA[public override string AuthScheme]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="37" sc="46" el="37" ec="87">Api\Auth\DigestAuthMessageHandler.cs</location>
            <body hash="8b718e0d83d7c833c398e7acf287035b"><![CDATA[DigestAuthentication.AuthenticationSchem]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
  </namespace>
  <namespace name="DotNetNuke.Web.Api.Internal">
    <class name="AntiForgery">
      <declaration><![CDATA[public class AntiForgery : ServiceLocator<IAntiForgery, AntiForgery>]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public AntiForgery()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="GetFactory">
          <declaration><![CDATA[protected override Func<IAntiForgery> GetFactory()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="9" sc="9" el="11" ec="10">Api\Internal\AntiForgery.cs</location>
            <body hash="f995120301e33212a80bdf3cffd0baa9"><![CDATA[{
            return () => new AntiForgeryImpl();
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="AntiForgeryImpl">
      <declaration><![CDATA[internal class AntiForgeryImpl : IAntiForgery]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public AntiForgeryImpl()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="Validate">
          <declaration><![CDATA[public void Validate(string cookieToken, string headerToken)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="7" sc="9" el="9" ec="10">Api\Internal\AntiForgeryImpl.cs</location>
            <body hash="5a83e6d322881db6fdea0a9b19467f29"><![CDATA[{
            System.Web.Helpers.AntiForgery.Validate(cookieToken, headerToken);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="CookieName">
          <declaration><![CDATA[public string CookieName]]></declaration>
          <documentation>
          </documentation>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnActionFilterProvider">
      <declaration><![CDATA[internal class DnnActionFilterProvider : IFilterProvider]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnActionFilterProvider()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="GetFilters">
          <declaration><![CDATA[public IEnumerable<FilterInfo> GetFilters(HttpConfiguration configuration, HttpActionDescriptor actionDescriptor)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="13" sc="9" el="30" ec="10">Api\Internal\DnnActionFilterProvider.cs</location>
            <body hash="8e5fd3f0e2a0984a04958b16c80f69f0"><![CDATA[{
            //Requires.NotNull("configuration", configuration);
            Requires.NotNull("actionDescriptor", actionDescriptor);

            var controllerFilters = actionDescriptor.ControllerDescriptor.GetFilters().Select(instance => new FilterInfo(instance, FilterScope.Controller));
            var actionFilters = actionDescriptor.GetFilters().Select(instance => new FilterInfo(instance, FilterScope.Action));

            var allFilters = controllerFilters.Concat(actionFilters).ToList();

            var overrideFilterPresent = allFilters.Any(x => x.Instance is IOverrideDefaultAuthLevel);

            if(!overrideFilterPresent)
            {
                allFilters.Add(new FilterInfo(new RequireHostAttribute(), FilterScope.Action));
            }

            return allFilters;
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnContextMessageHandler">
      <declaration><![CDATA[public class DnnContextMessageHandler : MessageProcessingHandler]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnContextMessageHandler()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="InSamePortalGroup">
          <declaration><![CDATA[private static bool InSamePortalGroup(int portalId1, int portalId2)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="75" sc="9" el="84" ec="10">Api\Internal\DnnContextMessageHandler.cs</location>
            <body hash="d9d9859d59234835b5c741c1693ba16f"><![CDATA[{
            var portal1 = PortalController.Instance.GetPortal(portalId1);
            var portal2 = PortalController.Instance.GetPortal(portalId2);

            return portal1 != null
                       && portal2 != null
                       && portal1.PortalGroupID > Null.NullInteger
                       && portal2.PortalGroupID > Null.NullInteger
                       && portal1.PortalGroupID == portal2.PortalGroupID;
        }]]></body>
          </codeblock>
        </method>
        <method name="IsHostTab">
          <declaration><![CDATA[private static bool IsHostTab(TabInfo tab)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="87" sc="9" el="89" ec="10">Api\Internal\DnnContextMessageHandler.cs</location>
            <body hash="876aaa8920ff8044e1a2c5f94473e951"><![CDATA[{
            return tab.PortalID == Null.NullInteger;
        }]]></body>
          </codeblock>
        </method>
        <method name="ProcessRequest">
          <declaration><![CDATA[protected override HttpRequestMessage ProcessRequest(HttpRequestMessage request, CancellationToken cancellationToken)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="37" sc="9" el="42" ec="10">Api\Internal\DnnContextMessageHandler.cs</location>
            <body hash="e91478fe7836984da93d3db0bb5f53bb"><![CDATA[{
            var portalSettings = SetupPortalSettings(request);
            SetThreadCulture(portalSettings);

            return request;
        }]]></body>
          </codeblock>
        </method>
        <method name="ProcessResponse">
          <declaration><![CDATA[protected override HttpResponseMessage ProcessResponse(HttpResponseMessage response, CancellationToken cancellationToken)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="116" sc="9" el="118" ec="10">Api\Internal\DnnContextMessageHandler.cs</location>
            <body hash="ffcc12242fd3809a47b1d4c6be220960"><![CDATA[{
            return response;
        }]]></body>
          </codeblock>
        </method>
        <method name="SetThreadCulture">
          <declaration><![CDATA[private static void SetThreadCulture(PortalSettings portalSettings)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="45" sc="9" el="51" ec="10">Api\Internal\DnnContextMessageHandler.cs</location>
            <body hash="c371148cd4125660f560c174e0bbd38d"><![CDATA[{
            CultureInfo pageLocale = TestableLocalization.Instance.GetPageLocale(portalSettings);
            if (pageLocale != null)
            {
                TestableLocalization.Instance.SetThreadCultures(pageLocale, portalSettings);
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="SetupPortalSettings">
          <declaration><![CDATA[private static PortalSettings SetupPortalSettings(HttpRequestMessage request)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="54" sc="9" el="65" ec="10">Api\Internal\DnnContextMessageHandler.cs</location>
            <body hash="1f181f4fdfbb96eaa682bd041e27cc9f"><![CDATA[{
            var domainName = TestableGlobals.Instance.GetDomainName(request.RequestUri);
            var alias = PortalAliasController.Instance.GetPortalAlias(domainName);

            int tabId;
            ValidateTabAndModuleContext(request, alias.PortalID, out tabId);

            var portalSettings = new PortalSettings(tabId, alias);

            request.GetHttpContext().Items["PortalSettings"] = portalSettings;
            return portalSettings;
        }]]></body>
          </codeblock>
        </method>
        <method name="TabIsInPortalOrHost">
          <declaration><![CDATA[private static bool TabIsInPortalOrHost(int tabId, int portalId)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="68" sc="9" el="72" ec="10">Api\Internal\DnnContextMessageHandler.cs</location>
            <body hash="c8e3ab22bb92b61184946809490181a7"><![CDATA[{
            var tab = TabController.Instance.GetTab(tabId, portalId);

            return tab != null && (IsHostTab(tab) || tab.PortalID == portalId || InSamePortalGroup(tab.PortalID, portalId));
        }]]></body>
          </codeblock>
        </method>
        <method name="ValidateTabAndModuleContext">
          <declaration><![CDATA[private static void ValidateTabAndModuleContext(HttpRequestMessage request, int portalId, out int tabId)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="92" sc="9" el="113" ec="10">Api\Internal\DnnContextMessageHandler.cs</location>
            <body hash="8a9b0cae61a99f2ec448f3997dc94a80"><![CDATA[{
            tabId = request.FindTabId();

            if (tabId != Null.NullInteger)
            {
                if (!TabIsInPortalOrHost(tabId, portalId))
                {
                    throw new HttpResponseException(request.CreateErrorResponse(HttpStatusCode.BadRequest, Localization.GetString("TabNotInPortal", Localization.ExceptionsResourceFile)));
                }

                int moduleId = request.FindModuleId();

                if (moduleId != Null.NullInteger)
                {
                    var module = ModuleController.Instance.GetModule(moduleId, tabId, false);
                    if (module == null)
                    {
                        throw new HttpResponseException(request.CreateErrorResponse(HttpStatusCode.BadRequest, Localization.GetString("TabModuleNotExist", Localization.ExceptionsResourceFile)));
                    }
                }
            }
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnPageEditorAttribute">
      <declaration><![CDATA[public sealed class DnnPageEditorAttribute : AuthorizeAttributeBase, IOverrideDefaultAuthLevel]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnPageEditorAttribute()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="IsAuthorized">
          <declaration><![CDATA[public override bool IsAuthorized(AuthFilterContext context)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="35" sc="9" el="40" ec="10">Api\Internal\DnnPageEditorAttribute.cs</location>
            <body hash="197758973e10e935d6f50c2ed5f6aad9"><![CDATA[{
            Requires.NotNull("context", context);

            return PagePermissionsAttributesHelper.HasTabPermission("EDIT,CONTENT,MANAGE") || IsModuleAdmin(((DnnApiController)context.ActionContext.ControllerContext.Controller).PortalSettings);
            
        }]]></body>
          </codeblock>
        </method>
        <method name="IsModuleAdmin">
          <declaration><![CDATA[private bool IsModuleAdmin(PortalSettings portalSettings)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="43" sc="9" el="58" ec="10">Api\Internal\DnnPageEditorAttribute.cs</location>
            <body hash="dae5e58b19a5426ff72ba02e4110a485"><![CDATA[{
            bool isModuleAdmin = false;
            foreach (ModuleInfo objModule in TabController.CurrentPage.Modules)
            {
                if (!objModule.IsDeleted)
                {
                    bool blnHasModuleEditPermissions = ModulePermissionController.HasModuleAccess(SecurityAccessLevel.Edit, Null.NullString, objModule);
                    if (blnHasModuleEditPermissions)
                    {
                        isModuleAdmin = true;
                        break;
                    }
                }
            }
            return portalSettings.ControlPanelSecurity == PortalSettings.ControlPanelPermission.ModuleEditor && isModuleAdmin;
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnPagePermissionAttribute">
      <declaration><![CDATA[public sealed class DnnPagePermissionAttribute : AuthorizeAttributeBase, IOverrideDefaultAuthLevel]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[private string permissionKey = "EDIT";]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="28" sc="9" el="28" ec="47">Api\Internal\DnnPagePermissionAttribute.cs</location>
            <body hash="7cc1b4044176ac4bfea5f4381e375d4d"><![CDATA[private string permissionKey = "EDIT"]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="IsAuthorized">
          <declaration><![CDATA[public override bool IsAuthorized(AuthFilterContext context)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="42" sc="9" el="46" ec="10">Api\Internal\DnnPagePermissionAttribute.cs</location>
            <body hash="ed4989a47d1de8a04192b4e5d97fb97e"><![CDATA[{
            Requires.NotNull("context", context);

            return PagePermissionsAttributesHelper.HasTabPermission(PermissionKey);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="permissionKey">
          <declaration><![CDATA[private string permissionKey = "EDIT";]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="PermissionKey">
          <declaration><![CDATA[public string PermissionKey]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="33" sc="13" el="35" ec="14">Api\Internal\DnnPagePermissionAttribute.cs</location>
            <body hash="20b4bfc1793a6724066f6d9b0de5b6e8"><![CDATA[{
                return permissionKey;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="37" sc="13" el="39" ec="14">Api\Internal\DnnPagePermissionAttribute.cs</location>
            <body hash="f82088cbe2157e805c04eace33e4d6bd"><![CDATA[{
                permissionKey = value;
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="IAntiForgery">
      <declaration><![CDATA[public interface IAntiForgery]]></declaration>
      <documentation>
      </documentation>
      <constructors>
      </constructors>
      <methods>
        <method name="Validate">
          <declaration><![CDATA[void Validate(string cookieToken, string headerToken);]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="CookieName">
          <declaration><![CDATA[string CookieName]]></declaration>
          <documentation>
          </documentation>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="IFrameSupportedValidateAntiForgeryTokenAttribute">
      <declaration><![CDATA[public class IFrameSupportedValidateAntiForgeryTokenAttribute : ValidateAntiForgeryTokenAttribute]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public IFrameSupportedValidateAntiForgeryTokenAttribute()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="IsAuthorized">
          <declaration><![CDATA[public override bool IsAuthorized(AuthFilterContext context)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="29" sc="9" el="55" ec="10">Api\Internal\IFrameSupportedValidateAntiForgeryTokenAttribute.cs</location>
            <body hash="f25fadcec25fe0432d75e13f66842b54"><![CDATA[{
            if (base.IsAuthorized(context)) return true;
            context.AuthFailureMessage = null;

            try
            {
                var queryString = context.ActionContext.Request.GetQueryNameValuePairs();
                var token = string.Empty;
                foreach(var kvp in queryString)
                {
                    if (kvp.Key == "__RequestVerificationToken"){
                        token = kvp.Value;
                        break;
                    }
                }
                string cookieValue = GetAntiForgeryCookieValue(context);

                AntiForgery.Instance.Validate(cookieValue, token );
            }
            catch (Exception e)
            {
                context.AuthFailureMessage = e.Message;
                return false;
            }

            return true;
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="AllowMultiple">
          <declaration><![CDATA[public override bool AllowMultiple]]></declaration>
          <documentation>
          </documentation>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="PagePermissionsAttributesHelper">
      <declaration><![CDATA[public class PagePermissionsAttributesHelper]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public PagePermissionsAttributesHelper()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="HasTabPermission">
          <declaration><![CDATA[public static bool HasTabPermission(string permissionKey)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="32" sc="9" el="45" ec="10">Api\Internal\PagePermissionsAttributesHelper.cs</location>
            <body hash="3638b7b61e21d86efd000399252444b2"><![CDATA[{
            var principal = Thread.CurrentPrincipal;
            if(!principal.Identity.IsAuthenticated)
            {
                return false;
            }

            var currentPortal = PortalController.Instance.GetCurrentPortalSettings();

            bool isAdminUser = currentPortal.UserInfo.IsSuperUser || PortalSecurity.IsInRole(currentPortal.AdministratorRoleName);
            if (isAdminUser) return true;

            return TabPermissionController.HasTabPermission(permissionKey);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="ServicesRoutingManager">
      <declaration><![CDATA[public sealed class ServicesRoutingManager : IMapRoute]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public ServicesRoutingManager() : this(RouteTable.Routes)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="48" sc="43" el="50" ec="10">Api\Internal\ServicesRoutingManager.cs</location>
            <body hash="48630fe9ab628f973b603e2bf7ca6f37"><![CDATA[this(RouteTable.Routes)
        {
        }]]></body>
          </codeblock>
        </constructor>
        <constructor name=".ctor">
          <declaration><![CDATA[private readonly Dictionary<string, int> _moduleUsage = new Dictionary<string, int>();]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="44" sc="9" el="57" ec="10">Api\Internal\ServicesRoutingManager.cs</location>
            <body hash="4428cbcb62558103b6eeba1db3f30b7d"><![CDATA[private readonly Dictionary<string, int> _moduleUsage = new Dictionary<string, int>();
        private readonly RouteCollection _routes;
        private readonly PortalAliasRouteManager _portalAliasRouteManager;

        public ServicesRoutingManager() : this(RouteTable.Routes)
        {
        }

        internal ServicesRoutingManager(RouteCollection routes)
        {
            _routes = routes;
            _portalAliasRouteManager = new PortalAliasRouteManager();
            TypeLocator = new TypeLocator();
        }]]></body>
          </codeblock>
        </constructor>
        <constructor name=".cctor">
          <declaration><![CDATA[static ServicesRoutingManager()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="43" sc="6" el="43" ec="109">Api\Internal\ServicesRoutingManager.cs</location>
            <body hash="37ce6ca8e2f7997440b913f4b0f13c12"><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof (ServicesRoutingManager))]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="ClearCachedRouteData">
          <declaration><![CDATA[private void ClearCachedRouteData()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="235" sc="9" el="237" ec="10">Api\Internal\ServicesRoutingManager.cs</location>
            <body hash="6648146f0b5db3e9e25d0f30c00839c4"><![CDATA[{
            _portalAliasRouteManager.ClearCachedData();
        }]]></body>
          </codeblock>
        </method>
        <method name="GetAllServiceRouteMapperTypes">
          <declaration><![CDATA[private IEnumerable<Type> GetAllServiceRouteMapperTypes()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="270" sc="9" el="272" ec="10">Api\Internal\ServicesRoutingManager.cs</location>
            <body hash="fb570b0b37ceaefb82a875560ddc4553"><![CDATA[{
            return TypeLocator.GetAllMatchingTypes(IsValidServiceRouteMapper);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetServiceRouteMappers">
          <declaration><![CDATA[private IEnumerable<IServiceRouteMapper> GetServiceRouteMappers()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="IsTracingEnabled">
          <declaration><![CDATA[private static bool IsTracingEnabled()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="203" sc="9" el="212" ec="10">Api\Internal\ServicesRoutingManager.cs</location>
            <body hash="2925d66a0c0839319769777164893f03"><![CDATA[{
            var configValue = Config.GetSetting("EnableServicesFrameworkTracing");

            if(!string.IsNullOrEmpty(configValue))
            {
                return Convert.ToBoolean(configValue);
            }

            return false;
        }]]></body>
          </codeblock>
        </method>
        <method name="IsValidServiceRouteMapper">
          <declaration><![CDATA[internal static bool IsValidServiceRouteMapper(Type t)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="275" sc="9" el="277" ec="10">Api\Internal\ServicesRoutingManager.cs</location>
            <body hash="191ada4369920c5a3334fd124da1fb77"><![CDATA[{
            return t != null && t.IsClass && !t.IsAbstract && t.IsVisible && typeof (IServiceRouteMapper).IsAssignableFrom(t);
        }]]></body>
          </codeblock>
        </method>
        <method name="LocateServicesAndMapRoutes">
          <declaration><![CDATA[private void LocateServicesAndMapRoutes()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="215" sc="9" el="232" ec="10">Api\Internal\ServicesRoutingManager.cs</location>
            <body hash="14f94a15eec76d77e64fcc0dba50c6ab"><![CDATA[{
            RegisterSystemRoutes();
            ClearCachedRouteData();

            _moduleUsage.Clear();
            foreach (IServiceRouteMapper routeMapper in GetServiceRouteMappers())
            {
                try
                {
                    routeMapper.RegisterRoutes(this);
                }
                catch (Exception e)
                {
                    Logger.ErrorFormat("{0}.RegisterRoutes threw an exception.  {1}\r\n{2}", routeMapper.GetType().FullName,
                                 e.Message, e.StackTrace);
                }
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="MapHttpRoute">
          <declaration><![CDATA[public IList<Route> MapHttpRoute(string moduleFolderName, string routeName, string url, object defaults, object constraints, string[] namespaces)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="64" sc="9" el="89" ec="10">Api\Internal\ServicesRoutingManager.cs</location>
            <body hash="b9dcf2efb541aafc2b5b1702513820be"><![CDATA[{
            if (namespaces == null || namespaces.Length == 0 || String.IsNullOrEmpty(namespaces[0]))
            {
                throw new ArgumentException(Localization.GetExceptionMessage("ArgumentCannotBeNullOrEmpty",
                                                                             "The argument '{0}' cannot be null or empty.",
                                                                             "namespaces"));
            }

            Requires.NotNullOrEmpty("moduleFolderName", moduleFolderName);

            url = url.Trim('/', '\\');

            IEnumerable<int> prefixCounts = _portalAliasRouteManager.GetRoutePrefixCounts();
            var routes = new List<Route>();

            foreach (int count in prefixCounts)
            {
                string fullRouteName = _portalAliasRouteManager.GetRouteName(moduleFolderName, routeName, count);
                string routeUrl = _portalAliasRouteManager.GetRouteUrl(moduleFolderName, url, count);
                Route route = MapHttpRouteWithNamespace(fullRouteName, routeUrl, defaults, constraints, namespaces);
                routes.Add(route);
                Logger.Trace("Mapping route: " + fullRouteName + " @ " + routeUrl);
            }

            return routes;
        }]]></body>
          </codeblock>
        </method>
        <method name="MapHttpRoute">
          <declaration><![CDATA[public IList<Route> MapHttpRoute(string moduleFolderName, string routeName, string url, object defaults, string[] namespaces)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="92" sc="9" el="94" ec="10">Api\Internal\ServicesRoutingManager.cs</location>
            <body hash="5e834dd8b2185bd589aa6738b4cad98c"><![CDATA[{
            return MapHttpRoute(moduleFolderName, routeName, url, defaults, null, namespaces);
        }]]></body>
          </codeblock>
        </method>
        <method name="MapHttpRoute">
          <declaration><![CDATA[public IList<Route> MapHttpRoute(string moduleFolderName, string routeName, string url, string[] namespaces)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="97" sc="9" el="99" ec="10">Api\Internal\ServicesRoutingManager.cs</location>
            <body hash="c4ee0e129aa85fed0e6565a27cd4b326"><![CDATA[{
            return MapHttpRoute(moduleFolderName, routeName, url, null, null, namespaces);
        }]]></body>
          </codeblock>
        </method>
        <method name="MapHttpRouteWithNamespace">
          <declaration><![CDATA[private Route MapHttpRouteWithNamespace(string name, string url, object defaults, object constraints, string[] namespaces)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="280" sc="9" el="291" ec="10">Api\Internal\ServicesRoutingManager.cs</location>
            <body hash="b9d060f476723b62508313186774b6d6"><![CDATA[{
            Route route = _routes.MapHttpRoute(name, url, defaults, constraints);
            
            if(route.DataTokens == null)
            {
                route.DataTokens = new RouteValueDictionary();
            }

            route.SetNameSpaces(namespaces);
            route.SetName(name);
            return route;
        }]]></body>
          </codeblock>
        </method>
        <method name="RegisterAuthenticationHandlers">
          <declaration><![CDATA[private static void RegisterAuthenticationHandlers()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="151" sc="9" el="200" ec="10">Api\Internal\ServicesRoutingManager.cs</location>
            <body hash="f0cfb731a64643720c1532965ff1bde3"><![CDATA[{
            //authentication message handlers from web.config file
            var authSvcCfg = AuthServicesConfiguration.GetConfig();
            if (authSvcCfg?.MessageHandlers == null || authSvcCfg.MessageHandlers.Count <= 0)
                return;

            var registeredSchemes = new List<string>();
            foreach (var handlerEntry in authSvcCfg.MessageHandlers.Cast<MessageHandlerEntry>())
            {
                if (!handlerEntry.Enabled)
                {
                    Logger.Trace("The following handler is disabled " + handlerEntry.ClassName);
                    continue;
                }

                try
                {
                    var type = Reflection.CreateType(handlerEntry.ClassName, false);
                    var handler = Activator.CreateInstance(type, handlerEntry.DefaultInclude, handlerEntry.ForceSsl) as AuthMessageHandlerBase;
                    if (handler == null)
                    {
                        throw new Exception("The handler is not a descendant of AuthMessageHandlerBase abstract class");
                    }

                    var schemeName = handler.AuthScheme.ToUpperInvariant();
                    if (registeredSchemes.Contains(schemeName))
                    {
                        Logger.Trace($"The following handler scheme '{handlerEntry.ClassName}' is already added and will be skipped");
                        continue;
                    }

                    GlobalConfiguration.Configuration.MessageHandlers.Add(handler);
                    registeredSchemes.Add(schemeName);
                    Logger.Trace($"Instantiated/Activated instance of {handler.AuthScheme}, class: {handler.GetType().FullName}");

                    if (handlerEntry.DefaultInclude)
                    {
                        DnnAuthorizeAttribute.AppendToDefaultAuthTypes(handler.AuthScheme);
                    }
                    if (handler.BypassAntiForgeryToken)
                    {
                        ValidateAntiForgeryTokenAttribute.AppendToBypassAuthTypes(handler.AuthScheme);
                    }
                }
                catch (Exception ex)
                {
                    Logger.Error("Cannot instantiate/activate instance of " + handlerEntry.ClassName + Environment.NewLine + ex);
                }
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="RegisterRoutes">
          <declaration><![CDATA[public void RegisterRoutes()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="104" sc="9" el="148" ec="10">Api\Internal\ServicesRoutingManager.cs</location>
            <body hash="c76962b0e97d18c39a3b216d903758ae"><![CDATA[{
            //register routes is ONLY called from within DNN application initialization
            //which is well protected from races
            //allowing us to not worry about multi-threading threats here
            if (!GlobalConfiguration.Configuration.MessageHandlers.Any(x => x is BasicAuthMessageHandler))
            {
                //Everything in this block is run one time at startup

                //dnnContext message handler
                //this must run before any auth message handlers
                GlobalConfiguration.Configuration.MessageHandlers.Add(new DnnContextMessageHandler());

                RegisterAuthenticationHandlers();
                //this must run after all other auth message handlers
                var handler = new WebFormsAuthMessageHandler();
                GlobalConfiguration.Configuration.MessageHandlers.Add(handler);
                DnnAuthorizeAttribute.AppendToDefaultAuthTypes(handler.AuthScheme);
                //Add Windows Authentication type to make API request works when windows authentication enabled.
                DnnAuthorizeAttribute.AppendToDefaultAuthTypes("Negotiate");

                //media type formatter for text/html, text/plain
                GlobalConfiguration.Configuration.Formatters.Add(new StringPassThroughMediaTypeFormatter());

                //controller selector that respects namespaces
                GlobalConfiguration.Configuration.Services.Replace(typeof(IHttpControllerSelector), new DnnHttpControllerSelector(GlobalConfiguration.Configuration));

                //tracwriter for dotnetnuke.instrumentation
                GlobalConfiguration.Configuration.Services.Replace(typeof(ITraceWriter), new TraceWriter(IsTracingEnabled()));

                //replace the default action filter provider with our own
                GlobalConfiguration.Configuration.Services.Add(typeof(IFilterProvider), new DnnActionFilterProvider());
                var defaultprovider = GlobalConfiguration.Configuration.Services.GetFilterProviders().Where(x => x is ActionDescriptorFilterProvider);
                GlobalConfiguration.Configuration.Services.Remove(typeof(IFilterProvider), defaultprovider);

                //add standard tab and module id provider
                GlobalConfiguration.Configuration.AddTabAndModuleInfoProvider(new StandardTabAndModuleInfoProvider());
            }

            using (_routes.GetWriteLock())
            {
                _routes.Clear();
                LocateServicesAndMapRoutes();
            }
            Logger.TraceFormat("Registered a total of {0} routes", _routes.Count);
        }]]></body>
          </codeblock>
        </method>
        <method name="RegisterSystemRoutes">
          <declaration><![CDATA[private void RegisterSystemRoutes()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="240" sc="9" el="242" ec="10">Api\Internal\ServicesRoutingManager.cs</location>
            <body hash="dba397cc7ae748eddd6d46462def9a4d"><![CDATA[{
            //_routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_moduleUsage">
          <declaration><![CDATA[private readonly Dictionary<string, int> _moduleUsage = new Dictionary<string, int>();]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_portalAliasRouteManager">
          <declaration><![CDATA[private readonly PortalAliasRouteManager _portalAliasRouteManager;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_routes">
          <declaration><![CDATA[private readonly RouteCollection _routes;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="Logger">
          <declaration><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof(ServicesRoutingManager));]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="TypeLocator">
          <declaration><![CDATA[internal ITypeLocator TypeLocator]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="59" sc="45" el="59" ec="49">Api\Internal\ServicesRoutingManager.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="59" sc="50" el="59" ec="54">Api\Internal\ServicesRoutingManager.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
  </namespace>
  <namespace name="DotNetNuke.Web.Api.Internal.Auth">
    <class name="DigestAuthentication">
      <declaration><![CDATA[internal class DigestAuthentication]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DigestAuthentication(DigestAuthenticationRequest request, int portalId, string ipAddress)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="56" sc="9" el="62" ec="10">Api\Internal\Auth\DigestAuthentication.cs</location>
            <body hash="a2d46d9812573b47258bee0bf2d1679d"><![CDATA[public DigestAuthentication(DigestAuthenticationRequest request, int portalId, string ipAddress)
        {
            _request = request;
            _portalId = portalId;
            _ipAddress = ipAddress ?? "";
            AuthenticateRequest();
        }]]></body>
          </codeblock>
        </constructor>
        <constructor name=".cctor">
          <declaration><![CDATA[static DigestAuthentication()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="33" sc="9" el="33" ec="74">Api\Internal\Auth\DigestAuthentication.cs</location>
            <body hash="847bd80ecd0638c11ac7838955151fc8"><![CDATA[private static readonly MD5 Md5 = new MD5CryptoServiceProvider()]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="AuthenticateRequest">
          <declaration><![CDATA[private void AuthenticateRequest()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="65" sc="9" el="77" ec="10">Api\Internal\Auth\DigestAuthentication.cs</location>
            <body hash="53521512e03cbb888de0fa90e384dc79"><![CDATA[{
            _password = GetPassword(Request);
            if(_password != null)
            {
                IsNonceStale = ! (IsNonceValid(_request.RequestParams["nonce"]));
                //Services.Logging.LoggingController.SimpleLog(String.Format("Request hash: {0} - Response Hash: {1}", _request.RequestParams("response"), HashedDigest))
                if ((! IsNonceStale) && _request.RequestParams["response"] == CalculateHashedDigest())
                {
                    IsValid = true;
                    User = new GenericPrincipal(new GenericIdentity(_request.RawUsername, AuthenticationScheme), null);
                }
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="CalculateHashedDigest">
          <declaration><![CDATA[public string CalculateHashedDigest()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="50" sc="9" el="52" ec="10">Api\Internal\Auth\DigestAuthentication.cs</location>
            <body hash="0f1c5080ebddcde28b1d65ab1117e9bf"><![CDATA[{
            return CreateMd5HashBinHex(GenerateUnhashedDigest());
        }]]></body>
          </codeblock>
        </method>
        <method name="CreateMd5HashBinHex">
          <declaration><![CDATA[private static string CreateMd5HashBinHex(string val)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="122" sc="9" el="132" ec="10">Api\Internal\Auth\DigestAuthentication.cs</location>
            <body hash="9946d13218c8ff3b109f2e861314278f"><![CDATA[{
            //Services.Logging.LoggingController.SimpleLog(String.Format("Creating Hash for {0}", val))
            //Services.Logging.LoggingController.SimpleLog(String.Format("Back and forth: {0}", Encoding.Default.GetString(Encoding.Default.GetBytes(val))))
            byte[] bha1 = Md5.ComputeHash(Encoding.Default.GetBytes(val));
            string ha1 = "";
            for (int i = 0; i <= 15; i++)
            {
                ha1 += String.Format("{0:x02}", bha1[i]);
            }
            return ha1;
        }]]></body>
          </codeblock>
        </method>
        <method name="GenerateUnhashedDigest">
          <declaration><![CDATA[private string GenerateUnhashedDigest()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="100" sc="9" el="119" ec="10">Api\Internal\Auth\DigestAuthentication.cs</location>
            <body hash="1a7ab7d794cb3efc34ef68c4b71fd6be"><![CDATA[{
            string a1 = String.Format("{0}:{1}:{2}", _request.RequestParams["username"].Replace("\\\\", "\\"),
                                      _request.RequestParams["realm"], _password);
            string ha1 = CreateMd5HashBinHex(a1);
            string a2 = String.Format("{0}:{1}", _request.HttpMethod, _request.RequestParams["uri"]);
            string ha2 = CreateMd5HashBinHex(a2);
            string unhashedDigest;
            if (_request.RequestParams["qop"] != null)
            {
                unhashedDigest = String.Format("{0}:{1}:{2}:{3}:{4}:{5}", ha1, _request.RequestParams["nonce"],
                                               _request.RequestParams["nc"], _request.RequestParams["cnonce"],
                                               _request.RequestParams["qop"], ha2);
            }
            else
            {
                unhashedDigest = String.Format("{0}:{1}:{2}", ha1, _request.RequestParams["nonce"], ha2);
            }
            //Services.Logging.LoggingController.SimpleLog(A1, HA1, A2, HA2, unhashedDigest)
            return unhashedDigest;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetPassword">
          <declaration><![CDATA[private string GetPassword(DigestAuthenticationRequest request)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="80" sc="9" el="97" ec="10">Api\Internal\Auth\DigestAuthentication.cs</location>
            <body hash="33fc899d17d2ee5af2cd3aed1b9d1bcc"><![CDATA[{
            UserInfo user = UserController.GetUserByName(_portalId, request.CleanUsername);
            if (user == null)
            {
                user = UserController.GetUserByName(_portalId, request.RawUsername);
            }
            if (user == null)
            {
                return null;
            }
            var password = UserController.GetPassword(ref user, "");
            
            //Try to validate user
            var loginStatus = UserLoginStatus.LOGIN_FAILURE;
            user = UserController.ValidateUser(_portalId, user.Username, password, "DNN", "", _ipAddress, ref loginStatus);

            return user != null ? password : null;
        }]]></body>
          </codeblock>
        </method>
        <method name="IsNonceValid">
          <declaration><![CDATA[private static bool IsNonceValid(string nonce)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="136" sc="9" el="158" ec="10">Api\Internal\Auth\DigestAuthentication.cs</location>
            <body hash="86dcc76ba704ef4f2f8f789f864c7703"><![CDATA[{
            DateTime expireTime;

            int numPadChars = nonce.Length%4;
            if (numPadChars > 0)
            {
                numPadChars = 4 - numPadChars;
            }
            string newNonce = nonce.PadRight(nonce.Length + numPadChars, '=');

            try
            {
                byte[] decodedBytes = Convert.FromBase64String(newNonce);
                string expireStr = Encoding.Default.GetString(decodedBytes);
                expireTime = DateTime.Parse(expireStr);
            }
            catch (FormatException)
            {
                return false;
            }

            return (DateTime.Now <= expireTime);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_ipAddress">
          <declaration><![CDATA[private readonly string _ipAddress;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_password">
          <declaration><![CDATA[private string _password;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_portalId">
          <declaration><![CDATA[private readonly int _portalId;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_request">
          <declaration><![CDATA[private DigestAuthenticationRequest _request;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="AuthenticationScheme">
          <declaration><![CDATA[internal const string AuthenticationScheme = "Digest";]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="Md5">
          <declaration><![CDATA[private static readonly MD5 Md5 = new MD5CryptoServiceProvider();]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="IsNonceStale">
          <declaration><![CDATA[public bool IsNonceStale]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="47" sc="36" el="47" ec="40">Api\Internal\Auth\DigestAuthentication.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="47" sc="41" el="47" ec="53">Api\Internal\Auth\DigestAuthentication.cs</location>
            <body hash="5dbe2cc086ebbf5db6b03610487cca4c"><![CDATA[private set]]></body>
          </codeblock>
        </property>
        <property name="IsValid">
          <declaration><![CDATA[public bool IsValid]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="45" sc="31" el="45" ec="35">Api\Internal\Auth\DigestAuthentication.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="45" sc="36" el="45" ec="48">Api\Internal\Auth\DigestAuthentication.cs</location>
            <body hash="5dbe2cc086ebbf5db6b03610487cca4c"><![CDATA[private set]]></body>
          </codeblock>
        </property>
        <property name="Request">
          <declaration><![CDATA[public DigestAuthenticationRequest Request]]></declaration>
          <documentation>
          </documentation>
        </property>
        <property name="User">
          <declaration><![CDATA[public IPrincipal User]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="54" sc="34" el="54" ec="38">Api\Internal\Auth\DigestAuthentication.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="54" sc="39" el="54" ec="51">Api\Internal\Auth\DigestAuthentication.cs</location>
            <body hash="5dbe2cc086ebbf5db6b03610487cca4c"><![CDATA[private set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DigestAuthenticationRequest">
      <declaration><![CDATA[internal class DigestAuthenticationRequest]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DigestAuthenticationRequest(string authorizationHeader, string httpMethod)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="32" sc="9" el="65" ec="10">Api\Internal\Auth\DigestAuthenticationRequest.cs</location>
            <body hash="442c0b786e349e23cd11407e085bf1e3"><![CDATA[public DigestAuthenticationRequest(string authorizationHeader, string httpMethod)
        {
            //Authorization: Digest
            //username="Mufasa",
            //realm="testrealm@host.com",
            //nonce="dcd98b7102dd2f0e8b11d0f600bfb0c093",
            //uri="/dir/index.html",
            //qop=auth,
            //nc=00000001,
            //cnonce="0a4f113b",
            //response="6629fae49393a05397450978507c4ef1",
            //opaque="5ccc069c403ebaf9f0171e9517f40e41"
            try
            {
                RequestParams = new NameValueCollection();
                foreach (Match m in AuthHeaderRegex.Matches(authorizationHeader))
                {
                    RequestParams.Add(m.Groups["name"].Value, m.Groups["value"].Value);
                }
                HttpMethod = httpMethod;
                RawUsername = RequestParams["username"].Replace("\\\\", "\\");
                CleanUsername = RawUsername;
                if (CleanUsername.LastIndexOf("\\", System.StringComparison.Ordinal) > 0)
                {
                    CleanUsername = CleanUsername.Substring(CleanUsername.LastIndexOf("\\", System.StringComparison.Ordinal) + 2 - 1);
                }
            }
            catch (Exception)
            {
                
                //suppress any issue e.g. another 401 from a different auth method
            }
            
        }]]></body>
          </codeblock>
        </constructor>
        <constructor name=".cctor">
          <declaration><![CDATA[static DigestAuthenticationRequest()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="30" sc="9" el="30" ec="150">Api\Internal\Auth\DigestAuthenticationRequest.cs</location>
            <body hash="b6061d4357970d2a5d91127c72dfda6c"><![CDATA[private static readonly Regex AuthHeaderRegex = new Regex("\\s?(?'name'\\w+)=(\"(?'value'[^\"]+)\"|(?'value'[^,]+))", RegexOptions.Compiled)]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
        <field name="AuthHeaderRegex">
          <declaration><![CDATA[private static readonly Regex AuthHeaderRegex = new Regex("\\s?(?'name'\\w+)=(\"(?'value'[^\"]+)\"|(?'value'[^,]+))", RegexOptions.Compiled);]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="CleanUsername">
          <declaration><![CDATA[public string CleanUsername]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="69" sc="39" el="69" ec="43">Api\Internal\Auth\DigestAuthenticationRequest.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="69" sc="44" el="69" ec="56">Api\Internal\Auth\DigestAuthenticationRequest.cs</location>
            <body hash="5dbe2cc086ebbf5db6b03610487cca4c"><![CDATA[private set]]></body>
          </codeblock>
        </property>
        <property name="HttpMethod">
          <declaration><![CDATA[public string HttpMethod]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="73" sc="36" el="73" ec="40">Api\Internal\Auth\DigestAuthenticationRequest.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="73" sc="41" el="73" ec="45">Api\Internal\Auth\DigestAuthenticationRequest.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="RawUsername">
          <declaration><![CDATA[public string RawUsername]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="71" sc="37" el="71" ec="41">Api\Internal\Auth\DigestAuthenticationRequest.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="71" sc="42" el="71" ec="54">Api\Internal\Auth\DigestAuthenticationRequest.cs</location>
            <body hash="5dbe2cc086ebbf5db6b03610487cca4c"><![CDATA[private set]]></body>
          </codeblock>
        </property>
        <property name="RequestParams">
          <declaration><![CDATA[public NameValueCollection RequestParams]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="67" sc="52" el="67" ec="56">Api\Internal\Auth\DigestAuthenticationRequest.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="67" sc="57" el="67" ec="61">Api\Internal\Auth\DigestAuthenticationRequest.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="WebFormsAuthMessageHandler">
      <declaration><![CDATA[public class WebFormsAuthMessageHandler : MessageProcessingHandler]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public WebFormsAuthMessageHandler()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="ProcessRequest">
          <declaration><![CDATA[protected override HttpRequestMessage ProcessRequest(HttpRequestMessage request, CancellationToken cancellationToken)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="33" sc="9" el="37" ec="10">Api\Internal\Auth\WebFormsAuthMessageHandler.cs</location>
            <body hash="594bc6fa70844d565632e31cdb49ad51"><![CDATA[{
            MembershipModule.AuthenticateRequest(request.GetHttpContext(), allowUnknownExtensions: true);

            return request;
        }]]></body>
          </codeblock>
        </method>
        <method name="ProcessResponse">
          <declaration><![CDATA[protected override HttpResponseMessage ProcessResponse(HttpResponseMessage response, CancellationToken cancellationToken)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="40" sc="9" el="42" ec="10">Api\Internal\Auth\WebFormsAuthMessageHandler.cs</location>
            <body hash="ffcc12242fd3809a47b1d4c6be220960"><![CDATA[{
            return response;
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="AuthScheme">
          <declaration><![CDATA[public string AuthScheme]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="30" sc="37" el="30" ec="44">Api\Internal\Auth\WebFormsAuthMessageHandler.cs</location>
            <body hash="29a84f68372ba548a19d29e78bb2793a"><![CDATA["Forms]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
  </namespace>
  <namespace name="DotNetNuke.Web.Common">
    <class name="DynamicSharedConstants">
      <declaration><![CDATA[public class DynamicSharedConstants]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DynamicSharedConstants()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="HostRootFolder">
          <declaration><![CDATA[public static string HostRootFolder]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="38" sc="13" el="40" ec="14">Common\DynamicSharedConstants.cs</location>
            <body hash="9bc91eeaa359797dcd700940e0941071"><![CDATA[{
                return Localization.GetString("HostRootFolder.Name", Localization.SharedResourceFile);
            }]]></body>
          </codeblock>
        </property>
        <property name="RootFolder">
          <declaration><![CDATA[public static string RootFolder]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="30" sc="13" el="32" ec="14">Common\DynamicSharedConstants.cs</location>
            <body hash="56877b6f0cd165e1f1bb62b0327611ca"><![CDATA[{
                return Localization.GetString("RootFolder.Name", Localization.SharedResourceFile);
            }]]></body>
          </codeblock>
        </property>
        <property name="Unspecified">
          <declaration><![CDATA[public static string Unspecified]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="46" sc="13" el="48" ec="14">Common\DynamicSharedConstants.cs</location>
            <body hash="0b79292d03be65767370795cbad16fc8"><![CDATA[{
                return "<" + Localization.GetString("None_Specified", Localization.SharedResourceFile) + ">";
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="SharedConstants">
      <declaration><![CDATA[public static class SharedConstants]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".cctor">
          <declaration><![CDATA[static SharedConstants()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="27" sc="9" el="36" ec="10">Common\SharedConstants.cs</location>
            <body hash="7c115162f6ba594b6b2e038163eb0fc2"><![CDATA[public static readonly string RootFolder = null;
        public static readonly string HostRootFolder = null;
        public static readonly string Unspecified = null;

        static SharedConstants()
        {
            RootFolder = Localization.GetString("RootFolder.Name", Localization.SharedResourceFile);
            HostRootFolder = Localization.GetString("HostRootFolder.Name", Localization.SharedResourceFile);
            Unspecified = "<" + Localization.GetString("None_Specified", Localization.SharedResourceFile) + ">";
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
        <field name="HostRootFolder">
          <declaration><![CDATA[public static readonly string HostRootFolder;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="RootFolder">
          <declaration><![CDATA[public static readonly string RootFolder;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="Unspecified">
          <declaration><![CDATA[public static readonly string Unspecified;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
  </namespace>
  <namespace name="DotNetNuke.Web.Common.Internal">
    <class name="DotNetNukeHttpApplication">
      <declaration><![CDATA[public class DotNetNukeHttpApplication : HttpApplication]]></declaration>
      <documentation>
        <summary>
 DotNetNuke Http Application. It will handle Start, End, BeginRequest, Error event for whole application.
 </summary>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DotNetNukeHttpApplication()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
        <constructor name=".cctor">
          <declaration><![CDATA[static DotNetNukeHttpApplication()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="62" sc="6" el="166" ec="15">Common\DotNetNukeHttpApplication.cs</location>
            <body hash="e25fbc45eeb34aced9b7c2ef54ebe40b"><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof (DotNetNukeHttpApplication));

        void Application_Error(object sender, EventArgs eventArgs)
        {
            // Code that runs when an unhandled error occurs
            if (HttpContext.Current != null)
            {
                // Get the exception object.
                Logger.Trace("Dumping all Application Errors");
                foreach (Exception exc in HttpContext.Current.AllErrors) Logger.Fatal(exc);
                Logger.Trace("End Dumping all Application Errors");
            }
        }

        private void Application_Start(object sender, EventArgs eventArgs)
        {
            Logger.InfoFormat("Application Starting ({0})", Globals.ElapsedSinceAppStart); // just to start the timer

            var name = Config.GetSetting("ServerName");
            Globals.ServerName = String.IsNullOrEmpty(name) ? Dns.GetHostName() : name;

            ComponentFactory.Container = new SimpleContainer();

            ComponentFactory.InstallComponents(new ProviderInstaller("data", typeof(DataProvider), typeof(SqlDataProvider)));
            ComponentFactory.InstallComponents(new ProviderInstaller("caching", typeof(CachingProvider), typeof(FBCachingProvider)));
            ComponentFactory.InstallComponents(new ProviderInstaller("logging", typeof(LoggingProvider), typeof(DBLoggingProvider)));
            ComponentFactory.InstallComponents(new ProviderInstaller("scheduling", typeof(SchedulingProvider), typeof(DNNScheduler)));
            ComponentFactory.InstallComponents(new ProviderInstaller("searchIndex", typeof(IndexingProvider), typeof(ModuleIndexer)));
            #pragma warning disable 0618
            ComponentFactory.InstallComponents(new ProviderInstaller("searchDataStore", typeof(SearchDataStoreProvider), typeof(SearchDataStore)));
            #pragma warning restore 0618
            ComponentFactory.InstallComponents(new ProviderInstaller("members", typeof(MembershipProvider), typeof(AspNetMembershipProvider)));
            ComponentFactory.InstallComponents(new ProviderInstaller("roles", typeof(RoleProvider), typeof(DNNRoleProvider)));
            ComponentFactory.InstallComponents(new ProviderInstaller("profiles", typeof(ProfileProvider), typeof(DNNProfileProvider)));
            ComponentFactory.InstallComponents(new ProviderInstaller("permissions", typeof(PermissionProvider), typeof(CorePermissionProvider)));
            ComponentFactory.InstallComponents(new ProviderInstaller("outputCaching", typeof(OutputCachingProvider)));
            ComponentFactory.InstallComponents(new ProviderInstaller("moduleCaching", typeof(ModuleCachingProvider)));
            ComponentFactory.InstallComponents(new ProviderInstaller("sitemap", typeof(SitemapProvider), typeof(CoreSitemapProvider)));

            ComponentFactory.InstallComponents(new ProviderInstaller("friendlyUrl", typeof(FriendlyUrlProvider)));
            ComponentFactory.InstallComponents(new ProviderInstaller("folder", typeof(FolderProvider)));
            RegisterIfNotAlreadyRegistered<FolderProvider, StandardFolderProvider>("StandardFolderProvider");
            RegisterIfNotAlreadyRegistered<FolderProvider, SecureFolderProvider>("SecureFolderProvider");
            RegisterIfNotAlreadyRegistered<FolderProvider, DatabaseFolderProvider>("DatabaseFolderProvider");
            RegisterIfNotAlreadyRegistered<PermissionProvider>();
            ComponentFactory.InstallComponents(new ProviderInstaller("htmlEditor", typeof(HtmlEditorProvider), ComponentLifeStyleType.Transient));
            ComponentFactory.InstallComponents(new ProviderInstaller("navigationControl", typeof(NavigationProvider), ComponentLifeStyleType.Transient));
            ComponentFactory.InstallComponents(new ProviderInstaller("clientcapability", typeof(ClientCapabilityProvider)));
            ComponentFactory.InstallComponents(new ProviderInstaller("cryptography", typeof(CryptographyProvider),typeof(CoreCryptographyProvider)));

            Logger.InfoFormat("Application Started ({0})", Globals.ElapsedSinceAppStart); // just to start the timer
        }
        
        private static void RegisterIfNotAlreadyRegistered<TConcrete>() where TConcrete : class, new()
        {
            RegisterIfNotAlreadyRegistered<TConcrete, TConcrete>("");
        }

        private static void RegisterIfNotAlreadyRegistered<TAbstract, TConcrete>(string name)
            where TAbstract : class
            where TConcrete : class, new()
        {
            var provider = ComponentFactory.GetComponent<TAbstract>();
            if (provider == null)
            {
                if (String.IsNullOrEmpty(name))
                {
                    ComponentFactory.RegisterComponentInstance<TAbstract>(new TConcrete());
                }
                else
                {
                    ComponentFactory.RegisterComponentInstance<TAbstract>(name, new TConcrete());
                }
            }
        }

        private void Application_End(object sender, EventArgs eventArgs)
        {
            Logger.Info("Application Ending");
            Initialize.LogEnd();
            Initialize.StopScheduler();

            //Shutdown Lucene, but not when we are installing
            if (Globals.Status != Globals.UpgradeStatus.Install)
            {
                Logger.Trace("Disposing Lucene");
                var lucene = LuceneController.Instance as IDisposable;
                if (lucene != null) lucene.Dispose();
            }
            Logger.Trace("Dumping all Application Errors");
            if (HttpContext.Current != null)
            {
                if (HttpContext.Current.AllErrors != null)
                {
                    foreach (Exception exc in HttpContext.Current.AllErrors) Logger.Fatal(exc);
                }
            }
            Logger.Trace("End Dumping all Application Errors");
            Logger.Info("Application Ended");
        }

        private static readonly string[] Endings =
            {
                ".css", ".gif", ".jpeg", ".jpg", ".js", ".png", "scriptresource.axd", "webresource.axd"
            };]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="Application_BeginRequest">
          <declaration><![CDATA[private void Application_BeginRequest(object sender, EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="169" sc="9" el="184" ec="10">Common\DotNetNukeHttpApplication.cs</location>
            <body hash="916a62777d64a5c1df1afe6bfdfdf97c"><![CDATA[{
            var app = (HttpApplication)sender;
            var requestUrl = app.Request.Url.LocalPath.ToLower();
            if (!requestUrl.EndsWith(".aspx") && !requestUrl.EndsWith("/") &&  Endings.Any(requestUrl.EndsWith))
            {
                return;
            }

            if (IsInstallInProgress(app))
            {
                return;
            }

            Initialize.Init(app);
            Initialize.RunSchedule(app.Request);
        }]]></body>
          </codeblock>
        </method>
        <method name="Application_End">
          <declaration><![CDATA[private void Application_End(object sender, EventArgs eventArgs)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="139" sc="9" el="161" ec="10">Common\DotNetNukeHttpApplication.cs</location>
            <body hash="2299af440fb295f90af943bcc841653e"><![CDATA[{
            Logger.Info("Application Ending");
            Initialize.LogEnd();
            Initialize.StopScheduler();

            //Shutdown Lucene, but not when we are installing
            if (Globals.Status != Globals.UpgradeStatus.Install)
            {
                Logger.Trace("Disposing Lucene");
                var lucene = LuceneController.Instance as IDisposable;
                if (lucene != null) lucene.Dispose();
            }
            Logger.Trace("Dumping all Application Errors");
            if (HttpContext.Current != null)
            {
                if (HttpContext.Current.AllErrors != null)
                {
                    foreach (Exception exc in HttpContext.Current.AllErrors) Logger.Fatal(exc);
                }
            }
            Logger.Trace("End Dumping all Application Errors");
            Logger.Info("Application Ended");
        }]]></body>
          </codeblock>
        </method>
        <method name="Application_Error">
          <declaration><![CDATA[private void Application_Error(object sender, EventArgs eventArgs)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="65" sc="9" el="74" ec="10">Common\DotNetNukeHttpApplication.cs</location>
            <body hash="78f5a11bee5082f6ab3e243ce1b5fbb1"><![CDATA[{
            // Code that runs when an unhandled error occurs
            if (HttpContext.Current != null)
            {
                // Get the exception object.
                Logger.Trace("Dumping all Application Errors");
                foreach (Exception exc in HttpContext.Current.AllErrors) Logger.Fatal(exc);
                Logger.Trace("End Dumping all Application Errors");
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="Application_PreSendRequestHeaders">
          <declaration><![CDATA[private void Application_PreSendRequestHeaders(object sender, EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="187" sc="3" el="193" ec="4">Common\DotNetNukeHttpApplication.cs</location>
            <body hash="5788b8a9280f0a936918662c235342b9"><![CDATA[{
			if (HttpContext.Current != null && HttpContext.Current.Handler is PageBase)
			{
				var page = HttpContext.Current.Handler as PageBase;
				page.HeaderIsWritten = true;
			}
		}]]></body>
          </codeblock>
        </method>
        <method name="Application_Start">
          <declaration><![CDATA[private void Application_Start(object sender, EventArgs eventArgs)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="77" sc="9" el="113" ec="10">Common\DotNetNukeHttpApplication.cs</location>
            <body hash="6c3fc21bcdeade5a00bd83e2127473fd"><![CDATA[{
            Logger.InfoFormat("Application Starting ({0})", Globals.ElapsedSinceAppStart); // just to start the timer

            var name = Config.GetSetting("ServerName");
            Globals.ServerName = String.IsNullOrEmpty(name) ? Dns.GetHostName() : name;

            ComponentFactory.Container = new SimpleContainer();

            ComponentFactory.InstallComponents(new ProviderInstaller("data", typeof(DataProvider), typeof(SqlDataProvider)));
            ComponentFactory.InstallComponents(new ProviderInstaller("caching", typeof(CachingProvider), typeof(FBCachingProvider)));
            ComponentFactory.InstallComponents(new ProviderInstaller("logging", typeof(LoggingProvider), typeof(DBLoggingProvider)));
            ComponentFactory.InstallComponents(new ProviderInstaller("scheduling", typeof(SchedulingProvider), typeof(DNNScheduler)));
            ComponentFactory.InstallComponents(new ProviderInstaller("searchIndex", typeof(IndexingProvider), typeof(ModuleIndexer)));
            #pragma warning disable 0618
            ComponentFactory.InstallComponents(new ProviderInstaller("searchDataStore", typeof(SearchDataStoreProvider), typeof(SearchDataStore)));
            #pragma warning restore 0618
            ComponentFactory.InstallComponents(new ProviderInstaller("members", typeof(MembershipProvider), typeof(AspNetMembershipProvider)));
            ComponentFactory.InstallComponents(new ProviderInstaller("roles", typeof(RoleProvider), typeof(DNNRoleProvider)));
            ComponentFactory.InstallComponents(new ProviderInstaller("profiles", typeof(ProfileProvider), typeof(DNNProfileProvider)));
            ComponentFactory.InstallComponents(new ProviderInstaller("permissions", typeof(PermissionProvider), typeof(CorePermissionProvider)));
            ComponentFactory.InstallComponents(new ProviderInstaller("outputCaching", typeof(OutputCachingProvider)));
            ComponentFactory.InstallComponents(new ProviderInstaller("moduleCaching", typeof(ModuleCachingProvider)));
            ComponentFactory.InstallComponents(new ProviderInstaller("sitemap", typeof(SitemapProvider), typeof(CoreSitemapProvider)));

            ComponentFactory.InstallComponents(new ProviderInstaller("friendlyUrl", typeof(FriendlyUrlProvider)));
            ComponentFactory.InstallComponents(new ProviderInstaller("folder", typeof(FolderProvider)));
            RegisterIfNotAlreadyRegistered<FolderProvider, StandardFolderProvider>("StandardFolderProvider");
            RegisterIfNotAlreadyRegistered<FolderProvider, SecureFolderProvider>("SecureFolderProvider");
            RegisterIfNotAlreadyRegistered<FolderProvider, DatabaseFolderProvider>("DatabaseFolderProvider");
            RegisterIfNotAlreadyRegistered<PermissionProvider>();
            ComponentFactory.InstallComponents(new ProviderInstaller("htmlEditor", typeof(HtmlEditorProvider), ComponentLifeStyleType.Transient));
            ComponentFactory.InstallComponents(new ProviderInstaller("navigationControl", typeof(NavigationProvider), ComponentLifeStyleType.Transient));
            ComponentFactory.InstallComponents(new ProviderInstaller("clientcapability", typeof(ClientCapabilityProvider)));
            ComponentFactory.InstallComponents(new ProviderInstaller("cryptography", typeof(CryptographyProvider),typeof(CoreCryptographyProvider)));

            Logger.InfoFormat("Application Started ({0})", Globals.ElapsedSinceAppStart); // just to start the timer
        }]]></body>
          </codeblock>
        </method>
        <method name="IsInstallInProgress">
          <declaration><![CDATA[private bool IsInstallInProgress(HttpApplication app)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="196" sc="9" el="198" ec="10">Common\DotNetNukeHttpApplication.cs</location>
            <body hash="c0108dc99d96d1f92062f1ec22354bc3"><![CDATA[{
            return InstallBlocker.Instance.IsInstallInProgress();
        }]]></body>
          </codeblock>
        </method>
        <method name="RegisterIfNotAlreadyRegistered">
          <declaration><![CDATA[private static void RegisterIfNotAlreadyRegistered<TConcrete>() where TConcrete : class, new()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="116" sc="9" el="118" ec="10">Common\DotNetNukeHttpApplication.cs</location>
            <body hash="7d92a4bcffdc71038281ace12948beb6"><![CDATA[{
            RegisterIfNotAlreadyRegistered<TConcrete, TConcrete>("");
        }]]></body>
          </codeblock>
        </method>
        <method name="RegisterIfNotAlreadyRegistered">
          <declaration><![CDATA[private static void RegisterIfNotAlreadyRegistered<TAbstract, TConcrete>(string name) where TAbstract : class where TConcrete : class, new()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="123" sc="9" el="136" ec="10">Common\DotNetNukeHttpApplication.cs</location>
            <body hash="451398868aab0b7cafc94c820fe5f2cb"><![CDATA[{
            var provider = ComponentFactory.GetComponent<TAbstract>();
            if (provider == null)
            {
                if (String.IsNullOrEmpty(name))
                {
                    ComponentFactory.RegisterComponentInstance<TAbstract>(new TConcrete());
                }
                else
                {
                    ComponentFactory.RegisterComponentInstance<TAbstract>(name, new TConcrete());
                }
            }
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="Endings">
          <declaration><![CDATA[private static readonly string[] Endings = new string[]]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="Logger">
          <declaration><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof(DotNetNukeHttpApplication));]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
  </namespace>
  <namespace name="DotNetNuke.Web.Components">
    <class name="LocalizationHelper">
      <declaration><![CDATA[public class LocalizationHelper]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public LocalizationHelper()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="GetControlBarString">
          <declaration><![CDATA[public static string GetControlBarString(string key)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="32" sc="9" el="34" ec="10">Components\LocalizationHelper.cs</location>
            <body hash="169ed4071b601b517a93f2777abe6bf2"><![CDATA[{
            return Localization.GetString(key, ResourceFile);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="ResourceFile">
          <declaration><![CDATA[private const string ResourceFile = "admin/ControlPanel/App_LocalResources/ControlBar";]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
  </namespace>
  <namespace name="DotNetNuke.Web.Components.Controllers">
    <class name="ControlBarController">
      <declaration><![CDATA[public class ControlBarController : ServiceLocator<IControlBarController, ControlBarController>, IControlBarController]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public ControlBarController()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="44" sc="9" el="47" ec="10">Components\Controllers\ControlBarController.cs</location>
            <body hash="564144aeb53a08d19cfbc8280f6eb0db"><![CDATA[public ControlBarController()
        {
            _mef = new ExtensionPointManager();
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="EnsureBookmarkValue">
          <declaration><![CDATA[private string EnsureBookmarkValue(int portalId, string bookmarkValue)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="142" sc="9" el="146" ec="10">Components\Controllers\ControlBarController.cs</location>
            <body hash="6090fb461ac1fe737f7ad0572a634606"><![CDATA[{
            var bookmarkCategoryModules = GetCategoryDesktopModules(portalId, GetBookmarkCategory(portalId));            
            var ensuredModules = bookmarkValue.Split(',').Where(desktopModuleId => bookmarkCategoryModules.All(m => m.Value.DesktopModuleID.ToString(CultureInfo.InvariantCulture) != desktopModuleId)).ToList();
            return String.Join(",", ensuredModules.Distinct());
        }]]></body>
          </codeblock>
        </method>
        <method name="GetBookmarkCategory">
          <declaration><![CDATA[public string GetBookmarkCategory(int portalId)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="86" sc="9" el="94" ec="10">Components\Controllers\ControlBarController.cs</location>
            <body hash="d9d60383b060a0b9141ccb6440166dfc"><![CDATA[{
            var bookmarkCategory = PortalController.GetPortalSetting(BookmarkCategoryProperty, portalId, "");
            if (String.IsNullOrEmpty(bookmarkCategory))
            {
                PortalController.UpdatePortalSetting(portalId, BookmarkCategoryProperty, "Common");
                return "Common";
            }
            return bookmarkCategory;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetBookmarkedDesktopModules">
          <declaration><![CDATA[public IEnumerable<KeyValuePair<string, PortalDesktopModuleInfo>> GetBookmarkedDesktopModules(int portalId, int userId, string searchTerm = "")]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="61" sc="9" el="68" ec="10">Components\Controllers\ControlBarController.cs</location>
            <body hash="49ff10c26c539423ba814298f68be2cf"><![CDATA[{
            var formattedSearchTerm = String.IsNullOrEmpty(searchTerm) ? string.Empty : searchTerm.ToLower(CultureInfo.InvariantCulture);
            
            IEnumerable<KeyValuePair<string, PortalDesktopModuleInfo>> bookmarkedModules = GetBookmarkedModules(PortalSettings.Current.PortalId, userId)
                .Where(kvp => kvp.Key.ToLower(CultureInfo.InvariantCulture).Contains(formattedSearchTerm));

            return bookmarkedModules;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetBookmarkedModules">
          <declaration><![CDATA[private IEnumerable<KeyValuePair<string, PortalDesktopModuleInfo>> GetBookmarkedModules(int portalId, int userId)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="149" sc="9" el="162" ec="10">Components\Controllers\ControlBarController.cs</location>
            <body hash="fdf7305cf4da6a812827fc72cd61df11"><![CDATA[{
            var personalizationController = new DotNetNuke.Services.Personalization.PersonalizationController();
            var personalization = personalizationController.LoadProfile(userId, portalId);
            var bookmarkItems = personalization.Profile["ControlBar:"+ BookmarkModulesTitle + portalId];
            if (bookmarkItems == null)
            {
                return new List<KeyValuePair<string, PortalDesktopModuleInfo>>();
            }
            var bookmarkItemsKeys = bookmarkItems.ToString().Split(',').ToList();
            var bookmarkedModules = DesktopModuleController.GetPortalDesktopModules(PortalSettings.Current.PortalId)
                                        .Where(dm => bookmarkItemsKeys.Contains(dm.Value.DesktopModuleID.ToString(CultureInfo.InvariantCulture)));

            return bookmarkedModules;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetCategoryDesktopModules">
          <declaration><![CDATA[public IEnumerable<KeyValuePair<string, PortalDesktopModuleInfo>> GetCategoryDesktopModules(int portalId, string category, string searchTerm = "")]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="49" sc="9" el="58" ec="10">Components\Controllers\ControlBarController.cs</location>
            <body hash="037887d3129e1c10acc657452817f172"><![CDATA[{
            var formattedSearchTerm = String.IsNullOrEmpty(searchTerm) ? string.Empty : searchTerm.ToLower(CultureInfo.InvariantCulture);

            Func<KeyValuePair<string, PortalDesktopModuleInfo>, bool> Filter = category == "All"
                ? (kvp => kvp.Key.ToLower(CultureInfo.InvariantCulture).Contains(formattedSearchTerm))
                : (Func<KeyValuePair<string, PortalDesktopModuleInfo>, bool>)(kvp => kvp.Value.DesktopModule.Category == category && kvp.Key.ToLower(CultureInfo.InvariantCulture).Contains(formattedSearchTerm));

            var portalModulesList = DesktopModuleController.GetPortalDesktopModules(portalId).Where(Filter);
            return portalModulesList;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetControlBarLogoURL">
          <declaration><![CDATA[public string GetControlBarLogoURL()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="103" sc="9" el="105" ec="10">Components\Controllers\ControlBarController.cs</location>
            <body hash="58e33c202e734447f9869e37142c50f7"><![CDATA[{
            return HostController.Instance.GetString("ControlBarLogoURL", "~/admin/controlpanel/controlbarimages/dnnLogo.png");
        }]]></body>
          </codeblock>
        </method>
        <method name="GetCustomMenuItems">
          <declaration><![CDATA[public IEnumerable<MenuItemViewModel> GetCustomMenuItems()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="108" sc="9" el="111" ec="10">Components\Controllers\ControlBarController.cs</location>
            <body hash="54485ae188638574a9fe19b6dcb30c81"><![CDATA[{
            var menuItemsExtensionPoints = _mef.GetUserControlExtensionPoints("ControlBar", "CustomMenuItems");
            return menuItemsExtensionPoints.Select(GetMenuItemFromExtensionPoint);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetDefaultUpgradeIndicator">
          <declaration><![CDATA[private UpgradeIndicatorViewModel GetDefaultUpgradeIndicator(string imageUrl)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="114" sc="9" el="128" ec="10">Components\Controllers\ControlBarController.cs</location>
            <body hash="afb65a05b0ef974b1cfeacb49a92ee4f"><![CDATA[{
            var alt = LocalizationHelper.GetControlBarString("Upgrade.Text");
            var toolTip = LocalizationHelper.GetControlBarString("Upgrade.ToolTip");
            var navigateUrl = Upgrade.UpgradeRedirect();

            return new UpgradeIndicatorViewModel
            {
                ID = "ServiceImg",
                ImageUrl = imageUrl,
                WebAction = "location.href='" + navigateUrl + "'; return false;",
                AltText = alt,
                ToolTip = toolTip,
                CssClass = ""
            };            
        }]]></body>
          </codeblock>
        </method>
        <method name="GetFactory">
          <declaration><![CDATA[protected override Func<IControlBarController> GetFactory()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="165" sc="9" el="167" ec="10">Components\Controllers\ControlBarController.cs</location>
            <body hash="7f1f649f0ece96e47047f1dc2b1eec29"><![CDATA[{
            return () => new ControlBarController();
        }]]></body>
          </codeblock>
        </method>
        <method name="GetMenuItemFromExtensionPoint">
          <declaration><![CDATA[private MenuItemViewModel GetMenuItemFromExtensionPoint(IUserControlExtensionPoint userControlExtensionPoint)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="131" sc="9" el="139" ec="10">Components\Controllers\ControlBarController.cs</location>
            <body hash="bdee99005b4a75ec2396d5a80fa3417b"><![CDATA[{
            return new MenuItemViewModel
            {
                ID = Path.GetFileNameWithoutExtension(userControlExtensionPoint.UserControlSrc),
                Text = userControlExtensionPoint.Text,
                Source = userControlExtensionPoint.UserControlSrc,
                Order = userControlExtensionPoint.Order
            };
        }]]></body>
          </codeblock>
        </method>
        <method name="GetUpgradeIndicator">
          <declaration><![CDATA[public UpgradeIndicatorViewModel GetUpgradeIndicator(Version version, bool isLocal, bool isSecureConnection)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="97" sc="9" el="100" ec="10">Components\Controllers\ControlBarController.cs</location>
            <body hash="9b380c624f70301b0f28ee88ea3a643d"><![CDATA[{
            var imageUrl = Upgrade.UpgradeIndicator(version, isLocal, isSecureConnection);
            return !String.IsNullOrEmpty(imageUrl) ? GetDefaultUpgradeIndicator(imageUrl) : null;            
        }]]></body>
          </codeblock>
        </method>
        <method name="SaveBookMark">
          <declaration><![CDATA[public void SaveBookMark(int portalId, int userId, string bookmarkTitle, string bookmarkValue)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="71" sc="9" el="83" ec="10">Components\Controllers\ControlBarController.cs</location>
            <body hash="5d5b4d7ecb659fdf80cf61ab043bf138"><![CDATA[{
            var ensuredBookmarkValue = bookmarkValue;
            if (bookmarkTitle == BookmarkModulesTitle)
            {
                ensuredBookmarkValue = EnsureBookmarkValue(portalId, ensuredBookmarkValue);
            }
            
            var personalizationController = new DotNetNuke.Services.Personalization.PersonalizationController();
            var personalization = personalizationController.LoadProfile(userId, portalId);
            personalization.Profile["ControlBar:" + bookmarkTitle + portalId] = ensuredBookmarkValue;
            personalization.IsModified = true;
            personalizationController.SaveProfile(personalization);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_mef">
          <declaration><![CDATA[private readonly ExtensionPointManager _mef;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="BookmarkCategoryProperty">
          <declaration><![CDATA[private const string BookmarkCategoryProperty = "ControlBar_BookmarkCategory";]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="BookmarkModulesTitle">
          <declaration><![CDATA[private const string BookmarkModulesTitle = "module";]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="IControlBarController">
      <declaration><![CDATA[public interface IControlBarController]]></declaration>
      <documentation>
      </documentation>
      <constructors>
      </constructors>
      <methods>
        <method name="GetBookmarkCategory">
          <declaration><![CDATA[string GetBookmarkCategory(int portalId);]]></declaration>
          <documentation>
            <summary>
 Get the category name where the bookmarked modules are shown
 </summary>
 <param name="portalId">Portal Id where modules are installed</param>
 <returns>The name of the bookmark category</returns></documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="GetBookmarkedDesktopModules">
          <declaration><![CDATA[IEnumerable<KeyValuePair<string, PortalDesktopModuleInfo>> GetBookmarkedDesktopModules(int portalId, int userId, string searchTerm = "");]]></declaration>
          <documentation>
            <summary>
 Get all desktop modules bookmark by user in Control Bar
 </summary>
 <param name="portalId">Portal Id where modules are installed</param>
 <param name="userId">User Id who has bookmarked the modules</param>
 <param name="searchTerm">Search term to filter modules</param>
 <returns>A list with all matched modules</returns></documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="GetCategoryDesktopModules">
          <declaration><![CDATA[IEnumerable<KeyValuePair<string, PortalDesktopModuleInfo>> GetCategoryDesktopModules(int portalId, string category, string searchTerm = "");]]></declaration>
          <documentation>
            <summary>
 Get all desktop modules that belong to a category
 </summary>
 <param name="portalId">Portal Id where modules are installed</param>
 <param name="category">Catenory name</param>
 <param name="searchTerm">Search term to filter modules</param>
 <returns>A list with all matched desktop modules</returns></documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="GetControlBarLogoURL">
          <declaration><![CDATA[string GetControlBarLogoURL();]]></declaration>
          <documentation>
            <summary>
 Get the current Logo URL shown in Control Bar
 </summary>
 <returns>The URL of the Control Bar Logo</returns></documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="GetCustomMenuItems">
          <declaration><![CDATA[IEnumerable<MenuItemViewModel> GetCustomMenuItems();]]></declaration>
          <documentation>
            <summary>
 Gets all custom Menu item available in the system
 </summary>
 <returns>All custom Menu Items</returns></documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="GetUpgradeIndicator">
          <declaration><![CDATA[UpgradeIndicatorViewModel GetUpgradeIndicator(Version version, bool isLocal, bool isSecureConnection);]]></declaration>
          <documentation>
            <summary>
 Returns the upgrade indicator model
 </summary>
 <param name="version"></param>
 <param name="isLocal"></param>
 <param name="isSecureConnection"></param>
 <returns>An instance of the view model UpgradeIndicator</returns></documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="SaveBookMark">
          <declaration><![CDATA[void SaveBookMark(int portalId, int userId, string bookarkTitle, string bookmarkValue);]]></declaration>
          <documentation>
            <summary>
 Save a user bookmark
 </summary>
 <param name="portalId">Portal Id where save the bookmark</param>
 <param name="userId">User Id who is going to create the bookmark</param>
 <param name="bookarkTitle">Title for the personalization setting</param>
 <param name="bookmarkValue">Value for the personalization setting</param></documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
  </namespace>
  <namespace name="DotNetNuke.Web.Components.Controllers.Models">
    <class name="MenuItemViewModel">
      <declaration><![CDATA[public class MenuItemViewModel]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public MenuItemViewModel()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="ID">
          <declaration><![CDATA[public string ID]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="32" sc="28" el="32" ec="32">Components\Controllers\Models\MenuItemViewModel.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="32" sc="33" el="32" ec="37">Components\Controllers\Models\MenuItemViewModel.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Order">
          <declaration><![CDATA[public int Order]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="35" sc="28" el="35" ec="32">Components\Controllers\Models\MenuItemViewModel.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="35" sc="33" el="35" ec="37">Components\Controllers\Models\MenuItemViewModel.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Source">
          <declaration><![CDATA[public string Source]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="34" sc="32" el="34" ec="36">Components\Controllers\Models\MenuItemViewModel.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="34" sc="37" el="34" ec="41">Components\Controllers\Models\MenuItemViewModel.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Text">
          <declaration><![CDATA[public string Text]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="33" sc="30" el="33" ec="34">Components\Controllers\Models\MenuItemViewModel.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="33" sc="35" el="33" ec="39">Components\Controllers\Models\MenuItemViewModel.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="UpgradeIndicatorViewModel">
      <declaration><![CDATA[public class UpgradeIndicatorViewModel]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public UpgradeIndicatorViewModel()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="AltText">
          <declaration><![CDATA[public string AltText]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="30" sc="33" el="30" ec="37">Components\Controllers\Models\UpgradeIndicatorViewModel.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="30" sc="38" el="30" ec="42">Components\Controllers\Models\UpgradeIndicatorViewModel.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="CssClass">
          <declaration><![CDATA[public string CssClass]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="32" sc="34" el="32" ec="38">Components\Controllers\Models\UpgradeIndicatorViewModel.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="32" sc="39" el="32" ec="43">Components\Controllers\Models\UpgradeIndicatorViewModel.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="ID">
          <declaration><![CDATA[public string ID]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="27" sc="28" el="27" ec="32">Components\Controllers\Models\UpgradeIndicatorViewModel.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="27" sc="33" el="27" ec="37">Components\Controllers\Models\UpgradeIndicatorViewModel.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="ImageUrl">
          <declaration><![CDATA[public string ImageUrl]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="28" sc="34" el="28" ec="38">Components\Controllers\Models\UpgradeIndicatorViewModel.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="28" sc="39" el="28" ec="43">Components\Controllers\Models\UpgradeIndicatorViewModel.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="ToolTip">
          <declaration><![CDATA[public string ToolTip]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="31" sc="33" el="31" ec="37">Components\Controllers\Models\UpgradeIndicatorViewModel.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="31" sc="38" el="31" ec="42">Components\Controllers\Models\UpgradeIndicatorViewModel.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="WebAction">
          <declaration><![CDATA[public string WebAction]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="29" sc="35" el="29" ec="39">Components\Controllers\Models\UpgradeIndicatorViewModel.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="29" sc="40" el="29" ec="44">Components\Controllers\Models\UpgradeIndicatorViewModel.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
  </namespace>
  <namespace name="DotNetNuke.Web.ConfigSection">
    <class name="AuthServicesConfiguration">
      <declaration><![CDATA[public class AuthServicesConfiguration : ConfigurationSection]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public AuthServicesConfiguration()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="GetConfig">
          <declaration><![CDATA[public static AuthServicesConfiguration GetConfig()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="8" sc="9" el="10" ec="10">ConfigSection\AuthServicesConfiguration.cs</location>
            <body hash="35fa795ff540dd818744ff510a05e47d"><![CDATA[{
            return ConfigurationManager.GetSection("dotnetnuke/authServices") as AuthServicesConfiguration;
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="MessageHandlers">
          <declaration><![CDATA[public MessageHandlersCollection MessageHandlers]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="13" sc="61" el="13" ec="113">ConfigSection\AuthServicesConfiguration.cs</location>
            <body hash="ccd7503e990bb430028feb9a1ef0e189"><![CDATA[this["messageHandlers"] as MessageHandlersCollectio]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="MessageHandlerEntry">
      <declaration><![CDATA[public class MessageHandlerEntry : ConfigurationElement]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public MessageHandlerEntry()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
        <field name="ClassNameTag">
          <declaration><![CDATA[private const string ClassNameTag = "type";]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="DefaultIncludeTag">
          <declaration><![CDATA[private const string DefaultIncludeTag = "defaultInclude";]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="EnabledNameTag">
          <declaration><![CDATA[private const string EnabledNameTag = "enabled";]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ForceSslTag">
          <declaration><![CDATA[private const string ForceSslTag = "forceSSL";]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="NameTag">
          <declaration><![CDATA[private const string NameTag = "name";]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="ClassName">
          <declaration><![CDATA[public string ClassName]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="33" sc="13" el="35" ec="14">ConfigSection\MessageHandlerEntry.cs</location>
            <body hash="50a53c8978b82c6692aca81f603b223e"><![CDATA[{
                return (string)this[ClassNameTag];
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="37" sc="13" el="39" ec="14">ConfigSection\MessageHandlerEntry.cs</location>
            <body hash="1d2ac5ff9cc7be50da22b9624d9199f3"><![CDATA[{
                this[ClassNameTag] = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="DefaultInclude">
          <declaration><![CDATA[public bool DefaultInclude]]></declaration>
          <documentation>
            <summary>
 This property specifies whether this is automatically included when the <see cref="T:DotNetNuke.Web.Api.DnnAuthorizeAttribute" />
 </summary>
          </documentation>
          <codeblock>
            <location sl="63" sc="13" el="66" ec="14">ConfigSection\MessageHandlerEntry.cs</location>
            <body hash="b69e862dafed530dc7540b43baa348d5"><![CDATA[{
                var b = (bool?)this[DefaultIncludeTag];
                return b.Value;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="68" sc="13" el="70" ec="14">ConfigSection\MessageHandlerEntry.cs</location>
            <body hash="c0c121e4f48fa0dc8db4ece2264ca6a8"><![CDATA[{
                this[DefaultIncludeTag] = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="Enabled">
          <declaration><![CDATA[public bool Enabled]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="46" sc="13" el="49" ec="14">ConfigSection\MessageHandlerEntry.cs</location>
            <body hash="ccba95ed813e16e3c5a0e42f867ad22b"><![CDATA[{
                var b = (bool?)this[EnabledNameTag];
                return b.Value;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="51" sc="13" el="53" ec="14">ConfigSection\MessageHandlerEntry.cs</location>
            <body hash="65a4ebff0564c16643b9688bb6966702"><![CDATA[{
                this[EnabledNameTag] = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="ForceSsl">
          <declaration><![CDATA[public bool ForceSsl]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="77" sc="13" el="80" ec="14">ConfigSection\MessageHandlerEntry.cs</location>
            <body hash="bfa57e3bd51b337f16318d599fb06709"><![CDATA[{
                var b = (bool?)this[ForceSslTag];
                return b.Value;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="82" sc="13" el="84" ec="14">ConfigSection\MessageHandlerEntry.cs</location>
            <body hash="77f7b32b066d23e6eb82ebf2450a1057"><![CDATA[{
                this[ForceSslTag] = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="Name">
          <declaration><![CDATA[public string Name]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="19" sc="13" el="21" ec="14">ConfigSection\MessageHandlerEntry.cs</location>
            <body hash="1c474a0899090ae7f9847cf95e8b7302"><![CDATA[{
                return (string)this[NameTag];
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="23" sc="13" el="25" ec="14">ConfigSection\MessageHandlerEntry.cs</location>
            <body hash="e28e0f90879e34930222912dbf120126"><![CDATA[{
                this[NameTag] = value;
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="MessageHandlersCollection">
      <declaration><![CDATA[public class MessageHandlersCollection : ConfigurationElementCollection]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public MessageHandlersCollection()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="CreateNewElement">
          <declaration><![CDATA[protected override ConfigurationElement CreateNewElement()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="24" sc="9" el="26" ec="10">ConfigSection\MessageHandlersCollection.cs</location>
            <body hash="069310744c0ab6e282240db0dd625afc"><![CDATA[{
            return new MessageHandlerEntry();
        }]]></body>
          </codeblock>
        </method>
        <method name="GetElementKey">
          <declaration><![CDATA[protected override object GetElementKey(ConfigurationElement element)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="29" sc="9" el="31" ec="10">ConfigSection\MessageHandlersCollection.cs</location>
            <body hash="b8fb3e637ee0c7a910a67007cdeee9b8"><![CDATA[{
            return (element as MessageHandlerEntry ?? new MessageHandlerEntry()).Name;
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="Item">
          <declaration><![CDATA[public MessageHandlerEntry this[int index]]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="10" sc="13" el="12" ec="14">ConfigSection\MessageHandlersCollection.cs</location>
            <body hash="b1229fc8922d58d5680c3c0f3a21700b"><![CDATA[{
                return BaseGet(index) as MessageHandlerEntry;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="14" sc="13" el="20" ec="14">ConfigSection\MessageHandlersCollection.cs</location>
            <body hash="a7c7b521ba22899128ee69a5e2704c50"><![CDATA[{
                if (BaseGet(index) != null)
                {
                    BaseRemoveAt(index);
                }
                BaseAdd(index, value);
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
  </namespace>
  <namespace name="DotNetNuke.Web.InternalServices">
    <class name="ContentWorkflowServiceController">
      <declaration><![CDATA[public class ContentWorkflowServiceController : DnnApiController]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public ContentWorkflowServiceController()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="46" sc="9" el="49" ec="10">InternalServices\ContentWorkflowServiceController.cs</location>
            <body hash="d9f02d79ffb39a298927eb10ed8f3d68"><![CDATA[public ContentWorkflowServiceController()
        {
            _workflowEngine = WorkflowEngine.Instance;
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="Approve">
          <declaration><![CDATA[public HttpResponseMessage Approve(NotificationDTO postData)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="92" sc="9" el="124" ec="10">InternalServices\ContentWorkflowServiceController.cs</location>
            <body hash="a45557b9362b88e60842001604ff9e03"><![CDATA[{
            try
            {
                var notification = NotificationsController.Instance.GetNotification(postData.NotificationId);
                if (notification != null)
                {
                    if (string.IsNullOrEmpty(notification.Context))
                    {
                        return Request.CreateResponse(HttpStatusCode.OK, new { Result = "success" });
                    }

                    string[] parameters = notification.Context.Split(':');

                    var stateTransiction = new StateTransaction
                                            {
                                                ContentItemId = int.Parse(parameters[0]),
                                                CurrentStateId = int.Parse(parameters[2]),
                                                Message = new StateTransactionMessage(),
                                                UserId = UserInfo.UserID
                                            };
                    _workflowEngine.CompleteState(stateTransiction);

                    return Request.CreateResponse(HttpStatusCode.OK, new { Result = "success" });
                }
            }
            catch (Exception exc)
            {
                Exceptions.LogException(exc);
            }

            return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, "unable to process notification");

        }]]></body>
          </codeblock>
        </method>
        <method name="Reject">
          <declaration><![CDATA[public HttpResponseMessage Reject(NotificationDTO postData)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="56" sc="9" el="87" ec="10">InternalServices\ContentWorkflowServiceController.cs</location>
            <body hash="a949341baaf72fc1bb3100ccf8f6088d"><![CDATA[{
            try
            {
                var notification = NotificationsController.Instance.GetNotification(postData.NotificationId);
                if (notification != null)
                {
                    if (string.IsNullOrEmpty(notification.Context))
                    {
                        return Request.CreateResponse(HttpStatusCode.OK, new { Result = "success" });
                    }

                    string[] parameters = notification.Context.Split(':');

                    var stateTransiction = new StateTransaction
                                           {
                                               ContentItemId = int.Parse(parameters[0]),
                                               CurrentStateId = int.Parse(parameters[2]),
                                               Message = new StateTransactionMessage (),
                                               UserId = UserInfo.UserID
                                           };
                    _workflowEngine.DiscardState(stateTransiction);

                    return Request.CreateResponse(HttpStatusCode.OK, new { Result = "success" });
                }
            }
            catch (Exception exc)
            {
                Exceptions.LogException(exc);
            }

            return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, "unable to process notification");
        }]]></body>
          </codeblock>
        </method>
        <method name="Review">
          <deprecation>Obsolted in Platform 7.4.0</deprecation>
          <declaration><![CDATA[public HttpResponseMessage Review(NotificationDTO postData)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="130" sc="9" el="174" ec="10">InternalServices\ContentWorkflowServiceController.cs</location>
            <body hash="1118dd321b7302b2b5edbda0eab40576"><![CDATA[{
            try
            {
                var notification = NotificationsController.Instance.GetNotification(postData.NotificationId);

                if (notification != null)
                {
                    if (string.IsNullOrEmpty(notification.Context))
                    {
                        return Request.CreateResponse(HttpStatusCode.OK, new { Result = "success"});
                    }

                    var source = notification.Context;
                    string[] parameters = null;
                    if (notification.Context.Contains(";"))
                    {
                        parameters = notification.Context.Split(';');
                        source = parameters[0];
                        parameters = parameters.ToList().Skip(1).ToArray();
                    }

                    var workflow = ContentWorkflowController.Instance.GetDefaultWorkflow(PortalSettings.PortalId);
                    var workflowSource = ContentWorkflowController.Instance.GetWorkflowSource(workflow.WorkflowID, source);
                    if (workflowSource == null)
                    {
                        return Request.CreateResponse(HttpStatusCode.OK, new { Result = "success" });
                    }

                    var sourceAction = Reflection.CreateInstance(Reflection.CreateType(workflowSource.SourceType)) as IContentWorkflowAction;
                    if (sourceAction == null)
                    {
                        return Request.CreateResponse(HttpStatusCode.OK, new { Result = "success" });
                    }

                    return Request.CreateResponse(HttpStatusCode.OK, new { Result = "success", Link = sourceAction.GetAction(parameters) }); 
                }
            }
            catch (Exception exc)
            {
                Exceptions.LogException(exc);
            }

            return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, "unable to process notification");

        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_workflowEngine">
          <declaration><![CDATA[private readonly IWorkflowEngine _workflowEngine;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="ControlBarController">
      <declaration><![CDATA[public class ControlBarController : DnnApiController]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public ControlBarController()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="58" sc="9" el="61" ec="10">InternalServices\ControlBarController.cs</location>
            <body hash="93eba6cf1b8e36fa5cdfb888b14e62da"><![CDATA[public ControlBarController()
        {
            Controller = Components.Controllers.ControlBarController.Instance;
        }]]></body>
          </codeblock>
        </constructor>
        <constructor name=".cctor">
          <declaration><![CDATA[static ControlBarController()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="53" sc="9" el="53" ec="109">InternalServices\ControlBarController.cs</location>
            <body hash="e7e9473a34bbcc34aa4b85c4b4b80d60"><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof(ControlBarController))]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="ActiveTabHasChildren">
          <declaration><![CDATA[private bool ActiveTabHasChildren()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="565" sc="9" el="574" ec="10">InternalServices\ControlBarController.cs</location>
            <body hash="62e6f6fffe758536e47b804deccbc55d"><![CDATA[{
            var children = TabController.GetTabsByParent(PortalSettings.ActiveTab.TabID, PortalSettings.ActiveTab.PortalID);

            if (((children == null) || children.Count < 1))
            {
                return false;
            }

            return true;
        }]]></body>
          </codeblock>
        </method>
        <method name="AddModule">
          <declaration><![CDATA[public HttpResponseMessage AddModule(ControlBarController.AddModuleDTO dto)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="254" sc="9" el="349" ec="10">InternalServices\ControlBarController.cs</location>
            <body hash="fbd23a7fdcf2bec6e23a4e7e815feaf9"><![CDATA[{
            if (TabPermissionController.CanAddContentToPage() && CanAddModuleToPage())
            {
                int permissionType;
                try
                {
                    permissionType = int.Parse(dto.Visibility);
                }
                catch (Exception exc)
                {
                    Logger.Error(exc);
                    permissionType = 0;
                }

                int positionID = -1;
                if (!string.IsNullOrEmpty(dto.Sort))
                {
                    int sortID = 0;
                    try
                    {
                        sortID = int.Parse(dto.Sort);
                        if (sortID >= 0)
                            positionID = GetPaneModuleOrder(dto.Pane, sortID);
                    }
                    catch (Exception exc)
                    {
                        Logger.Error(exc);
                    }
                }

                if (positionID == -1)
                {
                    switch (dto.Position)
                    {
                        case "TOP":
                        case "0":
                            positionID = 0;
                            break;
                        case "BOTTOM":
                        case "-1":
                            positionID = -1;
                            break;
                    }
                }

                int moduleLstID;
                try
                {
                    moduleLstID = int.Parse(dto.Module);
                }
                catch (Exception exc)
                {
                    Logger.Error(exc);
                    moduleLstID = -1;
                }

                try
                {
                    int tabModuleId = -1;
                    if ((moduleLstID > -1))
                    {

                        if ((dto.AddExistingModule == "true"))
                        {
                            int pageID;
                            try
                            {
                                pageID = int.Parse(dto.Page);
                            }
                            catch (Exception exc)
                            {
                                Logger.Error(exc);
                                pageID = -1;
                            }

                            if ((pageID > -1))
                            {
                                tabModuleId = DoAddExistingModule(moduleLstID, pageID, dto.Pane, positionID, "", dto.CopyModule == "true");
                            }
                        }
                        else
                        {
                            tabModuleId = DoAddNewModule("", moduleLstID, dto.Pane, positionID, permissionType, "");
                        }
                    }

                    return Request.CreateResponse(HttpStatusCode.OK, new { TabModuleID = tabModuleId });
                }
                catch (Exception ex)
                {
                    Logger.Error(ex);
                }
            }

            return Request.CreateResponse(HttpStatusCode.InternalServerError);
        }]]></body>
          </codeblock>
        </method>
        <method name="AddModulePermission">
          <declaration><![CDATA[private ModulePermissionInfo AddModulePermission(ModuleInfo objModule, PermissionInfo permission, int roleId, int userId, bool allowAccess)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="704" sc="9" el="722" ec="10">InternalServices\ControlBarController.cs</location>
            <body hash="e1171324da0c06fa7b84494bd4fcd1da"><![CDATA[{
            var objModulePermission = new ModulePermissionInfo
            {
                ModuleID = objModule.ModuleID,
                PermissionID = permission.PermissionID,
                RoleID = roleId,
                UserID = userId,
                PermissionKey = permission.PermissionKey,
                AllowAccess = allowAccess
            };

            // add the permission to the collection
            if (!objModule.ModulePermissions.Contains(objModulePermission))
            {
                objModule.ModulePermissions.Add(objModulePermission);
            }

            return objModulePermission;
        }]]></body>
          </codeblock>
        </method>
        <method name="CanAddModuleToPage">
          <declaration><![CDATA[public bool CanAddModuleToPage()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="558" sc="9" el="562" ec="10">InternalServices\ControlBarController.cs</location>
            <body hash="7f67f189aa45b0f88f6d2111a080fc6b"><![CDATA[{
            return true;
            //If we are not in an edit page
            //return (string.IsNullOrEmpty(HttpContext.Current.Request.QueryString["mid"])) && (string.IsNullOrEmpty(HttpContext.Current.Request.QueryString["ctl"]));
        }]]></body>
          </codeblock>
        </method>
        <method name="ClearHostCache">
          <declaration><![CDATA[public HttpResponseMessage ClearHostCache()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="355" sc="9" el="364" ec="10">InternalServices\ControlBarController.cs</location>
            <body hash="28eafc5b11d71f24b8b7f8fcbcf73a56"><![CDATA[{
            if (UserController.Instance.GetCurrentUserInfo().IsSuperUser)
            {
                DataCache.ClearCache();
                ClientResourceManager.ClearCache();
                return Request.CreateResponse(HttpStatusCode.OK, new { Success = true });
            }

            return Request.CreateResponse(HttpStatusCode.InternalServerError);
        }]]></body>
          </codeblock>
        </method>
        <method name="CopyPermissionsToChildren">
          <declaration><![CDATA[public HttpResponseMessage CopyPermissionsToChildren()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="239" sc="9" el="248" ec="10">InternalServices\ControlBarController.cs</location>
            <body hash="5865f09df5c4f34542da62e477eb88cf"><![CDATA[{
            if (TabPermissionController.CanManagePage() && UserController.Instance.GetCurrentUserInfo().IsInRole("Administrators")
                && ActiveTabHasChildren() && !PortalSettings.ActiveTab.IsSuperTab)
            {
                TabController.CopyPermissionsToChildren(PortalSettings.ActiveTab, PortalSettings.ActiveTab.TabPermissions);
                return Request.CreateResponse(HttpStatusCode.OK, new { Success = true });
            }

            return Request.CreateResponse(HttpStatusCode.InternalServerError);
        }]]></body>
          </codeblock>
        </method>
        <method name="DoAddExistingModule">
          <declaration><![CDATA[private int DoAddExistingModule(int moduleId, int tabId, string paneName, int position, string align, bool cloneModule)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="577" sc="9" el="701" ec="10">InternalServices\ControlBarController.cs</location>
            <body hash="517bdb229a0306152ed5dd6e816982d3"><![CDATA[{
            ModuleInfo moduleInfo = ModuleController.Instance.GetModule(moduleId, tabId, false);

            int userID = -1;

            UserInfo user = UserController.Instance.GetCurrentUserInfo();
            if (user != null)
            {
                userID = user.UserID;
            }


            if ((moduleInfo != null))
            {
                // Is this from a site other than our own? (i.e., is the user requesting "module sharing"?)
                var remote = moduleInfo.PortalID != PortalSettings.Current.PortalId;
                if (remote)
                {
                    switch (moduleInfo.DesktopModule.Shareable)
                    {
                        case ModuleSharing.Unsupported:
                            // Should never happen since the module should not be listed in the first place.
                            throw new ApplicationException(string.Format("Module '{0}' does not support Shareable and should not be listed in Add Existing Module from a different source site",
                                                                         moduleInfo.DesktopModule.FriendlyName));
                        case ModuleSharing.Supported:
                            break;
                        case ModuleSharing.Unknown:
                            break;
                    }
                }

                // clone the module object ( to avoid creating an object reference to the data cache )
                ModuleInfo newModule = moduleInfo.Clone();

                newModule.UniqueId = Guid.NewGuid(); // Cloned Module requires a different uniqueID
                newModule.TabModuleID = Null.NullInteger;
                newModule.PortalID = PortalSettings.Current.PortalId;
                newModule.TabID = PortalSettings.Current.ActiveTab.TabID;
                newModule.ModuleOrder = position;
                newModule.PaneName = paneName;
                newModule.Alignment = align;

                if ((cloneModule))
                {
                    newModule.ModuleID = Null.NullInteger;

                    //copy module settings and tab module settings
                    newModule.ModuleSettings.Clear();
                    foreach (var key in moduleInfo.ModuleSettings.Keys)
                    {
                        newModule.ModuleSettings.Add(key, moduleInfo.ModuleSettings[key]);
                    }

                    newModule.TabModuleSettings.Clear();
                    foreach (var key in moduleInfo.TabModuleSettings.Keys)
                    {
                        newModule.TabModuleSettings.Add(key, moduleInfo.TabModuleSettings[key]);
                    }

                    //reset the module id
                    newModule.ModuleID = ModuleController.Instance.AddModule(newModule);

                    if (!string.IsNullOrEmpty(newModule.DesktopModule.BusinessControllerClass))
                    {
                        object objObject = DotNetNuke.Framework.Reflection.CreateObject(newModule.DesktopModule.BusinessControllerClass, newModule.DesktopModule.BusinessControllerClass);
                        if (objObject is IPortable)
                        {
                            string content = Convert.ToString(((IPortable)objObject).ExportModule(moduleId));
                            if (!string.IsNullOrEmpty(content))
                            {
                                ((IPortable)objObject).ImportModule(newModule.ModuleID, content, newModule.DesktopModule.Version, userID);
                            }
                        }
                    }
                }
                else
                {
                    //copy tab module settings
                    newModule.TabModuleSettings.Clear();
                    foreach (var key in moduleInfo.TabModuleSettings.Keys)
                    {
                        newModule.TabModuleSettings.Add(key, moduleInfo.TabModuleSettings[key]);
                    }

                    ModuleController.Instance.AddModule(newModule);
                }

                //if the tab of original module has custom stylesheet defined, then also copy the stylesheet
                //to the destination tab if its custom stylesheet is empty.
                var originalTab = TabController.Instance.GetTab(moduleInfo.TabID, moduleInfo.PortalID);
                var targetTab = PortalSettings.Current.ActiveTab;
                if (originalTab != null
                    && originalTab.TabSettings.ContainsKey("CustomStylesheet")
                    && !string.IsNullOrEmpty(originalTab.TabSettings["CustomStylesheet"].ToString())
                    && (!targetTab.TabSettings.ContainsKey("CustomStylesheet") ||
                            string.IsNullOrEmpty(targetTab.TabSettings["CustomStylesheet"].ToString())))
                {
                    TabController.Instance.UpdateTabSetting(targetTab.TabID, "CustomStylesheet", originalTab.TabSettings["CustomStylesheet"].ToString());
                }

                if (remote)
                {
                    //Ensure the Portal Admin has View rights
                    var permissionController = new PermissionController();
                    ArrayList arrSystemModuleViewPermissions = permissionController.GetPermissionByCodeAndKey("SYSTEM_MODULE_DEFINITION", "VIEW");
                    AddModulePermission(newModule,
                                    (PermissionInfo)arrSystemModuleViewPermissions[0],
                                    PortalSettings.Current.AdministratorRoleId,
                                    Null.NullInteger,
                                    true);

                    //Set PortalID correctly
                    newModule.OwnerPortalID = newModule.PortalID;
                    newModule.PortalID = PortalSettings.Current.PortalId;
                    ModulePermissionController.SaveModulePermissions(newModule);
                }

                //Add Event Log
                EventLogController.Instance.AddLog(newModule, PortalSettings.Current, userID, "", EventLogController.EventLogType.MODULE_CREATED);

                return newModule.ModuleID;
            }

            return -1;
        }]]></body>
          </codeblock>
        </method>
        <method name="DoAddNewModule">
          <declaration><![CDATA[private int DoAddNewModule(string title, int desktopModuleId, string paneName, int position, int permissionType, string align)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="767" sc="9" el="834" ec="10">InternalServices\ControlBarController.cs</location>
            <body hash="7e74dcd9b5100d0879f9d1a700ed33d9"><![CDATA[{
            try
            {
                DesktopModuleInfo desktopModule;
                if (!DesktopModuleController.GetDesktopModules(PortalSettings.Current.PortalId).TryGetValue(desktopModuleId, out desktopModule))
                {
                    throw new ArgumentException("desktopModuleId");
                }
            }
            catch (Exception ex)
            {
                Exceptions.LogException(ex);
            }

            var tabModuleId = Null.NullInteger;
            foreach (ModuleDefinitionInfo objModuleDefinition in
                ModuleDefinitionController.GetModuleDefinitionsByDesktopModuleID(desktopModuleId).Values)
            {
                var objModule = new ModuleInfo();
                objModule.Initialize(PortalSettings.Current.ActiveTab.PortalID);

                objModule.PortalID = PortalSettings.Current.ActiveTab.PortalID;
                objModule.TabID = PortalSettings.Current.ActiveTab.TabID;
                objModule.ModuleOrder = position;
                objModule.ModuleTitle = string.IsNullOrEmpty(title) ? objModuleDefinition.FriendlyName : title;
                objModule.PaneName = paneName;
                objModule.ModuleDefID = objModuleDefinition.ModuleDefID;
                if (objModuleDefinition.DefaultCacheTime > 0)
                {
                    objModule.CacheTime = objModuleDefinition.DefaultCacheTime;
                    if (PortalSettings.Current.DefaultModuleId > Null.NullInteger && PortalSettings.Current.DefaultTabId > Null.NullInteger)
                    {
                        ModuleInfo defaultModule = ModuleController.Instance.GetModule(PortalSettings.Current.DefaultModuleId, PortalSettings.Current.DefaultTabId, true);
                        if ((defaultModule != null))
                        {
                            objModule.CacheTime = defaultModule.CacheTime;
                        }
                    }
                }

                ModuleController.Instance.InitialModulePermission(objModule, objModule.TabID, permissionType);

                if (PortalSettings.Current.ContentLocalizationEnabled)
                {
                    Locale defaultLocale = LocaleController.Instance.GetDefaultLocale(PortalSettings.Current.PortalId);
                    //set the culture of the module to that of the tab
                    var tabInfo = TabController.Instance.GetTab(objModule.TabID, PortalSettings.Current.PortalId, false);
                    objModule.CultureCode = tabInfo != null ? tabInfo.CultureCode : defaultLocale.Code;
                }
                else
                {
                    objModule.CultureCode = Null.NullString;
                }
                objModule.AllTabs = false;
                objModule.Alignment = align;

                ModuleController.Instance.AddModule(objModule);

                if (tabModuleId == Null.NullInteger)
                {
                    tabModuleId = objModule.ModuleID;
                }
                //update the position to let later modules with add after previous one.
                position = ModuleController.Instance.GetTabModule(objModule.TabModuleID).ModuleOrder + 1;
            }

            return tabModuleId;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetDeskTopModuleImage">
          <declaration><![CDATA[private string GetDeskTopModuleImage(int moduleId)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="525" sc="9" el="537" ec="10">InternalServices\ControlBarController.cs</location>
            <body hash="08f857161934b3077e15b129cc18778a"><![CDATA[{
            var portalDesktopModules = DesktopModuleController.GetDesktopModules(PortalSettings.Current.PortalId);
            var packages = PackageController.Instance.GetExtensionPackages(PortalSettings.Current.PortalId);

            string imageUrl =
                    (from pkgs in packages
                     join portMods in portalDesktopModules on pkgs.PackageID equals portMods.Value.PackageID
                     where portMods.Value.DesktopModuleID == moduleId
                     select pkgs.IconFile).FirstOrDefault();

            imageUrl = String.IsNullOrEmpty(imageUrl) ? Globals.ImagePath + DefaultExtensionImage : imageUrl;
            return System.Web.VirtualPathUtility.ToAbsolute(imageUrl);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetModuleName">
          <declaration><![CDATA[private string GetModuleName(string moduleName)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="837" sc="9" el="846" ec="10">InternalServices\ControlBarController.cs</location>
            <body hash="70bbbf8dbb9ba160fcae8d65f68f5280"><![CDATA[{
            if (_nameDics == null)
            {
                _nameDics = new Dictionary<string, string> {{"SearchCrawlerAdmin", "SearchCrawler Admin"},
                                                             {"SearchCrawlerInput", "SearchCrawler Input"},
                                                             {"SearchCrawlerResults", "SearchCrawler Results"}};
            }

            return _nameDics.ContainsKey(moduleName) ? _nameDics[moduleName] : moduleName;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetModules">
          <declaration><![CDATA[private IList<ModuleInfo> GetModules(int tabID)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="223" sc="9" el="233" ec="10">InternalServices\ControlBarController.cs</location>
            <body hash="36e4561899d17b7d3c140760d0e62770"><![CDATA[{
            var isRemote = TabController.Instance.GetTab(tabID, Null.NullInteger, false).PortalID != PortalSettings.Current.PortalId;
            var tabModules = ModuleController.Instance.GetTabModules(tabID);

            var pageModules = isRemote
                                ? tabModules.Values.Where(m => ModuleSupportsSharing(m) && !m.IsDeleted).ToList()
                                : tabModules.Values.Where(m => ModulePermissionController.HasModuleAccess(SecurityAccessLevel.Edit, "MANAGE", m) && !m.IsDeleted).ToList();

            return pageModules;

        }]]></body>
          </codeblock>
        </method>
        <method name="GetPageList">
          <declaration><![CDATA[public HttpResponseMessage GetPageList(string portal)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="156" sc="9" el="195" ec="10">InternalServices\ControlBarController.cs</location>
            <body hash="dd87d6e484346e60e5bc719829dbd1d7"><![CDATA[{
            var portalSettings = GetPortalSettings(portal);

            List<TabInfo> tabList = null;
            if (PortalSettings.PortalId == portalSettings.PortalId)
            {
                tabList = TabController.GetPortalTabs(portalSettings.PortalId, PortalSettings.ActiveTab.TabID, false, string.Empty, true, false, false, false, true);
            }
            else
            {
                var groups = PortalGroupController.Instance.GetPortalGroups().ToArray();

                var mygroup = (from @group in groups
                               select PortalGroupController.Instance.GetPortalsByGroup(@group.PortalGroupId)
                                  into portals
                               where portals.Any(x => x.PortalID == PortalSettings.Current.PortalId)
                               select portals.ToArray()).FirstOrDefault();

                if (mygroup != null && mygroup.Any(p => p.PortalID == portalSettings.PortalId))
                {
                    tabList = TabController.GetPortalTabs(portalSettings.PortalId, Null.NullInteger, false, string.Empty, true, false, false, false, false);
                }
                else
                {
                    // try to get pages not allowed
                    return Request.CreateResponse(HttpStatusCode.InternalServerError);
                }
            }

            List<PageDefDTO> result = new List<PageDefDTO>();
            foreach (var tab in tabList)
            {
                if (tab.PortalID == PortalSettings.PortalId || (GetModules(tab.TabID).Count > 0 && tab.TabID != portalSettings.AdminTabId && tab.ParentId != portalSettings.AdminTabId))
                {
                    result.Add(new PageDefDTO { TabID = tab.TabID, IndentedTabName = tab.IndentedTabName });
                }
            }

            return Request.CreateResponse(HttpStatusCode.OK, result);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetPaneModuleOrder">
          <declaration><![CDATA[private int GetPaneModuleOrder(string pane, int sort)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="725" sc="9" el="764" ec="10">InternalServices\ControlBarController.cs</location>
            <body hash="d9191ad3c9e06200bd3b07e0358c3370"><![CDATA[{
            var items = new List<int>();

            foreach (ModuleInfo m in PortalSettings.Current.ActiveTab.Modules)
            {
                //if user is allowed to view module and module is not deleted
                if (ModulePermissionController.CanViewModule(m) && !m.IsDeleted)
                {
                    //modules which are displayed on all tabs should not be displayed on the Admin or Super tabs
                    if (!m.AllTabs || !PortalSettings.Current.ActiveTab.IsSuperTab)
                    {
                        if (string.Equals(m.PaneName, pane, StringComparison.OrdinalIgnoreCase))
                        {
                            int moduleOrder = m.ModuleOrder;

                            while (items.Contains(moduleOrder) || moduleOrder == 0)
                            {
                                moduleOrder++;
                            }

                            items.Add(moduleOrder);
                        }
                    }
                }
            }

            items.Sort();

            if (items.Count > sort)
            {
                var itemOrder = items[sort];
                return itemOrder - 1;
            }
            else if (items.Count > 0)
            {
                return items.Last() + 1;
            }

            return 0;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetPortalDesktopModules">
          <declaration><![CDATA[public HttpResponseMessage GetPortalDesktopModules(string category, int loadingStartIndex, int loadingPageSize, string searchTerm, string excludeCategories = "", bool sortBookmarks = false, string topModule = "")]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="110" sc="9" el="151" ec="10">InternalServices\ControlBarController.cs</location>
            <body hash="eff86d1992d5edc2d26ad9169535cb7a"><![CDATA[{
            if (string.IsNullOrEmpty(category))
            {
                category = "All";
            }
            var bookmarCategory = Controller.GetBookmarkCategory(PortalSettings.Current.PortalId);
            var bookmarkedModules = Controller.GetBookmarkedDesktopModules(PortalSettings.Current.PortalId, UserController.Instance.GetCurrentUserInfo().UserID, searchTerm);
            var bookmarkCategoryModules = Controller.GetCategoryDesktopModules(PortalSettings.PortalId, bookmarCategory, searchTerm);

            var filteredList = bookmarCategory == category ? bookmarkCategoryModules.OrderBy(m => m.Key).Union(bookmarkedModules.OrderBy(m => m.Key)).Distinct()
                                            : Controller.GetCategoryDesktopModules(PortalSettings.PortalId, category, searchTerm).OrderBy(m => m.Key);

            if (!string.IsNullOrEmpty(excludeCategories))
            {
                var excludeList = excludeCategories.ToLowerInvariant().Split(',');
                filteredList =
                    filteredList.Where(kvp =>
                        !excludeList.Contains(kvp.Value.DesktopModule.Category.ToLowerInvariant()));
            }
            if (sortBookmarks)
            {
                //sort bookmarked modules
                filteredList = bookmarkedModules.OrderBy(m => m.Key).Concat(filteredList.Except(bookmarkedModules));
                //move Html on top
                filteredList = (filteredList.Where(m => m.Key.ToLowerInvariant() == topModule.ToLowerInvariant())).
                                Concat(filteredList.Except((filteredList.Where(m => m.Key.ToLowerInvariant() == topModule.ToLowerInvariant()))));
            }

            filteredList = filteredList
                .Skip(loadingStartIndex)
                .Take(loadingPageSize);

            var result = filteredList.Select(kvp => new ModuleDefDTO
            {
                ModuleID = kvp.Value.DesktopModuleID,
                ModuleName = kvp.Key,
                ModuleImage = GetDeskTopModuleImage(kvp.Value.DesktopModuleID),
                Bookmarked = bookmarkedModules.Any(m => m.Key == kvp.Key),
                ExistsInBookmarkCategory = bookmarkCategoryModules.Any(m => m.Key == kvp.Key)
            }).ToList();
            return Request.CreateResponse(HttpStatusCode.OK, result);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetPortalSettings">
          <declaration><![CDATA[private PortalSettings GetPortalSettings(string portal)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="488" sc="9" el="510" ec="10">InternalServices\ControlBarController.cs</location>
            <body hash="39d5643620feab753176a3c4e6685b9e"><![CDATA[{
            var portalSettings = PortalSettings.Current;

            try
            {

                if (!string.IsNullOrEmpty(portal))
                {
                    var selectedPortalId = int.Parse(portal);
                    if (PortalSettings.PortalId != selectedPortalId)
                    {
                        portalSettings = new PortalSettings(selectedPortalId);
                    }
                }

            }
            catch (Exception)
            {
                portalSettings = PortalSettings.Current;
            }

            return portalSettings;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetTabModuleImage">
          <declaration><![CDATA[private string GetTabModuleImage(int tabId, int moduleId)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="540" sc="9" el="555" ec="10">InternalServices\ControlBarController.cs</location>
            <body hash="0e9fcd93d7ba4911adb1928372925c1a"><![CDATA[{
            var tabModules = ModuleController.Instance.GetTabModules(tabId);
            var portalDesktopModules = DesktopModuleController.GetDesktopModules(PortalSettings.Current.PortalId);
            var moduleDefnitions = ModuleDefinitionController.GetModuleDefinitions();
            var packages = PackageController.Instance.GetExtensionPackages(PortalSettings.Current.PortalId);

            string imageUrl = (from pkgs in packages
                               join portMods in portalDesktopModules on pkgs.PackageID equals portMods.Value.PackageID
                               join modDefs in moduleDefnitions on portMods.Value.DesktopModuleID equals modDefs.Value.DesktopModuleID
                               join tabMods in tabModules on modDefs.Value.DesktopModuleID equals tabMods.Value.DesktopModuleID
                               where tabMods.Value.ModuleID == moduleId
                               select pkgs.IconFile).FirstOrDefault();

            imageUrl = String.IsNullOrEmpty(imageUrl) ? Globals.ImagePath + DefaultExtensionImage : imageUrl;
            return System.Web.VirtualPathUtility.ToAbsolute(imageUrl);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetTabModules">
          <declaration><![CDATA[public HttpResponseMessage GetTabModules(string tab)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="200" sc="9" el="220" ec="10">InternalServices\ControlBarController.cs</location>
            <body hash="ffb2c34363918c57e36164060765be5b"><![CDATA[{
            int tabID;

            if (Int32.TryParse(tab, out tabID))
            {
                var result = new List<ModuleDefDTO>();
                if (tabID > 0)
                {
                    var pageModules = GetModules(tabID);

                    Dictionary<int, string> resultDict = pageModules.ToDictionary(module => module.ModuleID, module => module.ModuleTitle);
                    result.AddRange(from kvp in resultDict
                                    let imageUrl = GetTabModuleImage(tabID, kvp.Key)
                                    select new ModuleDefDTO { ModuleID = kvp.Key, ModuleName = kvp.Value, ModuleImage = imageUrl }
                                    );
                }
                return Request.CreateResponse(HttpStatusCode.OK, result);
            }

            return Request.CreateResponse(HttpStatusCode.InternalServerError);
        }]]></body>
          </codeblock>
        </method>
        <method name="ModuleSupportsSharing">
          <declaration><![CDATA[private bool ModuleSupportsSharing(ModuleInfo moduleInfo)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="513" sc="9" el="522" ec="10">InternalServices\ControlBarController.cs</location>
            <body hash="5ad12648c83b456ca5a9e23c87f8a8c9"><![CDATA[{
            switch (moduleInfo.DesktopModule.Shareable)
            {
                case ModuleSharing.Supported:
                case ModuleSharing.Unknown:
                    return moduleInfo.IsShareable;
                default:
                    return false;
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="RecycleApplicationPool">
          <declaration><![CDATA[public HttpResponseMessage RecycleApplicationPool()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="370" sc="9" el="381" ec="10">InternalServices\ControlBarController.cs</location>
            <body hash="803e4af8145a73255730e6d8c14e23e5"><![CDATA[{
            if (UserController.Instance.GetCurrentUserInfo().IsSuperUser)
            {
                var log = new LogInfo { BypassBuffering = true, LogTypeKey = EventLogController.EventLogType.HOST_ALERT.ToString() };
                log.AddProperty("Message", "UserRestart");
                LogController.Instance.AddLog(log);
                Config.Touch();
                return Request.CreateResponse(HttpStatusCode.OK, new { Success = true });
            }

            return Request.CreateResponse(HttpStatusCode.InternalServerError);
        }]]></body>
          </codeblock>
        </method>
        <method name="SaveBookmark">
          <declaration><![CDATA[public HttpResponseMessage SaveBookmark(ControlBarController.BookmarkDTO bookmark)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="470" sc="9" el="476" ec="10">InternalServices\ControlBarController.cs</location>
            <body hash="7b1a529b6ec1a85513ab5e08e6104f50"><![CDATA[{
            if (string.IsNullOrEmpty(bookmark.Bookmark)) bookmark.Bookmark = string.Empty;

            Controller.SaveBookMark(PortalSettings.PortalId, UserInfo.UserID, bookmark.Title, bookmark.Bookmark);

            return Request.CreateResponse(HttpStatusCode.OK, new { Success = true });
        }]]></body>
          </codeblock>
        </method>
        <method name="SwitchLanguage">
          <declaration><![CDATA[public HttpResponseMessage SwitchLanguage(ControlBarController.SwitchLanguageDTO dto)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="419" sc="9" el="446" ec="10">InternalServices\ControlBarController.cs</location>
            <body hash="b55ebb2c78c18c91047f1754ccf23391"><![CDATA[{
            try
            {
                if (PortalSettings.AllowUserUICulture && PortalSettings.ContentLocalizationEnabled)
                {
                    if ((!string.IsNullOrEmpty(dto.Language)))
                    {
                        var personalizationController = new DotNetNuke.Services.Personalization.PersonalizationController();
                        var personalization = personalizationController.LoadProfile(UserInfo.UserID, PortalSettings.PortalId);
                        personalization.Profile["Usability:UICulture"] = dto.Language;
                        personalization.IsModified = true;
                        personalizationController.SaveProfile(personalization);
                        return Request.CreateResponse(HttpStatusCode.OK, new { Success = true });
                    }
                }
                
            }
            catch (System.Threading.ThreadAbortException)
            {
                //Do nothing we are not logging ThreadAbortxceptions caused by redirects      
            }
            catch (Exception ex)
            {
                Exceptions.LogException(ex);
            }

            return Request.CreateResponse(HttpStatusCode.InternalServerError);
        }]]></body>
          </codeblock>
        </method>
        <method name="SwitchSite">
          <declaration><![CDATA[public HttpResponseMessage SwitchSite(ControlBarController.SwitchSiteDTO dto)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="387" sc="9" el="414" ec="10">InternalServices\ControlBarController.cs</location>
            <body hash="ac4c7456e618e50facbdb041486690c3"><![CDATA[{
            if (UserController.Instance.GetCurrentUserInfo().IsSuperUser)
            {
                try
                {
                    if ((!string.IsNullOrEmpty(dto.Site)))
                    {
                        int selectedPortalID = int.Parse(dto.Site);
                        var portalAliases = PortalAliasController.Instance.GetPortalAliasesByPortalId(selectedPortalID).ToList();

                        if ((portalAliases.Count > 0 && (portalAliases[0] != null)))
                        {
                            return Request.CreateResponse(HttpStatusCode.OK, new { RedirectURL = Globals.AddHTTP(((PortalAliasInfo)portalAliases[0]).HTTPAlias) });
                        }
                    }
                }
                catch (System.Threading.ThreadAbortException)
                {
                    //Do nothing we are not logging ThreadAbortxceptions caused by redirects      
                }
                catch (Exception ex)
                {
                    Exceptions.LogException(ex);
                }
            }

            return Request.CreateResponse(HttpStatusCode.InternalServerError);
        }]]></body>
          </codeblock>
        </method>
        <method name="ToggleUserMode">
          <declaration><![CDATA[public HttpResponseMessage ToggleUserMode(ControlBarController.UserModeDTO userMode)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="452" sc="9" el="458" ec="10">InternalServices\ControlBarController.cs</location>
            <body hash="7dee0edceb937849489e5770f105363d"><![CDATA[{
            if (userMode == null)
                userMode = new UserModeDTO { UserMode = "VIEW" };

            ToggleUserMode(userMode.UserMode);
            return Request.CreateResponse(HttpStatusCode.OK, new { Success = true });
        }]]></body>
          </codeblock>
        </method>
        <method name="ToggleUserMode">
          <declaration><![CDATA[private void ToggleUserMode(string mode)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="479" sc="9" el="485" ec="10">InternalServices\ControlBarController.cs</location>
            <body hash="6050fb7481204272b23ab75ba868f0a2"><![CDATA[{
            var personalizationController = new DotNetNuke.Services.Personalization.PersonalizationController();
            var personalization = personalizationController.LoadProfile(UserInfo.UserID, PortalSettings.PortalId);
            personalization.Profile["Usability:UserMode" + PortalSettings.PortalId] = mode.ToUpper();
            personalization.IsModified = true;
            personalizationController.SaveProfile(personalization);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_nameDics">
          <declaration><![CDATA[private IDictionary<string, string> _nameDics;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="Controller">
          <declaration><![CDATA[private readonly IControlBarController Controller;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="DefaultExtensionImage">
          <declaration><![CDATA[private const string DefaultExtensionImage = "icon_extensions_32px.png";]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="Logger">
          <declaration><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof(ControlBarController));]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="CountryRegionController">
      <declaration><![CDATA[public class CountryRegionController : DnnApiController]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public CountryRegionController()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="Countries">
          <declaration><![CDATA[public HttpResponseMessage Countries()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="21" sc="3" el="26" ec="4">InternalServices\CountryRegionController.cs</location>
            <body hash="9a6421fbbf718cc859caf76b09593870"><![CDATA[{
			var searchString = (HttpContext.Current.Request.Params["SearchString"] ?? "").NormalizeString();
            var countries = CachedCountryList.GetCountryList(Thread.CurrentThread.CurrentCulture.Name);
			return Request.CreateResponse(HttpStatusCode.OK, countries.Values.Where(
                x => x.NormalizedFullName.IndexOf(searchString, StringComparison.CurrentCulture) > -1).OrderBy(x => x.NormalizedFullName));
		}]]></body>
          </codeblock>
        </method>
        <method name="Regions">
          <declaration><![CDATA[public HttpResponseMessage Regions(int country)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="36" sc="3" el="47" ec="4">InternalServices\CountryRegionController.cs</location>
            <body hash="31d8ae1e5b4d3966b0d950ba825b8c1d"><![CDATA[{
			List<Region> res = new List<Region>();
			foreach (ListEntryInfo r in (new ListController()).GetListEntryInfoItems("Region").Where(l => l.ParentID == country))
			{
				res.Add(new Region
				{
					Text = r.Text,
					Value = r.EntryID.ToString()
				});
			}
			return Request.CreateResponse(HttpStatusCode.OK, res.OrderBy(r => r.Text));
		}]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="EventLogServiceController">
      <declaration><![CDATA[public class EventLogServiceController : DnnApiController]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public EventLogServiceController()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
        <constructor name=".cctor">
          <declaration><![CDATA[static EventLogServiceController()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="41" sc="9" el="41" ec="114">InternalServices\EventLogServiceController.cs</location>
            <body hash="8de54c6933e014b3910c72842aca1647"><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof(EventLogServiceController))]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="GetLogDetails">
          <declaration><![CDATA[public HttpResponseMessage GetLogDetails(string guid)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="46" sc="9" el="73" ec="10">InternalServices\EventLogServiceController.cs</location>
            <body hash="45c91501ef039ff57b74098d6db67ff2"><![CDATA[{
            Guid logId;
            if (string.IsNullOrEmpty(guid) || !Guid.TryParse(guid, out logId))
            {
                return Request.CreateResponse(HttpStatusCode.BadRequest);
            }

            try
            {
                var logInfo = new LogInfo {LogGUID = guid};
                logInfo = EventLogController.Instance.GetSingleLog(logInfo, LoggingProvider.ReturnType.LogInfoObjects) as LogInfo;
                if (logInfo == null)
                {
                    return Request.CreateResponse(HttpStatusCode.BadRequest);
                }

                return Request.CreateResponse(HttpStatusCode.OK, new
                                                                     {
                                                                         Title = Localization.GetSafeJSString("CriticalError.Error", Localization.SharedResourceFile),
                                                                         Content = GetPropertiesText(logInfo)
                                                                     });
            }
            catch (Exception ex)
            {
                Logger.Error(ex);
                return Request.CreateResponse(HttpStatusCode.BadRequest);
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="GetPropertiesText">
          <declaration><![CDATA[private string GetPropertiesText(LogInfo logInfo)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="76" sc="9" el="95" ec="10">InternalServices\EventLogServiceController.cs</location>
            <body hash="2e1f45e041dcb016632ac3cde0c3668c"><![CDATA[{
            var objLogProperties = logInfo.LogProperties;
            var str = new StringBuilder();
            int i;
            for (i = 0; i <= objLogProperties.Count - 1; i++)
            {
                //display the values in the Panel child controls.
                var ldi = (LogDetailInfo)objLogProperties[i];
                if (ldi.PropertyName == "Message")
                {
                    str.Append("<p><strong>" + ldi.PropertyName + "</strong>:</br><pre>" + HttpUtility.HtmlEncode(ldi.PropertyValue) + "</pre></p>");
                }
                else
                {
                    str.Append("<p><strong>" + ldi.PropertyName + "</strong>:" + HttpUtility.HtmlEncode(ldi.PropertyValue) + "</p>");
                }
            }
            str.Append("<p><b>Server Name</b>: " + HttpUtility.HtmlEncode(logInfo.LogServerName) + "</p>");
            return str.ToString();
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="Logger">
          <declaration><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof(EventLogServiceController));]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="FileUploadController">
      <declaration><![CDATA[public class FileUploadController : DnnApiController]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public FileUploadController()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
        <constructor name=".cctor">
          <declaration><![CDATA[static FileUploadController()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="62" sc="9" el="345" ec="134">InternalServices\FileUploadController.cs</location>
            <body hash="017cc8e38d7d031d318c25256c930b26"><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof(FileUploadController));
        private static readonly Regex UserFolderEx = new Regex(@"users/\d+/\d+/(\d+)/", RegexOptions.Compiled | RegexOptions.IgnoreCase);

        public class FolderItemDTO
        {
            public int FolderId { get; set; }
            public string FileFilter { get; set; }
            public bool Required { get; set; }
        }

        public class SavedFileDTO
        {
            public string FileId { get; set; }
            public string FilePath { get; set; }
        }

        [HttpPost]
        public HttpResponseMessage LoadFiles(FolderItemDTO folderItem)
        {
            int effectivePortalId = PortalSettings.PortalId;
            

            if (folderItem.FolderId <= 0)
            {
                return Request.CreateResponse(HttpStatusCode.BadRequest);
            }

            var folder = FolderManager.Instance.GetFolder(folderItem.FolderId);

            if (folder == null)
            {
                return Request.CreateResponse(HttpStatusCode.BadRequest);
            }

            int userId;
            if (IsUserFolder(folder.FolderPath, out userId))
            {
                var user = UserController.GetUserById(effectivePortalId, userId);
                if (user != null && user.IsSuperUser)
                {
                    effectivePortalId = Null.NullInteger;
                }
                else
                {
                    effectivePortalId = PortalController.GetEffectivePortalId(effectivePortalId);
                }
            }

            var list = Globals.GetFileList(effectivePortalId, folderItem.FileFilter, !folderItem.Required, folder.FolderPath);
            var fileItems = list.OfType<FileItem>().ToList();

            return Request.CreateResponse(HttpStatusCode.OK, fileItems);
        }

        [HttpGet]
        public HttpResponseMessage LoadImage(string fileId)
        {
            if (!string.IsNullOrEmpty(fileId))
            {
                int file;
                if (int.TryParse(fileId, out file))
                {
                    var imageUrl = ShowImage(file);
                    return Request.CreateResponse(HttpStatusCode.OK, imageUrl);
                }
            }

            return Request.CreateResponse(HttpStatusCode.InternalServerError);
        }

        [HttpPost]
        [IFrameSupportedValidateAntiForgeryToken]
        public Task<HttpResponseMessage> PostFile()
        {
            HttpRequestMessage request = Request;

            if (!request.Content.IsMimeMultipartContent())
            {
                throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType); 
            }

            var provider = new MultipartMemoryStreamProvider();

            // local references for use in closure
            var portalSettings = PortalSettings;
            var currentSynchronizationContext = SynchronizationContext.Current;
            var userInfo = UserInfo;
            var task = request.Content.ReadAsMultipartAsync(provider)
                .ContinueWith(o =>
                    {
                        string folder = string.Empty;
                        string filter = string.Empty;
                        string fileName = string.Empty;
                        bool overwrite = false;
                        bool isHostMenu = false;
                        bool extract = false;
                        Stream stream = null;
                        var returnFileDto = new SavedFileDTO();

                        foreach (var item in provider.Contents)
                        {
                            var name = item.Headers.ContentDisposition.Name;
                            switch (name.ToUpper())
                            {
                                case "\"FOLDER\"":
                                    folder = item.ReadAsStringAsync().Result ?? "";
                                    break;

                                case "\"FILTER\"":
                                    filter = item.ReadAsStringAsync().Result ?? "";
                                    break;

                                case "\"OVERWRITE\"":
                                    bool.TryParse(item.ReadAsStringAsync().Result, out overwrite);
                                    break;

                                case "\"ISHOSTMENU\"":
                                    bool.TryParse(item.ReadAsStringAsync().Result, out isHostMenu);
                                    break;

                                case "\"EXTRACT\"":
                                    bool.TryParse(item.ReadAsStringAsync().Result, out extract);
                                    break;

                                case "\"POSTFILE\"":
                                    fileName = item.Headers.ContentDisposition.FileName.Replace("\"", "");
                                    if (fileName.IndexOf("\\", StringComparison.Ordinal) != -1)
                                    {
                                        fileName = Path.GetFileName(fileName);
                                    }
                                    stream = item.ReadAsStreamAsync().Result;
                                    break;
                            }
                        }

                        var errorMessage = "";
                        var alreadyExists = false;
                        if (!string.IsNullOrEmpty(fileName) && stream != null)
                        {
                            // Everything ready
                            
                            // The SynchronizationContext keeps the main thread context. Send method is synchronous
                            currentSynchronizationContext.Send(
                                delegate
                                    {
                                        returnFileDto = SaveFile(stream, portalSettings, userInfo, folder, filter, fileName, overwrite, isHostMenu, extract, out alreadyExists, out errorMessage);
                                    },null
                                );
                            
                        }

                        /* Response Content Type cannot be application/json 
                         * because IE9 with iframe-transport manages the response 
                         * as a file download 
                         */
                        var mediaTypeFormatter = new JsonMediaTypeFormatter();
                        mediaTypeFormatter.SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/plain"));

                        if (!string.IsNullOrEmpty(errorMessage))
                        {
                            return Request.CreateResponse(
                                HttpStatusCode.BadRequest,
                                new
                                {
                                    AlreadyExists = alreadyExists,
                                    Message = string.Format(GetLocalizedString("ErrorMessage"), fileName, errorMessage)
                                }, mediaTypeFormatter, "text/plain");
                        }
                        
                        return Request.CreateResponse(HttpStatusCode.OK, returnFileDto, mediaTypeFormatter, "text/plain");
                    });

            return task; 
        }

        private static SavedFileDTO SaveFile(
                Stream stream,
                PortalSettings portalSettings,
                UserInfo userInfo,
                string folder,
                string filter,
                string fileName,
                bool overwrite,
                bool isHostMenu,
                bool extract,
                out bool alreadyExists,
                out string errorMessage)
        {
            alreadyExists = false;
            var savedFileDto = new SavedFileDTO();
            try
            {
                var extension = Path.GetExtension(fileName).ValueOrEmpty().Replace(".", "");
                if (!string.IsNullOrEmpty(filter) && !filter.ToLower().Contains(extension.ToLower()))
                {
                    errorMessage = GetLocalizedString("ExtensionNotAllowed");
                    return savedFileDto;
                }
            
                var folderManager = FolderManager.Instance;

                // Check if this is a User Folder
                var effectivePortalId = isHostMenu ? Null.NullInteger : PortalController.GetEffectivePortalId(portalSettings.PortalId);
                int userId;
                var folderInfo = folderManager.GetFolder(effectivePortalId, folder);
                if (IsUserFolder(folder, out userId))
                {
                    var user = UserController.GetUserById(effectivePortalId, userId);
                    if (user != null)
                    {
                        folderInfo = folderManager.GetUserFolder(user);
                    }
                }

                if (!PortalSecurity.IsInRoles(userInfo, portalSettings, folderInfo.FolderPermissions.ToString("WRITE")) 
                    && !PortalSecurity.IsInRoles(userInfo, portalSettings, folderInfo.FolderPermissions.ToString("ADD")))
                {
                    errorMessage = GetLocalizedString("NoPermission");
                    return savedFileDto;
                }

                if (!overwrite && FileManager.Instance.FileExists(folderInfo, fileName, true))
                {
                    errorMessage = GetLocalizedString("AlreadyExists");
                    alreadyExists = true;
                    savedFileDto.FilePath = Path.Combine(folderInfo.PhysicalPath, fileName);
                    return savedFileDto;
                }

	            var contentType = FileContentTypeManager.Instance.GetContentType(Path.GetExtension(fileName));
				var file = FileManager.Instance.AddFile(folderInfo, fileName, stream, true, false, contentType, userInfo.UserID);

                if (extract && extension.ToLower() == "zip")
                {
                    FileManager.Instance.UnzipFile(file);
                    FileManager.Instance.DeleteFile(file);
                }

                errorMessage = "";
                savedFileDto.FileId = file.FileId.ToString(CultureInfo.InvariantCulture);
                savedFileDto.FilePath = FileManager.Instance.GetUrl(file);
                return savedFileDto;
            }
            catch (InvalidFileExtensionException)
            {
                errorMessage = GetLocalizedString("ExtensionNotAllowed");
                return savedFileDto;
            }
            catch (Exception ex)
            {
                Logger.Error(ex);
                errorMessage = ex.Message;
                return savedFileDto;
            }
        }

        private static string GetLocalizedString(string key)
        {
            const string resourceFile = "/App_GlobalResources/FileUpload.resx";
            return Localization.GetString(key, resourceFile);
        }

        private static bool IsUserFolder(string folderPath, out int userId)
        {
            var match = UserFolderEx.Match(folderPath);
            userId = match.Success ? int.Parse(match.Groups[1].Value) : Null.NullInteger;

            return match.Success;
        }

        private static string ShowImage(int fileId)
        {
            var image = (FileInfo)FileManager.Instance.GetFile(fileId);

            if (image != null && IsImageExtension(image.Extension))
            {
                var imageUrl = FileManager.Instance.GetUrl(image);
                return imageUrl;
            }

            return null;
        }

        private static readonly List<string> ImageExtensions = new List<string> { "JPG", "JPE", "BMP", "GIF", "PNG", "JPEG", "ICO" };]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="GetFileName">
          <declaration><![CDATA[private string GetFileName(WebResponse response)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="709" sc="3" el="717" ec="4">InternalServices\FileUploadController.cs</location>
            <body hash="822089a4676f641b03070d4e94d62db4"><![CDATA[{
			if (!response.Headers.AllKeys.Contains("Content-Disposition"))
			{
				return string.Empty;
			}

			var contentDisposition = response.Headers["Content-Disposition"];
			return new ContentDisposition(contentDisposition).FileName;
		}]]></body>
          </codeblock>
        </method>
        <method name="GetLocalizedString">
          <declaration><![CDATA[private static string GetLocalizedString(string key)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="319" sc="9" el="322" ec="10">InternalServices\FileUploadController.cs</location>
            <body hash="b802e9175c5853e64fdad2cf9e48770b"><![CDATA[{
            const string resourceFile = "/App_GlobalResources/FileUpload.resx";
            return Localization.GetString(key, resourceFile);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetUrl">
          <declaration><![CDATA[public static string GetUrl(int fileId)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="397" sc="9" el="400" ec="10">InternalServices\FileUploadController.cs</location>
            <body hash="e2610d0f2aaf4e52a1c764cbb211b891"><![CDATA[{
            var file = FileManager.Instance.GetFile(fileId, true);
            return FileManager.Instance.GetUrl(file);
        }]]></body>
          </codeblock>
        </method>
        <method name="IsImage">
          <declaration><![CDATA[private static bool IsImage(string fileName)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="353" sc="9" el="356" ec="10">InternalServices\FileUploadController.cs</location>
            <body hash="41df8cb5a2f26c5630d33ff63d961527"><![CDATA[{
            var name = fileName.ToUpper();
            return ImageExtensions.Any(extension => name.EndsWith("." + extension));
        }]]></body>
          </codeblock>
        </method>
        <method name="IsImageExtension">
          <declaration><![CDATA[private static bool IsImageExtension(string extension)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="348" sc="9" el="350" ec="10">InternalServices\FileUploadController.cs</location>
            <body hash="cc9e9619930bfe559533d262391714cc"><![CDATA[{
            return ImageExtensions.Contains(extension.ToUpper());
        }]]></body>
          </codeblock>
        </method>
        <method name="IsUserFolder">
          <declaration><![CDATA[private static bool IsUserFolder(string folderPath, out int userId)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="325" sc="9" el="330" ec="10">InternalServices\FileUploadController.cs</location>
            <body hash="c8299c384e02e2956594977388e719a0"><![CDATA[{
            var match = UserFolderEx.Match(folderPath);
            userId = match.Success ? int.Parse(match.Groups[1].Value) : Null.NullInteger;

            return match.Success;
        }]]></body>
          </codeblock>
        </method>
        <method name="LoadFiles">
          <declaration><![CDATA[public HttpResponseMessage LoadFiles(FileUploadController.FolderItemDTO folderItem)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="80" sc="9" el="114" ec="10">InternalServices\FileUploadController.cs</location>
            <body hash="c316449ac8aacbf5abfca1f0f064a6d6"><![CDATA[{
            int effectivePortalId = PortalSettings.PortalId;
            

            if (folderItem.FolderId <= 0)
            {
                return Request.CreateResponse(HttpStatusCode.BadRequest);
            }

            var folder = FolderManager.Instance.GetFolder(folderItem.FolderId);

            if (folder == null)
            {
                return Request.CreateResponse(HttpStatusCode.BadRequest);
            }

            int userId;
            if (IsUserFolder(folder.FolderPath, out userId))
            {
                var user = UserController.GetUserById(effectivePortalId, userId);
                if (user != null && user.IsSuperUser)
                {
                    effectivePortalId = Null.NullInteger;
                }
                else
                {
                    effectivePortalId = PortalController.GetEffectivePortalId(effectivePortalId);
                }
            }

            var list = Globals.GetFileList(effectivePortalId, folderItem.FileFilter, !folderItem.Required, folder.FolderPath);
            var fileItems = list.OfType<FileItem>().ToList();

            return Request.CreateResponse(HttpStatusCode.OK, fileItems);
        }]]></body>
          </codeblock>
        </method>
        <method name="LoadImage">
          <declaration><![CDATA[public HttpResponseMessage LoadImage(string fileId)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="118" sc="9" el="130" ec="10">InternalServices\FileUploadController.cs</location>
            <body hash="adf445d7e13b428d53c6e4b32fcffc04"><![CDATA[{
            if (!string.IsNullOrEmpty(fileId))
            {
                int file;
                if (int.TryParse(fileId, out file))
                {
                    var imageUrl = ShowImage(file);
                    return Request.CreateResponse(HttpStatusCode.OK, imageUrl);
                }
            }

            return Request.CreateResponse(HttpStatusCode.InternalServerError);
        }]]></body>
          </codeblock>
        </method>
        <method name="PostFile">
          <declaration><![CDATA[public Task<HttpResponseMessage> PostFile()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="135" sc="9" el="235" ec="10">InternalServices\FileUploadController.cs</location>
            <body hash="2f2c1bc2055730f5d5257edacecd2074"><![CDATA[{
            HttpRequestMessage request = Request;

            if (!request.Content.IsMimeMultipartContent())
            {
                throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType); 
            }

            var provider = new MultipartMemoryStreamProvider();

            // local references for use in closure
            var portalSettings = PortalSettings;
            var currentSynchronizationContext = SynchronizationContext.Current;
            var userInfo = UserInfo;
            var task = request.Content.ReadAsMultipartAsync(provider)
                .ContinueWith(o =>
                    {
                        string folder = string.Empty;
                        string filter = string.Empty;
                        string fileName = string.Empty;
                        bool overwrite = false;
                        bool isHostMenu = false;
                        bool extract = false;
                        Stream stream = null;
                        var returnFileDto = new SavedFileDTO();

                        foreach (var item in provider.Contents)
                        {
                            var name = item.Headers.ContentDisposition.Name;
                            switch (name.ToUpper())
                            {
                                case "\"FOLDER\"":
                                    folder = item.ReadAsStringAsync().Result ?? "";
                                    break;

                                case "\"FILTER\"":
                                    filter = item.ReadAsStringAsync().Result ?? "";
                                    break;

                                case "\"OVERWRITE\"":
                                    bool.TryParse(item.ReadAsStringAsync().Result, out overwrite);
                                    break;

                                case "\"ISHOSTMENU\"":
                                    bool.TryParse(item.ReadAsStringAsync().Result, out isHostMenu);
                                    break;

                                case "\"EXTRACT\"":
                                    bool.TryParse(item.ReadAsStringAsync().Result, out extract);
                                    break;

                                case "\"POSTFILE\"":
                                    fileName = item.Headers.ContentDisposition.FileName.Replace("\"", "");
                                    if (fileName.IndexOf("\\", StringComparison.Ordinal) != -1)
                                    {
                                        fileName = Path.GetFileName(fileName);
                                    }
                                    stream = item.ReadAsStreamAsync().Result;
                                    break;
                            }
                        }

                        var errorMessage = "";
                        var alreadyExists = false;
                        if (!string.IsNullOrEmpty(fileName) && stream != null)
                        {
                            // Everything ready
                            
                            // The SynchronizationContext keeps the main thread context. Send method is synchronous
                            currentSynchronizationContext.Send(
                                delegate
                                    {
                                        returnFileDto = SaveFile(stream, portalSettings, userInfo, folder, filter, fileName, overwrite, isHostMenu, extract, out alreadyExists, out errorMessage);
                                    },null
                                );
                            
                        }

                        /* Response Content Type cannot be application/json 
                         * because IE9 with iframe-transport manages the response 
                         * as a file download 
                         */
                        var mediaTypeFormatter = new JsonMediaTypeFormatter();
                        mediaTypeFormatter.SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/plain"));

                        if (!string.IsNullOrEmpty(errorMessage))
                        {
                            return Request.CreateResponse(
                                HttpStatusCode.BadRequest,
                                new
                                {
                                    AlreadyExists = alreadyExists,
                                    Message = string.Format(GetLocalizedString("ErrorMessage"), fileName, errorMessage)
                                }, mediaTypeFormatter, "text/plain");
                        }
                        
                        return Request.CreateResponse(HttpStatusCode.OK, returnFileDto, mediaTypeFormatter, "text/plain");
                    });

            return task; 
        }]]></body>
          </codeblock>
        </method>
        <method name="SaveFile">
          <declaration><![CDATA[private static FileUploadController.SavedFileDTO SaveFile(Stream stream, PortalSettings portalSettings, UserInfo userInfo, string folder, string filter, string fileName, bool overwrite, bool isHostMenu, bool extract, out bool alreadyExists, out string errorMessage)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="249" sc="9" el="316" ec="10">InternalServices\FileUploadController.cs</location>
            <body hash="10b1b8a6ed838ac81c2453e9b02928ea"><![CDATA[{
            alreadyExists = false;
            var savedFileDto = new SavedFileDTO();
            try
            {
                var extension = Path.GetExtension(fileName).ValueOrEmpty().Replace(".", "");
                if (!string.IsNullOrEmpty(filter) && !filter.ToLower().Contains(extension.ToLower()))
                {
                    errorMessage = GetLocalizedString("ExtensionNotAllowed");
                    return savedFileDto;
                }
            
                var folderManager = FolderManager.Instance;

                // Check if this is a User Folder
                var effectivePortalId = isHostMenu ? Null.NullInteger : PortalController.GetEffectivePortalId(portalSettings.PortalId);
                int userId;
                var folderInfo = folderManager.GetFolder(effectivePortalId, folder);
                if (IsUserFolder(folder, out userId))
                {
                    var user = UserController.GetUserById(effectivePortalId, userId);
                    if (user != null)
                    {
                        folderInfo = folderManager.GetUserFolder(user);
                    }
                }

                if (!PortalSecurity.IsInRoles(userInfo, portalSettings, folderInfo.FolderPermissions.ToString("WRITE")) 
                    && !PortalSecurity.IsInRoles(userInfo, portalSettings, folderInfo.FolderPermissions.ToString("ADD")))
                {
                    errorMessage = GetLocalizedString("NoPermission");
                    return savedFileDto;
                }

                if (!overwrite && FileManager.Instance.FileExists(folderInfo, fileName, true))
                {
                    errorMessage = GetLocalizedString("AlreadyExists");
                    alreadyExists = true;
                    savedFileDto.FilePath = Path.Combine(folderInfo.PhysicalPath, fileName);
                    return savedFileDto;
                }

	            var contentType = FileContentTypeManager.Instance.GetContentType(Path.GetExtension(fileName));
				var file = FileManager.Instance.AddFile(folderInfo, fileName, stream, true, false, contentType, userInfo.UserID);

                if (extract && extension.ToLower() == "zip")
                {
                    FileManager.Instance.UnzipFile(file);
                    FileManager.Instance.DeleteFile(file);
                }

                errorMessage = "";
                savedFileDto.FileId = file.FileId.ToString(CultureInfo.InvariantCulture);
                savedFileDto.FilePath = FileManager.Instance.GetUrl(file);
                return savedFileDto;
            }
            catch (InvalidFileExtensionException)
            {
                errorMessage = GetLocalizedString("ExtensionNotAllowed");
                return savedFileDto;
            }
            catch (Exception ex)
            {
                Logger.Error(ex);
                errorMessage = ex.Message;
                return savedFileDto;
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="ShowImage">
          <declaration><![CDATA[private static string ShowImage(int fileId)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="333" sc="9" el="343" ec="10">InternalServices\FileUploadController.cs</location>
            <body hash="610558b96f1bc27fcc0a570cb2df0301"><![CDATA[{
            var image = (FileInfo)FileManager.Instance.GetFile(fileId);

            if (image != null && IsImageExtension(image.Extension))
            {
                var imageUrl = FileManager.Instance.GetUrl(image);
                return imageUrl;
            }

            return null;
        }]]></body>
          </codeblock>
        </method>
        <method name="UploadFile">
          <declaration><![CDATA[private static FileUploadController.FileUploadDto UploadFile(Stream stream, PortalSettings portalSettings, UserInfo userInfo, string folder, string filter, string fileName, bool overwrite, bool isHostPortal, bool extract)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="412" sc="9" el="538" ec="10">InternalServices\FileUploadController.cs</location>
            <body hash="748b3ef47917e1647aa1a162e1f0ebf0"><![CDATA[{
            var result = new FileUploadDto();
            BinaryReader reader = null;
            Stream fileContent = null;
            try
            {
                var extension = Path.GetExtension(fileName).ValueOrEmpty().Replace(".", "");
                result.FileIconUrl = IconController.GetFileIconUrl(extension);

                if (!string.IsNullOrEmpty(filter) && !filter.ToLower().Contains(extension.ToLower()))
                {
                    result.Message = GetLocalizedString("ExtensionNotAllowed");
                    return result;
                }

                var folderManager = FolderManager.Instance;

                var effectivePortalId = isHostPortal ? Null.NullInteger : portalSettings.PortalId;

                // Check if this is a User Folder                
                int userId;
                var folderInfo = folderManager.GetFolder(effectivePortalId, folder);
                if (IsUserFolder(folder, out userId))
                {
                    var user = UserController.GetUserById(effectivePortalId, userId);
                    if (user != null)
                    {
                        folderInfo = folderManager.GetUserFolder(user);
                    }
                }

                if (!FolderPermissionController.HasFolderPermission(portalSettings.PortalId, folder, "WRITE")
                    && !FolderPermissionController.HasFolderPermission(portalSettings.PortalId, folder, "ADD"))
                {
                    result.Message = GetLocalizedString("NoPermission");
                    return result;
                }

                IFileInfo file;

                if (!overwrite && FileManager.Instance.FileExists(folderInfo, fileName, true))
                {
                    result.Message = GetLocalizedString("AlreadyExists");
                    result.AlreadyExists = true;
                    file = FileManager.Instance.GetFile(folderInfo, fileName, true);
                    result.FileId = file.FileId;
                }
                else
                {
                    file = FileManager.Instance.AddFile(folderInfo, fileName, stream, true, false,
                                                        FileContentTypeManager.Instance.GetContentType(Path.GetExtension(fileName)),
                                                        userInfo.UserID);
                    if (extract && extension.ToLower() == "zip")
                    {
                        var destinationFolder = FolderManager.Instance.GetFolder(file.FolderId);
                        var invalidFiles = new List<string>();
                        var filesCount = FileManager.Instance.UnzipFile(file, destinationFolder, invalidFiles);

                        var invalidFilesJson = invalidFiles.Count > 0
                            ? string.Format("\"{0}\"", string.Join("\",\"", invalidFiles))
                            : string.Empty;
                        result.Prompt = string.Format("{{\"invalidFiles\":[{0}], \"totalCount\": {1}}}", invalidFilesJson, filesCount);
                    }
                    result.FileId = file.FileId;
                }

                fileContent = FileManager.Instance.GetFileContent(file);

                var path = GetUrl(result.FileId);
                using (reader = new BinaryReader(fileContent))
                {
                    Size size;
                    if (IsImage(fileName))
                    {
                        try
                        {
                            size = ImageHeader.GetDimensions(reader);
                        }
                        catch (ArgumentException exc)
                        {
                            Logger.Warn("Unable to get image dimensions for image file", exc);
                            size = new Size(32, 32);
                        }
                    }
                    else
                    {
                        size = new Size(32, 32);
                    }

                    result.Orientation = size.Orientation();
                }

                result.Path = result.FileId > 0 ? path : string.Empty;
                result.FileName = fileName;

                if (extract && extension.ToLower() == "zip")
                {
                    FileManager.Instance.DeleteFile(file);
                }

                return result;
            }
            catch (InvalidFileExtensionException)
            { 
                result.Message = GetLocalizedString("ExtensionNotAllowed");
                return result;
            }
            catch (Exception exe)
            {
                Logger.Error(exe);
                result.Message = exe.Message;
                return result;
            }
            finally
            {
                if (reader != null)
                {
                    reader.Close();
                    reader.Dispose();
                }
                if (fileContent != null)
                {
                    fileContent.Close();
                    fileContent.Dispose();
                }
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="UploadFromLocal">
          <declaration><![CDATA[public Task<HttpResponseMessage> UploadFromLocal()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="544" sc="9" el="635" ec="10">InternalServices\FileUploadController.cs</location>
            <body hash="60d07bc491e2df56d306cd738bf21fc9"><![CDATA[{
            var request = Request;
            FileUploadDto result = null;
            if (!request.Content.IsMimeMultipartContent())
            {
                throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);
            }

            var provider = new MultipartMemoryStreamProvider();

            // local references for use in closure
            var portalSettings = PortalSettings;
            var currentSynchronizationContext = SynchronizationContext.Current;
            var userInfo = UserInfo;
            var task = request.Content.ReadAsMultipartAsync(provider)
                .ContinueWith(o =>
                {
                    var folder = string.Empty;
                    var filter = string.Empty;
                    var fileName = string.Empty;
                    var overwrite = false;
                    var isHostPortal = false;
                    var extract = false;
                    Stream stream = null;

                    foreach (var item in provider.Contents)
                    {
                        var name = item.Headers.ContentDisposition.Name;
                        switch (name.ToUpper())
                        {
                            case "\"FOLDER\"":
                                folder = item.ReadAsStringAsync().Result ?? "";
                                break;

                            case "\"FILTER\"":
                                filter = item.ReadAsStringAsync().Result ?? "";
                                break;

                            case "\"OVERWRITE\"":
                                bool.TryParse(item.ReadAsStringAsync().Result, out overwrite);
                                break;

                            case "\"ISHOSTPORTAL\"":
                                bool.TryParse(item.ReadAsStringAsync().Result, out isHostPortal);
                                break;

                            case "\"EXTRACT\"":
                                bool.TryParse(item.ReadAsStringAsync().Result, out extract);
                                break;

                            case "\"POSTFILE\"":
                                fileName = item.Headers.ContentDisposition.FileName.Replace("\"", "");
                                if (fileName.IndexOf("\\", StringComparison.Ordinal) != -1)
                                {
                                    fileName = Path.GetFileName(fileName);
                                }
                                if (Globals.FileEscapingRegex.Match(fileName).Success==false )
                                    {
                                        stream = item.ReadAsStreamAsync().Result;
                                    }
                                break;
                        }
                    }

                    if (!string.IsNullOrEmpty(fileName) && stream != null)
                    {
                        // The SynchronizationContext keeps the main thread context. Send method is synchronous
                        currentSynchronizationContext.Send(
                            delegate
                            {
                                result = UploadFile(stream, portalSettings, userInfo, folder, filter, fileName, overwrite, isHostPortal, extract);
                            },
                            null
                        );
                    }

                    var mediaTypeFormatter = new JsonMediaTypeFormatter();
                    mediaTypeFormatter.SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/plain"));

                    /* Response Content Type cannot be application/json 
                     * because IE9 with iframe-transport manages the response 
                     * as a file download 
                     */
                    return Request.CreateResponse(
                        HttpStatusCode.OK,
                        result,
                        mediaTypeFormatter,
                        "text/plain");
                });

            return task;
        }]]></body>
          </codeblock>
        </method>
        <method name="UploadFromUrl">
          <declaration><![CDATA[public HttpResponseMessage UploadFromUrl(FileUploadController.UploadByUrlDto dto)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="641" sc="9" el="706" ec="10">InternalServices\FileUploadController.cs</location>
            <body hash="68a297ede9b165d9289ad52c7749fb16"><![CDATA[{
            FileUploadDto result;
            WebResponse response = null;
            Stream responseStream = null;
            var mediaTypeFormatter = new JsonMediaTypeFormatter();
            mediaTypeFormatter.SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/plain"));

            if (VerifySafeUrl(dto.Url) == false)
            {
                return Request.CreateResponse(HttpStatusCode.BadRequest);
            }


            try
            {
                var request = (HttpWebRequest)WebRequest.Create(dto.Url);
                request.Credentials = CredentialCache.DefaultCredentials;
                response = request.GetResponse();
                responseStream = response.GetResponseStream();
                if (responseStream == null)
                {
                    throw new Exception("No server response");
                }

	            var fileName = GetFileName(response);
	            if (string.IsNullOrEmpty(fileName))
	            {
		            fileName = HttpUtility.UrlDecode(new Uri(dto.Url).Segments.Last());
	            }
	            result = UploadFile(responseStream, PortalSettings, UserInfo, dto.Folder.ValueOrEmpty(), dto.Filter.ValueOrEmpty(),
                    fileName, dto.Overwrite, dto.IsHostMenu, dto.Unzip);

                /* Response Content Type cannot be application/json 
                    * because IE9 with iframe-transport manages the response 
                    * as a file download 
                    */
                return Request.CreateResponse(
                    HttpStatusCode.OK,
                    result,
                    mediaTypeFormatter,
                    "text/plain");
            }
            catch (Exception ex)
            {
                result = new FileUploadDto
                {
                    Message = ex.Message
                };
                return Request.CreateResponse(
                    HttpStatusCode.OK,
                    result,
                    mediaTypeFormatter,
                    "text/plain");
            }
            finally
            {
                if (response != null)
                {
                    response.Close();
                }
                if (responseStream != null)
                {
                    responseStream.Close();
                }
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="VerifySafeUrl">
          <declaration><![CDATA[private bool VerifySafeUrl(string url)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="720" sc="9" el="752" ec="10">InternalServices\FileUploadController.cs</location>
            <body hash="5942221cffc3f7adc7b01d01f458b5ba"><![CDATA[{
            Uri uri = new Uri(url);
            if (uri.Scheme == "http" || uri.Scheme == "https")
            {

                if (!uri.Host.Contains("."))
                {
                    return false;
                }
                if (uri.IsLoopback)
                {
                    return false;
                }
                if (uri.PathAndQuery.Contains("#") || uri.PathAndQuery.Contains(":"))
                {
                    return false;
                }

                if (uri.Host.StartsWith("10") || uri.Host.StartsWith("172") || uri.Host.StartsWith("192"))
                {
                    //check nonroutable IP addresses
                    if (NetworkUtils.IsIPInRange(uri.Host, "10.0.0.0", "8") ||
                        NetworkUtils.IsIPInRange(uri.Host, "172.16.0.0", "12") ||
                        NetworkUtils.IsIPInRange(uri.Host, "192.168.0.0", "16"))
                    {
                        return false;
                    }
                }

                return true;
            }
            return false;
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="ImageExtensions">
          <declaration><![CDATA[private static readonly List<string> ImageExtensions = new List<string>]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="Logger">
          <declaration><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof(FileUploadController));]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="UserFolderEx">
          <declaration><![CDATA[private static readonly Regex UserFolderEx = new Regex("users/\\d+/\\d+/(\\d+)/", RegexOptions.IgnoreCase | RegexOptions.Compiled);]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="ImageHeader">
      <declaration><![CDATA[public static class ImageHeader]]></declaration>
      <documentation>
        <summary>
     Taken from http://stackoverflow.com/questions/111345/getting-image-dimensions-without-reading-the-entire-file/111349
     Minor improvements including supporting unsigned 16-bit integers when decoding Jfif and added logic
     to load the image using new Bitmap if reading the headers fails
 </summary>
      </documentation>
      <constructors>
        <constructor name=".cctor">
          <declaration><![CDATA[static ImageHeader()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="18" sc="3" el="26" ec="6">InternalServices\ImageHeader.cs</location>
            <body hash="91a4acf981f00df21f99058cd21c4351"><![CDATA[private static readonly Dictionary<byte[], Func<BinaryReader, Size>> ImageFormatDecoders = new Dictionary
			<byte[], Func<BinaryReader, Size>>
			{
				{new byte[] {0x42, 0x4D}, DecodeBitmap},
				{new byte[] {0x47, 0x49, 0x46, 0x38, 0x37, 0x61}, DecodeGif},
				{new byte[] {0x47, 0x49, 0x46, 0x38, 0x39, 0x61}, DecodeGif},
				{new byte[] {0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A}, DecodePng},
				{new byte[] {0xff, 0xd8}, DecodeJfif},
			};]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="DecodeBitmap">
          <declaration><![CDATA[private static Size DecodeBitmap(BinaryReader binaryReader)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="131" sc="3" el="136" ec="4">InternalServices\ImageHeader.cs</location>
            <body hash="6161926de6dd0e59a7b22b82cf38ab87"><![CDATA[{
			binaryReader.ReadBytes(16);
			var width = binaryReader.ReadInt32();
			var height = binaryReader.ReadInt32();
			return new Size(width, height);
		}]]></body>
          </codeblock>
        </method>
        <method name="DecodeGif">
          <declaration><![CDATA[private static Size DecodeGif(BinaryReader binaryReader)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="139" sc="3" el="143" ec="4">InternalServices\ImageHeader.cs</location>
            <body hash="060d19b43ac22755a1689152d1223619"><![CDATA[{
			int width = binaryReader.ReadInt16();
			int height = binaryReader.ReadInt16();
			return new Size(width, height);
		}]]></body>
          </codeblock>
        </method>
        <method name="DecodeJfif">
          <declaration><![CDATA[private static Size DecodeJfif(BinaryReader binaryReader)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="154" sc="3" el="177" ec="4">InternalServices\ImageHeader.cs</location>
            <body hash="59d927e14794e60851f33f61e2b755ac"><![CDATA[{
			while (binaryReader.ReadByte() == 0xff)
			{
				byte marker = binaryReader.ReadByte();
				short chunkLength = ReadLittleEndianInt16(binaryReader);
                if (marker == 0xc0 || marker == 0xc2)
				{
					binaryReader.ReadByte();
					int height = ReadLittleEndianInt16(binaryReader);
					int width = ReadLittleEndianInt16(binaryReader);
					return new Size(width, height);
				}
				if (chunkLength < 0)
				{
					var uchunkLength = (ushort) chunkLength;
					binaryReader.ReadBytes(uchunkLength - 2);
				}
				else
				{
					binaryReader.ReadBytes(chunkLength - 2);
				}
			}
			throw new ArgumentException(ErrorMessage);
		}]]></body>
          </codeblock>
        </method>
        <method name="DecodePng">
          <declaration><![CDATA[private static Size DecodePng(BinaryReader binaryReader)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="146" sc="3" el="151" ec="4">InternalServices\ImageHeader.cs</location>
            <body hash="b2a71ed955195c22920517af88327901"><![CDATA[{
			binaryReader.ReadBytes(8);
			var width = ReadLittleEndianInt32(binaryReader);
			var height = ReadLittleEndianInt32(binaryReader);
			return new Size(width, height);
		}]]></body>
          </codeblock>
        </method>
        <method name="GetDimensions">
          <declaration><![CDATA[public static Size GetDimensions(string path)]]></declaration>
          <documentation>
            <summary>
     Gets the dimensions of an image.
 </summary>
 <param name="path">The path of the image to get the dimensions of.</param>
 <returns>The dimensions of the specified image.</returns>
 <exception cref="T:System.ArgumentException">The image was of an unrecognised format.</exception></documentation>
          <codeblock>
            <location sl="36" sc="3" el="62" ec="4">InternalServices\ImageHeader.cs</location>
            <body hash="9d1ac3df470ee61ed907fadc78b3d4d3"><![CDATA[{
			Size size;
			try
			{
				using (var binaryReader = new BinaryReader(File.OpenRead(path)))
				{
					try
					{
						size = GetDimensions(binaryReader);
					}
					catch (ArgumentException e)
					{
						var newMessage = string.Format("{0} file: '{1}' ", ErrorMessage, path);
						throw new ArgumentException(newMessage, "path", e);
					}
				}
			}
			catch (ArgumentException)
			{
				//do it the old fashioned way
				using (var b = new Bitmap(path))
				{
					size = b.Size;
				}
			}
			return size;
		}]]></body>
          </codeblock>
        </method>
        <method name="GetDimensions">
          <declaration><![CDATA[public static Size GetDimensions(BinaryReader binaryReader)]]></declaration>
          <documentation>
            <summary>
     Gets the dimensions of an image.
 </summary>
 <param name="binaryReader">The path of the image to get the dimensions of.</param>
 <returns>The dimensions of the specified image.</returns>
 <exception cref="T:System.ArgumentException">The image was of an unrecognised format.</exception></documentation>
          <codeblock>
            <location sl="71" sc="3" el="86" ec="4">InternalServices\ImageHeader.cs</location>
            <body hash="5ff1f2c7aa1fff303595a89ed7cda81e"><![CDATA[{
			int maxMagicBytesLength = ImageFormatDecoders.Keys.OrderByDescending(x => x.Length).First().Length;
			var magicBytes = new byte[maxMagicBytesLength];
			for (var i = 0; i < maxMagicBytesLength; i += 1)
			{
				magicBytes[i] = binaryReader.ReadByte();
				foreach (var pair in ImageFormatDecoders)
				{
					if (StartsWith(magicBytes, pair.Key))
					{
						return pair.Value(binaryReader);
					}
				}
			}
			throw new ArgumentException(ErrorMessage, "binaryReader");
		}]]></body>
          </codeblock>
        </method>
        <method name="ReadLittleEndianInt16">
          <declaration><![CDATA[private static short ReadLittleEndianInt16(BinaryReader binaryReader)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="101" sc="3" el="108" ec="4">InternalServices\ImageHeader.cs</location>
            <body hash="7440b823acdf21f892fa04b037147aa2"><![CDATA[{
			var bytes = new byte[sizeof (short)];
			for (var i = 0; i < sizeof (short); i += 1)
			{
				bytes[sizeof (short) - 1 - i] = binaryReader.ReadByte();
			}
			return BitConverter.ToInt16(bytes, 0);
		}]]></body>
          </codeblock>
        </method>
        <method name="ReadLittleEndianInt32">
          <declaration><![CDATA[private static int ReadLittleEndianInt32(BinaryReader binaryReader)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="121" sc="3" el="128" ec="4">InternalServices\ImageHeader.cs</location>
            <body hash="38aba1006d70e863f99c46a8800306ce"><![CDATA[{
			var bytes = new byte[sizeof(int)];
			for (var i = 0; i < sizeof (int); i += 1)
			{
				bytes[sizeof (int) - 1 - i] = binaryReader.ReadByte();
			}
			return BitConverter.ToInt32(bytes, 0);
		}]]></body>
          </codeblock>
        </method>
        <method name="ReadLittleEndianUInt16">
          <declaration><![CDATA[private static ushort ReadLittleEndianUInt16(BinaryReader binaryReader)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="111" sc="3" el="118" ec="4">InternalServices\ImageHeader.cs</location>
            <body hash="7a14f6a30e0c11599a55af387ccfe8a0"><![CDATA[{
			var bytes = new byte[sizeof (ushort)];
			for (var i = 0; i < sizeof (ushort); i += 1)
			{
				bytes[sizeof (ushort) - 1 - i] = binaryReader.ReadByte();
			}
			return BitConverter.ToUInt16(bytes, 0);
		}]]></body>
          </codeblock>
        </method>
        <method name="StartsWith">
          <declaration><![CDATA[private static bool StartsWith(IList<byte> thisBytes, IList<byte> thatBytes)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="89" sc="3" el="98" ec="4">InternalServices\ImageHeader.cs</location>
            <body hash="84ef07eac1165a1a37d79ae0dcb81b00"><![CDATA[{
			for (var i = 0; i < thatBytes.Count; i += 1)
			{
				if (thisBytes[i] != thatBytes[i])
				{
					return false;
				}
			}
			return true;
		}]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="ErrorMessage">
          <declaration><![CDATA[private const string ErrorMessage = "Could not recognize image format.";]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ImageFormatDecoders">
          <declaration><![CDATA[private static readonly Dictionary<byte[], Func<BinaryReader, Size>> ImageFormatDecoders = new Dictionary<byte[], Func<BinaryReader, Size>>]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="ItemListServiceController">
      <declaration><![CDATA[public class ItemListServiceController : DnnApiController]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public ItemListServiceController()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
        <constructor name=".cctor">
          <declaration><![CDATA[static ItemListServiceController()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="50" sc="9" el="50" ec="114">InternalServices\ItemListServiceController.cs</location>
            <body hash="9cb341a622f7cf82e9b5c7069e4237e9"><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof(ItemListServiceController))]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="ApplySort">
          <declaration><![CDATA[private static IEnumerable<ItemListServiceController.ItemDto> ApplySort(IEnumerable<ItemListServiceController.ItemDto> items, int sortOrder)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="1364" sc="9" el="1374" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="7882953c99113794cb0db2316f5f1249"><![CDATA[{
            switch (sortOrder)
            {
                case 1: // sort by a-z
                    return items.OrderBy(item => item.Value).ToList();
                case 2: // sort by z-a
                    return items.OrderByDescending(item => item.Value).ToList();
                default: // no sort
                    return items;
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="FilterTabsByRole">
          <declaration><![CDATA[private List<int> FilterTabsByRole(IList<TabInfo> tabs, string roles, bool disabledNotSelectable)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="927" sc="9" el="948" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="64585b7d5fe6b69d9bb4fed48e80bc68"><![CDATA[{
            var filterTabs = new List<int>();
            if (!string.IsNullOrEmpty(roles))
            {
                var roleList = roles.Split(';').Select(int.Parse);

                filterTabs.AddRange(
                    tabs.Where(
                        t =>
                            t.TabPermissions.Cast<TabPermissionInfo>()
                                .Any(p => roleList.Contains(p.RoleID) && p.UserID == Null.NullInteger && p.PermissionKey == "VIEW" && p.AllowAccess)).ToList()
                        .Where(t => !disabledNotSelectable || !t.DisableLink)
                        .Select(t => t.TabID)
                );
            }
            else
            {
                filterTabs.AddRange(tabs.Where(t => !disabledNotSelectable || !t.DisableLink).Select(t => t.TabID));
            }

            return filterTabs;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetActivePortalId">
          <declaration><![CDATA[private int GetActivePortalId(int pageId)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="1404" sc="9" el="1413" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="c607f978eff28df70a5e9f622d105042"><![CDATA[{
            var page = TabController.Instance.GetTab(pageId, Null.NullInteger, false);
            var portalId = page.PortalID;

            if (portalId == Null.NullInteger)
            {
                portalId = GetActivePortalId();
            }
            return portalId;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetActivePortalId">
          <declaration><![CDATA[private int GetActivePortalId()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="1416" sc="9" el="1422" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="af72c1ba9fcee794a21b80f3a5bbfdd6"><![CDATA[{
            var portalId = -1;
            if (!TabController.CurrentPage.IsSuperTab)
                portalId = PortalSettings.PortalId;

            return portalId;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetChildrenOf">
          <declaration><![CDATA[private static IEnumerable<ItemListServiceController.ItemDto> GetChildrenOf(IEnumerable<TabInfo> tabs, int parentId, IList<int> filterTabs = null)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="601" sc="9" el="609" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="28553e8c030cc54122f20f179c75ced1"><![CDATA[{
            return tabs.Where(tab => tab.ParentId == parentId).Select(tab => new ItemDto
            {
                Key = tab.TabID.ToString(CultureInfo.InvariantCulture),
                Value = tab.LocalizedTabName,
                HasChildren = tab.HasChildren,
                Selectable = filterTabs == null || filterTabs.Contains(tab.TabID)
            }).ToList();
        }]]></body>
          </codeblock>
        </method>
        <method name="GetChildrenOf">
          <declaration><![CDATA[private static IEnumerable<ItemListServiceController.ItemDto> GetChildrenOf(IEnumerable<TabInfo> tabs, string parentId)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="612" sc="9" el="616" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="4e8c26abd243a7b72f0b25e03d71d73f"><![CDATA[{
            int id;
            id = int.TryParse(parentId, out id) ? id : Null.NullInteger;
            return GetChildrenOf(tabs, id);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetFileItemsDto">
          <declaration><![CDATA[private IEnumerable<ItemListServiceController.ItemDto> GetFileItemsDto(int portalId, int parentId, string filter, string searchText, string permission, int sortOrder)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="1254" sc="9" el="1293" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="7c2dce1970ddb2848313c29b959cb81f"><![CDATA[{
            if (portalId > -1)
            {
                if (!IsPortalIdValid(portalId)) return new List<ItemDto>();
            }
            else
            {
                portalId = GetActivePortalId();
            }
            var parentFolder = parentId > -1 ? FolderManager.Instance.GetFolder(parentId) : FolderManager.Instance.GetFolder(portalId, "");

            if (parentFolder == null)
            {
                return new List<ItemDto>();
            }

            var hasPermission = string.IsNullOrEmpty(permission) ?
                (HasPermission(parentFolder, "BROWSE") || HasPermission(parentFolder, "READ")) :
                HasPermission(parentFolder, permission.ToUpper());
            if (!hasPermission) return new List<ItemDto>();

            if (parentId < 1)
            {
                return new List<ItemDto>();
            }

            var files = GetFiles(parentFolder, filter, searchText);

            var filesDto = files.Select(f => new ItemDto
            {
                Key = f.FileId.ToString(CultureInfo.InvariantCulture),
                Value = f.FileName,
                HasChildren = false,
                Selectable = true
            }).ToList();

            var sortedList = ApplySort(filesDto, sortOrder);

            return sortedList;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetFiles">
          <declaration><![CDATA[public HttpResponseMessage GetFiles(int parentId, string filter, int sortOrder = 0, string permission = null, int portalId = -1)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="297" sc="9" el="305" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="28ed45b956ce3777309e27541936f817"><![CDATA[{
            var response = new
            {
                Success = true,
                Tree = GetFilesInternal(portalId, parentId, filter, string.Empty, sortOrder, permission),
                IgnoreRoot = true
            };
            return Request.CreateResponse(HttpStatusCode.OK, response);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetFiles">
          <declaration><![CDATA[private IEnumerable<IFileInfo> GetFiles(IFolderInfo parentFolder, string filter, string searchText)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="1296" sc="9" el="1310" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="80f8253adef2657f073d54f11b35392d"><![CDATA[{
            Func<IFileInfo, bool> searchFunc;
            var filterList = string.IsNullOrEmpty(filter) ? null : filter.ToLowerInvariant().Split(',').ToList();
            if (String.IsNullOrEmpty(searchText))
            {
                searchFunc = f => filterList == null || filterList.Contains(f.Extension.ToLowerInvariant());
            }
            else
            {
                searchFunc = f => f.FileName.IndexOf(searchText, StringComparison.InvariantCultureIgnoreCase) > -1
                                    && (filterList == null || filterList.Contains(f.Extension.ToLowerInvariant()));
            }

            return FolderManager.Instance.GetFiles(parentFolder).Where(f => searchFunc(f));
        }]]></body>
          </codeblock>
        </method>
        <method name="GetFilesInternal">
          <declaration><![CDATA[private NTree<ItemListServiceController.ItemDto> GetFilesInternal(int portalId, int parentId, string filter, string searchText, int sortOrder, string permissions)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="1238" sc="9" el="1243" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="a443167bea6d3de93a83054f4d8d01f1"><![CDATA[{
            var tree = new NTree<ItemDto> { Data = new ItemDto { Key = RootKey } };
            var children = GetFileItemsDto(portalId, parentId, filter, searchText, permissions, sortOrder).Select(dto => new NTree<ItemDto> { Data = dto }).ToList();
            tree.Children = children;
            return tree;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetFolderDescendants">
          <declaration><![CDATA[public HttpResponseMessage GetFolderDescendants(string parentId = null, int sortOrder = 0, string searchText = "", string permission = null, int portalId = -1)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="234" sc="9" el="241" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="55bfb394c12e9f75348f7f3ed389d82c"><![CDATA[{
            var response = new
            {
                Success = true,
                Items = GetFolderDescendantsInternal(portalId, parentId, sortOrder, searchText, permission)
            };
            return Request.CreateResponse(HttpStatusCode.OK, response);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetFolderDescendants">
          <declaration><![CDATA[private IEnumerable<IFolderInfo> GetFolderDescendants(IFolderInfo parentFolder, string searchText, string permission)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="1181" sc="9" el="1197" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="8c657f4df2e4a60208ecd7ff7e5cc0ab"><![CDATA[{
            Func<IFolderInfo, bool> searchFunc;
            if (String.IsNullOrEmpty(searchText))
            {
                searchFunc = folder => true;
            }
            else
            {
                searchFunc = folder => folder.FolderName.IndexOf(searchText, StringComparison.InvariantCultureIgnoreCase) > -1;
            }
            permission = string.IsNullOrEmpty(permission) ? null : permission.ToUpper();
            return FolderManager.Instance.GetFolders(parentFolder).Where(folder =>
                (string.IsNullOrEmpty(permission) ?
                    (HasPermission(folder, "BROWSE") || HasPermission(folder, "READ")) :
                    (HasPermission(folder, permission))
                ) && searchFunc(folder));
        }]]></body>
          </codeblock>
        </method>
        <method name="GetFolderDescendantsInternal">
          <declaration><![CDATA[private IEnumerable<ItemListServiceController.ItemDto> GetFolderDescendantsInternal(int portalId, string parentId, int sortOrder, string searchText, string permission)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="1003" sc="9" el="1007" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="82bb0c9908c744448bb6a4f30909aadf"><![CDATA[{
            int id;
            id = int.TryParse(parentId, out id) ? id : Null.NullInteger;
            return GetFolderDescendantsInternal(portalId, id, sortOrder, searchText, permission);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetFolderDescendantsInternal">
          <declaration><![CDATA[private IEnumerable<ItemListServiceController.ItemDto> GetFolderDescendantsInternal(int portalId, int parentId, int sortOrder, string searchText, string permission)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="1010" sc="9" el="1050" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="7089ba9c3e1f4fbf218924243a8b8d22"><![CDATA[{
            if (portalId > -1)
            {
                if (!IsPortalIdValid(portalId)) return new List<ItemDto>();
            }
            else
            {
                portalId = GetActivePortalId();
            }
            var parentFolder = parentId > -1 ? FolderManager.Instance.GetFolder(parentId) : FolderManager.Instance.GetFolder(portalId, "");

            if (parentFolder == null)
            {
                return new List<ItemDto>();
            }

            var hasPermission = string.IsNullOrEmpty(permission) ?
                (HasPermission(parentFolder, "BROWSE") || HasPermission(parentFolder, "READ")) :
                HasPermission(parentFolder, permission.ToUpper());
            if (!hasPermission) return new List<ItemDto>();

            if (parentId < 1) return new List<ItemDto> { new ItemDto
                {
                    Key = parentFolder.FolderID.ToString(CultureInfo.InvariantCulture), 
                    Value = portalId == -1 ? DynamicSharedConstants.HostRootFolder : DynamicSharedConstants.RootFolder,
                    HasChildren = HasChildren(parentFolder, permission),
                    Selectable = true
                } };

            var childrenFolders = GetFolderDescendants(parentFolder, searchText, permission);

            var folders = childrenFolders.Select(folder => new ItemDto
            {
                Key = folder.FolderID.ToString(CultureInfo.InvariantCulture),
                Value = folder.FolderName,
                HasChildren = HasChildren(folder, permission),
                Selectable = true
            });

            return ApplySort(folders, sortOrder);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetFolders">
          <declaration><![CDATA[public HttpResponseMessage GetFolders(int sortOrder = 0, string permission = null, int portalId = -1)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="245" sc="9" el="253" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="8bc11b8b412f236fe094cf112a112298"><![CDATA[{
            var response = new
            {
                Success = true,
                Tree = GetFoldersInternal(portalId, sortOrder, permission),
                IgnoreRoot = true
            };
            return Request.CreateResponse(HttpStatusCode.OK, response);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetFoldersInternal">
          <declaration><![CDATA[private NTree<ItemListServiceController.ItemDto> GetFoldersInternal(int portalId, int sortOrder, string permissions)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="955" sc="9" el="965" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="22e032e2b51393dc7c25362e7a8ca390"><![CDATA[{
            var tree = new NTree<ItemDto> { Data = new ItemDto { Key = RootKey } };
            var children = ApplySort(GetFolderDescendantsInternal(portalId, -1, sortOrder, string.Empty, permissions), sortOrder).Select(dto => new NTree<ItemDto> { Data = dto }).ToList();
            tree.Children = children;
            foreach (var child in tree.Children)
            {
                children = ApplySort(GetFolderDescendantsInternal(portalId, child.Data.Key, sortOrder, string.Empty, permissions), sortOrder).Select(dto => new NTree<ItemDto> { Data = dto }).ToList();
                child.Children = children;
            }
            return tree;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetMyPortalGroup">
          <declaration><![CDATA[private static IEnumerable<PortalInfo> GetMyPortalGroup()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="1381" sc="9" el="1389" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="435a93a7b5fd73bd50adc1522eaa7618"><![CDATA[{
            var groups = PortalGroupController.Instance.GetPortalGroups().ToArray();
            var mygroup = (from @group in groups
                           select PortalGroupController.Instance.GetPortalsByGroup(@group.PortalGroupId)
                               into portals
                               where portals.Any(x => x.PortalID == PortalSettings.Current.PortalId)
                               select portals.ToArray()).FirstOrDefault();
            return mygroup;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetPageDescendants">
          <declaration><![CDATA[public HttpResponseMessage GetPageDescendants(string parentId = null, int sortOrder = 0, string searchText = "", int portalId = -1, bool includeDisabled = false, bool includeAllTypes = false, bool includeActive = true, bool includeHostPages = false, string roles = "", bool disabledNotSelectable = false)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="90" sc="9" el="98" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="dd2fbc994676102d97e35cf6d0680fd1"><![CDATA[{
            var response = new
            {
                Success = true,
                Items = GetPageDescendantsInternal(portalId, parentId, sortOrder, searchText, 
                    includeDisabled, includeAllTypes, includeActive, includeHostPages, roles, disabledNotSelectable)
            };
            return Request.CreateResponse(HttpStatusCode.OK, response);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetPageDescendantsInPortalGroup">
          <declaration><![CDATA[public HttpResponseMessage GetPageDescendantsInPortalGroup(string parentId = null, int sortOrder = 0, string searchText = "", bool includeDisabled = false, bool includeAllTypes = false, bool includeActive = true, bool includeHostPages = false, string roles = "")]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="190" sc="9" el="197" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="b368245e87b4ee40de4278531f778eda"><![CDATA[{
            var response = new
            {
                Success = true,
                Items = GetPageDescendantsInPortalGroupInternal(parentId, sortOrder, searchText, includeDisabled, includeAllTypes, includeActive, includeHostPages, roles)
            };
            return Request.CreateResponse(HttpStatusCode.OK, response);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetPageDescendantsInPortalGroupInternal">
          <declaration><![CDATA[private IEnumerable<ItemListServiceController.ItemDto> GetPageDescendantsInPortalGroupInternal(string parentId, int sortOrder, string searchText, bool includeDisabled = false, bool includeAllTypes = false, bool includeActive = true, bool includeHostPages = false, string roles = "")]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="369" sc="9" el="397" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="41d50b1caddc3bebf6bef846836bdc79"><![CDATA[{
            if (string.IsNullOrEmpty(parentId))
            {
                return null;
            }
            int portalId;
            int parentIdAsInt;
            if (parentId.StartsWith(PortalPrefix))
            {
                parentIdAsInt = -1;
                if (!int.TryParse(parentId.Replace(PortalPrefix, string.Empty), out portalId))
                {
                    portalId = -1;
                }
                if (!String.IsNullOrEmpty(searchText))
                {
                    return SearchPagesInternal(portalId, searchText, sortOrder, includeDisabled, includeAllTypes, includeActive, includeHostPages, roles).Children.Select(node => node.Data);
                }
            }
            else
            {
                portalId = -1;
                if (!int.TryParse(parentId, out parentIdAsInt))
                {
                    parentIdAsInt = -1;
                }
            }
            return GetPageDescendantsInternal(portalId, parentIdAsInt, sortOrder, searchText, includeDisabled, includeAllTypes, includeActive, includeHostPages, roles);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetPageDescendantsInternal">
          <declaration><![CDATA[private IEnumerable<ItemListServiceController.ItemDto> GetPageDescendantsInternal(int portalId, string parentId, int sortOrder, string searchText, bool includeDisabled = false, bool includeAllTypes = false, bool includeActive = true, bool includeHostPages = false, string roles = "", bool disabledNotSelectable = false)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="402" sc="9" el="406" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="0b6bdee0c7fb912402ca461a2e78ac2b"><![CDATA[{
            int id;
            id = int.TryParse(parentId, out id) ? id : Null.NullInteger;
            return GetPageDescendantsInternal(portalId, id, sortOrder, searchText, includeDisabled , includeAllTypes, includeActive, includeHostPages, roles, disabledNotSelectable);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetPageDescendantsInternal">
          <declaration><![CDATA[private IEnumerable<ItemListServiceController.ItemDto> GetPageDescendantsInternal(int portalId, int parentId, int sortOrder, string searchText, bool includeDisabled = false, bool includeAllTypes = false, bool includeActive = true, bool includeHostPages = false, string roles = "", bool disabledNotSelectable = false)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="411" sc="9" el="480" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="5cebed760d3a83f2aaa9575df4b44d87"><![CDATA[{
            List<TabInfo> tabs;

            if (portalId == -1)
            {
                portalId = GetActivePortalId(parentId);
            }
            else
            {
                if (!IsPortalIdValid(portalId)) return new List<ItemDto>();
            }

            Func<TabInfo, bool> searchFunc;
            if (String.IsNullOrEmpty(searchText))
            {
                searchFunc = page => true;
            }
            else
            {
                searchFunc = page => page.LocalizedTabName.IndexOf(searchText, StringComparison.InvariantCultureIgnoreCase) > -1;
            }

            if (portalId > -1)
            {
                tabs = TabController.GetPortalTabs(portalId, (includeActive) ? Null.NullInteger : PortalSettings.ActiveTab.TabID, false, null, true, false, false, true, false)
                                 .Where(tab => searchFunc(tab) 
                                            && tab.ParentId == parentId 
                                            && (includeDisabled || !tab.DisableLink) 
                                            && (includeAllTypes || tab.TabType == TabType.Normal)
                                            && !tab.IsSystem
                                       )
                                 .OrderBy(tab => tab.TabOrder)
                                 .ToList();

                if (PortalSettings.UserInfo.IsSuperUser && includeHostPages)
                {
                    tabs.AddRange(TabController.Instance.GetTabsByPortal(-1).AsList()
                        .Where(tab => searchFunc(tab) && tab.ParentId == parentId && !tab.IsDeleted && !tab.DisableLink && !tab.IsSystem)
                        .OrderBy(tab => tab.TabOrder)
                        .ToList());
                }
            }
            else
            {
                if (PortalSettings.UserInfo.IsSuperUser)
                {

                    tabs = TabController.Instance.GetTabsByPortal(-1).AsList()
                        .Where(tab => searchFunc(tab) && tab.ParentId == parentId && !tab.IsDeleted && !tab.DisableLink && !tab.IsSystem)
                        .OrderBy(tab => tab.TabOrder)
                        .ToList();
                }
                else
                {
                    return new List<ItemDto>();
                }
            }

            var filterTabs = FilterTabsByRole(tabs, roles, disabledNotSelectable);

            var pages = tabs.Select(tab => new ItemDto
            {
                Key = tab.TabID.ToString(CultureInfo.InvariantCulture),
                Value = tab.LocalizedTabName,
                HasChildren = tab.HasChildren,
                Selectable = filterTabs.Contains(tab.TabID)
            });

            return ApplySort(pages, sortOrder);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetPages">
          <declaration><![CDATA[public HttpResponseMessage GetPages(int sortOrder = 0, int portalId = -1, bool includeDisabled = false, bool includeAllTypes = false, bool includeActive = true, bool includeHostPages = false, string roles = "", bool disabledNotSelectable = false)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="149" sc="9" el="157" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="206bb89232d3cddd18bad867f01278c4"><![CDATA[{
            var response = new
            {
                Success = true,
                Tree = GetPagesInternal(portalId, sortOrder, includeDisabled, includeAllTypes, includeActive, includeHostPages, roles, disabledNotSelectable),
                IgnoreRoot = true
            };
            return Request.CreateResponse(HttpStatusCode.OK, response);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetPagesInPortalGroup">
          <declaration><![CDATA[public HttpResponseMessage GetPagesInPortalGroup(int sortOrder = 0)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="161" sc="9" el="169" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="16196bf6736fdfc464e0166d1ae14c55"><![CDATA[{
            var response = new
            {
                Success = true,
                Tree = GetPagesInPortalGroupInternal(sortOrder),
                IgnoreRoot = true
            };
            return Request.CreateResponse(HttpStatusCode.OK, response);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetPagesInPortalGroupInternal">
          <declaration><![CDATA[private static NTree<ItemListServiceController.ItemDto> GetPagesInPortalGroupInternal(int sortOrder)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="359" sc="9" el="364" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="c6e72733356d9ee0871c1292f7b8ff95"><![CDATA[{
            var treeNode = new NTree<ItemDto> { Data = new ItemDto { Key = RootKey } };
            var portals = GetPortalGroup(sortOrder);
            treeNode.Children = portals.Select(dto => new NTree<ItemDto> { Data = dto }).ToList();
            return treeNode;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetPagesInternal">
          <declaration><![CDATA[private NTree<ItemListServiceController.ItemDto> GetPagesInternal(int portalId, int sortOrder, bool includeDisabled = false, bool includeAllTypes = false, bool includeActive = false, bool includeHostPages = false, string roles = "", bool disabledNotSelectable = false)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="340" sc="9" el="356" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="b66c247f838b735336b821abd8103760"><![CDATA[{
            if (portalId == -1)
            {
                portalId = GetActivePortalId();
            }
			var tabs = GetPortalPages(portalId, includeDisabled, includeAllTypes, includeActive, includeHostPages, roles);
            var sortedTree = new NTree<ItemDto> { Data = new ItemDto { Key = RootKey } };
            if (tabs == null)
            {
                return sortedTree;
            }

            var filterTabs = FilterTabsByRole(tabs, roles, disabledNotSelectable);
            var children = ApplySort(GetChildrenOf(tabs, Null.NullInteger, filterTabs), sortOrder).Select(dto => new NTree<ItemDto> { Data = dto }).ToList();
            sortedTree.Children = children;
            return sortedTree;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetPortalFolders">
          <declaration><![CDATA[private IEnumerable<IFolderInfo> GetPortalFolders(int portalId, string searchText, string permission)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="1200" sc="9" el="1220" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="a5d46d33d362a207a3a7ad443a5ae435"><![CDATA[{
            if (portalId == -1)
            {
                portalId = GetActivePortalId();
            }
            Func<IFolderInfo, bool> searchFunc;
            if (String.IsNullOrEmpty(searchText))
            {
                searchFunc = folder => true;
            }
            else
            {
                searchFunc = folder => folder.FolderName.IndexOf(searchText, StringComparison.InvariantCultureIgnoreCase) > -1;
            }
            permission = string.IsNullOrEmpty(permission) ? null : permission.ToUpper();
            return FolderManager.Instance.GetFolders(portalId).Where(folder =>
                (string.IsNullOrEmpty(permission) ?
                    (HasPermission(folder, "BROWSE") || HasPermission(folder, "READ")) :
                    (HasPermission(folder, permission))
                ) && searchFunc(folder));
        }]]></body>
          </codeblock>
        </method>
        <method name="GetPortalGroup">
          <declaration><![CDATA[private static IEnumerable<ItemListServiceController.ItemDto> GetPortalGroup(int sortOrder)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="914" sc="9" el="924" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="28d3f3deebb10611a769aeb0ae1db0be"><![CDATA[{
            var mygroup = GetMyPortalGroup();
            var portals = mygroup.Select(p => new ItemDto
            {
                Key = PortalPrefix + p.PortalID.ToString(CultureInfo.InvariantCulture),
                Value = p.PortalName,
                HasChildren = true,
                Selectable = false
            }).ToList();
            return ApplySort(portals, sortOrder);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetPortalPages">
          <declaration><![CDATA[private List<TabInfo> GetPortalPages(int portalId, bool includeDisabled = false, bool includeAllTypes = false, bool includeActive = false, bool includeHostPages = false, string roles = "")]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="564" sc="9" el="598" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="7da172d356925615fd9e67d5b8eaacb8"><![CDATA[{
            List<TabInfo> tabs = null;
            if (portalId == -1)
            {
                portalId = GetActivePortalId();
            }
            else
            {
                if (!IsPortalIdValid(portalId))
                {
                    return null;
                }
            }

            if (portalId > -1)
            {
      		tabs = TabController.GetPortalTabs(portalId, (includeActive) ? Null.NullInteger : PortalSettings.ActiveTab.TabID, false, null, true, false, includeAllTypes, true, false)
					.Where(t => (!t.DisableLink || includeDisabled) && !t.IsSystem)
                    .ToList();

                if (PortalSettings.UserInfo.IsSuperUser && includeHostPages)
                {
                    tabs.AddRange(TabController.Instance.GetTabsByPortal(-1).AsList().Where(t => !t.IsDeleted && !t.DisableLink && !t.IsSystem).ToList());
                }
            }
            else
            {
                if (PortalSettings.UserInfo.IsSuperUser)
                {
                    tabs = TabController.Instance.GetTabsByPortal(-1).AsList().Where(t => !t.IsDeleted && !t.DisableLink && !t.IsSystem).ToList();
                }
            }

            return tabs;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetTreePathForFolder">
          <declaration><![CDATA[public HttpResponseMessage GetTreePathForFolder(string itemId, int sortOrder = 0, string permission = null, int portalId = -1)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="269" sc="9" el="277" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="7a03e12e22e121a7536ca1a060389bf3"><![CDATA[{
            var response = new
            {
                Success = true,
                Tree = GetTreePathForFolderInternal(itemId, sortOrder, permission),
                IgnoreRoot = true
            };
            return Request.CreateResponse(HttpStatusCode.OK, response);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetTreePathForFolderInternal">
          <declaration><![CDATA[private NTree<ItemListServiceController.ItemDto> GetTreePathForFolderInternal(string selectedItemId, int sortOrder, string permission)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="1081" sc="9" el="1166" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="31f0902bcbb243c8dd0468dcfa913386"><![CDATA[{
            var tree = new NTree<ItemDto> { Data = new ItemDto { Key = RootKey } };

            int itemId;
            if (string.IsNullOrEmpty(selectedItemId) || !int.TryParse(selectedItemId, out itemId))
            {
                return tree;
            }

            if (itemId <= 0)
            {
                return tree;
            }

            var folder = FolderManager.Instance.GetFolder(itemId);
            if (folder == null)
            {
                return tree;
            }

            var hasPermission = string.IsNullOrEmpty(permission) ?
                (HasPermission(folder, "BROWSE") || HasPermission(folder, "READ")) :
                HasPermission(folder, permission.ToUpper());
            if (!hasPermission) return new NTree<ItemDto>();

            var selfTree = new NTree<ItemDto>
            {
                Data = new ItemDto
                {
                    Key = folder.FolderID.ToString(CultureInfo.InvariantCulture),
                    Value = folder.FolderName,
                    HasChildren = HasChildren(folder, permission),
                    Selectable = true
                }
            };
            var parentId = folder.ParentID;
            var parentFolder = parentId > 0 ? FolderManager.Instance.GetFolder(parentId) : null;

            while (parentFolder != null)
            {
                // load all sibling
                var siblingFolders = GetFolderDescendants(parentFolder, string.Empty, permission)
                    .Select(folderInfo => new ItemDto
                    {
                        Key = folderInfo.FolderID.ToString(CultureInfo.InvariantCulture),
                        Value = folderInfo.FolderName,
                        HasChildren = HasChildren(folderInfo, permission),
                        Selectable = true
                    }).ToList();
                siblingFolders = ApplySort(siblingFolders, sortOrder).ToList();

                var siblingFoldersTree = siblingFolders.Select(f => new NTree<ItemDto> { Data = f }).ToList();

                // attach the tree
                if (selfTree.Children != null)
                {
                    foreach (var node in siblingFoldersTree)
                    {
                        if (node.Data.Key == selfTree.Data.Key)
                        {
                            node.Children = selfTree.Children;
                            break;
                        }
                    }
                }

                selfTree = new NTree<ItemDto>
                {
                    Data = new ItemDto
                    {
                        Key = parentId.ToString(CultureInfo.InvariantCulture),
                        Value = parentFolder.FolderName,
                        HasChildren = true,
                        Selectable = true
                    },
                    Children = siblingFoldersTree
                };

                parentId = parentFolder.ParentID;
                parentFolder = parentId > 0 ? FolderManager.Instance.GetFolder(parentId) : null;
            }
            selfTree.Data.Value = DynamicSharedConstants.RootFolder;

            tree.Children.Add(selfTree);
            return tree;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetTreePathForPage">
          <declaration><![CDATA[public HttpResponseMessage GetTreePathForPage(string itemId, int sortOrder = 0, int portalId = -1, bool includeDisabled = false, bool includeAllTypes = false, bool includeActive = true, bool includeHostPages = false, string roles = "")]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="104" sc="9" el="113" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="94903c41e7003619b8512e6574ac39fb"><![CDATA[{
            var response = new
            {
                Success = true,
                Tree = GetTreePathForPageInternal(portalId, itemId, sortOrder, false,
                    includeDisabled, includeAllTypes, includeActive, includeHostPages, roles),
                IgnoreRoot = true
            };
            return Request.CreateResponse(HttpStatusCode.OK, response);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetTreePathForPageInPortalGroup">
          <declaration><![CDATA[public HttpResponseMessage GetTreePathForPageInPortalGroup(string itemId, int sortOrder = 0, bool includeDisabled = false, bool includeAllTypes = false, bool includeActive = true, bool includeHostPages = false, string roles = "")]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="203" sc="9" el="211" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="84f545c54568079532f79bb1223283d1"><![CDATA[{
            var response = new
            {
                Success = true,
                Tree = GetTreePathForPageInternal(itemId, sortOrder, true, includeDisabled, includeAllTypes, includeActive, includeHostPages, roles),
                IgnoreRoot = true
            };
            return Request.CreateResponse(HttpStatusCode.OK, response);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetTreePathForPageInternal">
          <declaration><![CDATA[private NTree<ItemListServiceController.ItemDto> GetTreePathForPageInternal(int portalId, string itemId, int sortOrder, bool includePortalTree = false, bool includeDisabled = false, bool includeAllTypes = false, bool includeActive = false, bool includeHostPages = false, string roles = "")]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="761" sc="9" el="768" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="4d3303abe566226e57eb424645c4d5dd"><![CDATA[{
            int itemIdAsInt;
            if (string.IsNullOrEmpty(itemId) || !int.TryParse(itemId, out itemIdAsInt))
            {
                itemIdAsInt = Null.NullInteger;
            }
            return GetTreePathForPageInternal(portalId, itemIdAsInt, sortOrder, includePortalTree, includeDisabled, includeAllTypes, includeActive, includeHostPages, roles);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetTreePathForPageInternal">
          <declaration><![CDATA[private NTree<ItemListServiceController.ItemDto> GetTreePathForPageInternal(string itemId, int sortOrder, bool includePortalTree = false, bool includeDisabled = false, bool includeAllTypes = false, bool includeActive = false, bool includeHostPages = false, string roles = "")]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="773" sc="9" el="791" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="168d0163c2a818d5c232271df9ba2f03"><![CDATA[{
            var tree = new NTree<ItemDto> { Data = new ItemDto { Key = RootKey } };
            int itemIdAsInt;
            if (string.IsNullOrEmpty(itemId) || !int.TryParse(itemId, out itemIdAsInt))
            {
                return tree;
            }
            var portals = PortalController.GetPortalDictionary();
            int portalId;
            if (portals.ContainsKey(itemIdAsInt))
            {
                portalId = portals[itemIdAsInt];
            }
            else
            {
                return tree;
            }
            return GetTreePathForPageInternal(portalId, itemIdAsInt, sortOrder, includePortalTree, includeDisabled, includeAllTypes, includeActive, includeHostPages, roles);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetTreePathForPageInternal">
          <declaration><![CDATA[private NTree<ItemListServiceController.ItemDto> GetTreePathForPageInternal(int portalId, int selectedItemId, int sortOrder, bool includePortalTree = false, bool includeDisabled = false, bool includeAllTypes = false, bool includeActive = false, bool includeHostPages = false, string roles = "", bool disabledNotSelectable = false)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="797" sc="9" el="911" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="aba27c323ca9f51bc200ea2639ed5157"><![CDATA[{
            var tree = new NTree<ItemDto> { Data = new ItemDto { Key = RootKey } };

            if (selectedItemId <= 0)
            {
                return tree;
            }

            var pages = GetPortalPages(portalId, includeDisabled, includeAllTypes, includeActive, includeHostPages, roles);

            if (pages == null)
            {
                return tree;
            }

            var page = pages.SingleOrDefault(pageInfo => pageInfo.TabID == selectedItemId);

            if (page == null)
            {
                return tree;
            }

            var selfTree = new NTree<ItemDto>
            {
                Data = new ItemDto
                {
                    Key = page.TabID.ToString(CultureInfo.InvariantCulture),
                    Value = page.LocalizedTabName,
                    HasChildren = page.HasChildren,
                    Selectable = true
                }
            };

            var parentId = page.ParentId;
            var parentTab = parentId > 0 ? pages.SingleOrDefault(t => t.TabID == parentId) : null;
            var filterTabs = FilterTabsByRole(pages, roles, disabledNotSelectable);
            while (parentTab != null)
            {
                // load all sibiling
                var siblingTabs = GetChildrenOf(pages, parentId, filterTabs);
                siblingTabs = ApplySort(siblingTabs, sortOrder);
                var siblingTabsTree = siblingTabs.Select(t => new NTree<ItemDto> { Data = t }).ToList();

                // attach the tree
                if (selfTree.Children != null)
                {
                    foreach (var node in siblingTabsTree)
                    {
                        if (node.Data.Key == selfTree.Data.Key)
                        {
                            node.Children = selfTree.Children;
                            break;
                        }
                    }
                }

                selfTree = new NTree<ItemDto>
                {
                    Data = new ItemDto
                    {
                        Key = parentId.ToString(CultureInfo.InvariantCulture),
                        Value = parentTab.LocalizedTabName,
                        HasChildren = true,
                        Selectable = true
                    },
                    Children = siblingTabsTree
                };

                parentId = parentTab.ParentId;
                parentTab = parentId > 0 ? pages.SingleOrDefault(t => t.TabID == parentId) : null;
            }

            // retain root pages
            var rootTabs = GetChildrenOf(pages, Null.NullInteger, filterTabs);
            rootTabs = ApplySort(rootTabs, sortOrder);
            var rootTree = rootTabs.Select(dto => new NTree<ItemDto> { Data = dto }).ToList();

            foreach (var node in rootTree)
            {
                if (node.Data.Key == selfTree.Data.Key)
                {
                    node.Children = selfTree.Children;
                    break;
                }
            }

            if (includePortalTree)
            {
                var myGroup = GetMyPortalGroup();
                var portalTree = myGroup.Select(
                    portal => new NTree<ItemDto>
                    {
                        Data = new ItemDto
                        {
                            Key = PortalPrefix + portal.PortalID.ToString(CultureInfo.InvariantCulture),
                            Value = portal.PortalName,
                            HasChildren = true,
                            Selectable = false
                        }
                    }).ToList();

                foreach (var node in portalTree)
                {
                    if (node.Data.Key == PortalPrefix + portalId.ToString(CultureInfo.InvariantCulture))
                    {
                        node.Children = rootTree;
                        break;
                    }
                }
                rootTree = portalTree;
            }
            tree.Children = rootTree;

            return tree;
        }]]></body>
          </codeblock>
        </method>
        <method name="HasChildren">
          <declaration><![CDATA[private bool HasChildren(IFolderInfo parentFolder, string permission)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="1223" sc="9" el="1231" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="35f5c34a752c706d14a55a0035b88390"><![CDATA[{
            permission = string.IsNullOrEmpty(permission) ? null : permission.ToUpper();
            return FolderManager.Instance.GetFolders(parentFolder).Any(folder =>
                (string.IsNullOrEmpty(permission) ?
                    (HasPermission(folder, "BROWSE") || HasPermission(folder, "READ")) :
                    (HasPermission(folder, permission))
                )
            );
        }]]></body>
          </codeblock>
        </method>
        <method name="HasPermission">
          <declaration><![CDATA[private bool HasPermission(IFolderInfo folder, string permissionKey)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="1169" sc="9" el="1178" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="9aeeb0f0bced43621733d29b841a7904"><![CDATA[{
            var hasPermision = PortalSettings.UserInfo.IsSuperUser;

            if (!hasPermision && folder != null)
            {
                hasPermision = FolderPermissionController.HasFolderPermission(folder.FolderPermissions, permissionKey);
            }

            return hasPermision;
        }]]></body>
          </codeblock>
        </method>
        <method name="IsPortalIdValid">
          <declaration><![CDATA[private bool IsPortalIdValid(int portalId)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="1392" sc="9" el="1401" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="8aea1fcda9d0882cb55133d7324b776f"><![CDATA[{
            if (UserInfo.IsSuperUser) return true;
            if (PortalSettings.PortalId == portalId) return true;

            var isAdminUser = PortalSecurity.IsInRole(PortalSettings.AdministratorRoleName);
            if (!isAdminUser) return false;

            var mygroup = GetMyPortalGroup();
            return (mygroup != null && mygroup.Any(p => p.PortalID == portalId));
        }]]></body>
          </codeblock>
        </method>
        <method name="SearchFiles">
          <declaration><![CDATA[public HttpResponseMessage SearchFiles(int parentId, string filter, string searchText, int sortOrder = 0, string permission = null, int portalId = -1)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="321" sc="9" el="329" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="ab2926a161ca57bef9534bef893a9913"><![CDATA[{
            var response = new
            {
                Success = true,
                Tree = GetFilesInternal(portalId, parentId, filter, searchText, sortOrder, permission),
                IgnoreRoot = true
            };
            return Request.CreateResponse(HttpStatusCode.OK, response);
        }]]></body>
          </codeblock>
        </method>
        <method name="SearchFolders">
          <declaration><![CDATA[public HttpResponseMessage SearchFolders(string searchText, int sortOrder = 0, string permission = null, int portalId = -1)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="281" sc="9" el="289" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="7230859a4ec171ecb8b7de94dc3e0122"><![CDATA[{
            var response = new
            {
                Success = true,
                Tree = string.IsNullOrEmpty(searchText) ? GetFoldersInternal(portalId, sortOrder, permission) : SearchFoldersInternal(portalId, searchText, sortOrder, permission),
                IgnoreRoot = true
            };
            return Request.CreateResponse(HttpStatusCode.OK, response);
        }]]></body>
          </codeblock>
        </method>
        <method name="SearchFoldersInternal">
          <declaration><![CDATA[private NTree<ItemListServiceController.ItemDto> SearchFoldersInternal(int portalId, string searchText, int sortOrder, string permission)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="1053" sc="9" el="1078" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="41e160db3e4f3b3e20a0d60c0b876908"><![CDATA[{
            var tree = new NTree<ItemDto> { Data = new ItemDto { Key = RootKey } };

            if (portalId > -1)
            {
                if (!IsPortalIdValid(portalId))
                {
                    return tree;
                }
            }
            else
            {
                portalId = GetActivePortalId();
            }

            var allFolders = GetPortalFolders(portalId, searchText, permission);
            var folders = allFolders.Select(f => new ItemDto
            {
                Key = f.FolderID.ToString(CultureInfo.InvariantCulture),
                Value = f.FolderName,
                HasChildren = false,
                Selectable = true
            });
            tree.Children = ApplySort(folders, sortOrder).Select(dto => new NTree<ItemDto> { Data = dto }).ToList();
            return tree;
        }]]></body>
          </codeblock>
        </method>
        <method name="SearchPages">
          <declaration><![CDATA[public HttpResponseMessage SearchPages(string searchText, int sortOrder = 0, int portalId = -1, bool includeDisabled = false, bool includeAllTypes = false, bool includeActive = true, bool includeHostPages = false, string roles = "")]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="175" sc="9" el="184" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="1dde131eaa555c5c5f106b058ad2c58a"><![CDATA[{
            var response = new
            {
                Success = true,
                Tree = string.IsNullOrEmpty(searchText) ? GetPagesInternal(portalId, sortOrder, includeDisabled, includeAllTypes, includeActive, includeHostPages, roles, false)
                            : SearchPagesInternal(portalId, searchText, sortOrder, includeDisabled, includeAllTypes, includeActive, includeHostPages, roles),
                IgnoreRoot = true
            };
            return Request.CreateResponse(HttpStatusCode.OK, response);
        }]]></body>
          </codeblock>
        </method>
        <method name="SearchPagesInPortalGroup">
          <declaration><![CDATA[public HttpResponseMessage SearchPagesInPortalGroup(string searchText, int sortOrder = 0, bool includeDisabled = false, bool includeAllTypes = false, bool includeActive = true, bool includeHostPages = false, string roles = "")]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="217" sc="9" el="226" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="fa41ae714619e65491a94304d09ab055"><![CDATA[{
            var response = new
            {
                Success = true,
                Tree = string.IsNullOrEmpty(searchText) ? GetPagesInPortalGroupInternal(sortOrder)
                        : SearchPagesInPortalGroupInternal(searchText, sortOrder, includeDisabled, includeAllTypes, includeActive, includeHostPages, roles),
                IgnoreRoot = true
            };
            return Request.CreateResponse(HttpStatusCode.OK, response);
        }]]></body>
          </codeblock>
        </method>
        <method name="SearchPagesInPortalGroupInternal">
          <declaration><![CDATA[private NTree<ItemListServiceController.ItemDto> SearchPagesInPortalGroupInternal(string searchText, int sortOrder, bool includeDisabled = false, bool includeAllTypes = false, bool includeActive = false, bool includeHostPages = false, string roles = "")]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="643" sc="9" el="657" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="5ad2874363063be7959d622be8581750"><![CDATA[{
            var treeNode = new NTree<ItemDto> { Data = new ItemDto { Key = RootKey } };
            var portals = GetPortalGroup(sortOrder);
            treeNode.Children = portals.Select(dto => new NTree<ItemDto> { Data = dto }).ToList();
            foreach (var child in treeNode.Children)
            {
                int portalId;
                if (int.TryParse(child.Data.Key.Replace(PortalPrefix, string.Empty), out portalId))
                {
                    var pageTree = SearchPagesInternal(portalId, searchText, sortOrder, includeDisabled, includeAllTypes, includeActive, includeHostPages, roles);
                    child.Children = pageTree.Children;
                }
            }
            return treeNode;
        }]]></body>
          </codeblock>
        </method>
        <method name="SearchPagesInPortalGroupInternal">
          <declaration><![CDATA[private NTree<ItemListServiceController.ItemDto> SearchPagesInPortalGroupInternal(string treeAsJson, string searchText, int sortOrder, bool includeDisabled = false, bool includeAllTypes = false, bool includeActive = false, bool includeHostPages = false, string roles = "")]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="662" sc="9" el="693" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="cf5bb8912ff3365764b7159aca180a0c"><![CDATA[{
            var treeNode = new NTree<ItemDto> { Data = new ItemDto { Key = RootKey } };
            var openedNode = DotNetNuke.Common.Utilities.Json.Deserialize<NTree<ItemIdDto>>(treeAsJson);
            if (openedNode == null)
            {
                return treeNode;
            }

            var portals = GetPortalGroup(sortOrder);
            treeNode.Children = portals.Select(dto => new NTree<ItemDto> { Data = dto }).ToList();

            if (!openedNode.HasChildren())
            {
                return treeNode;
            }
            foreach (var openedNodeChild in openedNode.Children)
            {
                var portalIdString = openedNodeChild.Data.Id;
                var treeNodeChild = treeNode.Children.Find(child => String.Equals(child.Data.Key, portalIdString, StringComparison.InvariantCultureIgnoreCase));
                if (treeNodeChild == null)
                {
                    continue;
                }
                int portalId;
                if (int.TryParse(treeNodeChild.Data.Key.Replace(PortalPrefix, string.Empty), out portalId))
                {
                    var pageTree = SearchPagesInternal(portalId, searchText, sortOrder, includeDisabled, includeAllTypes, includeActive, includeHostPages, roles);
                    treeNodeChild.Children = pageTree.Children;
                }
            }
            return treeNode;
        }]]></body>
          </codeblock>
        </method>
        <method name="SearchPagesInternal">
          <declaration><![CDATA[private NTree<ItemListServiceController.ItemDto> SearchPagesInternal(int portalId, string searchText, int sortOrder, bool includeDisabled = false, bool includeAllTypes = false, bool includeActive = true, bool includeHostPages = false, string roles = "", bool disabledNotSelectable = false)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="485" sc="9" el="559" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="1fb064241f1ae9a9e45f50e789f9303e"><![CDATA[{
            var tree = new NTree<ItemDto> { Data = new ItemDto { Key = RootKey } };

            List<TabInfo> tabs;
            if (portalId == -1)
            {
                portalId = GetActivePortalId();
            }
            else
            {
                if (!IsPortalIdValid(portalId))
                {
                    return tree;
                }
            }

            Func<TabInfo, bool> searchFunc;
            if (String.IsNullOrEmpty(searchText))
            {
                searchFunc = page => true;
            }
            else
            {
                searchFunc = page => page.LocalizedTabName.IndexOf(searchText, StringComparison.InvariantCultureIgnoreCase) > -1;
            }

            if (portalId > -1)
            {

                tabs = TabController.Instance.GetTabsByPortal(portalId).Where(tab =>
                                        (includeActive || tab.Value.TabID != PortalSettings.ActiveTab.TabID)
                                        && (includeDisabled || !tab.Value.DisableLink) 
                                        && (includeAllTypes || tab.Value.TabType == TabType.Normal) 
                                        && searchFunc(tab.Value)
                                        && !tab.Value.IsSystem)
                    .OrderBy(tab => tab.Value.TabOrder)
                    .Select(tab => tab.Value)
                    .ToList();

                if (PortalSettings.UserInfo.IsSuperUser && includeHostPages)
                {
                    tabs.AddRange(TabController.Instance.GetTabsByPortal(-1).Where(tab => !tab.Value.DisableLink && searchFunc(tab.Value) && !tab.Value.IsSystem)
                    .OrderBy(tab => tab.Value.TabOrder)
                    .Select(tab => tab.Value)
                    .ToList());
                }
            }
            else
            {
                if (PortalSettings.UserInfo.IsSuperUser)
                {
                    tabs = TabController.Instance.GetTabsByPortal(-1).Where(tab => !tab.Value.DisableLink && searchFunc(tab.Value) && !tab.Value.IsSystem)
                    .OrderBy(tab => tab.Value.TabOrder)
                    .Select(tab => tab.Value)
                    .ToList();
                }
                else
                {
                    return tree;
                }
            }

            var filterTabs = FilterTabsByRole(tabs, roles, disabledNotSelectable);

            var pages = tabs.Select(tab => new ItemDto
            {
                Key = tab.TabID.ToString(CultureInfo.InvariantCulture),
                Value = tab.LocalizedTabName,
                HasChildren = false,
                Selectable = filterTabs.Contains(tab.TabID)
            });

            tree.Children = ApplySort(pages, sortOrder).Select(dto => new NTree<ItemDto> { Data = dto }).ToList();
            return tree;
        }]]></body>
          </codeblock>
        </method>
        <method name="SearchUser">
          <declaration><![CDATA[public HttpResponseMessage SearchUser(string q)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="1332" sc="9" el="1357" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="2b040909dd9ee358adf9c260dec000b0"><![CDATA[{
            try
            {
                var portalId = PortalController.GetEffectivePortalId(PortalSettings.PortalId);
                const int numResults = 5;

                // GetUsersAdvancedSearch doesn't accept a comma or a single quote in the query so we have to remove them for now. See issue 20224.
                q = q.Replace(",", "").Replace("'", "");
                if (q.Length == 0) return Request.CreateResponse<SearchResult>(HttpStatusCode.OK, null);

                var results = UserController.Instance.GetUsersBasicSearch(portalId, 0, numResults, "DisplayName", true, "DisplayName", q)
                    .Select(user => new SearchResult
                    {
                        id = user.UserID,
                        name = user.DisplayName,
                        iconfile = UserController.Instance.GetUserProfilePictureUrl(user.UserID, 32, 32),
                    }).ToList();

                return Request.CreateResponse(HttpStatusCode.OK, results.OrderBy(sr => sr.name));
            }
            catch (Exception exc)
            {
                Logger.Error(exc);
                return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, exc);
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="SortFiles">
          <declaration><![CDATA[public HttpResponseMessage SortFiles(int parentId, string filter, int sortOrder = 0, string searchText = "", string permission = null, int portalId = -1)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="309" sc="9" el="317" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="cf96c5d53dd14f1eb3b6314ce73cdf01"><![CDATA[{
            var response = new
            {
                Success = true,
                Tree = string.IsNullOrEmpty(searchText) ? SortFilesInternal(portalId, parentId, filter, sortOrder, permission) : GetFilesInternal(portalId, parentId, filter, searchText, sortOrder, permission),
                IgnoreRoot = true
            };
            return Request.CreateResponse(HttpStatusCode.OK, response);
        }]]></body>
          </codeblock>
        </method>
        <method name="SortFilesInternal">
          <declaration><![CDATA[private NTree<ItemListServiceController.ItemDto> SortFilesInternal(int portalId, int parentId, string filter, int sortOrder, string permissions)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="1246" sc="9" el="1251" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="15019488fb1485921e338a1dd4bfe62b"><![CDATA[{
            var sortedTree = new NTree<ItemDto> { Data = new ItemDto { Key = RootKey } };
            var children = GetFileItemsDto(portalId, parentId, filter, string.Empty, permissions, sortOrder).Select(dto => new NTree<ItemDto> { Data = dto }).ToList();
            sortedTree.Children = children;
            return sortedTree;
        }]]></body>
          </codeblock>
        </method>
        <method name="SortFolders">
          <declaration><![CDATA[public HttpResponseMessage SortFolders(string treeAsJson, int sortOrder = 0, string searchText = "", string permission = null, int portalId = -1)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="257" sc="9" el="265" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="a1db7be5c71cb05c8842076fc0035753"><![CDATA[{
            var response = new
            {
                Success = true,
                Tree = string.IsNullOrEmpty(searchText) ? SortFoldersInternal(portalId, treeAsJson, sortOrder, permission) : SearchFoldersInternal(portalId, searchText, sortOrder, permission),
                IgnoreRoot = true
            };
            return Request.CreateResponse(HttpStatusCode.OK, response);
        }]]></body>
          </codeblock>
        </method>
        <method name="SortFoldersInternal">
          <declaration><![CDATA[private NTree<ItemListServiceController.ItemDto> SortFoldersInternal(int portalId, string treeAsJson, int sortOrder, string permissions)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="968" sc="9" el="971" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="b95ba1b8e8a20a369608cb66e7256d4c"><![CDATA[{
            var tree = DotNetNuke.Common.Utilities.Json.Deserialize<NTree<ItemIdDto>>(treeAsJson);
            return SortFoldersInternal(portalId, tree, sortOrder, permissions);
        }]]></body>
          </codeblock>
        </method>
        <method name="SortFoldersInternal">
          <declaration><![CDATA[private NTree<ItemListServiceController.ItemDto> SortFoldersInternal(int portalId, NTree<ItemListServiceController.ItemIdDto> openedNodesTree, int sortOrder, string permissions)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="974" sc="9" el="978" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="8e882e1438cf77ca6c1ac6917496c74f"><![CDATA[{
            var sortedTree = new NTree<ItemDto> { Data = new ItemDto { Key = RootKey } };
            SortFoldersRecursevely(portalId, sortedTree, openedNodesTree, sortOrder, permissions);
            return sortedTree;
        }]]></body>
          </codeblock>
        </method>
        <method name="SortFoldersRecursevely">
          <declaration><![CDATA[private void SortFoldersRecursevely(int portalId, NTree<ItemListServiceController.ItemDto> treeNode, NTree<ItemListServiceController.ItemIdDto> openedNode, int sortOrder, string permissions)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="981" sc="9" el="1000" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="ba7fa8d4c01226080751111cb61de3c8"><![CDATA[{
            if (openedNode == null)
            {
                return;
            }
            var children = ApplySort(GetFolderDescendantsInternal(portalId, openedNode.Data.Id, sortOrder, string.Empty, permissions), sortOrder).Select(dto => new NTree<ItemDto> { Data = dto }).ToList();
            treeNode.Children = children;
            if (openedNode.HasChildren())
            {
                foreach (var openedNodeChild in openedNode.Children)
                {
                    var treeNodeChild = treeNode.Children.Find(child => String.Equals(child.Data.Key, openedNodeChild.Data.Id, StringComparison.InvariantCultureIgnoreCase));
                    if (treeNodeChild == null)
                    {
                        continue;
                    }
                    SortFoldersRecursevely(portalId, treeNodeChild, openedNodeChild, sortOrder, permissions);
                }
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="SortPages">
          <declaration><![CDATA[public HttpResponseMessage SortPages(string treeAsJson, int sortOrder = 0, string searchText = "", int portalId = -1, bool includeDisabled = false, bool includeAllTypes = false, bool includeActive = true, bool includeHostPages = false, string roles = "")]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="119" sc="9" el="128" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="42e63bf01527188c9023a8366954bcc4"><![CDATA[{
            var response = new
            {
                Success = true,
                Tree = string.IsNullOrEmpty(searchText) ? SortPagesInternal(portalId, treeAsJson, sortOrder, includeDisabled, includeAllTypes, includeActive, includeHostPages, roles)
                            : SearchPagesInternal(portalId, searchText, sortOrder, includeDisabled, includeAllTypes, includeActive, includeHostPages, roles),
                IgnoreRoot = true
            };
            return Request.CreateResponse(HttpStatusCode.OK, response);
        }]]></body>
          </codeblock>
        </method>
        <method name="SortPagesInPortalGroup">
          <declaration><![CDATA[public HttpResponseMessage SortPagesInPortalGroup(string treeAsJson, int sortOrder = 0, string searchText = "", bool includeDisabled = false, bool includeAllTypes = false, bool includeActive = true, bool includeHostPages = false, string roles = "")]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="134" sc="9" el="143" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="c332c8015aee85c273ec37df8075844c"><![CDATA[{
            var response = new
            {
                Success = true,
                Tree = string.IsNullOrEmpty(searchText) ? SortPagesInPortalGroupInternal(treeAsJson, sortOrder, includeDisabled, includeAllTypes, includeActive, includeHostPages, roles)
                        : SearchPagesInPortalGroupInternal(treeAsJson, searchText, sortOrder, includeDisabled, includeAllTypes, includeActive, includeHostPages, roles),
                IgnoreRoot = true
            };
            return Request.CreateResponse(HttpStatusCode.OK, response);
        }]]></body>
          </codeblock>
        </method>
        <method name="SortPagesInPortalGroupInternal">
          <declaration><![CDATA[private NTree<ItemListServiceController.ItemDto> SortPagesInPortalGroupInternal(string treeAsJson, int sortOrder, bool includeDisabled = false, bool includeAllTypes = false, bool includeActive = false, bool includeHostPages = false, string roles = "")]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="698" sc="9" el="701" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="52985de64099c09d0dadf8ad8bb08cd1"><![CDATA[{
            var tree = DotNetNuke.Common.Utilities.Json.Deserialize<NTree<ItemIdDto>>(treeAsJson);
			return SortPagesInPortalGroupInternal(tree, sortOrder, includeDisabled, includeAllTypes, includeActive, includeHostPages, roles);
        }]]></body>
          </codeblock>
        </method>
        <method name="SortPagesInPortalGroupInternal">
          <declaration><![CDATA[private NTree<ItemListServiceController.ItemDto> SortPagesInPortalGroupInternal(NTree<ItemListServiceController.ItemIdDto> openedNode, int sortOrder, bool includeDisabled = false, bool includeAllTypes = false, bool includeActive = false, bool includeHostPages = false, string roles = "")]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="706" sc="9" el="734" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="101787e731818741ce1a2bb234c750e7"><![CDATA[{
            var treeNode = new NTree<ItemDto> { Data = new ItemDto { Key = RootKey } };
            if (openedNode == null)
            {
                return treeNode;
            }
            var portals = GetPortalGroup(sortOrder);
            treeNode.Children = portals.Select(dto => new NTree<ItemDto> { Data = dto }).ToList();
            if (openedNode.HasChildren())
            {
                foreach (var openedNodeChild in openedNode.Children)
                {
                    var portalIdString = openedNodeChild.Data.Id;
                    var treeNodeChild = treeNode.Children.Find(child => String.Equals(child.Data.Key, portalIdString, StringComparison.InvariantCultureIgnoreCase));
                    if (treeNodeChild == null)
                    {
                        continue;
                    }
                    int portalId;
                    if (!int.TryParse(portalIdString.Replace(PortalPrefix, string.Empty), out portalId))
                    {
                        portalId = -1;
                    }
                    var treeOfPages = SortPagesInternal(portalId, openedNodeChild, sortOrder, includeDisabled, includeAllTypes, includeActive, includeHostPages, roles);
                    treeNodeChild.Children = treeOfPages.Children;
                }
            }
            return treeNode;
        }]]></body>
          </codeblock>
        </method>
        <method name="SortPagesInternal">
          <declaration><![CDATA[private NTree<ItemListServiceController.ItemDto> SortPagesInternal(int portalId, string treeAsJson, int sortOrder, bool includeDisabled = false, bool includeAllTypes = false, bool includeActive = false, bool includeHostPages = false, string roles = "")]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="621" sc="9" el="624" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="ed4ced2503019ead17451fc307feb13a"><![CDATA[{
            var tree = DotNetNuke.Common.Utilities.Json.Deserialize<NTree<ItemIdDto>>(treeAsJson);
            return SortPagesInternal(portalId, tree, sortOrder, includeDisabled, includeAllTypes, includeActive, includeHostPages, roles);
        }]]></body>
          </codeblock>
        </method>
        <method name="SortPagesInternal">
          <declaration><![CDATA[private NTree<ItemListServiceController.ItemDto> SortPagesInternal(int portalId, NTree<ItemListServiceController.ItemIdDto> openedNodesTree, int sortOrder, bool includeDisabled = false, bool includeAllTypes = false, bool includeActive = false, bool includeHostPages = false, string roles = "")]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="629" sc="9" el="638" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="5d306c2a9fa3b8914131563525d9a0c0"><![CDATA[{
			var pages = GetPortalPages(portalId, includeDisabled, includeAllTypes, includeActive, includeHostPages, roles);
            var sortedTree = new NTree<ItemDto> { Data = new ItemDto { Key = RootKey } };
            if (pages == null)
            {
                return sortedTree;
            }
            SortPagesRecursevely(pages, sortedTree, openedNodesTree, sortOrder);
            return sortedTree;
        }]]></body>
          </codeblock>
        </method>
        <method name="SortPagesRecursevely">
          <declaration><![CDATA[private static void SortPagesRecursevely(IEnumerable<TabInfo> tabs, NTree<ItemListServiceController.ItemDto> treeNode, NTree<ItemListServiceController.ItemIdDto> openedNode, int sortOrder)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="737" sc="9" el="756" ec="10">InternalServices\ItemListServiceController.cs</location>
            <body hash="f1e6b48a8501d2828ae66764a98446b2"><![CDATA[{
            if (openedNode == null)
            {
                return;
            }
            var children = ApplySort(GetChildrenOf(tabs, openedNode.Data.Id), sortOrder).Select(dto => new NTree<ItemDto> { Data = dto }).ToList();
            treeNode.Children = children;
            if (openedNode.HasChildren())
            {
                foreach (var openedNodeChild in openedNode.Children)
                {
                    var treeNodeChild = treeNode.Children.Find(child => String.Equals(child.Data.Key, openedNodeChild.Data.Id, StringComparison.InvariantCultureIgnoreCase));
                    if (treeNodeChild == null)
                    {
                        continue;
                    }
                    SortPagesRecursevely(tabs, treeNodeChild, openedNodeChild, sortOrder);
                }
            }
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="Logger">
          <declaration><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof(ItemListServiceController));]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="PortalPrefix">
          <declaration><![CDATA[private const string PortalPrefix = "P-";]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="RootKey">
          <declaration><![CDATA[private const string RootKey = "Root";]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="LanguageServiceController">
      <declaration><![CDATA[public class LanguageServiceController : DnnApiController]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public LanguageServiceController()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="GetNonTranslatedPages">
          <declaration><![CDATA[public HttpResponseMessage GetNonTranslatedPages(string languageCode)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="59" sc="9" el="79" ec="10">InternalServices\LanguageServiceController.cs</location>
            <body hash="1ca3eb186ae5bdf7fb8560cf4c0b8205"><![CDATA[{
            var request = HttpContext.Current.Request;
           var locale = new LocaleController().GetLocale(languageCode);

            List<PageDto> pages = new List<PageDto>();
            if (!IsDefaultLanguage(locale.Code))
            {
                TabController ctl = new TabController();
                var nonTranslated = (from t in ctl.GetTabsByPortal(PortalSettings.PortalId).WithCulture(locale.Code, false).Values where !t.IsTranslated && !t.IsDeleted select t);
                foreach (TabInfo page in nonTranslated)
                {
                    pages.Add(new PageDto()
                    {
                        Name = page.TabName,
                        ViewUrl = DotNetNuke.Common.Globals.NavigateURL(page.TabID),
                        EditUrl = DotNetNuke.Common.Globals.NavigateURL(page.TabID, "Tab", "action=edit", "returntabid=" + PortalSettings.ActiveTab.TabID)
                    });
                }
            }
            return Request.CreateResponse(HttpStatusCode.OK, pages);
        }]]></body>
          </codeblock>
        </method>
        <method name="IsDefaultLanguage">
          <declaration><![CDATA[private bool IsDefaultLanguage(string code)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="53" sc="9" el="55" ec="10">InternalServices\LanguageServiceController.cs</location>
            <body hash="cfca8ac97d8fc2dcbcc4a9fe57e94d72"><![CDATA[{
            return code == PortalSettings.DefaultLanguage;
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="MessagingServiceController">
      <declaration><![CDATA[public class MessagingServiceController : DnnApiController]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public MessagingServiceController()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
        <constructor name=".cctor">
          <declaration><![CDATA[static MessagingServiceController()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="49" sc="6" el="49" ec="113">InternalServices\MessagingServiceController.cs</location>
            <body hash="ed4c90e446dd297894db67b2ea5a9643"><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof (MessagingServiceController))]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="Create">
          <declaration><![CDATA[public HttpResponseMessage Create(MessagingServiceController.CreateDTO postData)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="76" sc="9" el="103" ec="10">InternalServices\MessagingServiceController.cs</location>
            <body hash="d4b41d82e0c78e32a4582ec347e3c664"><![CDATA[{
            try
            {
                var portalId = PortalController.GetEffectivePortalId(PortalSettings.PortalId);
                var roleIdsList = string.IsNullOrEmpty(postData.RoleIds) ? null : postData.RoleIds.FromJson<IList<int>>();
                var userIdsList = string.IsNullOrEmpty(postData.UserIds) ? null : postData.UserIds.FromJson<IList<int>>();
                var fileIdsList = string.IsNullOrEmpty(postData.FileIds) ? null : postData.FileIds.FromJson<IList<int>>();

                var roles = roleIdsList != null && roleIdsList.Count > 0
                    ? roleIdsList.Select(id => RoleController.Instance.GetRole(portalId, r => r.RoleID == id)).Where(role => role != null).ToList()
                    : null;

                List<UserInfo> users = null;
                if (userIdsList != null)
                {
                    users = userIdsList.Select(id => UserController.Instance.GetUser(portalId, id)).Where(user => user != null).ToList();
                }

                var message = new Message { Subject = HttpUtility.UrlDecode(postData.Subject), Body = HttpUtility.UrlDecode(postData.Body) };
                MessagingController.Instance.SendMessage(message, roles, users, fileIdsList);
                return Request.CreateResponse(HttpStatusCode.OK, new { Result = "success", Value = message.MessageID });
            }
            catch (Exception exc)
            {
                Logger.Error(exc);
                return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, exc);
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="Search">
          <declaration><![CDATA[public HttpResponseMessage Search(string q)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="107" sc="9" el="148" ec="10">InternalServices\MessagingServiceController.cs</location>
            <body hash="be5a56bd9117b4890d3736daa4aa1d23"><![CDATA[{
            try
            {
                var portalId = PortalController.GetEffectivePortalId(PortalSettings.PortalId);
                var isAdmin = UserInfo.IsSuperUser || UserInfo.IsInRole("Administrators");
                const int numResults = 10;

                // GetUsersAdvancedSearch doesn't accept a comma or a single quote in the query so we have to remove them for now. See issue 20224.
                q = q.Replace(",", "").Replace("'", "");
                if (q.Length == 0) return Request.CreateResponse<SearchResult>(HttpStatusCode.OK, null);

                var results = UserController.Instance.GetUsersBasicSearch(portalId, 0, numResults, "DisplayName", true, "DisplayName", q)
                    .Select(user => new SearchResult
                    {
                        id = "user-" + user.UserID,
                        name = user.DisplayName,
                        iconfile = UserController.Instance.GetUserProfilePictureUrl(user.UserID, 32, 32)
                    }).ToList();

                //Roles should be visible to Administrators or User in the Role.
                var roles = RoleController.Instance.GetRolesBasicSearch(portalId, numResults, q);
                results.AddRange(from roleInfo in roles
                                    where
                                        isAdmin ||
                                        UserInfo.Social.Roles.SingleOrDefault(ur => ur.RoleID == roleInfo.RoleID && ur.IsOwner) != null
                                    select new SearchResult
                                    {
                                        id = "role-" + roleInfo.RoleID,
                                        name = roleInfo.RoleName,
                                        iconfile = TestableGlobals.Instance.ResolveUrl(string.IsNullOrEmpty(roleInfo.IconFile)
                                                    ? "~/images/no_avatar.gif"
                                                    : PortalSettings.HomeDirectory.TrimEnd('/') + "/" + roleInfo.IconFile)
                                    });

                return Request.CreateResponse(HttpStatusCode.OK, results.OrderBy(sr => sr.name));
            }
            catch (Exception exc)
            {
                Logger.Error(exc);
                return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, exc);
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="WaitTimeForNextMessage">
          <declaration><![CDATA[public HttpResponseMessage WaitTimeForNextMessage()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="52" sc="9" el="62" ec="10">InternalServices\MessagingServiceController.cs</location>
            <body hash="7c24292453f758188c9a5385be923e5a"><![CDATA[{
            try
            {
                return Request.CreateResponse(HttpStatusCode.OK, new { Result = "success", Value = InternalMessagingController.Instance.WaitTimeForNextMessage(UserInfo) });
            }
            catch (Exception exc)
            {
                Logger.Error(exc);
                return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, exc);
            }
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="Logger">
          <declaration><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof(MessagingServiceController));]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="ModuleServiceController">
      <declaration><![CDATA[public class ModuleServiceController : DnnApiController]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public ModuleServiceController()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
        <constructor name=".cctor">
          <declaration><![CDATA[static ModuleServiceController()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="40" sc="6" el="40" ec="110">InternalServices\ModuleServiceController.cs</location>
            <body hash="246d8bc0b814c9fdbf8b331ba5ad347a"><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof (ModuleServiceController))]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="DeleteModule">
          <declaration><![CDATA[public HttpResponseMessage DeleteModule(ModuleServiceController.DeleteModuleDto deleteModuleDto)]]></declaration>
          <documentation>
            <summary>
 Web method that deletes a tab module.
 </summary>
 <remarks>This has been introduced for integration testing purpuses.</remarks>
 <param name="deleteModuleDto">delete module dto</param>
 <returns>Http response message</returns></documentation>
          <codeblock>
            <location sl="126" sc="9" el="130" ec="10">InternalServices\ModuleServiceController.cs</location>
            <body hash="573b9adeacd0f1628a7081823900b9d6"><![CDATA[{
            ModuleController.Instance.DeleteTabModule(deleteModuleDto.TabId, deleteModuleDto.ModuleId, deleteModuleDto.SoftDelete);

            return Request.CreateResponse(HttpStatusCode.OK);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetModuleShareable">
          <declaration><![CDATA[public HttpResponseMessage GetModuleShareable(int moduleId, int tabId, int portalId = -1)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="59" sc="9" el="89" ec="10">InternalServices\ModuleServiceController.cs</location>
            <body hash="70dcc305cef38329ac1cc91ddbe38ca2"><![CDATA[{
            var requiresWarning = false;
            if (portalId == -1)
            {
                var portalDict = PortalController.GetPortalDictionary();
                portalId = portalDict[tabId];
            }

            DesktopModuleInfo desktopModule;
            if (tabId < 0)
            {
                desktopModule = DesktopModuleController.GetDesktopModule(moduleId, portalId);
            }
            else
            {
                var moduleInfo = ModuleController.Instance.GetModule(moduleId, tabId, false);

                desktopModule = moduleInfo.DesktopModule;

                requiresWarning = moduleInfo.PortalID != PortalSettings.PortalId && desktopModule.Shareable == ModuleSharing.Unknown;
            }

            if (desktopModule == null)
            {
                var message = string.Format("Cannot find module ID {0} (tab ID {1}, portal ID {2})", moduleId, tabId, portalId);
                Logger.Error(message);
                return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, message);
            }

            return Request.CreateResponse(HttpStatusCode.OK, new {Shareable = desktopModule.Shareable.ToString(), RequiresWarning = requiresWarning});
        }]]></body>
          </codeblock>
        </method>
        <method name="MoveModule">
          <declaration><![CDATA[public HttpResponseMessage MoveModule(ModuleServiceController.MoveModuleDTO postData)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="95" sc="9" el="114" ec="10">InternalServices\ModuleServiceController.cs</location>
            <body hash="d644a1e56df37d6aa859390c85d64b60"><![CDATA[{
	        var moduleOrder = postData.ModuleOrder;
	        if (moduleOrder > 0)
	        {
				//DNN-7099: the deleted modules won't show in page, so when the module index calculated from client, it will lost the 
				//index count of deleted modules and will cause order issue.
		        var deletedModules = ModuleController.Instance.GetTabModules(postData.TabId).Values.Where(m => m.IsDeleted);
		        foreach (var module in deletedModules)
		        {
			        if (module.ModuleOrder < moduleOrder)
			        {
				        moduleOrder += 2;
			        }
		        }
	        }
			ModuleController.Instance.UpdateModuleOrder(postData.TabId, postData.ModuleId, moduleOrder, postData.Pane);
            ModuleController.Instance.UpdateTabModuleOrder(postData.TabId);

            return Request.CreateResponse(HttpStatusCode.OK);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="Logger">
          <declaration><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof(ModuleServiceController));]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="NewUserNotificationServiceController">
      <declaration><![CDATA[public class NewUserNotificationServiceController : DnnApiController]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public NewUserNotificationServiceController()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="Authorize">
          <declaration><![CDATA[public HttpResponseMessage Authorize(NotificationDTO postData)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="41" sc="9" el="53" ec="10">InternalServices\NewUserNotificationServiceController.cs</location>
            <body hash="68c9f602bffadd4e0d2eba2444dac334"><![CDATA[{
            var user = GetUser(postData);
            if (user == null)
            {
                NotificationsController.Instance.DeleteNotification(postData.NotificationId);
                return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, "User not found");
            }

            user.Membership.Approved = true;
            UserController.UpdateUser(PortalSettings.PortalId, user);
            
            return Request.CreateResponse(HttpStatusCode.OK, new { Result = "success" });
        }]]></body>
          </codeblock>
        </method>
        <method name="GetUser">
          <declaration><![CDATA[private UserInfo GetUser(NotificationDTO notificationDto)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="72" sc="9" el="82" ec="10">InternalServices\NewUserNotificationServiceController.cs</location>
            <body hash="b2c43a82caef87350580fcdd3d251934"><![CDATA[{
            var notification = NotificationsController.Instance.GetNotification(notificationDto.NotificationId);

            int userId;
            if (!int.TryParse(notification.Context, out userId))
            {
                return null;
            }

            return UserController.GetUserById(PortalSettings.PortalId, userId);            
        }]]></body>
          </codeblock>
        </method>
        <method name="Reject">
          <declaration><![CDATA[public HttpResponseMessage Reject(NotificationDTO postData)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="58" sc="9" el="69" ec="10">InternalServices\NewUserNotificationServiceController.cs</location>
            <body hash="0628319c45517fb96c5aa9d7819108b0"><![CDATA[{
            var user = GetUser(postData);
            if (user == null)
            {
                NotificationsController.Instance.DeleteNotification(postData.NotificationId);
                return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, "User not found");
            }

            UserController.RemoveUser(user);

            return Request.CreateResponse(HttpStatusCode.OK, new { Result = "success" });
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="NotificationDTO">
      <declaration><![CDATA[public class NotificationDTO]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public NotificationDTO()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="NotificationId">
          <declaration><![CDATA[public int NotificationId]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="28" sc="37" el="28" ec="41">InternalServices\NotificationDTO.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="28" sc="42" el="28" ec="46">InternalServices\NotificationDTO.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="NotificationsServiceController">
      <declaration><![CDATA[public class NotificationsServiceController : DnnApiController]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public NotificationsServiceController()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
        <constructor name=".cctor">
          <declaration><![CDATA[static NotificationsServiceController()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="40" sc="6" el="40" ec="117">InternalServices\NotificationsServiceController.cs</location>
            <body hash="00b13268f52c43a06a77991a1e09f1d1"><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof (NotificationsServiceController))]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="Dismiss">
          <declaration><![CDATA[public HttpResponseMessage Dismiss(NotificationDTO postData)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="45" sc="9" el="62" ec="10">InternalServices\NotificationsServiceController.cs</location>
            <body hash="afb9dfe6e99d6355a7a3b7b02f3d5841"><![CDATA[{
            try
            {
                var recipient = InternalMessagingController.Instance.GetMessageRecipient(postData.NotificationId, UserInfo.UserID);
                if (recipient != null)
                {
                    NotificationsController.Instance.DeleteNotificationRecipient(postData.NotificationId, UserInfo.UserID);
                    return Request.CreateResponse(HttpStatusCode.OK, new {Result = "success"});
                }

                return Request.CreateErrorResponse(HttpStatusCode.BadRequest, "Unable to dismiss notification");
            }
            catch (Exception exc)
            {
                Logger.Error(exc);
                return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, exc);
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="GetToasts">
          <declaration><![CDATA[public HttpResponseMessage GetToasts()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="67" sc="3" el="71" ec="4">InternalServices\NotificationsServiceController.cs</location>
            <body hash="ccd8dd46aaa4f62db4045810e05aacae"><![CDATA[{
			var toasts = NotificationsController.Instance.GetToasts(this.UserInfo);
			IList<object> convertedObjects = toasts.Select(ToExpandoObject).ToList();
			return Request.CreateResponse(HttpStatusCode.OK, new { Success = true, Toasts = convertedObjects.Take(3) });
		}]]></body>
          </codeblock>
        </method>
        <method name="ToExpandoObject">
          <declaration><![CDATA[private object ToExpandoObject(Notification notification)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="74" sc="3" el="76" ec="4">InternalServices\NotificationsServiceController.cs</location>
            <body hash="64bfb107e2fdb699781d122f27a5c327"><![CDATA[{
			return new {Subject = notification.Subject, Body = notification.Body};
		}]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="Logger">
          <declaration><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof(NotificationsServiceController));]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="PageServiceController">
      <declaration><![CDATA[public class PageServiceController : DnnApiController]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public PageServiceController()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="PublishPage">
          <declaration><![CDATA[public HttpResponseMessage PublishPage(PublishPageDto dto)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="60" sc="9" el="66" ec="10">InternalServices\PageServiceController.cs</location>
            <body hash="2bdf585581b031bdab4a3efffa0abf3f"><![CDATA[{
            var tabId = Request.FindTabId();
            
            TabPublishingController.Instance.SetTabPublishing(tabId, PortalId, dto.Publish);
            
            return Request.CreateResponse(HttpStatusCode.OK);
        }]]></body>
          </codeblock>
        </method>
        <method name="UpdateCustomUrl">
          <declaration><![CDATA[public HttpResponseMessage UpdateCustomUrl(SaveUrlDto dto)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="71" sc="9" el="170" ec="10">InternalServices\PageServiceController.cs</location>
            <body hash="164066b716db8cc6fee2751cb11f886b"><![CDATA[{
            var urlPath = dto.Path.ValueOrEmpty().TrimStart('/');
            bool modified;
            //Clean Url
            var options = UrlRewriterUtils.ExtendOptionsForCustomURLs( UrlRewriterUtils.GetOptionsFromSettings(new FriendlyUrlSettings(PortalSettings.PortalId)) );
            
            //now clean the path
            urlPath = FriendlyUrlController.CleanNameForUrl(urlPath, options, out modified);
            if (modified)
            {
                return Request.CreateResponse(HttpStatusCode.OK,
                    new
                    {
                        Success = false,
                        ErrorMessage = Localization.GetString("CustomUrlPathCleaned.Error", Localization.GlobalResourceFile),
                        SuggestedUrlPath = "/" + urlPath
                    });
            }

            //Validate for uniqueness
            urlPath = FriendlyUrlController.ValidateUrl(urlPath, -1, PortalSettings, out modified);
            if (modified)
            {
                return Request.CreateResponse(HttpStatusCode.OK,
                    new
                    {
                        Success = false,
                        ErrorMessage = Localization.GetString("UrlPathNotUnique.Error", Localization.GlobalResourceFile),
                        SuggestedUrlPath = "/" + urlPath
                    });
            }

            var tab = PortalSettings.ActiveTab;
            var cultureCode = LocaleController.Instance.GetLocales(PortalId)
                                    .Where(l => l.Value.KeyID == dto.LocaleKey)
                                    .Select(l => l.Value.Code)
                                    .SingleOrDefault();

            if (dto.StatusCodeKey.ToString(CultureInfo.InvariantCulture) == "200")
            {
                //We need to check if we are updating a current url or creating a new 200
                var tabUrl = tab.TabUrls.SingleOrDefault(t => t.SeqNum == dto.Id
                                                                && t.HttpStatus == "200");
                if (tabUrl == null)
                {
                    //Just create Url
                    tabUrl = new TabUrlInfo
                                    {
                                        TabId = tab.TabID,
                                        SeqNum = dto.Id,
                                        PortalAliasId = dto.SiteAliasKey,
                                        PortalAliasUsage = (PortalAliasUsageType)dto.SiteAliasUsage,
                                        QueryString = dto.QueryString.ValueOrEmpty(),
                                        Url = dto.Path.ValueOrEmpty(),
                                        CultureCode = cultureCode,
                                        HttpStatus = dto.StatusCodeKey.ToString(CultureInfo.InvariantCulture),
                                        IsSystem = dto.IsSystem // false
                                    };
                    TabController.Instance.SaveTabUrl(tabUrl, PortalId, true);
                }
                else
                {
                    //Change the original 200 url to a redirect
                    tabUrl.HttpStatus = "301";
                    tabUrl.SeqNum = dto.Id;
                    TabController.Instance.SaveTabUrl(tabUrl, PortalId, true);

                    //Add new custom url
                    tabUrl.Url = dto.Path.ValueOrEmpty();
                    tabUrl.HttpStatus = "200";
                    tabUrl.SeqNum = tab.TabUrls.Max(t => t.SeqNum) + 1;
                    TabController.Instance.SaveTabUrl(tabUrl, PortalId, true);
                }
            }
            else
            {
                //Just update the url
                var tabUrl = new TabUrlInfo
                                    {
                                        TabId = tab.TabID,
                                        SeqNum = dto.Id,
                                        PortalAliasId = dto.SiteAliasKey,
                                        PortalAliasUsage = (PortalAliasUsageType)dto.SiteAliasUsage,
                                        QueryString = dto.QueryString.ValueOrEmpty(),
                                        Url = dto.Path.ValueOrEmpty(),
                                        CultureCode = cultureCode,
                                        HttpStatus = dto.StatusCodeKey.ToString(CultureInfo.InvariantCulture),
                                        IsSystem = dto.IsSystem // false
                                    };
                TabController.Instance.SaveTabUrl(tabUrl, PortalId, true);
            }


            var response = new
            {
                Success = true,
            };

            return Request.CreateResponse(HttpStatusCode.OK, response);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_portalId">
          <declaration><![CDATA[private int? _portalId;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="PortalId">
          <declaration><![CDATA[protected int PortalId]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="46" sc="13" el="52" ec="14">InternalServices\PageServiceController.cs</location>
            <body hash="a4f6f395aa10d12a4a81a025af1117b2"><![CDATA[{
                if (!_portalId.HasValue)
                {
                    _portalId = PortalSettings.ActiveTab.IsSuperTab ? -1 : PortalSettings.PortalId;
                }
                return _portalId.Value;
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="ProfileServiceController">
      <declaration><![CDATA[public class ProfileServiceController : DnnApiController]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public ProfileServiceController()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="AddProperty">
          <declaration><![CDATA[private static void AddProperty(ICollection<ProfileServiceController.SearchResult> results, string field, string searchTerm)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="49" sc="9" el="54" ec="10">InternalServices\ProfileServiceController.cs</location>
            <body hash="f0e6738eeac8cef48eabeefce1764114"><![CDATA[{
            if (field.ToLowerInvariant().Contains(searchTerm.ToLowerInvariant().Trim()))
            {
                results.Add(new SearchResult { id = field, name = field });
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="ProfilePropertyValues">
          <declaration><![CDATA[public HttpResponseMessage ProfilePropertyValues()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="152" sc="9" el="157" ec="10">InternalServices\ProfileServiceController.cs</location>
            <body hash="34b8f9c300c34eaa3c0ebc36676ee4ad"><![CDATA[{
            string searchString = HttpContext.Current.Request.Params["SearchString"].NormalizeString();
            string propertyName = HttpContext.Current.Request.Params["PropName"].NormalizeString();
            int portalId = int.Parse(HttpContext.Current.Request.Params["PortalId"]);
            return Request.CreateResponse(HttpStatusCode.OK, Entities.Profile.ProfileController.SearchProfilePropertyValues(portalId, propertyName, searchString));
        }]]></body>
          </codeblock>
        </method>
        <method name="Search">
          <declaration><![CDATA[public HttpResponseMessage Search(string q)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="59" sc="9" el="83" ec="10">InternalServices\ProfileServiceController.cs</location>
            <body hash="a3498f91c1b451eef7fa55b9e626702d"><![CDATA[{
            var portalId = PortalController.GetEffectivePortalId(PortalSettings.PortalId);

            var controller = new ListController();

			ListEntryInfo imageType = controller.GetListEntryInfo("DataType", "Image");

            IList<SearchResult> results = new List<SearchResult>();
            foreach (var definition in ProfileController.GetPropertyDefinitionsByPortal(portalId)
                                        .Cast<ProfilePropertyDefinition>()
										.Where(definition => definition.DataType != imageType.EntryID))
            {
                AddProperty(results, definition.PropertyName, q);
            }

            AddProperty(results, "Email", q);
            AddProperty(results, "DisplayName", q);
            AddProperty(results, "Username", q);
            AddProperty(results, "Password", q);
            AddProperty(results, "PasswordConfirm", q);
            AddProperty(results, "PasswordQuestion", q);
            AddProperty(results, "PasswordAnswer", q);

            return Request.CreateResponse(HttpStatusCode.OK, results.OrderBy(sr => sr.id));
        }]]></body>
          </codeblock>
        </method>
        <method name="UpdateVanityUrl">
          <declaration><![CDATA[public HttpResponseMessage UpdateVanityUrl(ProfileServiceController.VanityUrlDTO vanityUrl)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="89" sc="9" el="132" ec="10">InternalServices\ProfileServiceController.cs</location>
            <body hash="a1aa66b724a70dfd34713ae50b8566d0"><![CDATA[{
            bool modified;

            //Clean Url
            var options = UrlRewriterUtils.GetOptionsFromSettings(new FriendlyUrlSettings(PortalSettings.PortalId));
            var cleanUrl = FriendlyUrlController.CleanNameForUrl(vanityUrl.Url, options, out modified);


            if (modified)
            {
                return Request.CreateResponse(HttpStatusCode.OK, 
                    new {
                            Result = "warning",
                            Title = Localization.GetString("CleanWarningTitle", Localization.SharedResourceFile),
                            Message = Localization.GetString("ProfileUrlCleaned", Localization.SharedResourceFile),
                            SuggestedUrl = cleanUrl
                        });
            }

            //Validate for uniqueness
            var uniqueUrl = FriendlyUrlController.ValidateUrl(cleanUrl, -1, PortalSettings, out modified);


            if (modified)
            {
                return Request.CreateResponse(HttpStatusCode.OK,
                                              new
                                                  {
                                                      Result = "warning",
                                                      Title = Localization.GetString("DuplicateUrlWarningTitle", Localization.SharedResourceFile),
                                                      Message = Localization.GetString("ProfileUrlNotUnique", Localization.SharedResourceFile),
                                                      SuggestedUrl = uniqueUrl
                                                  });
            }

            var user = PortalSettings.UserInfo;
            user.VanityUrl = uniqueUrl;
            UserController.UpdateUser(PortalSettings.PortalId, user);

            DataCache.RemoveCache(string.Format(CacheController.VanityUrlLookupKey, PortalSettings.PortalId));

            //Url is clean and validated so we can update the User
            return Request.CreateResponse(HttpStatusCode.OK, new { Result = "success" });
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="PublishPageDto">
      <declaration><![CDATA[public class PublishPageDto]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public PublishPageDto()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="Publish">
          <declaration><![CDATA[public bool Publish]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="175" sc="31" el="175" ec="35">InternalServices\PageServiceController.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="175" sc="36" el="175" ec="40">InternalServices\PageServiceController.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="RelationshipServiceController">
      <declaration><![CDATA[public class RelationshipServiceController : DnnApiController]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public RelationshipServiceController()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
        <constructor name=".cctor">
          <declaration><![CDATA[static RelationshipServiceController()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="41" sc="6" el="41" ec="116">InternalServices\RelationshipServiceController.cs</location>
            <body hash="50c9ad96af26a2586094c685fb24743b"><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof (RelationshipServiceController))]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="AcceptFriend">
          <declaration><![CDATA[public HttpResponseMessage AcceptFriend(NotificationDTO postData)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="46" sc="9" el="79" ec="10">InternalServices\RelationshipServiceController.cs</location>
            <body hash="e4300def4c0cf2d02c5872513f70c1b1"><![CDATA[{
            var success = false;

            try
            {
                var recipient = InternalMessagingController.Instance.GetMessageRecipient(postData.NotificationId, UserInfo.UserID);
                if (recipient != null)
                {
                    var notification = NotificationsController.Instance.GetNotification(postData.NotificationId);
                    int userRelationshipId;
                    if (int.TryParse(notification.Context, out userRelationshipId))
                    {
                        var userRelationship = RelationshipController.Instance.GetUserRelationship(userRelationshipId);
                        if (userRelationship != null)
                        {
                            var friend = UserController.GetUserById(PortalSettings.PortalId, userRelationship.UserId);
                            FriendsController.Instance.AcceptFriend(friend);
                            success = true;
                        }
                    }
                }
            }
            catch (Exception exc)
            {
                Logger.Error(exc);
            }
            
            if(success)
            {
                return Request.CreateResponse(HttpStatusCode.OK, new {Result = "success"});
            }

            return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, "unable to process notification");
        }]]></body>
          </codeblock>
        </method>
        <method name="FollowBack">
          <declaration><![CDATA[public HttpResponseMessage FollowBack(NotificationDTO postData)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="85" sc="9" el="138" ec="10">InternalServices\RelationshipServiceController.cs</location>
            <body hash="f32bbd3112587768529876466e516ca2"><![CDATA[{
            var success = false;

            try
            {
                var recipient = InternalMessagingController.Instance.GetMessageRecipient(postData.NotificationId, UserInfo.UserID);
                if (recipient != null)
                {
                    var notification = NotificationsController.Instance.GetNotification(postData.NotificationId);
                    int targetUserId;
                    if (int.TryParse(notification.Context, out targetUserId))
                    {
                        var targetUser = UserController.GetUserById(PortalSettings.PortalId, targetUserId);

                        if (targetUser == null)
                        {
                            var response = new
                            {
                                Message = Localization.GetExceptionMessage("UserDoesNotExist",
                                    "The user you are trying to follow no longer exists.")
                            };
                            return Request.CreateResponse(HttpStatusCode.InternalServerError, response);
                        }

                        FollowersController.Instance.FollowUser(targetUser);
                        NotificationsController.Instance.DeleteNotificationRecipient(postData.NotificationId, UserInfo.UserID);

                        success = true;
                    }
                }
            }
            catch (UserRelationshipExistsException exc)
            {
                Logger.Error(exc);
                var response = new
                {
                    Message = Localization.GetExceptionMessage("AlreadyFollowingUser",
                        "You are already following this user.")
                };
                return Request.CreateResponse(HttpStatusCode.InternalServerError, response);
            }
            catch (Exception exc)
            {
                Logger.Error(exc);
                return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, exc.Message);
            }

            if (success)
            {
                return Request.CreateResponse(HttpStatusCode.OK, new { Result = "success" });
            }

            return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, "unable to process notification");
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="Logger">
          <declaration><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof(RelationshipServiceController));]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="SearchServiceController">
      <declaration><![CDATA[public class SearchServiceController : DnnApiController]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public SearchServiceController()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="70" sc="9" el="74" ec="10">InternalServices\SearchServiceController.cs</location>
            <body hash="8cf0103e3becd7324fed960755cace50"><![CDATA[public SearchServiceController()
        {
            var modDef = ModuleDefinitionController.GetModuleDefinitionByFriendlyName("Text/HTML");
            HtmlModuleDefitionId = modDef != null ? modDef.ModuleDefID : -1;
        }]]></body>
          </codeblock>
        </constructor>
        <constructor name=".ctor">
          <declaration><![CDATA[internal SearchServiceController(int htmlModuleDefitionId)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="77" sc="9" el="82" ec="10">InternalServices\SearchServiceController.cs</location>
            <body hash="fc84222c31bbc4a606ce1e198c733de8"><![CDATA[internal SearchServiceController(int htmlModuleDefitionId)//, TabController newtabController, ModuleController newmoduleController)
        {
            HtmlModuleDefitionId = htmlModuleDefitionId;
            //_tabController = newtabController;
            //_moduleController = newmoduleController;
        }]]></body>
          </codeblock>
        </constructor>
        <constructor name=".cctor">
          <declaration><![CDATA[static SearchServiceController()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="52" sc="9" el="52" ec="146">InternalServices\SearchServiceController.cs</location>
            <body hash="9e580e5f821c3032696b5c49a9bbdb69"><![CDATA[private static readonly Regex GroupedBasicViewRegex = new Regex("userid(/|\\|=)(\\d+)", RegexOptions.IgnoreCase | RegexOptions.Compiled)]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="AddStopWords">
          <declaration><![CDATA[public HttpResponseMessage AddStopWords(SearchServiceController.StopWordsDto stopWords)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="581" sc="9" el="584" ec="10">InternalServices\SearchServiceController.cs</location>
            <body hash="51133b961e58a6ad9b1d307e2b2fa641"><![CDATA[{
            var stopWordsId = SearchHelper.Instance.AddSearchStopWords(stopWords.Words, stopWords.PortalId, stopWords.Culture);
            return Request.CreateResponse(HttpStatusCode.OK, new { Id = stopWordsId });
        }]]></body>
          </codeblock>
        </method>
        <method name="AddSynonymsGroup">
          <declaration><![CDATA[public HttpResponseMessage AddSynonymsGroup(SearchServiceController.SynonymsGroupDto synonymsGroup)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="544" sc="9" el="548" ec="10">InternalServices\SearchServiceController.cs</location>
            <body hash="ba79a09a8d2cf4f87db548ebcd387919"><![CDATA[{
            string duplicateWord;
            var synonymsGroupId = SearchHelper.Instance.AddSynonymsGroup(synonymsGroup.Tags, synonymsGroup.PortalId, synonymsGroup.Culture, out duplicateWord);
            return Request.CreateResponse(HttpStatusCode.OK, new { Id = synonymsGroupId, DuplicateWord = duplicateWord });
        }]]></body>
          </codeblock>
        </method>
        <method name="DeleteStopWords">
          <declaration><![CDATA[public HttpResponseMessage DeleteStopWords(SearchServiceController.StopWordsDto stopWords)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="603" sc="9" el="606" ec="10">InternalServices\SearchServiceController.cs</location>
            <body hash="7ed93b755bc1b520967b7b91ff98eccf"><![CDATA[{
            SearchHelper.Instance.DeleteSearchStopWords(stopWords.Id, stopWords.PortalId, stopWords.Culture);
            return Request.CreateResponse(HttpStatusCode.OK);
        }]]></body>
          </codeblock>
        </method>
        <method name="DeleteSynonymsGroup">
          <declaration><![CDATA[public HttpResponseMessage DeleteSynonymsGroup(SearchServiceController.SynonymsGroupDto synonymsGroup)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="569" sc="9" el="572" ec="10">InternalServices\SearchServiceController.cs</location>
            <body hash="e585ccaf3453419d147b7159842336b2"><![CDATA[{
            SearchHelper.Instance.DeleteSynonymsGroup(synonymsGroup.Id, synonymsGroup.PortalId, synonymsGroup.Culture);
            return Request.CreateResponse(HttpStatusCode.OK);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetBasicViews">
          <declaration><![CDATA[internal IEnumerable<BasicView> GetBasicViews(SearchQuery searchQuery, out int totalHits)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="374" sc="9" el="386" ec="10">InternalServices\SearchServiceController.cs</location>
            <body hash="0edb1e4380835386824a6d209f8c4d96"><![CDATA[{
            var sResult = SearchController.Instance.SiteSearch(searchQuery);
            totalHits = sResult.TotalHits;

            return sResult.Results.Select(result => 
                new BasicView
                    {
                        Title = GetTitle(result),
                        DocumentTypeName = InternalSearchController.Instance.GetSearchDocumentTypeDisplayName(result),
                        DocumentUrl = result.Url,
                        Snippet = result.Snippet,
                    });
        }]]></body>
          </codeblock>
        </method>
        <method name="GetGroupedBasicViews">
          <declaration><![CDATA[internal List<GroupedBasicView> GetGroupedBasicViews(SearchQuery query, SearchContentSource userSearchSource, int portalId)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="330" sc="9" el="371" ec="10">InternalServices\SearchServiceController.cs</location>
            <body hash="b04ca7f12711370c8811bb1ec1d6442d"><![CDATA[{
            int totalHists;
            var results = new List<GroupedBasicView>();
            var previews = GetBasicViews(query, out totalHists);

            foreach (var preview in previews)
            {
                //if the document type is user, then try to add user pic into preview's custom attributes.
                if (userSearchSource != null && preview.DocumentTypeName == userSearchSource.LocalizedName)
                {
                    var match = GroupedBasicViewRegex.Match(preview.DocumentUrl);
                    if (match.Success)
                    {
                        var userid = Convert.ToInt32(match.Groups[2].Value);
                        var user = UserController.Instance.GetUserById(portalId, userid); 
                        if (user != null)
                        {
                            preview.Attributes.Add("Avatar", user.Profile.PhotoURL);
                        }
                    }
                }

                var groupedResult = results.SingleOrDefault(g => g.DocumentTypeName == preview.DocumentTypeName);
                if (groupedResult != null)
                {
                    if (!groupedResult.Results.Any(r => string.Equals(r.DocumentUrl, preview.DocumentUrl)))
                        groupedResult.Results.Add(new BasicView
                        {
                            Title = preview.Title,
                            Snippet = preview.Snippet,
                            DocumentUrl = preview.DocumentUrl,
                            Attributes = preview.Attributes
                        });
                }
                else
                {
                    results.Add(new GroupedBasicView(preview));
                }
            }

            return results;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetGroupedDetailViews">
          <declaration><![CDATA[internal IEnumerable<GroupedDetailView> GetGroupedDetailViews(SearchQuery searchQuery, int userSearchTypeId, out int totalHits, out bool more)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="236" sc="9" el="327" ec="10">InternalServices\SearchServiceController.cs</location>
            <body hash="132d3bafb3e3705b77b281d615d8b91a"><![CDATA[{
            var searchResults = SearchController.Instance.SiteSearch(searchQuery);
            totalHits = searchResults.TotalHits;
            more = searchResults.Results.Count > searchQuery.PageSize;

            var groups = new List<GroupedDetailView>();
            var tabGroups = new Dictionary<string, IList<SearchResult>>();
           
            foreach (var result in searchResults.Results)
            {
                //var key = result.TabId + result.Url;
                var key = result.Url;
                if (!tabGroups.ContainsKey(key))
                {
                    tabGroups.Add(key, new List<SearchResult> { result });
                }
                else
                {
                    //when the result is a user search type, we should only show one result
                    // and if duplicate, we should also reduce the totalHit number.
                    if (result.SearchTypeId != userSearchTypeId ||
                        tabGroups[key].All(r => r.Url != result.Url))
                    {
                        tabGroups[key].Add(result);
                    }
                    else
                    {
                        totalHits--;
                    }
                }
            }

            foreach (var results in tabGroups.Values)
            {
                var group = new GroupedDetailView();

                //first entry
                var first = results[0];
                group.Title = first.Title;
                group.DocumentUrl = first.Url;

                //Find a different title for multiple entries with same url
                if (results.Count > 1)
                {
                    if (first.TabId > 0)
                    {
                        var tab = TabController.Instance.GetTab(first.TabId, first.PortalId, false);
                        if (tab != null)
                            group.Title = tab.TabName;
                    }
                    else if (first.ModuleId > 0)
                    {
                        var tabTitle = GetTabTitleFromModuleId(first.ModuleId);
                        if (!string.IsNullOrEmpty(tabTitle))
                        {
                            group.Title = tabTitle;
                        }
                    }
                }
                else if (first.ModuleDefId > 0 && first.ModuleDefId == HtmlModuleDefitionId) //special handling for Html module
                {
                    var tabTitle = GetTabTitleFromModuleId(first.ModuleId);
                    if (!string.IsNullOrEmpty(tabTitle))
                    {
                        group.Title = tabTitle;
                        if (first.Title != "Enter Title" && first.Title != "Text/HTML")
                            group.Title += " > " + first.Title;
                        first.Title = group.Title;
                    }
                }

                foreach (var result in results)
                {
                    var detail = new DetailedView
                    {
                        Title = result.Title,
                        DocumentTypeName = InternalSearchController.Instance.GetSearchDocumentTypeDisplayName(result),
                        DocumentUrl = result.Url,
                        Snippet = result.Snippet,
                        DisplayModifiedTime = result.DisplayModifiedTime,
                        Tags = result.Tags.ToList(),
                        AuthorProfileUrl = result.AuthorUserId > 0 ? Globals.UserProfileURL(result.AuthorUserId) : string.Empty,
                        AuthorName = result.AuthorName
                    };
                    group.Results.Add(detail);
                }

                groups.Add(group);
            }

            return groups;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetModulesByDefinition">
          <declaration><![CDATA[private static ArrayList GetModulesByDefinition(int portalID, string friendlyName)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="107" sc="9" el="112" ec="10">InternalServices\SearchServiceController.cs</location>
            <body hash="4d3fbe971482ee7338c22d104278e96a"><![CDATA[{
            var cacheKey = string.Format(ModuleInfosCacheKey, portalID);
            return CBO.GetCachedObject<ArrayList>(
                new CacheItemArgs(cacheKey, ModuleInfosCacheTimeOut, ModuleInfosCachePriority),
                args => CBO.FillCollection(DataProvider.Instance().GetModuleByDefinition(portalID, friendlyName), typeof(ModuleInfo)));
        }]]></body>
          </codeblock>
        </method>
        <method name="GetSearchContentSources">
          <declaration><![CDATA[private IList<SearchContentSource> GetSearchContentSources(IList<string> typesList)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="212" sc="9" el="230" ec="10">InternalServices\SearchServiceController.cs</location>
            <body hash="130edac550a57c73bb7cbc804e9b85ba"><![CDATA[{
            var sources = new List<SearchContentSource>();
            var list = InternalSearchController.Instance.GetSearchContentSourceList(PortalSettings.PortalId);

            if (typesList.Any())
            {
                foreach (var contentSources in typesList.Select(t1 => list.Where(src => string.Equals(src.LocalizedName, t1, StringComparison.OrdinalIgnoreCase))))
                {
                    sources.AddRange(contentSources);
                }
            }
            else
            {
                // no types fitler specified, add all available content sources
                sources.AddRange(list);
            }

            return sources;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetSearchModule">
          <declaration><![CDATA[private ModuleInfo GetSearchModule()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="115" sc="9" el="124" ec="10">InternalServices\SearchServiceController.cs</location>
            <body hash="9808bb999463a5e51b0c71c7d55b0258"><![CDATA[{
            var arrModules = GetModulesByDefinition(PortalSettings.PortalId, "Search Results");
	        ModuleInfo findModule = null;
            if (arrModules.Count > 1)
            {
                findModule = arrModules.Cast<ModuleInfo>().FirstOrDefault(searchModule => searchModule.CultureCode == PortalSettings.CultureCode);
            }

            return findModule ?? (arrModules.Count > 0 ? (ModuleInfo)arrModules[0] : null);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetSearchModuleDefIds">
          <declaration><![CDATA[private static IEnumerable<int> GetSearchModuleDefIds(IDictionary settings, IEnumerable<SearchContentSource> searchContentSources)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="184" sc="9" el="209" ec="10">InternalServices\SearchServiceController.cs</location>
            <body hash="e501350aa73332fc92e9bdec43ed05be"><![CDATA[{
            var list = new List<int>();
            var configuredList = new List<string>();
            if (settings != null && !string.IsNullOrEmpty(Convert.ToString(settings["ScopeForFilters"])))
            {
                configuredList = Convert.ToString(settings["ScopeForFilters"]).Split('|').ToList();
            }

            // check content source in configured list or not
            foreach (var contentSource in searchContentSources)
            {
                if (contentSource.IsPrivate) continue; ;
                if (configuredList.Count > 0)
                {
                    if (configuredList.Any(l => l.Contains(contentSource.LocalizedName)) && contentSource.ModuleDefinitionId > 0) // in configured list
                        list.Add(contentSource.ModuleDefinitionId);
                }
                else
                {
                    if (contentSource.ModuleDefinitionId > 0)
                        list.Add(contentSource.ModuleDefinitionId);
                }
            }

            return list;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetSearchModuleSettings">
          <declaration><![CDATA[private Hashtable GetSearchModuleSettings()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="127" sc="9" el="135" ec="10">InternalServices\SearchServiceController.cs</location>
            <body hash="61d2527aa1a7f4dd25b9ef6e5489e6ed"><![CDATA[{
            if (ActiveModule != null && ActiveModule.ModuleDefinition.FriendlyName == "Search Results")
            {
                return ActiveModule.ModuleSettings;
            }

            var searchModule = GetSearchModule();
            return searchModule != null ? searchModule.ModuleSettings : null;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetSearchPortalIds">
          <declaration><![CDATA[private List<int> GetSearchPortalIds(IDictionary settings, int portalId)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="138" sc="9" el="154" ec="10">InternalServices\SearchServiceController.cs</location>
            <body hash="6f4d49ce75f369534839c79e60663092"><![CDATA[{
            var list = new List<int>();
            if (settings != null && !string.IsNullOrEmpty(Convert.ToString(settings["ScopeForPortals"])))
            {
                list = Convert.ToString(settings["ScopeForPortals"]).Split('|').Select(s => Convert.ToInt32(s)).ToList();
            }

            if (portalId == -1) portalId = PortalSettings.ActiveTab.PortalID;
            if (portalId > -1 && !list.Contains(portalId)) list.Add(portalId);

            //Add Host 
            var userInfo = UserInfo;
            if (userInfo.IsSuperUser)
                list.Add(-1);

            return list;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetSearchTypeIds">
          <declaration><![CDATA[private static List<int> GetSearchTypeIds(IDictionary settings, IEnumerable<SearchContentSource> searchContentSources)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="157" sc="9" el="181" ec="10">InternalServices\SearchServiceController.cs</location>
            <body hash="6d4cf36372c76a6438ec13a028250e24"><![CDATA[{
            var list = new List<int>();
            var configuredList = new List<string>();
            if (settings != null && !string.IsNullOrEmpty(Convert.ToString(settings["ScopeForFilters"])))
            {
                configuredList = Convert.ToString(settings["ScopeForFilters"]).Split('|').ToList();
            }

            // check content source in configured list or not
            foreach (var contentSource in searchContentSources)
            {
                if (contentSource.IsPrivate) continue;
                if (configuredList.Count > 0)
                {
                    if (configuredList.Any(l => l.Contains(contentSource.LocalizedName))) // in configured list
                        list.Add(contentSource.SearchTypeId);
                }
                else
                {
                    list.Add(contentSource.SearchTypeId);
                }
            }

            return list.Distinct().ToList();
        }]]></body>
          </codeblock>
        </method>
        <method name="GetTabTitleCallBack">
          <declaration><![CDATA[private object GetTabTitleCallBack(CacheItemArgs cacheItemArgs)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="417" sc="9" el="426" ec="10">InternalServices\SearchServiceController.cs</location>
            <body hash="bef9c6cbfe138f772f06d1334506f4f6"><![CDATA[{
            var moduleId = (int)cacheItemArgs.ParamList[0];
            var moduleInfo = ModuleController.Instance.GetModule(moduleId, Null.NullInteger, true);
            if (moduleInfo != null)
            {
                return moduleInfo.ParentTab.TabName;
            }

            return string.Empty;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetTabTitleFromModuleId">
          <declaration><![CDATA[private string GetTabTitleFromModuleId(int moduleId)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="409" sc="9" el="414" ec="10">InternalServices\SearchServiceController.cs</location>
            <body hash="6bf3ef6c86efe46dbcfae8764b53ee40"><![CDATA[{
            // no manual clearing of the cache exists; let is just expire
            var cacheKey = string.Format(ModuleTitleCacheKey, moduleId);

            return CBO.GetCachedObject<string>(new CacheItemArgs(cacheKey, ModuleTitleCacheTimeOut, ModuleTitleCachePriority, moduleId), GetTabTitleCallBack);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetTitle">
          <declaration><![CDATA[private string GetTitle(SearchResult result)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="389" sc="9" el="402" ec="10">InternalServices\SearchServiceController.cs</location>
            <body hash="d61a380689b21bdbda06f138911e6c1b"><![CDATA[{
            if (result.ModuleDefId > 0 && result.ModuleDefId == HtmlModuleDefitionId) //special handling for Html module
            {
                var tabTitle = GetTabTitleFromModuleId(result.ModuleId);
                if (!string.IsNullOrEmpty(tabTitle))
                {
                    if (result.Title != "Enter Title" && result.Title != "Text/HTML")
                        return tabTitle + " > " + result.Title;
                    return tabTitle;
                }
            }

            return result.Title;
        }]]></body>
          </codeblock>
        </method>
        <method name="IsWildCardEnabledForModule">
          <declaration><![CDATA[private bool IsWildCardEnabledForModule()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="89" sc="9" el="98" ec="10">InternalServices\SearchServiceController.cs</location>
            <body hash="aced1ea24f612baa8b49e96347908d5f"><![CDATA[{
            var searchModuleSettings = GetSearchModuleSettings();
            var enableWildSearch = true;
            if (!string.IsNullOrEmpty(Convert.ToString(searchModuleSettings["EnableWildSearch"])))
            {
                enableWildSearch = Convert.ToBoolean(searchModuleSettings["EnableWildSearch"]);
            }

            return enableWildSearch;
        }]]></body>
          </codeblock>
        </method>
        <method name="Preview">
          <declaration><![CDATA[public HttpResponseMessage Preview(string keywords, string culture, int forceWild = 1, int portal = -1)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="435" sc="9" el="482" ec="10">InternalServices\SearchServiceController.cs</location>
            <body hash="2446b5955273cdecd3041edf92f318f7"><![CDATA[{
            string cleanedKeywords;
            keywords = (keywords ?? string.Empty).Trim();
            var tags = SearchQueryStringParser.Instance.GetTags(keywords, out cleanedKeywords);
            var beginModifiedTimeUtc = SearchQueryStringParser.Instance.GetLastModifiedDate(cleanedKeywords, out cleanedKeywords);
            var searchTypes = SearchQueryStringParser.Instance.GetSearchTypeList(keywords, out cleanedKeywords);
            
            var contentSources = GetSearchContentSources(searchTypes);
            var settings = GetSearchModuleSettings();
            var searchTypeIds = GetSearchTypeIds(settings, contentSources);
            var moduleDefids = GetSearchModuleDefIds(settings, contentSources);
            var portalIds = GetSearchPortalIds(settings, portal);

            var userSearchTypeId = SearchHelper.Instance.GetSearchTypeByName("user").SearchTypeId;
            var userSearchSource = contentSources.FirstOrDefault(s => s.SearchTypeId == userSearchTypeId);

            var results = new List<GroupedBasicView>();
            if (portalIds.Any() && searchTypeIds.Any() &&
                (!string.IsNullOrEmpty(cleanedKeywords) || tags.Any()))
            {
                var query = new SearchQuery
                {
                    KeyWords = cleanedKeywords,
                    Tags = tags,
                    PortalIds = portalIds,
                    SearchTypeIds = searchTypeIds,
                    ModuleDefIds = moduleDefids,
                    BeginModifiedTimeUtc = beginModifiedTimeUtc,
                    PageIndex = 1,
                    PageSize = 5,
                    TitleSnippetLength = 40,
                    BodySnippetLength = 100,
                    CultureCode = culture,
                    WildCardSearch = forceWild > 0 
                };

                try
                {
                    results = GetGroupedBasicViews(query, userSearchSource, PortalSettings.PortalId);
                }
                catch (Exception ex)
                {
                    DotNetNuke.Services.Exceptions.Exceptions.LogException(ex);
                }
            }

            return Request.CreateResponse(HttpStatusCode.OK, results);
        }]]></body>
          </codeblock>
        </method>
        <method name="Search">
          <declaration><![CDATA[public HttpResponseMessage Search(string search, string culture, int pageIndex, int pageSize, int sortOption)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="487" sc="9" el="536" ec="10">InternalServices\SearchServiceController.cs</location>
            <body hash="32054009aa6fcddde03d12a7074a7424"><![CDATA[{
            string cleanedKeywords;
            search = (search ?? string.Empty).Trim();
            var tags = SearchQueryStringParser.Instance.GetTags(search, out cleanedKeywords);
            var beginModifiedTimeUtc = SearchQueryStringParser.Instance.GetLastModifiedDate(cleanedKeywords, out cleanedKeywords);
            var searchTypes = SearchQueryStringParser.Instance.GetSearchTypeList(cleanedKeywords, out cleanedKeywords);

            var contentSources = GetSearchContentSources(searchTypes);
            var settings = GetSearchModuleSettings();
            var searchTypeIds = GetSearchTypeIds(settings, contentSources);
            var moduleDefids = GetSearchModuleDefIds(settings, contentSources);
            var portalIds = GetSearchPortalIds(settings, -1);
            var userSearchTypeId = SearchHelper.Instance.GetSearchTypeByName("user").SearchTypeId;

            var more = false;
            var totalHits = 0;
            var results = new List<GroupedDetailView>();
            if (portalIds.Any() && searchTypeIds.Any() && 
                (!string.IsNullOrEmpty(cleanedKeywords) || tags.Any()))
            {
                var query = new SearchQuery
                    {
                        KeyWords = cleanedKeywords,
                        Tags = tags,
                        PortalIds = portalIds,
                        SearchTypeIds = searchTypeIds,
                        ModuleDefIds = moduleDefids,
                        BeginModifiedTimeUtc = beginModifiedTimeUtc,
                        EndModifiedTimeUtc = beginModifiedTimeUtc > DateTime.MinValue ? DateTime.MaxValue : DateTime.MinValue,
                        PageIndex = pageIndex,
                        PageSize = pageSize,
                        SortField = (SortFields) sortOption,
                        TitleSnippetLength = 120,
                        BodySnippetLength = 300,
                        CultureCode = culture,
                        WildCardSearch = IsWildCardEnabledForModule()
                    };

                try
                {
                    results = GetGroupedDetailViews(query, userSearchTypeId, out totalHits, out more).ToList();
                }
                catch (Exception ex)
                {
                    DotNetNuke.Services.Exceptions.Exceptions.LogException(ex);
                }
            }

            return Request.CreateResponse(HttpStatusCode.OK, new { results, totalHits, more });
        }]]></body>
          </codeblock>
        </method>
        <method name="UpdateStopWords">
          <declaration><![CDATA[public HttpResponseMessage UpdateStopWords(SearchServiceController.StopWordsDto stopWords)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="592" sc="9" el="595" ec="10">InternalServices\SearchServiceController.cs</location>
            <body hash="7477288ad64fd9744c807881cf86fe70"><![CDATA[{
            var stopWordsId = SearchHelper.Instance.UpdateSearchStopWords(stopWords.Id, stopWords.Words, stopWords.PortalId, stopWords.Culture);
            return Request.CreateResponse(HttpStatusCode.OK, new { Id = stopWordsId });
        }]]></body>
          </codeblock>
        </method>
        <method name="UpdateSynonymsGroup">
          <declaration><![CDATA[public HttpResponseMessage UpdateSynonymsGroup(SearchServiceController.SynonymsGroupDto synonymsGroup)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="557" sc="9" el="561" ec="10">InternalServices\SearchServiceController.cs</location>
            <body hash="b045f423c6b26c4b1ac70e71faa4a319"><![CDATA[{
            string duplicateWord;
            var synonymsGroupId = SearchHelper.Instance.UpdateSynonymsGroup(synonymsGroup.Id, synonymsGroup.Tags, synonymsGroup.PortalId, synonymsGroup.Culture, out duplicateWord);
            return Request.CreateResponse(HttpStatusCode.OK, new { Id = synonymsGroupId, DuplicateWord = duplicateWord });
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="GroupedBasicViewRegex">
          <declaration><![CDATA[private static readonly Regex GroupedBasicViewRegex = new Regex("userid(/|\\|=)(\\d+)", RegexOptions.IgnoreCase | RegexOptions.Compiled);]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="HtmlModuleDefitionId">
          <declaration><![CDATA[private int HtmlModuleDefitionId;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ModuleInfosCacheKey">
          <declaration><![CDATA[private const string ModuleInfosCacheKey = "ModuleInfos{0}";]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ModuleInfosCachePriority">
          <declaration><![CDATA[private const CacheItemPriority ModuleInfosCachePriority = CacheItemPriority.AboveNormal;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ModuleInfosCacheTimeOut">
          <declaration><![CDATA[private const int ModuleInfosCacheTimeOut = 20;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ModuleTitleCacheKey">
          <declaration><![CDATA[private const string ModuleTitleCacheKey = "SearchModuleTabTitle_{0}";]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ModuleTitleCachePriority">
          <declaration><![CDATA[private const CacheItemPriority ModuleTitleCachePriority = CacheItemPriority.Normal;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ModuleTitleCacheTimeOut">
          <declaration><![CDATA[private const int ModuleTitleCacheTimeOut = 20;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="ServiceRouteMapper">
      <declaration><![CDATA[public class ServiceRouteMapper : IServiceRouteMapper]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public ServiceRouteMapper()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="RegisterRoutes">
          <declaration><![CDATA[public void RegisterRoutes(IMapRoute mapRouteManager)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="31" sc="9" el="36" ec="10">InternalServices\ServiceRouteMapper.cs</location>
            <body hash="ba3f053a18949bd3ab513610ec191f1a"><![CDATA[{
            mapRouteManager.MapHttpRoute("InternalServices", 
                                            "default", 
                                            "{controller}/{action}", 
                                            new[] { "DotNetNuke.Web.InternalServices" });
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="UserFileController">
      <declaration><![CDATA[public class UserFileController : DnnApiController]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[private readonly IFolderManager _folderManager = ComponentBase<IFolderManager, FolderManager>.Instance;]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="42" sc="9" el="42" ec="81">InternalServices\UserFileController.cs</location>
            <body hash="d5935e53485226a953254a4415fa8f5f"><![CDATA[private readonly IFolderManager _folderManager = FolderManager.Instance]]></body>
          </codeblock>
        </constructor>
        <constructor name=".cctor">
          <declaration><![CDATA[static UserFileController()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="41" sc="6" el="41" ec="105">InternalServices\UserFileController.cs</location>
            <body hash="ea7b5928eff57387f02a897e0979cf31"><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof (UserFileController))]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="GetChildren">
          <declaration><![CDATA[private List<UserFileController.Item> GetChildren(IFolderInfo folder, ICollection<string> extensions)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="85" sc="9" el="124" ec="10">InternalServices\UserFileController.cs</location>
            <body hash="f1d8de84f8cbb340c3aaab2ca2004c53"><![CDATA[{
            var everything = new List<Item>();

            var folders = _folderManager.GetFolders(folder);

            foreach (var currentFolder in folders)
            {
                everything.Add(new Item
                {
                    id = currentFolder.FolderID,
                    name = currentFolder.DisplayName ?? currentFolder.FolderName,
                    folder = true,
                    parentId = folder.FolderID,
                    children = GetChildren(currentFolder, extensions)
                });
            }

            var files = _folderManager.GetFiles(folder);

            foreach (var file in files)
            {
                // list is empty or contains the file extension in question
                if (extensions.Count == 0 || extensions.Contains(file.Extension.ToLowerInvariant()))
                {
                    everything.Add(new Item
                    {
                        id = file.FileId,
                        name = file.FileName,
                        folder = false,
                        parentId = file.FolderId,
                        thumb_url = GetThumbUrl(file),
                        type = GetTypeName(file),
                        size = GetFileSize(file.Size),
                        modified = GetModifiedTime(file.LastModificationTime)
                    });
                }
            }

            return everything;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetFileSize">
          <declaration><![CDATA[private static string GetFileSize(int sizeInBytes)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="165" sc="9" el="173" ec="10">InternalServices\UserFileController.cs</location>
            <body hash="50d84629932090269419b6044a5d3b7d"><![CDATA[{
            var size = sizeInBytes / 1024;
            var biggerThanAMegabyte = size > 1024;
            if (biggerThanAMegabyte)
            {
                size = (size / 1024);
            }
            return size.ToString(CultureInfo.InvariantCulture) + (biggerThanAMegabyte ? "Mb" : "k");
        }]]></body>
          </codeblock>
        </method>
        <method name="GetItems">
          <declaration><![CDATA[public HttpResponseMessage GetItems()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="47" sc="9" el="49" ec="10">InternalServices\UserFileController.cs</location>
            <body hash="b32b5504346d9329257167d784727023"><![CDATA[{
            return GetItems(null);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetItems">
          <declaration><![CDATA[public HttpResponseMessage GetItems(string fileExtensions)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="54" sc="9" el="81" ec="10">InternalServices\UserFileController.cs</location>
            <body hash="7355f9be6aa54f966151f775080c82fd"><![CDATA[{
            try
            {
                var userFolder = _folderManager.GetUserFolder(UserInfo);
                var extensions = new List<string>();

                if (!string.IsNullOrEmpty(fileExtensions))
                {
                    fileExtensions = fileExtensions.ToLowerInvariant();
                    extensions.AddRange(fileExtensions.Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries));
                }

                var folderStructure = new Item
                {
                    children = GetChildren(userFolder, extensions),
                    folder = true,
                    id = userFolder.FolderID,
                    name = Localization.GetString("UserFolderTitle.Text", Localization.SharedResourceFile)
                };

                return Request.CreateResponse(HttpStatusCode.OK, new List<Item> { folderStructure });
            }
            catch (Exception exc)
            {
                Logger.Error(exc);
                return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, exc);
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="GetModifiedTime">
          <declaration><![CDATA[private static string GetModifiedTime(DateTime dateTime)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="127" sc="9" el="129" ec="10">InternalServices\UserFileController.cs</location>
            <body hash="d3063ec666ce132173eccfdad4c6a2a4"><![CDATA[{
            return string.Format("{0:MMM} {0:dd}, {0:yyyy} at {0:t}", dateTime);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetThumbUrl">
          <declaration><![CDATA[private string GetThumbUrl(IFileInfo file)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="134" sc="9" el="146" ec="10">InternalServices\UserFileController.cs</location>
            <body hash="7eb0b2be566f0784c2dd93f47b483f2c"><![CDATA[{
            if (IsImageFile(file.RelativePath))
            {
                return FileManager.Instance.GetUrl(file);
            }

            var fileIcon = IconController.IconURL("Ext" + file.Extension, "32x32");
            if (!System.IO.File.Exists(Request.GetHttpContext().Server.MapPath(fileIcon)))
            {
                fileIcon = IconController.IconURL("File", "32x32");
            }
            return fileIcon;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetTypeName">
          <declaration><![CDATA[private static string GetTypeName(IFileInfo file)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="149" sc="9" el="155" ec="10">InternalServices\UserFileController.cs</location>
            <body hash="22c1669853e556b74de4fc821835bb15"><![CDATA[{
            return file.ContentType == null
                       ? string.Empty
                       : (file.ContentType.StartsWith("image/") 
                            ? file.ContentType.Replace("image/", string.Empty) 
                            : (file.Extension != null ? file.Extension.ToLowerInvariant() : string.Empty));
        }]]></body>
          </codeblock>
        </method>
        <method name="IsImageFile">
          <declaration><![CDATA[private static bool IsImageFile(string relativePath)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="158" sc="9" el="162" ec="10">InternalServices\UserFileController.cs</location>
            <body hash="da0ccbdc97bd3880fe0ebaf1fa7d1227"><![CDATA[{
            var acceptedExtensions = new List<string> { "jpg", "png", "gif", "jpe", "jpeg", "tiff" };
            var extension = relativePath.Substring(relativePath.LastIndexOf(".", StringComparison.Ordinal) + 1).ToLower();
            return acceptedExtensions.Contains(extension);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_folderManager">
          <declaration><![CDATA[private readonly IFolderManager _folderManager = ComponentBase<IFolderManager, FolderManager>.Instance;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="Logger">
          <declaration><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof(UserFileController));]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
  </namespace>
  <namespace name="DotNetNuke.Web.InternalServices.Views.Search">
    <class name="BasicView">
      <declaration><![CDATA[public class BasicView]]></declaration>
      <documentation>
        <summary>
 Detailed Search Result View
 </summary>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public BasicView()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="61" sc="9" el="64" ec="10">InternalServices\Views\Search\BasicView.cs</location>
            <body hash="065747ea970fced7cc383c22c0800ad7"><![CDATA[public BasicView()
        {
            Attributes = new Dictionary<string, string>();
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="Attributes">
          <declaration><![CDATA[public IDictionary<string, string> Attributes]]></declaration>
          <documentation>
            <summary>
 Custom Attributes of the document.
 </summary>
          </documentation>
          <codeblock>
            <location sl="59" sc="57" el="59" ec="61">InternalServices\Views\Search\BasicView.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="59" sc="62" el="59" ec="66">InternalServices\Views\Search\BasicView.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="DocumentTypeName">
          <declaration><![CDATA[public string DocumentTypeName]]></declaration>
          <documentation>
            <summary>
 Display Name of the Document Type
 </summary>
          </documentation>
          <codeblock>
            <location sl="54" sc="42" el="54" ec="46">InternalServices\Views\Search\BasicView.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="54" sc="47" el="54" ec="51">InternalServices\Views\Search\BasicView.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="DocumentUrl">
          <declaration><![CDATA[public string DocumentUrl]]></declaration>
          <documentation>
            <summary>
 Link to the Document
 </summary>
          </documentation>
          <codeblock>
            <location sl="49" sc="37" el="49" ec="41">InternalServices\Views\Search\BasicView.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="49" sc="42" el="49" ec="46">InternalServices\Views\Search\BasicView.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Snippet">
          <declaration><![CDATA[public string Snippet]]></declaration>
          <documentation>
            <summary>
 Highlighted snippet from document
 </summary>
          </documentation>
          <codeblock>
            <location sl="44" sc="33" el="44" ec="37">InternalServices\Views\Search\BasicView.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="44" sc="38" el="44" ec="42">InternalServices\Views\Search\BasicView.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Title">
          <declaration><![CDATA[public string Title]]></declaration>
          <documentation>
            <summary>
 Document's Title
 </summary>
          </documentation>
          <codeblock>
            <location sl="39" sc="31" el="39" ec="35">InternalServices\Views\Search\BasicView.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="39" sc="36" el="39" ec="40">InternalServices\Views\Search\BasicView.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DetailedView">
      <declaration><![CDATA[public class DetailedView : BasicView]]></declaration>
      <documentation>
        <summary>
 Detailed Search Result View
 </summary>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DetailedView()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="AuthorName">
          <declaration><![CDATA[public string AuthorName]]></declaration>
          <documentation>
            <summary>
 Optional: Display Name of the Author
 </summary>
 <remarks>This may be different form current Display Name when Index was run prior to change in Display Name.</remarks></documentation>
          <codeblock>
            <location sl="54" sc="36" el="54" ec="40">InternalServices\Views\Search\DetailedView.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="54" sc="41" el="54" ec="45">InternalServices\Views\Search\DetailedView.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="AuthorProfileUrl">
          <declaration><![CDATA[public string AuthorProfileUrl]]></declaration>
          <documentation>
            <summary>
 Author profile URL
 </summary>
          </documentation>
          <codeblock>
            <location sl="48" sc="42" el="48" ec="46">InternalServices\Views\Search\DetailedView.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="48" sc="47" el="48" ec="51">InternalServices\Views\Search\DetailedView.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Comments">
          <declaration><![CDATA[public int Comments]]></declaration>
          <documentation>
            <summary>
 Number of Comments associated with Content.
 </summary>
 <remarks>Content with more Comments is ranked higher.</remarks></documentation>
          <codeblock>
            <location sl="66" sc="31" el="66" ec="35">InternalServices\Views\Search\DetailedView.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="66" sc="36" el="66" ec="40">InternalServices\Views\Search\DetailedView.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="DisplayModifiedTime">
          <declaration><![CDATA[public string DisplayModifiedTime]]></declaration>
          <documentation>
            <summary>
 Time when Content was last modified (in Utc)
 </summary>
          </documentation>
          <codeblock>
            <location sl="43" sc="45" el="43" ec="49">InternalServices\Views\Search\DetailedView.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="43" sc="50" el="43" ec="54">InternalServices\Views\Search\DetailedView.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Likes">
          <declaration><![CDATA[public int Likes]]></declaration>
          <documentation>
            <summary>
 Number of Likes associated with Content.
 </summary>
 <remarks>Content with more Likes is ranked higher.</remarks></documentation>
          <codeblock>
            <location sl="60" sc="28" el="60" ec="32">InternalServices\Views\Search\DetailedView.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="60" sc="33" el="60" ec="37">InternalServices\Views\Search\DetailedView.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Tags">
          <declaration><![CDATA[public IEnumerable<string> Tags]]></declaration>
          <documentation>
            <summary>
 Tags associated with Document
 </summary>
          </documentation>
          <codeblock>
            <location sl="38" sc="43" el="38" ec="47">InternalServices\Views\Search\DetailedView.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="38" sc="48" el="38" ec="52">InternalServices\Views\Search\DetailedView.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Views">
          <declaration><![CDATA[public int Views]]></declaration>
          <documentation>
            <summary>
 Number of Views associated with Content.
 </summary>
 <remarks>Content with more Views is ranked higher.</remarks></documentation>
          <codeblock>
            <location sl="72" sc="28" el="72" ec="32">InternalServices\Views\Search\DetailedView.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="72" sc="33" el="72" ec="37">InternalServices\Views\Search\DetailedView.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="GroupedBasicView">
      <declaration><![CDATA[public class GroupedBasicView]]></declaration>
      <documentation>
        <summary>
 BasicView grouped by DocumentTypeName
 </summary>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public GroupedBasicView()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="47" sc="9" el="48" ec="10">InternalServices\Views\Search\GroupedBasicView.cs</location>
            <body hash="cf1d633e0f12d646ae45123496b511e5"><![CDATA[public GroupedBasicView()
        {]]></body>
          </codeblock>
        </constructor>
        <constructor name=".ctor">
          <declaration><![CDATA[public GroupedBasicView(BasicView basic)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="50" sc="9" el="54" ec="10">InternalServices\Views\Search\GroupedBasicView.cs</location>
            <body hash="f900b8060fd362856dcac10f77c6fbf5"><![CDATA[public GroupedBasicView(BasicView basic)
        {
            DocumentTypeName = basic.DocumentTypeName;
            Results = new List<BasicView> {new BasicView {Title = basic.Title, Snippet = basic.Snippet, DocumentUrl = basic.DocumentUrl, Attributes = basic.Attributes}};
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="DocumentTypeName">
          <declaration><![CDATA[public string DocumentTypeName]]></declaration>
          <documentation>
            <summary>
 Type of Search Document
 </summary>
          </documentation>
          <codeblock>
            <location sl="38" sc="42" el="38" ec="46">InternalServices\Views\Search\GroupedBasicView.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="38" sc="47" el="38" ec="51">InternalServices\Views\Search\GroupedBasicView.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Results">
          <declaration><![CDATA[public List<BasicView> Results]]></declaration>
          <documentation>
            <summary>
 Results of the Search
 </summary>
          </documentation>
          <codeblock>
            <location sl="43" sc="42" el="43" ec="46">InternalServices\Views\Search\GroupedBasicView.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="43" sc="47" el="43" ec="51">InternalServices\Views\Search\GroupedBasicView.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="GroupedDetailView">
      <declaration><![CDATA[public class GroupedDetailView]]></declaration>
      <documentation>
        <summary>
 DetailedView grouped by Url (TabId)
 </summary>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public GroupedDetailView()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="52" sc="9" el="55" ec="10">InternalServices\Views\Search\GroupedDetailView.cs</location>
            <body hash="bd13239de0e9d49e216ab6fcae03cbed"><![CDATA[public GroupedDetailView()
        {
            Results = new List<DetailedView>();
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="DocumentUrl">
          <declaration><![CDATA[public string DocumentUrl]]></declaration>
          <documentation>
            <summary>
 Document's Url
 </summary>
          </documentation>
          <codeblock>
            <location sl="38" sc="37" el="38" ec="41">InternalServices\Views\Search\GroupedDetailView.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="38" sc="42" el="38" ec="46">InternalServices\Views\Search\GroupedDetailView.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Results">
          <declaration><![CDATA[public List<DetailedView> Results]]></declaration>
          <documentation>
            <summary>
 Results of the Search
 </summary>
          </documentation>
          <codeblock>
            <location sl="48" sc="45" el="48" ec="49">InternalServices\Views\Search\GroupedDetailView.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="48" sc="50" el="48" ec="54">InternalServices\Views\Search\GroupedDetailView.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Title">
          <declaration><![CDATA[public string Title]]></declaration>
          <documentation>
            <summary>
 Document's Title
 </summary>
          </documentation>
          <codeblock>
            <location sl="43" sc="31" el="43" ec="35">InternalServices\Views\Search\GroupedDetailView.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="43" sc="36" el="43" ec="40">InternalServices\Views\Search\GroupedDetailView.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
  </namespace>
  <namespace name="DotNetNuke.Web.Models">
    <class name="ModuleDetail">
      <declaration><![CDATA[public class ModuleDetail]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public ModuleDetail()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="18" sc="9" el="21" ec="10">Models\ModuleDetail.cs</location>
            <body hash="0637693a1a82ff840d2f4a5f86047db7"><![CDATA[public ModuleDetail()
        {
            ModuleInstances = new List<ModuleInstance>();
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="ModuleInstances">
          <declaration><![CDATA[public IList<ModuleInstance> ModuleInstances]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="16" sc="56" el="16" ec="60">Models\ModuleDetail.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="16" sc="61" el="16" ec="65">Models\ModuleDetail.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="ModuleName">
          <declaration><![CDATA[public string ModuleName]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="13" sc="36" el="13" ec="40">Models\ModuleDetail.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="13" sc="41" el="13" ec="45">Models\ModuleDetail.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="ModuleVersion">
          <declaration><![CDATA[public string ModuleVersion]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="10" sc="39" el="10" ec="43">Models\ModuleDetail.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="10" sc="44" el="10" ec="48">Models\ModuleDetail.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="ModuleInstance">
      <declaration><![CDATA[public class ModuleInstance]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public ModuleInstance()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="ModuleId">
          <declaration><![CDATA[public int ModuleId]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="18" sc="31" el="18" ec="35">Models\ModuleInstance.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="18" sc="36" el="18" ec="40">Models\ModuleInstance.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="PageName">
          <declaration><![CDATA[public string PageName]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="9" sc="34" el="9" ec="38">Models\ModuleInstance.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="9" sc="39" el="9" ec="43">Models\ModuleInstance.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="PagePath">
          <declaration><![CDATA[public string PagePath]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="12" sc="34" el="12" ec="38">Models\ModuleInstance.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="12" sc="39" el="12" ec="43">Models\ModuleInstance.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="TabId">
          <declaration><![CDATA[public int TabId]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="15" sc="28" el="15" ec="32">Models\ModuleInstance.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="15" sc="33" el="15" ec="37">Models\ModuleInstance.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="SiteDetail">
      <declaration><![CDATA[public class SiteDetail]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public SiteDetail()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="24" sc="9" el="27" ec="10">Models\SiteDetail.cs</location>
            <body hash="108081f23eaa4f77a3829b6b963966d8"><![CDATA[public SiteDetail()
        {
            Modules = new List<ModuleDetail>();
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="DnnVersion">
          <declaration><![CDATA[public string DnnVersion]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="10" sc="36" el="10" ec="40">Models\SiteDetail.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="10" sc="41" el="10" ec="45">Models\SiteDetail.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="IsAdmin">
          <declaration><![CDATA[public bool IsAdmin]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="19" sc="31" el="19" ec="35">Models\SiteDetail.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="19" sc="36" el="19" ec="40">Models\SiteDetail.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="IsHost">
          <declaration><![CDATA[public bool IsHost]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="16" sc="30" el="16" ec="34">Models\SiteDetail.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="16" sc="35" el="16" ec="39">Models\SiteDetail.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Modules">
          <declaration><![CDATA[public IList<ModuleDetail> Modules]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="22" sc="46" el="22" ec="50">Models\SiteDetail.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="22" sc="51" el="22" ec="55">Models\SiteDetail.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="SiteName">
          <declaration><![CDATA[public string SiteName]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="13" sc="34" el="13" ec="38">Models\SiteDetail.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="13" sc="39" el="13" ec="43">Models\SiteDetail.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="TabModule">
      <declaration><![CDATA[public class TabModule]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public TabModule()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="ModuleInfo">
          <declaration><![CDATA[public ModuleInfo ModuleInfo]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="12" sc="40" el="12" ec="44">Models\TabModule.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="12" sc="45" el="12" ec="49">Models\TabModule.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="ModuleVersion">
          <declaration><![CDATA[public string ModuleVersion]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="14" sc="39" el="14" ec="43">Models\TabModule.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="14" sc="44" el="14" ec="48">Models\TabModule.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="TabInfo">
          <declaration><![CDATA[public TabInfo TabInfo]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="10" sc="34" el="10" ec="38">Models\TabModule.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="10" sc="39" el="10" ec="43">Models\TabModule.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
  </namespace>
  <namespace name="DotNetNuke.Web.Mvp">
    <class name="AttributeBasedViewStateSerializer">
      <declaration><![CDATA[public class AttributeBasedViewStateSerializer]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public AttributeBasedViewStateSerializer()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="DeSerialize">
          <declaration><![CDATA[public static void DeSerialize(object value, StateBag state)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="37" sc="9" el="58" ec="10">Mvp\AttributeBasedViewStateSerializer.cs</location>
            <body hash="6f226465411a530f70953fa2b657c781"><![CDATA[{
            Type typ = value.GetType();

            //Parse all the Public instance properties
            foreach (PropertyInfo member in typ.GetProperties(MemberBindingFlags))
            {
                //Determine if they are attributed with a ViewState Attribute
                ViewStateAttribute attr = member.GetCustomAttributes(typeof (ViewStateAttribute), true).OfType<ViewStateAttribute>().FirstOrDefault();
                if ((attr != null))
                {
                    //Get object from ViewState bag
                    string viewStateKey = attr.ViewStateKey;
                    if (string.IsNullOrEmpty(viewStateKey))
                    {
                        //Use class member's name for Key
                        viewStateKey = member.Name;
                    }

                    member.SetValue(value, state[viewStateKey], null);
                }
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="Serialize">
          <declaration><![CDATA[public static void Serialize(object value, StateBag state)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="61" sc="9" el="82" ec="10">Mvp\AttributeBasedViewStateSerializer.cs</location>
            <body hash="c517603044d66284a4da4e7e65d85e9e"><![CDATA[{
            Type typ = value.GetType();

            //Parse all the Public instance properties
            foreach (PropertyInfo member in typ.GetProperties(MemberBindingFlags))
            {
                //Determine if they are attributed with a ViewState Attribute
                ViewStateAttribute attr = member.GetCustomAttributes(typeof (ViewStateAttribute), true).OfType<ViewStateAttribute>().FirstOrDefault();
                if ((attr != null))
                {
                    //Add property to ViewState bag
                    string viewStateKey = attr.ViewStateKey;
                    if (string.IsNullOrEmpty(viewStateKey))
                    {
                        //Use class member's name for Key
                        viewStateKey = member.Name;
                    }

                    state[viewStateKey] = member.GetValue(value, null);
                }
            }
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="MemberBindingFlags">
          <declaration><![CDATA[private const BindingFlags MemberBindingFlags = BindingFlags.Instance | BindingFlags.Public;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="HttpHandlerPresenter&lt;TView&gt;">
      <declaration><![CDATA[public abstract class HttpHandlerPresenter<TView> : Presenter<TView> where TView : class, IHttpHandlerView]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[protected HttpHandlerPresenter(TView view) : base(view)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="29" sc="54" el="31" ec="10">Mvp\HttpHandlerPresenter.cs</location>
            <body hash="6477a94fd3f7ba9ffb8597dc73e296f7"><![CDATA[base(view)
        {
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="ReleaseView">
          <deprecation>Deprecated in DotNetNuke 6.1. Base Class Method deprecated in WebFormsMVP 1.2</deprecation>
          <declaration><![CDATA[public override void ReleaseView()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="35" sc="9" el="36" ec="10">Mvp\HttpHandlerPresenter.cs</location>
            <body hash="539fa760ca172337a931519768c64187"><![CDATA[{
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="HttpHandlerView">
      <declaration><![CDATA[public abstract class HttpHandlerView : MvpHttpHandler, IHttpHandlerView, IView]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[protected HttpHandlerView()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="IHttpHandlerView">
      <declaration><![CDATA[public interface IHttpHandlerView : IView]]></declaration>
      <documentation>
      </documentation>
      <constructors>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="IModuleView">
      <declaration><![CDATA[public interface IModuleView : IModuleViewBase, IView]]></declaration>
      <documentation>
      </documentation>
      <constructors>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="IModuleView&lt;TModel&gt;">
      <declaration><![CDATA[public interface IModuleView<TModel> : IModuleViewBase, IView, IView<TModel> where TModel : class, new()]]></declaration>
      <documentation>
      </documentation>
      <constructors>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="IModuleViewBase">
      <declaration><![CDATA[public interface IModuleViewBase : IView]]></declaration>
      <documentation>
      </documentation>
      <constructors>
      </constructors>
      <methods>
        <method name="add_Initialize">
          <declaration><![CDATA[void add_Initialize(EventHandler value);]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="ProcessModuleLoadException">
          <declaration><![CDATA[void ProcessModuleLoadException(Exception ex);]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="remove_Initialize">
          <declaration><![CDATA[void remove_Initialize(EventHandler value);]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="ShowMessage">
          <declaration><![CDATA[void ShowMessage(string messageHeader, string message, ModuleMessage.ModuleMessageType messageType);]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="AutoDataBind">
          <declaration><![CDATA[bool AutoDataBind]]></declaration>
          <documentation>
          </documentation>
        </property>
      </properties>
      <events>
        <event name="Initialize">
          <declaration><![CDATA[event EventHandler Initialize;]]></declaration>
          <documentation>
          </documentation>
        </event>
      </events>
    </class>
    <class name="ISettingsView">
      <declaration><![CDATA[public interface ISettingsView : IModuleViewBase, IView]]></declaration>
      <documentation>
      </documentation>
      <constructors>
      </constructors>
      <methods>
        <method name="add_OnLoadSettings">
          <declaration><![CDATA[void add_OnLoadSettings(EventHandler value);]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="add_OnSaveSettings">
          <declaration><![CDATA[void add_OnSaveSettings(EventHandler value);]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="remove_OnLoadSettings">
          <declaration><![CDATA[void remove_OnLoadSettings(EventHandler value);]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="remove_OnSaveSettings">
          <declaration><![CDATA[void remove_OnSaveSettings(EventHandler value);]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
        <event name="OnLoadSettings">
          <declaration><![CDATA[event EventHandler OnLoadSettings;]]></declaration>
          <documentation>
          </documentation>
        </event>
        <event name="OnSaveSettings">
          <declaration><![CDATA[event EventHandler OnSaveSettings;]]></declaration>
          <documentation>
          </documentation>
        </event>
      </events>
    </class>
    <class name="ISettingsView&lt;TModel&gt;">
      <declaration><![CDATA[public interface ISettingsView<TModel> : IModuleViewBase, IView, IView<TModel> where TModel : class, new()]]></declaration>
      <documentation>
      </documentation>
      <constructors>
      </constructors>
      <methods>
        <method name="add_OnLoadSettings">
          <declaration><![CDATA[void add_OnLoadSettings(EventHandler value);]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="add_OnSaveSettings">
          <declaration><![CDATA[void add_OnSaveSettings(EventHandler value);]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="remove_OnLoadSettings">
          <declaration><![CDATA[void remove_OnLoadSettings(EventHandler value);]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="remove_OnSaveSettings">
          <declaration><![CDATA[void remove_OnSaveSettings(EventHandler value);]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
        <event name="OnLoadSettings">
          <declaration><![CDATA[event EventHandler OnLoadSettings;]]></declaration>
          <documentation>
          </documentation>
        </event>
        <event name="OnSaveSettings">
          <declaration><![CDATA[event EventHandler OnSaveSettings;]]></declaration>
          <documentation>
          </documentation>
        </event>
      </events>
    </class>
    <class name="IWebServiceView">
      <declaration><![CDATA[public interface IWebServiceView : IWebServiceViewBase, IView]]></declaration>
      <documentation>
      </documentation>
      <constructors>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="IWebServiceView&lt;TModel&gt;">
      <declaration><![CDATA[public interface IWebServiceView<TModel> : IWebServiceViewBase, IView, IView<TModel> where TModel : class, new()]]></declaration>
      <documentation>
      </documentation>
      <constructors>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="IWebServiceViewBase">
      <declaration><![CDATA[public interface IWebServiceViewBase : IView]]></declaration>
      <documentation>
      </documentation>
      <constructors>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="ModulePresenter&lt;TView&gt;">
      <declaration><![CDATA[public abstract class ModulePresenter<TView> : ModulePresenterBase<TView> where TView : class, IModuleView]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[protected ModulePresenter(TView view) : base(view)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="27" sc="49" el="29" ec="10">Mvp\ModulePresenter.cs</location>
            <body hash="6477a94fd3f7ba9ffb8597dc73e296f7"><![CDATA[base(view)
        {
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="TModel&gt;">
      <declaration><![CDATA[public abstract class ModulePresenter<TView, TModel> : ModulePresenterBase<TView> where TView : class, IModuleView<TModel> where TModel : class, new()]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[protected ModulePresenter(TView view) : base(view)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="25" sc="49" el="27" ec="10">Mvp\ModulePresenterOfT.cs</location>
            <body hash="6477a94fd3f7ba9ffb8597dc73e296f7"><![CDATA[base(view)
        {
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="ModulePresenterBase&lt;TView&gt;">
      <declaration><![CDATA[public abstract class ModulePresenterBase<TView> : Presenter<TView> where TView : class, IModuleViewBase]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[protected ModulePresenterBase(TView view) : base(view)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="46" sc="53" el="66" ec="10">Mvp\ModulePresenterBase.cs</location>
            <body hash="3b7858c89bb6b68da9027ef3df8addeb"><![CDATA[base(view)
        {
            //Try and cast view to Control to get common control properties
            var control = view as Control;
            if (control != null && control.Page != null)
            {
                IsPostBack = control.Page.IsPostBack;
            }

            //Try and cast view to IModuleControl to get the Context
            var moduleControl = view as IModuleControl;
            if (moduleControl != null)
            {
                LocalResourceFile = moduleControl.LocalResourceFile;
                ModuleContext = moduleControl.ModuleContext;
            }
            Validator = new Validator(new DataAnnotationsObjectValidator());

            view.Initialize += InitializeInternal;
            view.Load += LoadInternal;
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="CheckAuthPolicy">
          <declaration><![CDATA[protected internal virtual bool CheckAuthPolicy()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="141" sc="9" el="155" ec="10">Mvp\ModulePresenterBase.cs</location>
            <body hash="8a4ac244a793bc855dbf7ca028fb76c1"><![CDATA[{
            if ((UserId == Null.NullInteger && !AllowAnonymousAccess))
            {
                OnNoCurrentUser();
                return false;
            }

            if ((!IsUserAuthorized))
            {
                OnUnauthorizedUser();
                return false;
            }

            return true;
        }]]></body>
          </codeblock>
        </method>
        <method name="InitializeInternal">
          <declaration><![CDATA[private void InitializeInternal(object sender, EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="123" sc="9" el="126" ec="10">Mvp\ModulePresenterBase.cs</location>
            <body hash="cd2479cc86f00b5fbc676ad89c3376a9"><![CDATA[{
            LoadFromContext();
            OnInit();
        }]]></body>
          </codeblock>
        </method>
        <method name="LoadFromContext">
          <declaration><![CDATA[protected virtual void LoadFromContext()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="158" sc="9" el="174" ec="10">Mvp\ModulePresenterBase.cs</location>
            <body hash="71d5c4a820a0cec264a85063596a4412"><![CDATA[{
            if (ModuleContext != null)
            {
                ModuleInfo = ModuleContext.Configuration;
                IsEditable = ModuleContext.IsEditable;
                IsSuperUser = ModuleContext.PortalSettings.UserInfo.IsSuperUser;
                ModuleId = ModuleContext.ModuleId;
                PortalId = ModuleContext.PortalId;
                Settings = new Dictionary<string, string>();
                foreach (object key in ModuleContext.Settings.Keys)
                {
                    Settings[key.ToString()] = (string) ModuleContext.Settings[key];
                }
                TabId = ModuleContext.TabId;
                UserId = ModuleContext.PortalSettings.UserInfo.UserID;
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="LoadInternal">
          <declaration><![CDATA[private void LoadInternal(object sender, EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="129" sc="9" el="134" ec="10">Mvp\ModulePresenterBase.cs</location>
            <body hash="e3f032f176729a70e8b0929ad2b48d10"><![CDATA[{
            if (CheckAuthPolicy())
            {
                OnLoad();
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="LocalizeString">
          <declaration><![CDATA[protected virtual string LocalizeString(string key)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="177" sc="9" el="188" ec="10">Mvp\ModulePresenterBase.cs</location>
            <body hash="648a321966436e2d109106a350e5d74c"><![CDATA[{
            string localizedString;
            if (!string.IsNullOrEmpty(key) && !string.IsNullOrEmpty(LocalResourceFile))
            {
                localizedString = Localization.GetString(key, LocalResourceFile);
            }
            else
            {
                localizedString = Null.NullString;
            }
            return localizedString;
        }]]></body>
          </codeblock>
        </method>
        <method name="OnInit">
          <declaration><![CDATA[protected virtual void OnInit()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="191" sc="9" el="192" ec="10">Mvp\ModulePresenterBase.cs</location>
            <body hash="539fa760ca172337a931519768c64187"><![CDATA[{
        }]]></body>
          </codeblock>
        </method>
        <method name="OnLoad">
          <declaration><![CDATA[protected virtual void OnLoad()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="195" sc="9" el="196" ec="10">Mvp\ModulePresenterBase.cs</location>
            <body hash="539fa760ca172337a931519768c64187"><![CDATA[{
        }]]></body>
          </codeblock>
        </method>
        <method name="OnNoCurrentUser">
          <declaration><![CDATA[protected virtual void OnNoCurrentUser()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="199" sc="9" el="201" ec="10">Mvp\ModulePresenterBase.cs</location>
            <body hash="4ae8a460742156b3c3fa2b88b9808cac"><![CDATA[{
            RedirectToLogin();
        }]]></body>
          </codeblock>
        </method>
        <method name="OnUnauthorizedUser">
          <declaration><![CDATA[protected virtual void OnUnauthorizedUser()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="204" sc="9" el="206" ec="10">Mvp\ModulePresenterBase.cs</location>
            <body hash="bb9fcc065311cfa45684601383420726"><![CDATA[{
            RedirectToAccessDenied();
        }]]></body>
          </codeblock>
        </method>
        <method name="ProcessModuleLoadException">
          <declaration><![CDATA[protected void ProcessModuleLoadException(Exception ex)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="224" sc="9" el="226" ec="10">Mvp\ModulePresenterBase.cs</location>
            <body hash="c8ed45ddf5a8b5698e48c544c43fc618"><![CDATA[{
            View.ProcessModuleLoadException(ex);
        }]]></body>
          </codeblock>
        </method>
        <method name="RedirectToAccessDenied">
          <declaration><![CDATA[protected void RedirectToAccessDenied()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="209" sc="9" el="211" ec="10">Mvp\ModulePresenterBase.cs</location>
            <body hash="7276a11e90310eb92c86bdb6f4fd5d00"><![CDATA[{
            Response.Redirect(TestableGlobals.Instance.AccessDeniedURL(), true);
        }]]></body>
          </codeblock>
        </method>
        <method name="RedirectToCurrentPage">
          <declaration><![CDATA[protected void RedirectToCurrentPage()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="214" sc="9" el="216" ec="10">Mvp\ModulePresenterBase.cs</location>
            <body hash="3118d08b161f31c5625ef5a93cf1cbe3"><![CDATA[{
            Response.Redirect(TestableGlobals.Instance.NavigateURL(), true);
        }]]></body>
          </codeblock>
        </method>
        <method name="RedirectToLogin">
          <declaration><![CDATA[protected void RedirectToLogin()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="219" sc="9" el="221" ec="10">Mvp\ModulePresenterBase.cs</location>
            <body hash="46aa62854fe856a7ebc5d8a07130d6bb"><![CDATA[{
            Response.Redirect(TestableGlobals.Instance.LoginURL(Request.RawUrl, false), true);
        }]]></body>
          </codeblock>
        </method>
        <method name="ReleaseView">
          <deprecation>Deprecated in DotNetNuke 6.1. Base Class Method deprecated in WebFormsMVP 1.2</deprecation>
          <declaration><![CDATA[public override void ReleaseView()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="262" sc="9" el="263" ec="10">Mvp\ModulePresenterBase.cs</location>
            <body hash="539fa760ca172337a931519768c64187"><![CDATA[{
        }]]></body>
          </codeblock>
        </method>
        <method name="RestoreState">
          <declaration><![CDATA[public virtual void RestoreState(StateBag stateBag)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="266" sc="9" el="268" ec="10">Mvp\ModulePresenterBase.cs</location>
            <body hash="53ad31b0d647813034a71f9b6638bd43"><![CDATA[{
            AttributeBasedViewStateSerializer.DeSerialize(this, stateBag);
        }]]></body>
          </codeblock>
        </method>
        <method name="SaveState">
          <declaration><![CDATA[public virtual void SaveState(StateBag stateBag)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="271" sc="9" el="273" ec="10">Mvp\ModulePresenterBase.cs</location>
            <body hash="515fabb809bb54f459fdb9b36ecf7442"><![CDATA[{
            AttributeBasedViewStateSerializer.Serialize(this, stateBag);
        }]]></body>
          </codeblock>
        </method>
        <method name="ShowMessage">
          <declaration><![CDATA[protected void ShowMessage(string messageHeader, string message, ModuleMessage.ModuleMessageType messageType)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="229" sc="9" el="231" ec="10">Mvp\ModulePresenterBase.cs</location>
            <body hash="ea72ea6754a40d5a4647baca342ae857"><![CDATA[{
            ShowMessage(messageHeader, message, messageType, true);
        }]]></body>
          </codeblock>
        </method>
        <method name="ShowMessage">
          <declaration><![CDATA[protected void ShowMessage(string message, ModuleMessage.ModuleMessageType messageType)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="234" sc="9" el="236" ec="10">Mvp\ModulePresenterBase.cs</location>
            <body hash="59b225734bf30b38a469b69bfb6db32d"><![CDATA[{
            ShowMessage(message, messageType, true);
        }]]></body>
          </codeblock>
        </method>
        <method name="ShowMessage">
          <declaration><![CDATA[protected void ShowMessage(string message, ModuleMessage.ModuleMessageType messageType, bool localize)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="239" sc="9" el="241" ec="10">Mvp\ModulePresenterBase.cs</location>
            <body hash="a01bbf20910a274a77ba6e22010c55a0"><![CDATA[{
            ShowMessage(string.Empty, message, messageType, localize);
        }]]></body>
          </codeblock>
        </method>
        <method name="ShowMessage">
          <declaration><![CDATA[protected void ShowMessage(string messageHeader, string message, ModuleMessage.ModuleMessageType messageType, bool localize)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="244" sc="9" el="254" ec="10">Mvp\ModulePresenterBase.cs</location>
            <body hash="80018ad93af207a10d52ec5583e20fec"><![CDATA[{
            if (!string.IsNullOrEmpty(message))
            {
                if (localize)
                {
                    messageHeader = LocalizeString(messageHeader);
                    message = LocalizeString(message);
                }
                View.ShowMessage(messageHeader, message, messageType);
            }
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="AllowAnonymousAccess">
          <declaration><![CDATA[protected internal virtual bool AllowAnonymousAccess]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="75" sc="13" el="77" ec="14">Mvp\ModulePresenterBase.cs</location>
            <body hash="f5368e81f663038061ec388beff126aa"><![CDATA[{
                return true;
            }]]></body>
          </codeblock>
        </property>
        <property name="AutoDataBind">
          <declaration><![CDATA[public bool AutoDataBind]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="92" sc="36" el="92" ec="40">Mvp\ModulePresenterBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="92" sc="41" el="92" ec="45">Mvp\ModulePresenterBase.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="IsEditable">
          <declaration><![CDATA[public bool IsEditable]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="96" sc="34" el="96" ec="38">Mvp\ModulePresenterBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="96" sc="39" el="96" ec="43">Mvp\ModulePresenterBase.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="IsPostBack">
          <declaration><![CDATA[public bool IsPostBack]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="98" sc="34" el="98" ec="38">Mvp\ModulePresenterBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="98" sc="39" el="98" ec="43">Mvp\ModulePresenterBase.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="IsSuperUser">
          <declaration><![CDATA[public bool IsSuperUser]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="100" sc="35" el="100" ec="39">Mvp\ModulePresenterBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="100" sc="40" el="100" ec="44">Mvp\ModulePresenterBase.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="IsUserAuthorized">
          <declaration><![CDATA[protected internal virtual bool IsUserAuthorized]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="83" sc="13" el="85" ec="14">Mvp\ModulePresenterBase.cs</location>
            <body hash="f5368e81f663038061ec388beff126aa"><![CDATA[{
                return true;
            }]]></body>
          </codeblock>
        </property>
        <property name="LocalResourceFile">
          <declaration><![CDATA[public string LocalResourceFile]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="102" sc="43" el="102" ec="47">Mvp\ModulePresenterBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="102" sc="48" el="102" ec="52">Mvp\ModulePresenterBase.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="ModuleContext">
          <declaration><![CDATA[public ModuleInstanceContext ModuleContext]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="104" sc="54" el="104" ec="58">Mvp\ModulePresenterBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="104" sc="59" el="104" ec="63">Mvp\ModulePresenterBase.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="ModuleId">
          <declaration><![CDATA[public int ModuleId]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="106" sc="31" el="106" ec="35">Mvp\ModulePresenterBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="106" sc="36" el="106" ec="40">Mvp\ModulePresenterBase.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="ModuleInfo">
          <declaration><![CDATA[public ModuleInfo ModuleInfo]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="94" sc="40" el="94" ec="44">Mvp\ModulePresenterBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="94" sc="45" el="94" ec="49">Mvp\ModulePresenterBase.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="PortalId">
          <declaration><![CDATA[public int PortalId]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="108" sc="31" el="108" ec="35">Mvp\ModulePresenterBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="108" sc="36" el="108" ec="40">Mvp\ModulePresenterBase.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Settings">
          <declaration><![CDATA[public Dictionary<string, string> Settings]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="114" sc="54" el="114" ec="58">Mvp\ModulePresenterBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="114" sc="59" el="114" ec="63">Mvp\ModulePresenterBase.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="TabId">
          <declaration><![CDATA[public int TabId]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="110" sc="28" el="110" ec="32">Mvp\ModulePresenterBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="110" sc="33" el="110" ec="37">Mvp\ModulePresenterBase.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="UserId">
          <declaration><![CDATA[public int UserId]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="112" sc="29" el="112" ec="33">Mvp\ModulePresenterBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="112" sc="34" el="112" ec="38">Mvp\ModulePresenterBase.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Validator">
          <declaration><![CDATA[public Validator Validator]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="116" sc="38" el="116" ec="42">Mvp\ModulePresenterBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="116" sc="43" el="116" ec="47">Mvp\ModulePresenterBase.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="TModel&gt;">
      <declaration><![CDATA[public abstract class ModuleSettingsPresenter<TView, TModel> : ModulePresenterBase<TView> where TView : class, ISettingsView<TModel> where TModel : SettingsModel, new()]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[protected ModuleSettingsPresenter(TView view) : base(view)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="34" sc="57" el="38" ec="10">Mvp\ModuleSettingsPresenterOfT.cs</location>
            <body hash="ad67fcd73ae3118717b18ef71ee772e9"><![CDATA[base(view)
        {
            view.OnLoadSettings += OnLoadSettingsInternal;
            view.OnSaveSettings += OnSaveSettingsInternal;
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="LoadSettings">
          <declaration><![CDATA[protected virtual void LoadSettings()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="69" sc="9" el="81" ec="10">Mvp\ModuleSettingsPresenterOfT.cs</location>
            <body hash="62d8784345a8dc2359ba0a5a957329dd"><![CDATA[{
            View.Model.ModuleSettings = new Dictionary<string, string>(
                                            ModuleContext.Configuration.ModuleSettings
                                            .Cast<DictionaryEntry>()
                                            .ToDictionary(kvp => (string)kvp.Key, kvp => (string)kvp.Value)
                                        );

            View.Model.TabModuleSettings = new Dictionary<string, string>(
                                            ModuleContext.Configuration.TabModuleSettings
                                            .Cast<DictionaryEntry>()
                                            .ToDictionary(kvp => (string)kvp.Key, kvp => (string)kvp.Value)
                                        );
        }]]></body>
          </codeblock>
        </method>
        <method name="OnLoad">
          <declaration><![CDATA[protected override void OnLoad()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="57" sc="9" el="66" ec="10">Mvp\ModuleSettingsPresenterOfT.cs</location>
            <body hash="6b9a430ec0922c04099516de7a1bd6f5"><![CDATA[{
            base.OnLoad();

            if (IsPostBack)
            {
                //Initialize dictionaries as LoadSettings is not called on Postback
                View.Model.ModuleSettings = new Dictionary<string, string>();
                View.Model.TabModuleSettings = new Dictionary<string, string>();
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="OnLoadSettingsInternal">
          <declaration><![CDATA[private void OnLoadSettingsInternal(object sender, EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="43" sc="9" el="45" ec="10">Mvp\ModuleSettingsPresenterOfT.cs</location>
            <body hash="2ee4cda03956f12db850c1de7e348e27"><![CDATA[{
            LoadSettings();
        }]]></body>
          </codeblock>
        </method>
        <method name="OnSaveSettingsInternal">
          <declaration><![CDATA[private void OnSaveSettingsInternal(object sender, EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="48" sc="9" el="50" ec="10">Mvp\ModuleSettingsPresenterOfT.cs</location>
            <body hash="ad5a7274b583cc261315de98d4182717"><![CDATA[{
            SaveSettings();
        }]]></body>
          </codeblock>
        </method>
        <method name="SaveSettings">
          <declaration><![CDATA[protected virtual void SaveSettings()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="84" sc="9" el="96" ec="10">Mvp\ModuleSettingsPresenterOfT.cs</location>
            <body hash="e861b7ea5514a0aa7fdd0b5023dffee6"><![CDATA[{
            var controller = ModuleController.Instance;

            foreach (var setting in View.Model.ModuleSettings)
            {
                ModuleController.Instance.UpdateModuleSetting(ModuleId, setting.Key, setting.Value);
            }

            foreach (var setting in View.Model.TabModuleSettings)
            {
                ModuleController.Instance.UpdateTabModuleSetting(ModuleContext.TabModuleId, setting.Key, setting.Value);
            }
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="ModuleSettingsPresenterBase&lt;TView&gt;">
      <declaration><![CDATA[public class ModuleSettingsPresenterBase<TView> : ModulePresenterBase<TView> where TView : class, ISettingsView]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public ModuleSettingsPresenterBase(TView view) : base(view)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="30" sc="58" el="37" ec="10">Mvp\ModuleSettingsPresenter.cs</location>
            <body hash="3431ea3a4b569ddee2d9174ea887b603"><![CDATA[base(view)
        {
            view.OnLoadSettings += OnLoadSettingsInternal;
            view.OnSaveSettings += OnSaveSettingsInternal;

            ModuleSettings = new Dictionary<string, string>();
            TabModuleSettings = new Dictionary<string, string>();
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="LoadFromContext">
          <declaration><![CDATA[protected override void LoadFromContext()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="62" sc="9" el="74" ec="10">Mvp\ModuleSettingsPresenter.cs</location>
            <body hash="fed2d3fcd349b1a839a00e07bc130a08"><![CDATA[{
            base.LoadFromContext();

            foreach (var key in ModuleContext.Configuration.ModuleSettings.Keys)
            {
                ModuleSettings.Add(Convert.ToString(key), Convert.ToString(ModuleContext.Configuration.ModuleSettings[key]));
            }

            foreach (var key in ModuleContext.Configuration.TabModuleSettings.Keys)
            {
                TabModuleSettings.Add(Convert.ToString(key), Convert.ToString(ModuleContext.Configuration.TabModuleSettings[key]));
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="LoadSettings">
          <declaration><![CDATA[protected virtual void LoadSettings()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="77" sc="9" el="78" ec="10">Mvp\ModuleSettingsPresenter.cs</location>
            <body hash="539fa760ca172337a931519768c64187"><![CDATA[{
        }]]></body>
          </codeblock>
        </method>
        <method name="OnLoadSettingsInternal">
          <declaration><![CDATA[private void OnLoadSettingsInternal(object sender, EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="48" sc="9" el="50" ec="10">Mvp\ModuleSettingsPresenter.cs</location>
            <body hash="2ee4cda03956f12db850c1de7e348e27"><![CDATA[{
            LoadSettings();
        }]]></body>
          </codeblock>
        </method>
        <method name="OnSaveSettingsInternal">
          <declaration><![CDATA[private void OnSaveSettingsInternal(object sender, EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="53" sc="9" el="55" ec="10">Mvp\ModuleSettingsPresenter.cs</location>
            <body hash="ad5a7274b583cc261315de98d4182717"><![CDATA[{
            SaveSettings();
        }]]></body>
          </codeblock>
        </method>
        <method name="SaveSettings">
          <declaration><![CDATA[protected virtual void SaveSettings()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="81" sc="9" el="82" ec="10">Mvp\ModuleSettingsPresenter.cs</location>
            <body hash="539fa760ca172337a931519768c64187"><![CDATA[{
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="ModuleSettings">
          <declaration><![CDATA[public Dictionary<string, string> ModuleSettings]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="41" sc="60" el="41" ec="64">Mvp\ModuleSettingsPresenter.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="41" sc="65" el="41" ec="69">Mvp\ModuleSettingsPresenter.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="TabModuleSettings">
          <declaration><![CDATA[public Dictionary<string, string> TabModuleSettings]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="43" sc="63" el="43" ec="67">Mvp\ModuleSettingsPresenter.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="43" sc="68" el="43" ec="72">Mvp\ModuleSettingsPresenter.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="ModuleView">
      <declaration><![CDATA[public abstract class ModuleView : ModuleViewBase]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[protected ModuleView()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="ModuleView&lt;TModel&gt;">
      <declaration><![CDATA[public abstract class ModuleView<TModel> : ModuleViewBase, IView<TModel>, IView where TModel : class, new()]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[protected ModuleView()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="LoadViewState">
          <declaration><![CDATA[protected override void LoadViewState(object savedState)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="55" sc="9" el="59" ec="10">Mvp\ModuleViewOfT.cs</location>
            <body hash="668a52e53f2b2b54ebed5b9abe4276cc"><![CDATA[{
            //Call the base class to load any View State
            base.LoadViewState(savedState);
            AttributeBasedViewStateSerializer.DeSerialize(Model, ViewState);
        }]]></body>
          </codeblock>
        </method>
        <method name="SaveViewState">
          <declaration><![CDATA[protected override object SaveViewState()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="62" sc="9" el="66" ec="10">Mvp\ModuleViewOfT.cs</location>
            <body hash="cbe4328e3f25492c664620c770238cd5"><![CDATA[{
            AttributeBasedViewStateSerializer.Serialize(Model, ViewState);
            //Call the base class to save the View State
            return base.SaveViewState();
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_model">
          <declaration><![CDATA[private TModel _model;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="Model">
          <declaration><![CDATA[public TModel Model]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="41" sc="13" el="48" ec="14">Mvp\ModuleViewOfT.cs</location>
            <body hash="b657a15f08d58ef5e78c1ce711ae2fd0"><![CDATA[{
                if ((_model == null))
                {
                    throw new InvalidOperationException(
                        "The Model property is currently null, however it should have been automatically initialized by the presenter. This most likely indicates that no presenter was bound to the control. Check your presenter bindings.");
                }
                return _model;
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="ModuleViewBase">
      <declaration><![CDATA[public abstract class ModuleViewBase : ModuleUserControlBase, IModuleViewBase, IView]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[protected ModuleViewBase()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="41" sc="9" el="44" ec="10">Mvp\ModuleViewBase.cs</location>
            <body hash="887f6cb70da0affa3132eb572b1e6aab"><![CDATA[protected ModuleViewBase()
        {
            AutoDataBind = true;
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="add_Initialize">
          <declaration><![CDATA[public void add_Initialize(EventHandler value)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="add_Load">
          <declaration><![CDATA[public new void add_Load(EventHandler value)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="DataItem">
          <declaration><![CDATA[protected T DataItem<T>() where T : class, new()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="51" sc="9" el="54" ec="10">Mvp\ModuleViewBase.cs</location>
            <body hash="09488e0578d052079f3aed21681ccad3"><![CDATA[{
            var _T = Page.GetDataItem() as T ?? new T();
            return _T;
        }]]></body>
          </codeblock>
        </method>
        <method name="DataValue">
          <declaration><![CDATA[protected T DataValue<T>()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="57" sc="9" el="59" ec="10">Mvp\ModuleViewBase.cs</location>
            <body hash="16b4b5920a6bd91aad9513c5b915766b"><![CDATA[{
            return (T) Page.GetDataItem();
        }]]></body>
          </codeblock>
        </method>
        <method name="DataValue">
          <declaration><![CDATA[protected string DataValue<T>(string format)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="62" sc="9" el="64" ec="10">Mvp\ModuleViewBase.cs</location>
            <body hash="113a65cdb6c5d29dfca2af971a14b8e7"><![CDATA[{
            return string.Format(CultureInfo.CurrentCulture, format, DataValue<T>());
        }]]></body>
          </codeblock>
        </method>
        <method name="OnInit">
          <declaration><![CDATA[protected override void OnInit(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="67" sc="9" el="75" ec="10">Mvp\ModuleViewBase.cs</location>
            <body hash="5abf479d1de941e9b2e0cef9efa0e934"><![CDATA[{
            PageViewHost.Register(this, Context, false);

            base.OnInit(e);

            Page.InitComplete += PageInitComplete;
            Page.PreRenderComplete += PagePreRenderComplete;
            Page.Load += PageLoad;
        }]]></body>
          </codeblock>
        </method>
        <method name="PageInitComplete">
          <declaration><![CDATA[private void PageInitComplete(object sender, EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="111" sc="9" el="116" ec="10">Mvp\ModuleViewBase.cs</location>
            <body hash="873f317b865600704f4092152a60ff17"><![CDATA[{
            if (Initialize != null)
            {
                Initialize(this, EventArgs.Empty);
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="PageLoad">
          <declaration><![CDATA[private void PageLoad(object sender, EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="119" sc="9" el="124" ec="10">Mvp\ModuleViewBase.cs</location>
            <body hash="16bf6a400ac29d09dfbd4b246e3e0a82"><![CDATA[{
            if (Load != null)
            {
                Load(this, e);
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="PagePreRenderComplete">
          <declaration><![CDATA[private void PagePreRenderComplete(object sender, EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="127" sc="9" el="134" ec="10">Mvp\ModuleViewBase.cs</location>
            <body hash="11c4bf20990510f93398558b73866edc"><![CDATA[{
            //This event is raised after any async page tasks have completed, so it
            //is safe to data-bind
            if ((AutoDataBind))
            {
                DataBind();
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="ProcessModuleLoadException">
          <declaration><![CDATA[public void ProcessModuleLoadException(Exception ex)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="86" sc="9" el="88" ec="10">Mvp\ModuleViewBase.cs</location>
            <body hash="290bee966c02005d97150c4ca0ead133"><![CDATA[{
            Exceptions.ProcessModuleLoadException(this, ex);
        }]]></body>
          </codeblock>
        </method>
        <method name="remove_Initialize">
          <declaration><![CDATA[public void remove_Initialize(EventHandler value)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="remove_Load">
          <declaration><![CDATA[public new void remove_Load(EventHandler value)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="ShowMessage">
          <declaration><![CDATA[public void ShowMessage(string messageHeader, string message, ModuleMessage.ModuleMessageType messageType)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="91" sc="9" el="93" ec="10">Mvp\ModuleViewBase.cs</location>
            <body hash="26fcc7f417d51edcd127b7d81caec961"><![CDATA[{
            DotNetNuke.UI.Skins.Skin.AddModuleMessage(this, messageHeader, message, messageType);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="Initialize">
          <declaration><![CDATA[private EventHandler Initialize;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="Load">
          <declaration><![CDATA[private new EventHandler Load;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="AutoDataBind">
          <declaration><![CDATA[public bool AutoDataBind]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="81" sc="36" el="81" ec="40">Mvp\ModuleViewBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="81" sc="41" el="81" ec="45">Mvp\ModuleViewBase.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="ThrowExceptionIfNoPresenterBound">
          <declaration><![CDATA[public bool ThrowExceptionIfNoPresenterBound]]></declaration>
          <documentation>
          </documentation>
        </property>
      </properties>
      <events>
        <event name="Initialize">
          <declaration><![CDATA[public event EventHandler Initialize;]]></declaration>
          <documentation>
          </documentation>
        </event>
        <event name="Load">
          <declaration><![CDATA[public new event EventHandler Load;]]></declaration>
          <documentation>
          </documentation>
        </event>
      </events>
    </class>
    <class name="ProfileModuleViewBase&lt;TModel&gt;">
      <declaration><![CDATA[public abstract class ProfileModuleViewBase<TModel> : ModuleView<TModel>, IProfileModule where TModel : class, new()]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[protected ProfileModuleViewBase()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="GetRedirectUrl">
          <declaration><![CDATA[private string GetRedirectUrl()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="74" sc="9" el="89" ec="10">Mvp\ProfileModuleViewBase.cs</location>
            <body hash="1baa031334b39ad53dffe83976298669"><![CDATA[{
            //redirect user to default page if not specific the home tab, do this action to prevent loop redirect.
            var homeTabId = ModuleContext.PortalSettings.HomeTabId;
            string redirectUrl;

            if (homeTabId > Null.NullInteger)
            {
                redirectUrl = TestableGlobals.Instance.NavigateURL(homeTabId);
            }
            else
            {
                redirectUrl = TestableGlobals.Instance.GetPortalDomainName(PortalSettings.Current.PortalAlias.HTTPAlias, Request, true) + "/" + Globals.glbDefaultPage;
            }

            return redirectUrl;
        }]]></body>
          </codeblock>
        </method>
        <method name="OnInit">
          <declaration><![CDATA[protected override void OnInit(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="96" sc="9" el="108" ec="10">Mvp\ProfileModuleViewBase.cs</location>
            <body hash="c68a8279fea435d30c2071cc405a84c3"><![CDATA[{
            if (ProfileUserId == Null.NullInteger &&
                            (ModuleContext.PortalSettings.ActiveTab.TabID == ModuleContext.PortalSettings.UserTabId
                                || ModuleContext.PortalSettings.ActiveTab.ParentId == ModuleContext.PortalSettings.UserTabId))
            {
                //Clicked on breadcrumb - don't know which user
                Response.Redirect(Request.IsAuthenticated
                                      ? Globals.NavigateURL(ModuleContext.PortalSettings.ActiveTab.TabID, "", "UserId=" + ModuleContext.PortalSettings.UserId.ToString(CultureInfo.InvariantCulture))
                                      : GetRedirectUrl(), true);
            }

            base.OnInit(e);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="DisplayModule">
          <declaration><![CDATA[public abstract bool DisplayModule]]></declaration>
          <documentation>
          </documentation>
        </property>
        <property name="IsUser">
          <declaration><![CDATA[protected bool IsUser]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="59" sc="13" el="61" ec="14">Mvp\ProfileModuleViewBase.cs</location>
            <body hash="3ba87352c5550abf21080b4e84eb2819"><![CDATA[{
                return ProfileUserId == ModuleContext.PortalSettings.UserId;
            }]]></body>
          </codeblock>
        </property>
        <property name="ProfileUser">
          <declaration><![CDATA[protected UserInfo ProfileUser]]></declaration>
          <documentation>
          </documentation>
        </property>
        <property name="ProfileUserId">
          <declaration><![CDATA[public int ProfileUserId]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="42" sc="13" el="49" ec="14">Mvp\ProfileModuleViewBase.cs</location>
            <body hash="5f01c3eb5a77d8d904b5bffd4318b375"><![CDATA[{
                int UserId = Null.NullInteger;
                if (!string.IsNullOrEmpty(Request.Params["UserId"]))
                {
                    UserId = Int32.Parse(Request.Params["UserId"]);
                }
                return UserId;
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="SettingsModel">
      <declaration><![CDATA[public class SettingsModel]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public SettingsModel()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="ModuleSettings">
          <declaration><![CDATA[public Dictionary<string, string> ModuleSettings]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="30" sc="60" el="30" ec="64">Mvp\SettingsModel.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="30" sc="65" el="30" ec="69">Mvp\SettingsModel.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="TabModuleSettings">
          <declaration><![CDATA[public Dictionary<string, string> TabModuleSettings]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="32" sc="63" el="32" ec="67">Mvp\SettingsModel.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="32" sc="68" el="32" ec="72">Mvp\SettingsModel.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="SettingsView&lt;TModel&gt;">
      <declaration><![CDATA[public abstract class SettingsView<TModel> : SettingsViewBase, ISettingsView<TModel>, IModuleViewBase, IView, IView<TModel> where TModel : SettingsModel, new()]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[protected SettingsView()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="GetModuleSetting">
          <declaration><![CDATA[protected string GetModuleSetting(string key, string defaultValue)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="51" sc="9" el="60" ec="10">Mvp\SettingsView.cs</location>
            <body hash="da44241ed2e4ee24a022663eaed378f5"><![CDATA[{
            var value = defaultValue;

            if(Model.ModuleSettings.ContainsKey(key))
            {
                value = Model.ModuleSettings[key];
            }

            return value;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetTabModuleSetting">
          <declaration><![CDATA[protected string GetTabModuleSetting(string key, string defaultValue)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="63" sc="9" el="72" ec="10">Mvp\SettingsView.cs</location>
            <body hash="380c2ed5c12705e60800ff9f0d0d46fd"><![CDATA[{
            var value = defaultValue;

            if (Model.TabModuleSettings.ContainsKey(key))
            {
                value = Model.TabModuleSettings[key];
            }

            return value;
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_model">
          <declaration><![CDATA[private TModel _model;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="Model">
          <declaration><![CDATA[public TModel Model]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="37" sc="13" el="44" ec="14">Mvp\SettingsView.cs</location>
            <body hash="b657a15f08d58ef5e78c1ce711ae2fd0"><![CDATA[{
                if ((_model == null))
                {
                    throw new InvalidOperationException(
                        "The Model property is currently null, however it should have been automatically initialized by the presenter. This most likely indicates that no presenter was bound to the control. Check your presenter bindings.");
                }
                return _model;
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="SettingsViewBase">
      <declaration><![CDATA[public class SettingsViewBase : ModuleViewBase, ISettingsView, IModuleViewBase, IView, ISettingsControl, IModuleControl]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public SettingsViewBase()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="add_OnLoadSettings">
          <declaration><![CDATA[public void add_OnLoadSettings(EventHandler value)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="add_OnSaveSettings">
          <declaration><![CDATA[public void add_OnSaveSettings(EventHandler value)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="LoadSettings">
          <declaration><![CDATA[public void LoadSettings()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="36" sc="9" el="44" ec="10">Mvp\SettingsViewBase.cs</location>
            <body hash="87a6bbdd98ee7f298df019770162e841"><![CDATA[{
            if (OnLoadSettings != null)
            {
                OnLoadSettings(this, EventArgs.Empty);
            }

            OnSettingsLoaded();

        }]]></body>
          </codeblock>
        </method>
        <method name="OnSavingSettings">
          <declaration><![CDATA[protected virtual void OnSavingSettings()]]></declaration>
          <documentation>
            <summary>
 OnSavingSettings method is called just before the Settings are saved
 </summary>
          </documentation>
          <codeblock>
            <location sl="76" sc="9" el="77" ec="10">Mvp\SettingsViewBase.cs</location>
            <body hash="539fa760ca172337a931519768c64187"><![CDATA[{
        }]]></body>
          </codeblock>
        </method>
        <method name="OnSettingsLoaded">
          <declaration><![CDATA[protected virtual void OnSettingsLoaded()]]></declaration>
          <documentation>
            <summary>
 The OnSettingsLoaded method is called when the Settings have been Loaded
 </summary>
          </documentation>
          <codeblock>
            <location sl="69" sc="9" el="70" ec="10">Mvp\SettingsViewBase.cs</location>
            <body hash="539fa760ca172337a931519768c64187"><![CDATA[{
        }]]></body>
          </codeblock>
        </method>
        <method name="remove_OnLoadSettings">
          <declaration><![CDATA[public void remove_OnLoadSettings(EventHandler value)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="remove_OnSaveSettings">
          <declaration><![CDATA[public void remove_OnSaveSettings(EventHandler value)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="UpdateSettings">
          <declaration><![CDATA[public void UpdateSettings()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="47" sc="9" el="54" ec="10">Mvp\SettingsViewBase.cs</location>
            <body hash="a459978cf729686ec045785da8d11c87"><![CDATA[{
            OnSavingSettings();

            if (OnSaveSettings != null)
            {
                OnSaveSettings(this, EventArgs.Empty);
            }
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="OnLoadSettings">
          <declaration><![CDATA[private EventHandler OnLoadSettings;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="OnSaveSettings">
          <declaration><![CDATA[private EventHandler OnSaveSettings;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
        <event name="OnLoadSettings">
          <declaration><![CDATA[public event EventHandler OnLoadSettings;]]></declaration>
          <documentation>
          </documentation>
        </event>
        <event name="OnSaveSettings">
          <declaration><![CDATA[public event EventHandler OnSaveSettings;]]></declaration>
          <documentation>
          </documentation>
        </event>
      </events>
    </class>
    <class name="ViewStateAttribute">
      <declaration><![CDATA[public class ViewStateAttribute : Attribute]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public ViewStateAttribute()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="ViewStateKey">
          <declaration><![CDATA[public string ViewStateKey]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="32" sc="38" el="32" ec="42">Mvp\ViewStateAttribute.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="32" sc="43" el="32" ec="47">Mvp\ViewStateAttribute.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="WebServicePresenter&lt;TView&gt;">
      <declaration><![CDATA[public abstract class WebServicePresenter<TView> : Presenter<TView> where TView : class, IWebServiceView]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[protected WebServicePresenter(TView view) : base(view)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="29" sc="53" el="31" ec="10">Mvp\WebServicePresenter.cs</location>
            <body hash="6477a94fd3f7ba9ffb8597dc73e296f7"><![CDATA[base(view)
        {
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="ReleaseView">
          <deprecation>Deprecated in DotNetNuke 6.1. Base Class Method deprecated in WebFormsMVP 1.2</deprecation>
          <declaration><![CDATA[public override void ReleaseView()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="35" sc="9" el="36" ec="10">Mvp\WebServicePresenter.cs</location>
            <body hash="539fa760ca172337a931519768c64187"><![CDATA[{
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="WebServiceView">
      <declaration><![CDATA[public abstract class WebServiceView : WebServiceViewBase]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[protected WebServiceView()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="WebServiceViewBase">
      <declaration><![CDATA[public abstract class WebServiceViewBase : MvpWebService, IWebServiceViewBase, IView]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[protected WebServiceViewBase()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="WebServiceViewOfT&lt;TModel&gt;">
      <declaration><![CDATA[public abstract class WebServiceViewOfT<TModel> : ModuleViewBase, IView<TModel>, IView where TModel : class, new()]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[protected WebServiceViewOfT()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
        <field name="_model">
          <declaration><![CDATA[private TModel _model;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="Model">
          <declaration><![CDATA[public TModel Model]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="39" sc="13" el="46" ec="14">Mvp\WebServiceViewOfT.cs</location>
            <body hash="b657a15f08d58ef5e78c1ce711ae2fd0"><![CDATA[{
                if ((_model == null))
                {
                    throw new InvalidOperationException(
                        "The Model property is currently null, however it should have been automatically initialized by the presenter. This most likely indicates that no presenter was bound to the control. Check your presenter bindings.");
                }
                return _model;
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
  </namespace>
  <namespace name="DotNetNuke.Web.Services">
    <class name="MobileHelperController">
      <declaration><![CDATA[public class MobileHelperController : DnnApiController]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[private readonly string _dnnVersion = Globals.FormatVersion(DotNetNukeContext.Current.Application.Version, false);]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="44" sc="9" el="44" ec="123">Services\MobileHelperController.cs</location>
            <body hash="ec73e0320d2ff360ef4842fbb0ddfd65"><![CDATA[private readonly string _dnnVersion = Globals.FormatVersion(DotNetNukeContext.Current.Application.Version, false)]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="AddChildTabsToList">
          <declaration><![CDATA[private static void AddChildTabsToList(TabInfo currentTab, TabCollection allPortalTabs, IDictionary<int, TabInfo> tabsWithModule, IDictionary<int, TabInfo> tabsInOrder)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="189" sc="9" el="200" ec="10">Services\MobileHelperController.cs</location>
            <body hash="cb18220ec57e6304a299fa3fe6f022de"><![CDATA[{
            if (tabsWithModule.ContainsKey(currentTab.TabID) && !tabsInOrder.ContainsKey(currentTab.TabID))
            {
                //add current tab
                tabsInOrder.Add(currentTab.TabID, currentTab);
                //add children of current tab
                foreach (var tab in allPortalTabs.WithParentId(currentTab.TabID))
                {
                    AddChildTabsToList(tab, allPortalTabs, tabsWithModule, tabsInOrder);
                }
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="GetMonikersForList">
          <declaration><![CDATA[private static IEnumerable<KeyValuePair<int, string>> GetMonikersForList(string moduleList)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="66" sc="9" el="96" ec="10">Services\MobileHelperController.cs</location>
            <body hash="532371517bde7aea91898b9252186b9b"><![CDATA[{
            var portalId = PortalSettings.Current.PortalId;
            var tabsController = TabController.Instance;
            var modulesController = ModuleController.Instance;
            var resultIds = new List<int>();

            var monikers = TabModulesController.Instance.GetTabModuleSettingsByName("Moniker");
            var modules = modulesController.GetAllTabsModules(portalId, false).OfType<ModuleInfo>()
                .Where(tabmodule => monikers.ContainsKey(tabmodule.TabModuleID)).ToArray();

            if (modules.Any())
            {
                foreach (var moduleName in (moduleList ?? "").Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries))
                {
                    var dtmRecord = DesktopModuleController.GetDesktopModuleByModuleName(moduleName, portalId);
                    if (dtmRecord != null)
                    {
                        var allowedTabs = modules.Where(m => m.DesktopModuleID == dtmRecord.DesktopModuleID)
                            .Select(m => m.TabID).Distinct()
                            .Where(tabId => TabPermissionController.CanViewPage(tabsController.GetTab(tabId, portalId)));

                        var allowedTabModules = modules.Where(tabModule => allowedTabs.Contains(tabModule.TabID) &&
                            ModulePermissionController.CanViewModule(modulesController.GetModule(tabModule.ModuleID, tabModule.TabID, false)));

                        resultIds.AddRange(allowedTabModules.Select(tabModule => tabModule.TabModuleID));
                    }
                }
            }

            return monikers.Where(kpv => resultIds.Contains(kpv.Key));
        }]]></body>
          </codeblock>
        </method>
        <method name="GetSiteDetails">
          <declaration><![CDATA[private SiteDetail GetSiteDetails(string moduleList)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="99" sc="9" el="133" ec="10">Services\MobileHelperController.cs</location>
            <body hash="5753721371f22d3dbbeaa0ceeca2aafa"><![CDATA[{
            var siteDetails = new SiteDetail
            {
                SiteName = PortalSettings.PortalName,
                DnnVersion = _dnnVersion,
                IsHost = UserInfo.IsSuperUser,
                IsAdmin = UserInfo.IsInRole("Administrators")
            };

            foreach (var moduleName in (moduleList ?? "").Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries))
            {
                var modulesCollection = GetTabModules((moduleName ?? "").Trim())
                    .Where(tabmodule => TabPermissionController.CanViewPage(tabmodule.TabInfo) &&
                                        ModulePermissionController.CanViewModule(tabmodule.ModuleInfo));
                foreach (var tabmodule in modulesCollection)
                {
                    var moduleDetail = new ModuleDetail
                    {
                        ModuleName = moduleName,
                        ModuleVersion = tabmodule.ModuleVersion
                    };

                    moduleDetail.ModuleInstances.Add(new ModuleInstance
                    {
                        TabId = tabmodule.TabInfo.TabID,
                        ModuleId = tabmodule.ModuleInfo.ModuleID,
                        PageName = tabmodule.TabInfo.TabName,
                        PagePath = tabmodule.TabInfo.TabPath
                    });
                    siteDetails.Modules.Add(moduleDetail);
                }
            }

            return siteDetails;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetTabModules">
          <declaration><![CDATA[private static IEnumerable<TabModule> GetTabModules(string moduleName)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="136" sc="9" el="151" ec="10">Services\MobileHelperController.cs</location>
            <body hash="9336fd7c7b754f68d57d833909a73223"><![CDATA[{
            var portalId = PortalController.Instance.GetCurrentPortalSettings().PortalId;
            var desktopModule = DesktopModuleController.GetDesktopModuleByModuleName(moduleName, portalId);
            if (desktopModule != null)
            {

                var cacheKey = string.Format(DataCache.DesktopModuleCacheKey, portalId) + "_" +
                               desktopModule.DesktopModuleID;
                var args = new CacheItemArgs(cacheKey, DataCache.DesktopModuleCacheTimeOut,
                                             DataCache.DesktopModuleCachePriority, portalId, desktopModule);

                return CBO.GetCachedObject<IList<TabModule>>(args, GetTabModulesCallback);
            }

            return new List<TabModule>();
        }]]></body>
          </codeblock>
        </method>
        <method name="GetTabModulesCallback">
          <declaration><![CDATA[private static object GetTabModulesCallback(CacheItemArgs cacheItemArgs)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="154" sc="9" el="185" ec="10">Services\MobileHelperController.cs</location>
            <body hash="f9dfdfc21758a66f7eacaef989aa8457"><![CDATA[{
            var tabModules = new List<TabModule>();

            var portalId = (int)cacheItemArgs.ParamList[0];
            var desktopModule = (DesktopModuleInfo)cacheItemArgs.ParamList[1];

            var tabController = new TabController();
            var tabsWithModule = tabController.GetTabsByPackageID(portalId, desktopModule.PackageID, false);
            var allPortalTabs = tabController.GetTabsByPortal(portalId);
            IDictionary<int, TabInfo> tabsInOrder = new Dictionary<int, TabInfo>();

            //must get each tab, they parent may not exist
            foreach (var tab in allPortalTabs.Values)
            {
                AddChildTabsToList(tab, allPortalTabs, tabsWithModule, tabsInOrder);
            }

            foreach (var tab in tabsInOrder.Values)
            {
                tabModules.AddRange(
                    tab.ChildModules.Values.Where(
                        childModule => childModule.DesktopModuleID == desktopModule.DesktopModuleID)
                       .Select(childModule => new TabModule
                       {
                           TabInfo = tab,
                           ModuleInfo = childModule,
                           ModuleVersion = desktopModule.Version
                       }));
            }

            return tabModules;
        }]]></body>
          </codeblock>
        </method>
        <method name="ModuleDetails">
          <declaration><![CDATA[public HttpResponseMessage ModuleDetails(string moduleList)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="58" sc="9" el="61" ec="10">Services\MobileHelperController.cs</location>
            <body hash="fde264372208e966ce1371e6d24a8881"><![CDATA[{
            var siteDetails = GetSiteDetails(moduleList);
            return Request.CreateResponse(HttpStatusCode.OK, siteDetails);
        }]]></body>
          </codeblock>
        </method>
        <method name="Monikers">
          <declaration><![CDATA[public IHttpActionResult Monikers(string moduleList)]]></declaration>
          <documentation>
            <summary>
 Gets the various defined monikers for the various tab modules in the system
 </summary>
          </documentation>
          <codeblock>
            <location sl="51" sc="9" el="54" ec="10">Services\MobileHelperController.cs</location>
            <body hash="27dadf7f509f2aa603862f75e3eda248"><![CDATA[{
            var monikers = GetMonikersForList(moduleList);
            return Ok(monikers.Select(kpv => new { tabModuleId = kpv.Key, moniker = kpv.Value }));
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_dnnVersion">
          <declaration><![CDATA[private readonly string _dnnVersion = Globals.FormatVersion(DotNetNukeContext.Current.Application.Version, false);]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="ServiceRouteMapper">
      <declaration><![CDATA[public class ServiceRouteMapper : IServiceRouteMapper]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public ServiceRouteMapper()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="RegisterRoutes">
          <declaration><![CDATA[public void RegisterRoutes(IMapRoute mapRouteManager)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="31" sc="9" el="34" ec="10">Services\ServiceRouteMapper.cs</location>
            <body hash="b963f89bf746a904da7ce917b6f7ed74"><![CDATA[{
            mapRouteManager.MapHttpRoute(
                "web", "default", "{controller}/{action}", new[] { GetType().Namespace });
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
  </namespace>
  <namespace name="DotNetNuke.Web.UI">
    <class name="DotNetNukeErrorCode">
      <declaration><![CDATA[public enum DotNetNukeErrorCode]]></declaration>
      <documentation>
      </documentation>
      <constructors>
      </constructors>
      <methods>
      </methods>
      <fields>
        <field name="DeserializePanesFailed">
          <declaration><![CDATA[public const DotNetNukeErrorCode DeserializePanesFailed = 4;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="DuplicateWithAlias">
          <declaration><![CDATA[public const DotNetNukeErrorCode DuplicateWithAlias = 9;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="HostBeforeAfterError">
          <declaration><![CDATA[public const DotNetNukeErrorCode HostBeforeAfterError = 8;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="NotSet">
          <declaration><![CDATA[public const DotNetNukeErrorCode NotSet = 0;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="PageCircularReference">
          <declaration><![CDATA[public const DotNetNukeErrorCode PageCircularReference = 5;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="PageEditorPermissionError">
          <declaration><![CDATA[public const DotNetNukeErrorCode PageEditorPermissionError = 7;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="PageExists">
          <declaration><![CDATA[public const DotNetNukeErrorCode PageExists = 1;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="PageNameInvalid">
          <declaration><![CDATA[public const DotNetNukeErrorCode PageNameInvalid = 3;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="PageNameRequired">
          <declaration><![CDATA[public const DotNetNukeErrorCode PageNameRequired = 2;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ParentTabInvalid">
          <declaration><![CDATA[public const DotNetNukeErrorCode ParentTabInvalid = 6;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="DotNetNukeException">
      <declaration><![CDATA[public class DotNetNukeException : Exception]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[private readonly DotNetNukeErrorCode _ErrorCode = DotNetNukeErrorCode.NotSet;]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="497" sc="9" el="501" ec="10">UI\RibbonBarManager.cs</location>
            <body hash="023a5a5a0c718d3e277145e5fb584c79"><![CDATA[private readonly DotNetNukeErrorCode _ErrorCode = DotNetNukeErrorCode.NotSet;

        public DotNetNukeException()
        {
        }]]></body>
          </codeblock>
        </constructor>
        <constructor name=".ctor">
          <declaration><![CDATA[private readonly DotNetNukeErrorCode _ErrorCode = DotNetNukeErrorCode.NotSet;]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="497" sc="9" el="505" ec="10">UI\RibbonBarManager.cs</location>
            <body hash="f950190a2699d546748f7643e60fac96"><![CDATA[private readonly DotNetNukeErrorCode _ErrorCode = DotNetNukeErrorCode.NotSet;

        public DotNetNukeException()
        {
        }

        public DotNetNukeException(string message) : base(message)
        {
        }]]></body>
          </codeblock>
        </constructor>
        <constructor name=".ctor">
          <declaration><![CDATA[private readonly DotNetNukeErrorCode _ErrorCode = DotNetNukeErrorCode.NotSet;]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="497" sc="9" el="509" ec="10">UI\RibbonBarManager.cs</location>
            <body hash="cf4684bff4a1763f5161daa7170cbfff"><![CDATA[private readonly DotNetNukeErrorCode _ErrorCode = DotNetNukeErrorCode.NotSet;

        public DotNetNukeException()
        {
        }

        public DotNetNukeException(string message) : base(message)
        {
        }

        public DotNetNukeException(string message, Exception innerException) : base(message, innerException)
        {
        }]]></body>
          </codeblock>
        </constructor>
        <constructor name=".ctor">
          <declaration><![CDATA[private readonly DotNetNukeErrorCode _ErrorCode = DotNetNukeErrorCode.NotSet;]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="497" sc="9" el="514" ec="10">UI\RibbonBarManager.cs</location>
            <body hash="961254000f8484faabb4abca7cd1810b"><![CDATA[private readonly DotNetNukeErrorCode _ErrorCode = DotNetNukeErrorCode.NotSet;

        public DotNetNukeException()
        {
        }

        public DotNetNukeException(string message) : base(message)
        {
        }

        public DotNetNukeException(string message, Exception innerException) : base(message, innerException)
        {
        }

        public DotNetNukeException(string message, DotNetNukeErrorCode errorCode) : base(message)
        {
            _ErrorCode = errorCode;
        }]]></body>
          </codeblock>
        </constructor>
        <constructor name=".ctor">
          <declaration><![CDATA[private readonly DotNetNukeErrorCode _ErrorCode = DotNetNukeErrorCode.NotSet;]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="497" sc="9" el="519" ec="10">UI\RibbonBarManager.cs</location>
            <body hash="068738c690ce90682ac43292c245d914"><![CDATA[private readonly DotNetNukeErrorCode _ErrorCode = DotNetNukeErrorCode.NotSet;

        public DotNetNukeException()
        {
        }

        public DotNetNukeException(string message) : base(message)
        {
        }

        public DotNetNukeException(string message, Exception innerException) : base(message, innerException)
        {
        }

        public DotNetNukeException(string message, DotNetNukeErrorCode errorCode) : base(message)
        {
            _ErrorCode = errorCode;
        }

        public DotNetNukeException(string message, Exception innerException, DotNetNukeErrorCode errorCode) : base(message, innerException)
        {
            _ErrorCode = errorCode;
        }]]></body>
          </codeblock>
        </constructor>
        <constructor name=".ctor">
          <declaration><![CDATA[private readonly DotNetNukeErrorCode _ErrorCode = DotNetNukeErrorCode.NotSet;]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="497" sc="9" el="523" ec="10">UI\RibbonBarManager.cs</location>
            <body hash="4ec7be59140746f2a16279119a4f9af0"><![CDATA[private readonly DotNetNukeErrorCode _ErrorCode = DotNetNukeErrorCode.NotSet;

        public DotNetNukeException()
        {
        }

        public DotNetNukeException(string message) : base(message)
        {
        }

        public DotNetNukeException(string message, Exception innerException) : base(message, innerException)
        {
        }

        public DotNetNukeException(string message, DotNetNukeErrorCode errorCode) : base(message)
        {
            _ErrorCode = errorCode;
        }

        public DotNetNukeException(string message, Exception innerException, DotNetNukeErrorCode errorCode) : base(message, innerException)
        {
            _ErrorCode = errorCode;
        }

        public DotNetNukeException(SerializationInfo info, StreamingContext context) : base(info, context)
        {
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
        <field name="_ErrorCode">
          <declaration><![CDATA[private readonly DotNetNukeErrorCode _ErrorCode = DotNetNukeErrorCode.NotSet;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="ErrorCode">
          <declaration><![CDATA[public DotNetNukeErrorCode ErrorCode]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="528" sc="13" el="530" ec="14">UI\RibbonBarManager.cs</location>
            <body hash="6ce5cc267289fe5cfe6bc243f9fec547"><![CDATA[{
                return _ErrorCode;
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="ILocalizable">
      <declaration><![CDATA[public interface ILocalizable]]></declaration>
      <documentation>
      </documentation>
      <constructors>
      </constructors>
      <methods>
        <method name="LocalizeStrings">
          <declaration><![CDATA[void LocalizeStrings();]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="Localize">
          <declaration><![CDATA[bool Localize]]></declaration>
          <documentation>
          </documentation>
        </property>
        <property name="LocalResourceFile">
          <declaration><![CDATA[string LocalResourceFile]]></declaration>
          <documentation>
          </documentation>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="MessageWindowParameters">
      <declaration><![CDATA[public class MessageWindowParameters]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[private string _Message = "";]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="31" sc="9" el="39" ec="10">UI\MessageWindowParameters.cs</location>
            <body hash="63e8b35a73c7c9ea2223f919ba4592d0"><![CDATA[private string _Message = "";
        private string _Title = "";
        private Unit _WindowHeight = Unit.Pixel(175);
        private Unit _WindowWidth = Unit.Pixel(350);

        public MessageWindowParameters(string message)
        {
            _Message = message;
        }]]></body>
          </codeblock>
        </constructor>
        <constructor name=".ctor">
          <declaration><![CDATA[private string _Message = "";]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="31" sc="9" el="45" ec="10">UI\MessageWindowParameters.cs</location>
            <body hash="4e3a1a1e9b79d6aada99d8f7de49f6fb"><![CDATA[private string _Message = "";
        private string _Title = "";
        private Unit _WindowHeight = Unit.Pixel(175);
        private Unit _WindowWidth = Unit.Pixel(350);

        public MessageWindowParameters(string message)
        {
            _Message = message;
        }

        public MessageWindowParameters(string message, string title)
        {
            _Message = message;
            _Title = title;
        }]]></body>
          </codeblock>
        </constructor>
        <constructor name=".ctor">
          <declaration><![CDATA[private string _Message = "";]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="31" sc="9" el="53" ec="10">UI\MessageWindowParameters.cs</location>
            <body hash="3e81d5c4577bee865b717811ef5fecb6"><![CDATA[private string _Message = "";
        private string _Title = "";
        private Unit _WindowHeight = Unit.Pixel(175);
        private Unit _WindowWidth = Unit.Pixel(350);

        public MessageWindowParameters(string message)
        {
            _Message = message;
        }

        public MessageWindowParameters(string message, string title)
        {
            _Message = message;
            _Title = title;
        }

        public MessageWindowParameters(string message, string title, string windowWidth, string windowHeight)
        {
            _Message = message;
            _Title = title;
            _WindowWidth = Unit.Parse(windowWidth);
            _WindowHeight = Unit.Parse(windowHeight);
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
        <field name="_Message">
          <declaration><![CDATA[private string _Message = "";]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_Title">
          <declaration><![CDATA[private string _Title = "";]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_WindowHeight">
          <declaration><![CDATA[private Unit _WindowHeight = Unit.Pixel(175);]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_WindowWidth">
          <declaration><![CDATA[private Unit _WindowWidth = Unit.Pixel(350);]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="Message">
          <declaration><![CDATA[public string Message]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="58" sc="13" el="60" ec="14">UI\MessageWindowParameters.cs</location>
            <body hash="a69eece4089111b2e710590ebc8647bb"><![CDATA[{
                return _Message;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="62" sc="13" el="67" ec="14">UI\MessageWindowParameters.cs</location>
            <body hash="e0c631abf2947e3e0c7964b5f027d8dd"><![CDATA[{
                //todo: javascript encode for onclick events
                _Message = value;
                _Message = _Message.Replace("'", "\\'");
                _Message = _Message.Replace("\"", "\\\"");
            }]]></body>
          </codeblock>
        </property>
        <property name="Title">
          <declaration><![CDATA[public string Title]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="73" sc="13" el="75" ec="14">UI\MessageWindowParameters.cs</location>
            <body hash="eb303cebdd6588a495546f3cdc26c6e0"><![CDATA[{
                return _Title;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="77" sc="13" el="82" ec="14">UI\MessageWindowParameters.cs</location>
            <body hash="49e1f382388f99cecd71cf1bb7f5e700"><![CDATA[{
                //todo: javascript encode for onclick events
                _Title = value;
                _Title = _Title.Replace("'", "\\'");
                _Title = _Title.Replace("\"", "\\\"");
            }]]></body>
          </codeblock>
        </property>
        <property name="WindowHeight">
          <declaration><![CDATA[public Unit WindowHeight]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="100" sc="13" el="102" ec="14">UI\MessageWindowParameters.cs</location>
            <body hash="4ece771a4285b80db7a3da3fca364b8d"><![CDATA[{
                return _WindowHeight;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="104" sc="13" el="106" ec="14">UI\MessageWindowParameters.cs</location>
            <body hash="ae821bda2021dbb796c3139f32620f58"><![CDATA[{
                _WindowHeight = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="WindowWidth">
          <declaration><![CDATA[public Unit WindowWidth]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="88" sc="13" el="90" ec="14">UI\MessageWindowParameters.cs</location>
            <body hash="0043aa16cc93c009ef1031c798edeaed"><![CDATA[{
                return _WindowWidth;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="92" sc="13" el="94" ec="14">UI\MessageWindowParameters.cs</location>
            <body hash="414ea520f67fe4722da0222335691e3f"><![CDATA[{
                _WindowWidth = value;
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="RibbonBarManager">
      <declaration><![CDATA[public class RibbonBarManager]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public RibbonBarManager()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
        <constructor name=".cctor">
          <declaration><![CDATA[static RibbonBarManager()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="52" sc="6" el="52" ec="103">UI\RibbonBarManager.cs</location>
            <body hash="411d4b72770749c8e9121943939d6b23"><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof (RibbonBarManager))]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="CanMovePage">
          <declaration><![CDATA[public static bool CanMovePage()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="186" sc="9" el="211" ec="10">UI\RibbonBarManager.cs</location>
            <body hash="9cf8b15188b240616e413a5561895c0f"><![CDATA[{
            //Cannot move the host console page
            if ((IsHostConsolePage()))
            {
                return false;
            }

            //Page Editors - Can only move children they have 'Manage' permission to, they cannot move the top level page
            if ((!PortalSecurity.IsInRole("Administrators")))
            {
                int parentTabID = PortalSettings.Current.ActiveTab.ParentId;
                if ((parentTabID == Null.NullInteger))
                {
                    return false;
                }

                TabInfo parentTab = TabController.Instance.GetTab(parentTabID, PortalSettings.Current.ActiveTab.PortalID, false);
                string permissionList = "MANAGE";
                if ((!TabPermissionController.HasTabPermission(parentTab.TabPermissions, permissionList)))
                {
                    return false;
                }
            }

            return true;
        }]]></body>
          </codeblock>
        </method>
        <method name="DeserializeTabPermissions">
          <declaration><![CDATA[public static void DeserializeTabPermissions(XmlNodeList nodeTabPermissions, TabInfo tab)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="445" sc="9" el="492" ec="10">UI\RibbonBarManager.cs</location>
            <body hash="992603f3bdd565ab2fe8b612fcf016bf"><![CDATA[{
            var permissionController = new PermissionController();
            foreach (XmlNode xmlTabPermission in nodeTabPermissions)
            {
                var permissionKey = XmlUtils.GetNodeValue(xmlTabPermission.CreateNavigator(), "permissionkey");
                var permissionCode = XmlUtils.GetNodeValue(xmlTabPermission.CreateNavigator(), "permissioncode");
                var roleName = XmlUtils.GetNodeValue(xmlTabPermission.CreateNavigator(), "rolename");
                var allowAccess = XmlUtils.GetNodeValueBoolean(xmlTabPermission, "allowaccess");
                var permissions = permissionController.GetPermissionByCodeAndKey(permissionCode, permissionKey);
                var permissionId = permissions.Cast<PermissionInfo>().Last().PermissionID;

                var roleId = int.MinValue;
                switch (roleName)
                {
                    case Globals.glbRoleAllUsersName:
                        roleId = Convert.ToInt32(Globals.glbRoleAllUsers);
                        break;
                    case Globals.glbRoleUnauthUserName:
                        roleId = Convert.ToInt32(Globals.glbRoleUnauthUser);
                        break;
                    default:
                        var portal = PortalController.Instance.GetPortal(tab.PortalID);
                        var role = RoleController.Instance.GetRole(portal.PortalID, r => r.RoleName == roleName);
                        if (role != null)
                        {
                            roleId = role.RoleID;
                        }
                        break;
                }
                if (roleId != int.MinValue &&
                        !tab.TabPermissions.Cast<TabPermissionInfo>().Any(p =>
                                                                            p.RoleID == roleId
                                                                            && p.PermissionID == permissionId))
                {
                    var tabPermission = new TabPermissionInfo
                    {
                        TabID = tab.TabID,
                        PermissionID = permissionId,
                        RoleID = roleId,
                        AllowAccess = allowAccess
                    };

                    tab.TabPermissions.Add(tabPermission);
                }
            }

            TabController.Instance.UpdateTab(tab);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetPagesList">
          <declaration><![CDATA[public static IList<TabInfo> GetPagesList()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="152" sc="9" el="173" ec="10">UI\RibbonBarManager.cs</location>
            <body hash="caae19cf13e6230f1d9d1058d474217e"><![CDATA[{
            IList<TabInfo> portalTabs = null;
            UserInfo userInfo = UserController.Instance.GetCurrentUserInfo();
            if (((userInfo != null) && userInfo.UserID != Null.NullInteger))
            {
                if ((userInfo.IsSuperUser && PortalSettings.Current.ActiveTab.IsSuperTab))
                {
                    portalTabs = TabController.Instance.GetTabsByPortal(Null.NullInteger).AsList();
                }
                else
                {
                    portalTabs = TabController.GetPortalTabs(PortalSettings.Current.PortalId, Null.NullInteger, false, Null.NullString, true, false, true, false, true);
                }
            }

            if (((portalTabs == null)))
            {
                portalTabs = new List<TabInfo>();
            }

            return portalTabs;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetParentTab">
          <declaration><![CDATA[public static TabInfo GetParentTab(TabInfo relativeToTab, TabRelativeLocation location)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="132" sc="9" el="149" ec="10">UI\RibbonBarManager.cs</location>
            <body hash="0aa2c7767f1a1bbfb3c154c0ed33b12a"><![CDATA[{
            if (((relativeToTab == null)))
            {
                return null;
            }

            TabInfo parentTab = null;
            if ((location == TabRelativeLocation.CHILD))
            {
                parentTab = relativeToTab;
            }
            else if (((relativeToTab != null) && relativeToTab.ParentId != Null.NullInteger))
            {
                parentTab = TabController.Instance.GetTab(relativeToTab.ParentId, relativeToTab.PortalID, false);
            }

            return parentTab;
        }]]></body>
          </codeblock>
        </method>
        <method name="InitTabInfoObject">
          <declaration><![CDATA[public static TabInfo InitTabInfoObject()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="54" sc="9" el="56" ec="10">UI\RibbonBarManager.cs</location>
            <body hash="5b86c1ee162aabf2285e330c34baeede"><![CDATA[{
            return InitTabInfoObject(null, TabRelativeLocation.AFTER);
        }]]></body>
          </codeblock>
        </method>
        <method name="InitTabInfoObject">
          <declaration><![CDATA[public static TabInfo InitTabInfoObject(TabInfo relativeToTab)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="59" sc="9" el="61" ec="10">UI\RibbonBarManager.cs</location>
            <body hash="df7e0e34c9ce4cdaef97466ed9b22d8e"><![CDATA[{
            return InitTabInfoObject(relativeToTab, TabRelativeLocation.AFTER);
        }]]></body>
          </codeblock>
        </method>
        <method name="InitTabInfoObject">
          <declaration><![CDATA[public static TabInfo InitTabInfoObject(TabInfo relativeToTab, TabRelativeLocation location)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="64" sc="9" el="129" ec="10">UI\RibbonBarManager.cs</location>
            <body hash="fc64a74a4e4598a89dd854e00306cef2"><![CDATA[{
            if (((relativeToTab == null)))
            {
                if (((PortalSettings.Current != null) && (PortalSettings.Current.ActiveTab != null)))
                {
                    relativeToTab = PortalSettings.Current.ActiveTab;
                }
            }

            var newTab = new TabInfo
            {
                TabID = Null.NullInteger,
                TabName = "",
                Title = "",
                IsVisible = false,
                DisableLink = false,
                IsDeleted = false,
                IsSecure = false,
                PermanentRedirect = false
            };

            TabInfo parentTab = GetParentTab(relativeToTab, location);

            if (((parentTab != null)))
            {
                newTab.PortalID = parentTab.PortalID;
                newTab.ParentId = parentTab.TabID;
                newTab.Level = parentTab.Level + 1;
                if ((PortalSettings.Current.SSLEnabled))
                {
                    newTab.IsSecure = parentTab.IsSecure;
                    //Inherit from parent
                }
            }
            else
            {
                newTab.PortalID = PortalSettings.Current.PortalId;
                newTab.ParentId = Null.NullInteger;
                newTab.Level = 0;
            }

            //Inherit permissions from parent
            newTab.TabPermissions.Clear();
            if ((newTab.PortalID != Null.NullInteger && (parentTab != null)))
            {
                newTab.TabPermissions.AddRange(parentTab.TabPermissions);
            }
            else if ((newTab.PortalID != Null.NullInteger))
            {
                //Give admin full permission
                ArrayList permissions = PermissionController.GetPermissionsByTab();

                foreach (PermissionInfo permission in permissions)
                {
                    TabPermissionInfo newTabPermission = new TabPermissionInfo();
                    newTabPermission.PermissionID = permission.PermissionID;
                    newTabPermission.PermissionKey = permission.PermissionKey;
                    newTabPermission.PermissionName = permission.PermissionName;
                    newTabPermission.AllowAccess = true;
                    newTabPermission.RoleID = PortalSettings.Current.AdministratorRoleId;
                    newTab.TabPermissions.Add(newTabPermission);
                }
            }

            return newTab;
        }]]></body>
          </codeblock>
        </method>
        <method name="IsHostConsolePage">
          <declaration><![CDATA[public static bool IsHostConsolePage()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="176" sc="9" el="178" ec="10">UI\RibbonBarManager.cs</location>
            <body hash="558273094489a033025dbd5bec3aea4b"><![CDATA[{
            return (PortalSettings.Current.ActiveTab.IsSuperTab && PortalSettings.Current.ActiveTab.TabPath == "//Host");
        }]]></body>
          </codeblock>
        </method>
        <method name="IsHostConsolePage">
          <declaration><![CDATA[public static bool IsHostConsolePage(TabInfo tab)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="181" sc="9" el="183" ec="10">UI\RibbonBarManager.cs</location>
            <body hash="e4d144bf6305ed8b89b22f146e34ea63"><![CDATA[{
            return (tab.IsSuperTab && tab.TabPath == "//Host");
        }]]></body>
          </codeblock>
        </method>
        <method name="SaveTabInfoObject">
          <declaration><![CDATA[public static int SaveTabInfoObject(TabInfo tab, TabInfo relativeToTab, TabRelativeLocation location, string templateFileId)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="214" sc="9" el="419" ec="10">UI\RibbonBarManager.cs</location>
            <body hash="d16a491f52973ed6483bf58cb63b85b2"><![CDATA[{
            //Validation:
            //Tab name is required
            //Tab name is invalid
			string invalidType;
			if (!TabController.IsValidTabName(tab.TabName, out invalidType))
			{
				switch (invalidType)
				{
					case "EmptyTabName":
						throw new DotNetNukeException("Page name is required.", DotNetNukeErrorCode.PageNameRequired);
					case "InvalidTabName":
						throw new DotNetNukeException("Page name is invalid.", DotNetNukeErrorCode.PageNameInvalid);
				}
			}
            else if ((Validate_IsCircularReference(tab.PortalID, tab.TabID)))
            {
                throw new DotNetNukeException("Cannot move page to that location.", DotNetNukeErrorCode.PageCircularReference);
            }

            bool usingDefaultLanguage = (tab.CultureCode == PortalSettings.Current.DefaultLanguage) || tab.CultureCode == null;

            if (PortalSettings.Current.ContentLocalizationEnabled)
            {
                if ((!usingDefaultLanguage))
                {
                    TabInfo defaultLanguageSelectedTab = tab.DefaultLanguageTab;

                    if ((defaultLanguageSelectedTab == null))
                    {
                        //get the siblings from the selectedtab and iterate through until you find a sibbling with a corresponding defaultlanguagetab
                        //if none are found get a list of all the tabs from the default language and then select the last one
                        var selectedTabSibblings = TabController.Instance.GetTabsByPortal(tab.PortalID).WithCulture(tab.CultureCode, true).AsList();
                        foreach (TabInfo sibling in selectedTabSibblings)
                        {
                            TabInfo siblingDefaultTab = sibling.DefaultLanguageTab;
                            if (((siblingDefaultTab != null)))
                            {
                                defaultLanguageSelectedTab = siblingDefaultTab;
                                break;
                            }
                        }

                        //still haven't found it
                        if ((defaultLanguageSelectedTab == null))
                        {
                            var defaultLanguageTabs = TabController.Instance.GetTabsByPortal(tab.PortalID).WithCulture(PortalSettings.Current.DefaultLanguage, true).AsList();
                            defaultLanguageSelectedTab = defaultLanguageTabs[defaultLanguageTabs.Count];
                            //get the last tab
                        }
                    }

                    relativeToTab = defaultLanguageSelectedTab;
                }
            }


            if ((location != TabRelativeLocation.NOTSET))
            {
                //Check Host tab - don't allow adding before or after
                if ((IsHostConsolePage(relativeToTab) && (location == TabRelativeLocation.AFTER || location == TabRelativeLocation.BEFORE)))
                {
                    throw new DotNetNukeException("You cannot add or move pages before or after the Host tab.", DotNetNukeErrorCode.HostBeforeAfterError);
                }

                TabInfo parentTab = GetParentTab(relativeToTab, location);
                string permissionList = "ADD,COPY,EDIT,MANAGE";
                //Check permissions for Page Editors when moving or inserting
                if ((!PortalSecurity.IsInRole("Administrators")))
                {
                    if (((parentTab == null) || !TabPermissionController.HasTabPermission(parentTab.TabPermissions, permissionList)))
                    {
                        throw new DotNetNukeException("You do not have permissions to add or move pages to this location. You can only add or move pages as children of pages you can edit.",
                                                      DotNetNukeErrorCode.PageEditorPermissionError);
                    }
                }

                if (((parentTab != null)))
                {
                    tab.ParentId = parentTab.TabID;
                    tab.Level = parentTab.Level + 1;
                }
                else
                {
                    tab.ParentId = Null.NullInteger;
                    tab.Level = 0;
                }
            }

            if ((tab.TabID > Null.NullInteger && tab.TabID == tab.ParentId))
            {
                throw new DotNetNukeException("Parent page is invalid.", DotNetNukeErrorCode.ParentTabInvalid);
            }

            tab.TabPath = Globals.GenerateTabPath(tab.ParentId, tab.TabName);
            //check whether have conflict between tab path and portal alias.
            if(TabController.IsDuplicateWithPortalAlias(PortalSettings.Current.PortalId, tab.TabPath))
            {
                throw new DotNetNukeException("The page path is duplicate with a site alias", DotNetNukeErrorCode.DuplicateWithAlias);
            }

            try
            {
                if ((tab.TabID < 0))
                {
                    if ((tab.TabPermissions.Count == 0 && tab.PortalID != Null.NullInteger))
                    {
                        //Give admin full permission
                        ArrayList permissions = PermissionController.GetPermissionsByTab();

                        foreach (PermissionInfo permission in permissions)
                        {
                            TabPermissionInfo newTabPermission = new TabPermissionInfo();
                            newTabPermission.PermissionID = permission.PermissionID;
                            newTabPermission.PermissionKey = permission.PermissionKey;
                            newTabPermission.PermissionName = permission.PermissionName;
                            newTabPermission.AllowAccess = true;
                            newTabPermission.RoleID = PortalSettings.Current.AdministratorRoleId;
                            tab.TabPermissions.Add(newTabPermission);
                        }
                    }

                    PortalSettings _PortalSettings = PortalController.Instance.GetCurrentPortalSettings();

                    if (_PortalSettings.ContentLocalizationEnabled)
                    {
                        Locale defaultLocale = LocaleController.Instance.GetDefaultLocale(tab.PortalID);
                        tab.CultureCode = defaultLocale.Code;
                    }
                    else
                    {
                        tab.CultureCode = Null.NullString;
                    }

                    if ((location == TabRelativeLocation.AFTER && (relativeToTab != null)))
                    {
                        tab.TabID = TabController.Instance.AddTabAfter(tab, relativeToTab.TabID);
                    }
                    else if ((location == TabRelativeLocation.BEFORE && (relativeToTab != null)))
                    {
                        tab.TabID = TabController.Instance.AddTabBefore(tab, relativeToTab.TabID);
                    }
                    else
                    {
                        tab.TabID = TabController.Instance.AddTab(tab);
                    }

                    if (_PortalSettings.ContentLocalizationEnabled)
                    {
                        TabController.Instance.CreateLocalizedCopies(tab);
                    }

                    TabController.Instance.UpdateTabSetting(tab.TabID, "CacheProvider", "");
                    TabController.Instance.UpdateTabSetting(tab.TabID, "CacheDuration", "");
                    TabController.Instance.UpdateTabSetting(tab.TabID, "CacheIncludeExclude", "0");
                    TabController.Instance.UpdateTabSetting(tab.TabID, "IncludeVaryBy", "");
                    TabController.Instance.UpdateTabSetting(tab.TabID, "ExcludeVaryBy", "");
                    TabController.Instance.UpdateTabSetting(tab.TabID, "MaxVaryByCount", "");
                }
                else
                {
                    TabController.Instance.UpdateTab(tab);

                    if ((location == TabRelativeLocation.AFTER && (relativeToTab != null)))
                    {
                        TabController.Instance.MoveTabAfter(tab, relativeToTab.TabID);
                    }
                    else if ((location == TabRelativeLocation.BEFORE && (relativeToTab != null)))
                    {
                        TabController.Instance.MoveTabBefore(tab, relativeToTab.TabID);
                    }
                }
            }
            catch (Exception ex)
            {
                Logger.Error(ex);

                if (ex.Message.StartsWith("Page Exists"))
                {
                    throw new DotNetNukeException(ex.Message, DotNetNukeErrorCode.PageExists);
                }
            }

            // create the page from a template
            if (!string.IsNullOrEmpty(templateFileId))
            {
                XmlDocument xmlDoc = new XmlDocument();
                try
                {
	                var templateFile = FileManager.Instance.GetFile(Convert.ToInt32(templateFileId));
					xmlDoc.Load(FileManager.Instance.GetFileContent(templateFile));
                    TabController.DeserializePanes(xmlDoc.SelectSingleNode("//portal/tabs/tab/panes"), tab.PortalID, tab.TabID, PortalTemplateModuleAction.Ignore, new Hashtable());
                    
                    //save tab permissions
                    DeserializeTabPermissions(xmlDoc.SelectNodes("//portal/tabs/tab/tabpermissions/permission"), tab);
                }
                catch (Exception ex)
                {
                    Exceptions.LogException(ex);
                    throw new DotNetNukeException("Unable to process page template.", ex, DotNetNukeErrorCode.DeserializePanesFailed);
                }
            }

            //todo: reload tab from db or send back tabid instead?
            return tab.TabID;
        }]]></body>
          </codeblock>
        </method>
        <method name="Validate_IsCircularReference">
          <declaration><![CDATA[public static bool Validate_IsCircularReference(int portalID, int tabID)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="422" sc="9" el="442" ec="10">UI\RibbonBarManager.cs</location>
            <body hash="af10c7889b3eed81b4d2ffdddb17fa22"><![CDATA[{
            if (tabID != -1)
            {
                TabInfo objtab = TabController.Instance.GetTab(tabID, portalID, false);

                if (((objtab == null)))
                {
                    return false;
                }
                if (objtab.Level == 0)
                {
                    return false;
                }
                if (tabID == objtab.ParentId)
                {
                    return true;
                }
                return Validate_IsCircularReference(portalID, objtab.ParentId);
            }
            return false;
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="Logger">
          <declaration><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof(RibbonBarManager));]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="TabRelativeLocation">
      <declaration><![CDATA[public enum TabRelativeLocation]]></declaration>
      <documentation>
      </documentation>
      <constructors>
      </constructors>
      <methods>
      </methods>
      <fields>
        <field name="AFTER">
          <declaration><![CDATA[public const TabRelativeLocation AFTER = 2;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="BEFORE">
          <declaration><![CDATA[public const TabRelativeLocation BEFORE = 1;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="CHILD">
          <declaration><![CDATA[public const TabRelativeLocation CHILD = 3;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="NOTSET">
          <declaration><![CDATA[public const TabRelativeLocation NOTSET = 0;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="Utilities">
      <declaration><![CDATA[public class Utilities]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public Utilities()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="AddMessageWindow">
          <declaration><![CDATA[private static void AddMessageWindow(Control ctrl)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="52" sc="9" el="54" ec="10">UI\Utilities.cs</location>
            <body hash="23239b5d33f9ac56c834e66a904a494c"><![CDATA[{
            ClientResourceManager.RegisterScript(ctrl.Page, ctrl.ResolveUrl("~/js/dnn.postbackconfirm.js"));
        }]]></body>
          </codeblock>
        </method>
        <method name="ApplySkin">
          <declaration><![CDATA[public static void ApplySkin(Control telerikControl)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="61" sc="9" el="63" ec="10">UI\Utilities.cs</location>
            <body hash="949e1f5b919caa3eebeb9f0719f83c1f"><![CDATA[{
            ApplySkin(telerikControl, "", "", "");
        }]]></body>
          </codeblock>
        </method>
        <method name="ApplySkin">
          <declaration><![CDATA[public static void ApplySkin(Control telerikControl, string fallBackEmbeddedSkinName)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="66" sc="9" el="68" ec="10">UI\Utilities.cs</location>
            <body hash="4dd282d8465b9e8157be73b07edd4965"><![CDATA[{
            ApplySkin(telerikControl, "", "", fallBackEmbeddedSkinName);
        }]]></body>
          </codeblock>
        </method>
        <method name="ApplySkin">
          <declaration><![CDATA[public static void ApplySkin(Control telerikControl, string fallBackEmbeddedSkinName, string controlName)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="71" sc="9" el="73" ec="10">UI\Utilities.cs</location>
            <body hash="739c45c5c5445dab90522ffb7af19a22"><![CDATA[{
            ApplySkin(telerikControl, "", controlName, fallBackEmbeddedSkinName);
        }]]></body>
          </codeblock>
        </method>
        <method name="ApplySkin">
          <declaration><![CDATA[public static void ApplySkin(Control telerikControl, string fallBackEmbeddedSkinName, string controlName, string webControlSkinSubFolderName)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="79" sc="9" el="205" ec="10">UI\Utilities.cs</location>
            <body hash="a8cfdb6ac83b87d90b101136f0d6684a"><![CDATA[{
            PropertyInfo skinProperty = null;
            PropertyInfo enableEmbeddedSkinsProperty = null;
            bool skinApplied = false;

            try
            {
                skinProperty = telerikControl.GetType().GetProperty("Skin");
                enableEmbeddedSkinsProperty = telerikControl.GetType().GetProperty("EnableEmbeddedSkins");

                if ((string.IsNullOrEmpty(controlName)))
                {
                    controlName = telerikControl.GetType().BaseType.Name;
                    if ((controlName.StartsWith("Rad") || controlName.StartsWith("Dnn")))
                    {
                        controlName = controlName.Substring(3);
                    }
                }


                string skinVirtualFolder = "";
                if (PortalSettings.Current != null)
                    skinVirtualFolder = PortalSettings.Current.ActiveTab.SkinPath.Replace('\\', '/').Replace("//", "/");
                else
                    skinVirtualFolder = telerikControl.ResolveUrl("~/Portals/_default/skins/_default/Aphelia"); // developer skin Aphelia

                string skinName = "";
                string webControlSkinName = "";
                if (skinProperty != null)
                {
                    var v = skinProperty.GetValue(telerikControl, null);
                    if (v != null) 
                        webControlSkinName = v.ToString();

                }
                if (string.IsNullOrEmpty(webControlSkinName)) webControlSkinName = "default";

                if ((skinVirtualFolder.EndsWith("/")))
                {
                    skinVirtualFolder = skinVirtualFolder.Substring(0, skinVirtualFolder.Length - 1);
                }
                int lastIndex = skinVirtualFolder.LastIndexOf("/");
                if ((lastIndex > -1 && skinVirtualFolder.Length > lastIndex))
                {
                    skinName = skinVirtualFolder.Substring(skinVirtualFolder.LastIndexOf("/") + 1);
                }

                string systemWebControlSkin = string.Empty;
                if ((!string.IsNullOrEmpty(skinName) && !string.IsNullOrEmpty(skinVirtualFolder)))
                {
					systemWebControlSkin = HttpContext.Current.Server.MapPath(skinVirtualFolder);
                    systemWebControlSkin = Path.Combine(systemWebControlSkin, "WebControlSkin");
                    systemWebControlSkin = Path.Combine(systemWebControlSkin, skinName);
                    systemWebControlSkin = Path.Combine(systemWebControlSkin, webControlSkinSubFolderName);
                    systemWebControlSkin = Path.Combine(systemWebControlSkin, string.Format("{0}.{1}.css", controlName, webControlSkinName));

                    //Check if the selected skin has the webcontrol skin
                    if ((!File.Exists(systemWebControlSkin)))
                    {
                        systemWebControlSkin = "";
                    }

                    //No skin, try default folder
                    if ((string.IsNullOrEmpty(systemWebControlSkin)))
                    {
                        skinVirtualFolder = telerikControl.ResolveUrl("~/Portals/_default/Skins/_default");
                        skinName = "Default";

                        if ((skinVirtualFolder.EndsWith("/")))
                        {
                            skinVirtualFolder = skinVirtualFolder.Substring(0, skinVirtualFolder.Length - 1);
                        }

                        if ((!string.IsNullOrEmpty(skinName) && !string.IsNullOrEmpty(skinVirtualFolder)))
                        {
                            systemWebControlSkin = HttpContext.Current.Server.MapPath(skinVirtualFolder);
                            systemWebControlSkin = Path.Combine(systemWebControlSkin, "WebControlSkin");
                            systemWebControlSkin = Path.Combine(systemWebControlSkin, skinName);
                            systemWebControlSkin = Path.Combine(systemWebControlSkin, webControlSkinSubFolderName);
                            systemWebControlSkin = Path.Combine(systemWebControlSkin, string.Format("{0}.{1}.css", controlName, webControlSkinName));

                            if ((!File.Exists(systemWebControlSkin)))
                            {
                                systemWebControlSkin = "";
                            }
                        }
                    }
                }

                if ((!string.IsNullOrEmpty(systemWebControlSkin)))
                {
                    string filePath = Path.Combine(skinVirtualFolder, "WebControlSkin");
                    filePath = Path.Combine(filePath, skinName);
                    filePath = Path.Combine(filePath, webControlSkinSubFolderName);
                    filePath = Path.Combine(filePath, string.Format("{0}.{1}.css", controlName, webControlSkinName));
                    filePath = filePath.Replace('\\', '/').Replace("//", "/").TrimEnd('/');
                    
                    if (HttpContext.Current != null && HttpContext.Current.Handler is Page)
                    {
                        ClientResourceManager.RegisterStyleSheet(HttpContext.Current.Handler as Page, filePath, FileOrder.Css.ResourceCss);
                    }

                    if (((skinProperty != null) && (enableEmbeddedSkinsProperty != null)))
                    {
                        skinApplied = true;
                        skinProperty.SetValue(telerikControl, webControlSkinName, null);
                        enableEmbeddedSkinsProperty.SetValue(telerikControl, false, null);
                    }
                }
            }
            catch (Exception ex)
            {
                Exceptions.LogException(ex);
            }

            if (skinProperty != null && enableEmbeddedSkinsProperty != null && !skinApplied)
            {
                if ((string.IsNullOrEmpty(fallBackEmbeddedSkinName)))
                {
                    fallBackEmbeddedSkinName = "Simple";
                }

                //Set fall back skin Embedded Skin
                skinProperty.SetValue(telerikControl, fallBackEmbeddedSkinName, null);
                enableEmbeddedSkinsProperty.SetValue(telerikControl, true, null);
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="CreateThumbnail">
          <declaration><![CDATA[public static void CreateThumbnail(FileInfo image, Image img, int maxWidth, int maxHeight)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="208" sc="9" el="237" ec="10">UI\Utilities.cs</location>
            <body hash="71c876106a4fa65f071f8c05d9edb369"><![CDATA[{
            if (image.Width > image.Height)
            {
                // Landscape
                if (image.Width > maxWidth)
                {
                    img.Width = maxWidth;
                    img.Height = Convert.ToInt32((image.Height*maxWidth)/(float) image.Width);
                }
                else
                {
                    img.Width = image.Width;
                    img.Height = image.Height;
                }
            }
            else
            {
                // Portrait
                if (image.Height > maxHeight)
                {
                    img.Width = Convert.ToInt32((image.Width*maxHeight)/(float) image.Height);
                    img.Height = maxHeight;
                }
                else
                {
                    img.Width = image.Width;
                    img.Height = image.Height;
                }
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="GetClientAlert">
          <declaration><![CDATA[public static string GetClientAlert(Control ctrl, string message)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="240" sc="9" el="242" ec="10">UI\Utilities.cs</location>
            <body hash="dfdc825a5d66d72bd18907d6ebf2ee38"><![CDATA[{
            return GetClientAlert(ctrl, new MessageWindowParameters(message));
        }]]></body>
          </codeblock>
        </method>
        <method name="GetClientAlert">
          <declaration><![CDATA[public static string GetClientAlert(Control ctrl, MessageWindowParameters message)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="245" sc="9" el="247" ec="10">UI\Utilities.cs</location>
            <body hash="232cde31d6e0964ef485e8cb3f3ae7f0"><![CDATA[{
            return "jQuery(document).ready(function($){$.dnnAlert({ okText: '" + GetLocalizedString("Ok.Text") + "', text: '" + message.Message + "', title: '" + message.Title + "'});});";
        }]]></body>
          </codeblock>
        </method>
        <method name="GetLocalizedString">
          <declaration><![CDATA[public static string GetLocalizedString(string key)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="250" sc="9" el="253" ec="10">UI\Utilities.cs</location>
            <body hash="016117e6d69e3af0ce1f51ac3a8c5a8a"><![CDATA[{
            string resourceFile = "/App_GlobalResources/WebControls.resx";
            return Localization.GetString(key, resourceFile);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetLocalizedStringFromParent">
          <declaration><![CDATA[public static string GetLocalizedStringFromParent(string key, Control control)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="261" sc="9" el="271" ec="10">UI\Utilities.cs</location>
            <body hash="1b144f7232e4cf180dbd236c773e3f2a"><![CDATA[{
            string returnValue = key;
            string resourceFileName = GetLocalResourceFile(control.Parent);

            if (!string.IsNullOrEmpty(resourceFileName))
            {
                returnValue = Localization.GetString(key, resourceFileName);
            }

            return returnValue;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetLocalResourceFile">
          <declaration><![CDATA[public static string GetLocalResourceFile(Control ctrl)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="256" sc="9" el="258" ec="10">UI\Utilities.cs</location>
            <body hash="7aaa6f2ba9a300e1806bb30cd68d59ca"><![CDATA[{
            return UIUtilities.GetLocalResourceFile(ctrl);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetOnClientClickConfirm">
          <declaration><![CDATA[public static string GetOnClientClickConfirm(Control ctrl, string message)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="274" sc="9" el="276" ec="10">UI\Utilities.cs</location>
            <body hash="9548dd4dedaa29bc8ec7da0ab764d664"><![CDATA[{
            return GetOnClientClickConfirm(ctrl, new MessageWindowParameters(message));
        }]]></body>
          </codeblock>
        </method>
        <method name="GetOnClientClickConfirm">
          <declaration><![CDATA[public static string GetOnClientClickConfirm(Control ctrl, MessageWindowParameters message)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="279" sc="9" el="283" ec="10">UI\Utilities.cs</location>
            <body hash="7b20c433e03a97451e6b90660427f952"><![CDATA[{
            AddMessageWindow(ctrl);
            //function(text, mozEvent, oWidth, oHeight, callerObj, oTitle) 
            return string.Format("return postBackConfirm('{0}', event, '{1}', '{2}', '', '{3}');", message.Message, message.WindowWidth, message.WindowHeight, message.Title);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetViewStateAsString">
          <declaration><![CDATA[public static string GetViewStateAsString(object value, string defaultValue)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="286" sc="9" el="293" ec="10">UI\Utilities.cs</location>
            <body hash="bfb2a8fa2ae8ff7714951c4e7a1f16fa"><![CDATA[{
            string _Value = defaultValue;
            if (value != null)
            {
                _Value = Convert.ToString(value);
            }
            return _Value;
        }]]></body>
          </codeblock>
        </method>
        <method name="RegisterAlertOnPageLoad">
          <declaration><![CDATA[public static void RegisterAlertOnPageLoad(Control ctrl, string message)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="296" sc="9" el="298" ec="10">UI\Utilities.cs</location>
            <body hash="dca5e50ef9b870091440765409258f09"><![CDATA[{
            RegisterAlertOnPageLoad(ctrl, new MessageWindowParameters(message));
        }]]></body>
          </codeblock>
        </method>
        <method name="RegisterAlertOnPageLoad">
          <declaration><![CDATA[public static void RegisterAlertOnPageLoad(Control ctrl, MessageWindowParameters message)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="301" sc="9" el="303" ec="10">UI\Utilities.cs</location>
            <body hash="bcf49a90ae51f3712c433a276a18f6a1"><![CDATA[{
            ctrl.Page.ClientScript.RegisterClientScriptBlock(ctrl.GetType(), ctrl.ID + "_AlertOnPageLoad", GetClientAlert(ctrl, message), true);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
  </namespace>
  <namespace name="DotNetNuke.Web.UI.WebControls">
    <class name="DnnButton">
      <declaration><![CDATA[public class DnnButton : Button, ILocalizable]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[private bool _Localize = true;]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="34" sc="9" el="42" ec="10">UI\WebControls\DnnButton.cs</location>
            <body hash="1b030cddc19870e2c6dde55066622d3e"><![CDATA[private bool _Localize = true;

        #region "Constructors"

        public DnnButton()
        {
            CssClass = "CommandButton";
            DisabledCssClass = "CommandButtonDisabled";
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="LocalizeStrings">
          <declaration><![CDATA[public virtual void LocalizeStrings()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="134" sc="9" el="161" ec="10">UI\WebControls\DnnButton.cs</location>
            <body hash="741a08caed9719dbcbe906c4806bd424"><![CDATA[{
            if ((Localize))
            {
                if ((!string.IsNullOrEmpty(ToolTip)))
                {
                    ToolTip = Utilities.GetLocalizedStringFromParent(ToolTip, this);
                }

                if ((!string.IsNullOrEmpty(Text)))
                {
                    string unlocalizedText = Text;
                    Text = Utilities.GetLocalizedStringFromParent(unlocalizedText, this);
                    if (String.IsNullOrEmpty(Text))
                    {
                        Text = unlocalizedText;
                    }

                    if ((string.IsNullOrEmpty(ToolTip)))
                    {
                        ToolTip = Utilities.GetLocalizedStringFromParent(unlocalizedText + ".ToolTip", this);
                        if (String.IsNullOrEmpty(ToolTip))
                        {
                            ToolTip = unlocalizedText;
                        }
                    }
                }
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="OnPreRender">
          <declaration><![CDATA[protected override void OnPreRender(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="85" sc="9" el="103" ec="10">UI\WebControls\DnnButton.cs</location>
            <body hash="3453ffb6433881e0029c2dad06827a35"><![CDATA[{
            base.OnPreRender(e);

            if ((!Enabled))
            {
                CssClass = DisabledCssClass;
            }

            if ((!string.IsNullOrEmpty(ConfirmMessage)))
            {
                string msg = ConfirmMessage;
                if ((Localize))
                {
                    msg = Utilities.GetLocalizedStringFromParent(ConfirmMessage, this);
                }
                //must be done before render
                OnClientClick = Utilities.GetOnClientClickConfirm(this, msg);
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="Render">
          <declaration><![CDATA[protected override void Render(HtmlTextWriter writer)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="106" sc="9" el="109" ec="10">UI\WebControls\DnnButton.cs</location>
            <body hash="8f3fb37b7748da233ed1fda25b8594e9"><![CDATA[{
            LocalizeStrings();
            base.Render(writer);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_Localize">
          <declaration><![CDATA[private bool _Localize = true;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="ConfirmMessage">
          <declaration><![CDATA[public string ConfirmMessage]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="55" sc="13" el="57" ec="14">UI\WebControls\DnnButton.cs</location>
            <body hash="183b00dd9a50ad1afc65b037bfd33e9b"><![CDATA[{
                return ViewState["ConfirmMessage"] == null ? string.Empty : ViewState["ConfirmMessage"].ToString();
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="59" sc="13" el="61" ec="14">UI\WebControls\DnnButton.cs</location>
            <body hash="946474c48c9cab94e54cd15fdd49b9aa"><![CDATA[{
                ViewState["ConfirmMessage"] = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="DisabledCssClass">
          <declaration><![CDATA[public new string DisabledCssClass]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="71" sc="13" el="73" ec="14">UI\WebControls\DnnButton.cs</location>
            <body hash="2a60c68bce1d13f7c517071db623c19f"><![CDATA[{
                return ViewState["DisabledCssClass"] == null ? string.Empty : ViewState["DisabledCssClass"].ToString();
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="75" sc="13" el="77" ec="14">UI\WebControls\DnnButton.cs</location>
            <body hash="bdfc97101fa8b5551d08172d46da84a5"><![CDATA[{
                ViewState["DisabledCssClass"] = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="Localize">
          <declaration><![CDATA[public bool Localize]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="118" sc="13" el="124" ec="14">UI\WebControls\DnnButton.cs</location>
            <body hash="5a301b393683b206d550ef9181d75b76"><![CDATA[{
                if (DesignMode)
                {
                    return false;
                }
                return _Localize;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="126" sc="13" el="128" ec="14">UI\WebControls\DnnButton.cs</location>
            <body hash="7f442eb778feef34982862b7cb2a1f38"><![CDATA[{
                _Localize = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="LocalResourceFile">
          <declaration><![CDATA[public string LocalResourceFile]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="131" sc="43" el="131" ec="47">UI\WebControls\DnnButton.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="131" sc="48" el="131" ec="52">UI\WebControls\DnnButton.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnCheckBox">
      <declaration><![CDATA[public class DnnCheckBox : CheckBox]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnCheckBox()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="CommandArgument">
          <declaration><![CDATA[public string CommandArgument]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="35" sc="13" el="37" ec="14">UI\WebControls\DnnCheckBox.cs</location>
            <body hash="a8419526ef05719d0b51b6b98789aca6"><![CDATA[{
                return Convert.ToString(ViewState["CommandArgument"]);
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="39" sc="13" el="41" ec="14">UI\WebControls\DnnCheckBox.cs</location>
            <body hash="fe2f5820999213a0925ef46527175140"><![CDATA[{
                ViewState["CommandArgument"] = value;
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnConfirmPasswordOptions">
      <declaration><![CDATA[public class DnnConfirmPasswordOptions]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnConfirmPasswordOptions()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="30" sc="9" el="35" ec="10">UI\WebControls\DnnConfirmPasswordOptions.cs</location>
            <body hash="fa695ca37e2f4c871585f3cb332aba8e"><![CDATA[public DnnConfirmPasswordOptions()
        {
            // all the Confirm Password related resources are located under the Website\App_GlobalResources\WebControls.resx
            ConfirmPasswordUnmatchedText = Utilities.GetLocalizedString("ConfirmPasswordUnmatched");
            ConfirmPasswordMatchedText = Utilities.GetLocalizedString("ConfirmPasswordMatched");
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
        <field name="ConfirmPasswordMatchedText">
          <declaration><![CDATA[public string ConfirmPasswordMatchedText;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ConfirmPasswordUnmatchedText">
          <declaration><![CDATA[public string ConfirmPasswordUnmatchedText;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ContainerSelector">
          <declaration><![CDATA[public string ContainerSelector;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="FirstElementSelector">
          <declaration><![CDATA[public string FirstElementSelector;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="MatchedCssClass">
          <declaration><![CDATA[public string MatchedCssClass;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="SecondElementSelector">
          <declaration><![CDATA[public string SecondElementSelector;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="UnmatchedCssClass">
          <declaration><![CDATA[public string UnmatchedCssClass;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnDropDownList">
      <declaration><![CDATA[public class DnnDropDownList : Panel, INamingContainer]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnDropDownList()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="35" sc="9" el="36" ec="82">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="60f9e43f0968f78f311ec338397735fe"><![CDATA[private readonly Lazy<DnnDropDownListOptions> _options =
            new Lazy<DnnDropDownListOptions>(() => new DnnDropDownListOptions());]]></body>
          </codeblock>
        </constructor>
        <constructor name=".cctor">
          <declaration><![CDATA[static DnnDropDownList()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="33" sc="9" el="33" ec="77">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="3fbb0fb2de05f9b50c2fb38baa739947"><![CDATA[private static readonly object EventSelectionChanged = new object()]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="add_SelectionChanged">
          <declaration><![CDATA[public void add_SelectionChanged(EventHandler value)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="93" sc="13" el="95" ec="14">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="06887528ec1fb4939fb4c1246ab89685"><![CDATA[{
                Events.AddHandler(EventSelectionChanged, value);
            }]]></body>
          </codeblock>
        </method>
        <method name="CreateChildControls">
          <declaration><![CDATA[protected override void CreateChildControls()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="291" sc="9" el="306" ec="10">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="ad5b85e88de1a857cf376818fe30c02e"><![CDATA[{
            Controls.Clear();

            var selectedItemPanel = new Panel { CssClass = "selected-item" };

            _selectedValue = new HtmlAnchor { HRef = "javascript:void(0);", Title = LocalizeString("DropDownList.SelectedItemExpandTooltip") };
            _selectedValue.Attributes.Add(HtmlTextWriterAttribute.Class.ToString(), "selected-value");
            _selectedValue.ViewStateMode = ViewStateMode.Disabled;
            selectedItemPanel.Controls.Add(_selectedValue);
            Controls.Add(selectedItemPanel);

            _stateControl = new DnnGenericHiddenField<DnnDropDownListState> { ID = "state" };
            _stateControl.ValueChanged += (sender, args) => OnSelectionChanged(EventArgs.Empty);
            Controls.Add(_stateControl);

        }]]></body>
          </codeblock>
        </method>
        <method name="GetPostBackScript">
          <declaration><![CDATA[private string GetPostBackScript()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="365" sc="9" el="387" ec="10">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="efa115c3cacb1c70fd3b17df40e85390"><![CDATA[{
            var script = string.Empty;
            if (HasAttributes)
            {
                script = Attributes["onchange"];
                if (script != null)
                {
                    Attributes.Remove("onchange");
                }
            }
            var options = new PostBackOptions(this, string.Empty);
            if (CausesValidation)
            {
                options.PerformValidation = true;
                options.ValidationGroup = ValidationGroup;
            }
            if (Page.Form != null)
            {
                options.AutoPostBack = true;
                options.TrackFocus = true;
            }
            return script.Append(Page.ClientScript.GetPostBackEventReference(options), "; ");
        }]]></body>
          </codeblock>
        </method>
        <method name="LocalizeString">
          <declaration><![CDATA[private static string LocalizeString(string key)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="341" sc="9" el="343" ec="10">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="f81e408f0c0212e447f20abc7bc2e77f"><![CDATA[{
            return Localization.GetString(key, Localization.SharedResourceFile);
        }]]></body>
          </codeblock>
        </method>
        <method name="OnInit">
          <declaration><![CDATA[protected override void OnInit(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="309" sc="9" el="313" ec="10">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="5980871589d6b623d14f0dbc0e6618e9"><![CDATA[{
            base.OnInit(e);
            StateControl.Value = ""; // for state persistence (stateControl)
            ServicesFramework.Instance.RequestAjaxAntiForgerySupport();
        }]]></body>
          </codeblock>
        </method>
        <method name="OnPreRender">
          <declaration><![CDATA[protected override void OnPreRender(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="316" sc="9" el="324" ec="10">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="d637e828ae7c8e7b5cea6e8d7a9b9063"><![CDATA[{
            RegisterClientScript(Page, Skin);

            this.AddCssClass("dnnDropDownList");

            base.OnPreRender(e);

            RegisterStartupScript();
        }]]></body>
          </codeblock>
        </method>
        <method name="OnSelectionChanged">
          <declaration><![CDATA[protected virtual void OnSelectionChanged(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="327" sc="9" el="334" ec="10">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="154ae8e344fb6b4f0a863a5ca900a213"><![CDATA[{
            var eventHandler = (EventHandler)Events[EventSelectionChanged];
            if (eventHandler == null)
            {
                return;
            }
            eventHandler(this, e);
        }]]></body>
          </codeblock>
        </method>
        <method name="RegisterClientScript">
          <declaration><![CDATA[internal static void RegisterClientScript(Page page, string skin)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="346" sc="9" el="362" ec="10">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="f1fd01567bac62923d7c09ed10da17b6"><![CDATA[{
            ClientResourceManager.RegisterStyleSheet(page, "~/Resources/Shared/components/DropDownList/dnn.DropDownList.css", FileOrder.Css.ResourceCss);
            if (!string.IsNullOrEmpty(skin))
            {
                ClientResourceManager.RegisterStyleSheet(page, "~/Resources/Shared/components/DropDownList/dnn.DropDownList." + skin + ".css", FileOrder.Css.ResourceCss);
            }
            ClientResourceManager.RegisterStyleSheet(page, "~/Resources/Shared/scripts/jquery/dnn.jScrollBar.css", FileOrder.Css.ResourceCss);

            ClientResourceManager.RegisterScript(page, "~/Resources/Shared/scripts/dnn.extensions.js");
            ClientResourceManager.RegisterScript(page, "~/Resources/Shared/scripts/dnn.jquery.extensions.js");
            ClientResourceManager.RegisterScript(page, "~/Resources/Shared/scripts/dnn.DataStructures.js");
            ClientResourceManager.RegisterScript(page, "~/Resources/Shared/scripts/jquery/jquery.mousewheel.js");
            ClientResourceManager.RegisterScript(page, "~/Resources/Shared/scripts/jquery/dnn.jScrollBar.js");
            ClientResourceManager.RegisterScript(page, "~/Resources/Shared/scripts/TreeView/dnn.TreeView.js");
            ClientResourceManager.RegisterScript(page, "~/Resources/Shared/scripts/TreeView/dnn.DynamicTreeView.js");
            ClientResourceManager.RegisterScript(page, "~/Resources/Shared/Components/DropDownList/dnn.DropDownList.js");
        }]]></body>
          </codeblock>
        </method>
        <method name="RegisterStartupScript">
          <declaration><![CDATA[private void RegisterStartupScript()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="390" sc="9" el="428" ec="10">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="58334a615a34fed84455eabfee1bd575"><![CDATA[{
            Options.InternalStateFieldId = StateControl.ClientID;

            if (SelectedItem == null && UseUndefinedItem)
            {
                SelectedItem = UndefinedItem;
            }

            Options.InitialState = new DnnDropDownListState
            {
                SelectedItem = StateControl.TypedValue != null ? StateControl.TypedValue.SelectedItem : null
            };

            SelectedValue.InnerText = (SelectedItem != null) ? SelectedItem.Text : Options.SelectItemDefaultText;

            Options.Disabled = !Enabled;

            var optionsAsJsonString = Json.Serialize(Options);

            var methods = new JavaScriptObjectDictionary();
            if (AutoPostBack)
            {
                methods.AddMethodBody("onSelectionChangedBackScript", GetPostBackScript());
            }

            var methodsAsJsonString = methods.ToJsonString();

            var script = string.Format("dnn.createDropDownList('#{0}', {1}, {2});{3}", ClientID, optionsAsJsonString, methodsAsJsonString, Environment.NewLine);

            if (ScriptManager.GetCurrent(Page) != null)
            {
                // respect MS AJAX
                ScriptManager.RegisterStartupScript(Page, GetType(), ClientID + "DnnDropDownList", script, true);
            }
            else
            {
                Page.ClientScript.RegisterStartupScript(GetType(), ClientID + "DnnDropDownList", script, true);
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="remove_SelectionChanged">
          <declaration><![CDATA[public void remove_SelectionChanged(EventHandler value)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="97" sc="13" el="99" ec="14">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="cd287fc027b285207a62ca9c801f3100"><![CDATA[{
                Events.RemoveHandler(EventSelectionChanged, value);
            }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_options">
          <declaration><![CDATA[private readonly Lazy<DnnDropDownListOptions> _options;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_selectedValue">
          <declaration><![CDATA[private HtmlAnchor _selectedValue;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_stateControl">
          <declaration><![CDATA[private DnnGenericHiddenField<DnnDropDownListState> _stateControl;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="EventSelectionChanged">
          <declaration><![CDATA[private static readonly object EventSelectionChanged = new object();]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="AutoPostBack">
          <declaration><![CDATA[public bool AutoPostBack]]></declaration>
          <documentation>
            <summary>
 Gets or sets a value indicating whether a postback to the server automatically occurs when the user changes the list selection.
 </summary>
 <returns>
 true if a postback to the server automatically occurs whenever the user changes the selection of the list; otherwise, false. The default is false.
 </returns></documentation>
          <codeblock>
            <location sl="220" sc="13" el="222" ec="14">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="3632ab597d24d457d5bdf4a55dc4f08a"><![CDATA[{
                return ViewState.GetValue("AutoPostBack", false);
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="224" sc="13" el="226" ec="14">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="2ed9fadfa4703d08bd5cf0a449589d66"><![CDATA[{
                ViewState.SetValue("AutoPostBack", value, false);
            }]]></body>
          </codeblock>
        </property>
        <property name="CausesValidation">
          <declaration><![CDATA[public virtual bool CausesValidation]]></declaration>
          <documentation>
            <summary>
 Gets or sets a value indicating whether validation is performed when a control is clicked.
 </summary>
          </documentation>
          <codeblock>
            <location sl="235" sc="13" el="237" ec="14">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="2ea1fafa4f850800e58eb87b49942e82"><![CDATA[{
                return ViewState.GetValue("CausesValidation", false);
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="239" sc="13" el="241" ec="14">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="b346ba4f7ffb338e6c00fdb103e52851"><![CDATA[{
                ViewState.SetValue("CausesValidation", value, false);
            }]]></body>
          </codeblock>
        </property>
        <property name="Controls">
          <declaration><![CDATA[public override ControlCollection Controls]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="109" sc="13" el="112" ec="14">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="9454f31a88317c388a43ae1cd4816179"><![CDATA[{
                EnsureChildControls();
                return base.Controls;
            }]]></body>
          </codeblock>
        </property>
        <property name="ExpandPath">
          <declaration><![CDATA[public string ExpandPath]]></declaration>
          <documentation>
            <summary>
 When the tree view in drop down has multiple level nodes, and the initial selected item is a child node.
 we need expand its parent nodes to make it selected.
 </summary>
          </documentation>
          <codeblock>
            <location sl="277" sc="13" el="279" ec="14">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="6d6fa0ff1e00fd24721f13d616167a5d"><![CDATA[{
                return ClientAPI.GetClientVariable(Page, ClientID + "_expandPath");
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="281" sc="13" el="283" ec="14">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="1ad276f76f949c178a4dbc95b085b8cf"><![CDATA[{
                ClientAPI.RegisterClientVariable(Page, ClientID + "_expandPath", value, true);
            }]]></body>
          </codeblock>
        </property>
        <property name="FirstItem">
          <declaration><![CDATA[public ListItem FirstItem]]></declaration>
          <documentation>
            <summary>
 Item to be displayed as first item
 </summary>
          </documentation>
          <codeblock>
            <location sl="176" sc="13" el="178" ec="14">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="28272dea27b45502f90174f144685e1f"><![CDATA[{
                return (Options.ItemList.FirstItem == null) ? null : new ListItem(Options.ItemList.FirstItem.Value, Options.ItemList.FirstItem.Key);
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="180" sc="13" el="183" ec="14">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="0fea62ae4cf7e5ff45aa1bd27059d7bf"><![CDATA[{
                Options.ItemList.FirstItem = (value == null) ? null : new SerializableKeyValuePair<string, string>(value.Value, value.Text);
                UseUndefinedItem = false;
            }]]></body>
          </codeblock>
        </property>
        <property name="OnClientSelectionChanged">
          <declaration><![CDATA[public List<string> OnClientSelectionChanged]]></declaration>
          <documentation>
            <summary>
 Register a list of JavaScript methods that are executed when the selection from the list control changes on the client.
 </summary>
          </documentation>
          <codeblock>
            <location sl="265" sc="13" el="267" ec="14">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="b5ae7fb14ff4a8456948d8524ef9302b"><![CDATA[{
                return Options.OnClientSelectionChanged;
            }]]></body>
          </codeblock>
        </property>
        <property name="Options">
          <declaration><![CDATA[internal DnnDropDownListOptions Options]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="48" sc="13" el="50" ec="14">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="68db4dc2ebd4390476aa99629566d03c"><![CDATA[{
                return _options.Value;
            }]]></body>
          </codeblock>
        </property>
        <property name="SelectedItem">
          <declaration><![CDATA[public ListItem SelectedItem]]></declaration>
          <documentation>
            <summary>
 Gets the selected item in the control, or selects the item in the control.
 </summary>
          </documentation>
          <codeblock>
            <location sl="121" sc="13" el="127" ec="14">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="637c9f693de72267287f17ba0bbc7ac3"><![CDATA[{
                if (StateControl.TypedValue != null && StateControl.TypedValue.SelectedItem != null)
                {
                    return new ListItem { Text = StateControl.TypedValue.SelectedItem.Value, Value = StateControl.TypedValue.SelectedItem.Key };
                }
                return null;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="129" sc="13" el="131" ec="14">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="c05f62033eef97fe775520a21723f73b"><![CDATA[{
                StateControl.TypedValueOrDefault.SelectedItem = (value == null) ? null : new SerializableKeyValuePair<string, string>(value.Value, value.Text);
            }]]></body>
          </codeblock>
        </property>
        <property name="SelectedItemValueAsInt">
          <declaration><![CDATA[public int SelectedItemValueAsInt]]></declaration>
          <documentation>
            <summary>
 When this method returns, contains the 32-bit signed integer value equivalent to the number contained in
 SelectedItem.Value, if the conversion succeeded, or Null.NullInteger if the conversion failed.
 </summary>
          </documentation>
          <codeblock>
            <location sl="142" sc="13" el="150" ec="14">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="2ce3bb2e9b58d884dbc5268a6509bfa6"><![CDATA[{
                if (SelectedItem != null && !string.IsNullOrEmpty(SelectedItem.Value))
                {
                    int valueAsInt;
                    var parsed = Int32.TryParse(SelectedItem.Value, out valueAsInt);
                    return parsed ? valueAsInt : Null.NullInteger;
                }
                return Null.NullInteger;
            }]]></body>
          </codeblock>
        </property>
        <property name="SelectedValue">
          <declaration><![CDATA[private HtmlAnchor SelectedValue]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="65" sc="13" el="68" ec="14">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="6b0ba597dbc7c50ce3c8a89371d72a30"><![CDATA[{
                EnsureChildControls();
                return _selectedValue;
            }]]></body>
          </codeblock>
        </property>
        <property name="SelectItemDefaultText">
          <declaration><![CDATA[public string SelectItemDefaultText]]></declaration>
          <documentation>
            <summary>
 DropDownList Caption when no Item is selected.
 </summary>
          </documentation>
          <codeblock>
            <location sl="200" sc="13" el="202" ec="14">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="3ec836e5278e6f01a911985c789ef86d"><![CDATA[{
                Options.SelectItemDefaultText = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="Services">
          <declaration><![CDATA[public ItemListServicesOptions Services]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="189" sc="13" el="191" ec="14">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="df6cae9244c071400b4e8e1576a6c88e"><![CDATA[{
                return Options.Services;
            }]]></body>
          </codeblock>
        </property>
        <property name="Skin">
          <declaration><![CDATA[public string Skin]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="207" sc="13" el="207" ec="17">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="208" sc="13" el="208" ec="17">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="StateControl">
          <declaration><![CDATA[protected DnnGenericHiddenField<DnnDropDownListState> StateControl]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="56" sc="13" el="59" ec="14">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="7a1587ee9bb3dbbe6c6feca2d27df30c"><![CDATA[{
                EnsureChildControls();
                return _stateControl;
            }]]></body>
          </codeblock>
        </property>
        <property name="UndefinedItem">
          <declaration><![CDATA[public ListItem UndefinedItem]]></declaration>
          <documentation>
            <summary>
 SelectedItem's value when SelectedItem is not explicitly specified (i.e. equals null);
 Always displayed as first option in the list
 </summary>
          </documentation>
          <codeblock>
            <location sl="160" sc="13" el="162" ec="14">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="d650c9dbe5c71e668e27a3830ce91186"><![CDATA[{
                return FirstItem;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="164" sc="13" el="167" ec="14">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="ddcbbfc6c12ff40c58bdedc296a9cddd"><![CDATA[{
                FirstItem = value;
                UseUndefinedItem = true;
            }]]></body>
          </codeblock>
        </property>
        <property name="UseUndefinedItem">
          <declaration><![CDATA[private bool UseUndefinedItem]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="74" sc="13" el="76" ec="14">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="06c5cb71516b92f9261227d87be90d41"><![CDATA[{
                return ViewState.GetValue("UseUndefinedItem", false);
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="78" sc="13" el="80" ec="14">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="2c9988fd57b7a79ab204b90a5c8c47de"><![CDATA[{
                ViewState.SetValue("UseUndefinedItem", value, false);
            }]]></body>
          </codeblock>
        </property>
        <property name="ValidationGroup">
          <declaration><![CDATA[public virtual string ValidationGroup]]></declaration>
          <documentation>
            <summary>
 Gets or sets the group of controls for which the control causes validation when it posts back to the server.
 </summary>
          </documentation>
          <codeblock>
            <location sl="250" sc="13" el="252" ec="14">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="8af2386bbdf9465566d537b03e6f6026"><![CDATA[{
                return ViewState.GetValue("ValidationGroup", string.Empty);
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="254" sc="13" el="256" ec="14">UI\WebControls\DnnDropDownList.cs</location>
            <body hash="d61b062fb5b4b320708b1bbbad9f462f"><![CDATA[{
                ViewState.SetValue("ValidationGroup", value, string.Empty);
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
        <event name="SelectionChanged">
          <declaration><![CDATA[public event EventHandler SelectionChanged]]></declaration>
          <documentation>
            <summary>
 Occurs when the selection from the list control changes between posts to the server.
 </summary>
          </documentation>
        </event>
      </events>
    </class>
    <class name="DnnDropDownListOptions">
      <declaration><![CDATA[public class DnnDropDownListOptions]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public bool Disabled = false;]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="17" sc="9" el="48" ec="10">UI\WebControls\DnnDropDownListOptions.cs</location>
            <body hash="896a05b20e5c7322f4c2b3b1852d54d6"><![CDATA[public bool Disabled = false;

        [DataMember(Name = "selectItemDefaultText")]
        public string SelectItemDefaultText;

        [DataMember(Name = "initialState")]
        public DnnDropDownListState InitialState;

        private List<string> _onClientSelectionChanged;

        [DataMember(Name = "onSelectionChanged")]
        public List<string> OnClientSelectionChanged
        {
            get
            {
                return _onClientSelectionChanged ?? (_onClientSelectionChanged = new List<string>());
            }
        }

        [DataMember(Name = "services")]
        public ItemListServicesOptions Services;

        [DataMember(Name = "itemList")]
        public ItemListOptions ItemList;

        public DnnDropDownListOptions()
        {
            SelectedItemCss = "selected-item";
            SelectItemDefaultText = "";
            Services = new ItemListServicesOptions();
            ItemList = new ItemListOptions();
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
        <field name="_onClientSelectionChanged">
          <declaration><![CDATA[private List<string> _onClientSelectionChanged;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="Disabled">
          <declaration><![CDATA[public bool Disabled = false;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="InitialState">
          <declaration><![CDATA[public DnnDropDownListState InitialState;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="InternalStateFieldId">
          <declaration><![CDATA[public string InternalStateFieldId;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ItemList">
          <declaration><![CDATA[public ItemListOptions ItemList;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="SelectedItemCss">
          <declaration><![CDATA[public string SelectedItemCss;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="SelectItemDefaultText">
          <declaration><![CDATA[public string SelectItemDefaultText;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="Services">
          <declaration><![CDATA[public ItemListServicesOptions Services;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="OnClientSelectionChanged">
          <declaration><![CDATA[public List<string> OnClientSelectionChanged]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="31" sc="13" el="33" ec="14">UI\WebControls\DnnDropDownListOptions.cs</location>
            <body hash="7e00479866a0c6d2451e137bfc13dd41"><![CDATA[{
                return _onClientSelectionChanged ?? (_onClientSelectionChanged = new List<string>());
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnDropDownListState">
      <declaration><![CDATA[public class DnnDropDownListState]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnDropDownListState()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
        <field name="SelectedItem">
          <declaration><![CDATA[public SerializableKeyValuePair<string, string> SelectedItem;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnFieldLabel">
      <declaration><![CDATA[public class DnnFieldLabel : DnnLabel]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnFieldLabel()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="LocalizeStrings">
          <declaration><![CDATA[public override void LocalizeStrings()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="26" sc="9" el="29" ec="10">UI\WebControls\DnnFieldLabel.cs</location>
            <body hash="c259ec81e0d3f0b34bd67db91f84cc87"><![CDATA[{
            base.LocalizeStrings();
            Text = Text + Utilities.GetLocalizedString("FieldSuffix.Text");
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnFieldLiteral">
      <declaration><![CDATA[public class DnnFieldLiteral : DnnLiteral]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnFieldLiteral()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="LocalizeStrings">
          <declaration><![CDATA[public override void LocalizeStrings()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="26" sc="9" el="29" ec="10">UI\WebControls\DnnFieldLiteral.cs</location>
            <body hash="c259ec81e0d3f0b34bd67db91f84cc87"><![CDATA[{
            base.LocalizeStrings();
            Text = Text + Utilities.GetLocalizedString("FieldSuffix.Text");
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnFileDropDownList">
      <declaration><![CDATA[public class DnnFileDropDownList : DnnDropDownList]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnFileDropDownList()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="OnInit">
          <declaration><![CDATA[protected override void OnInit(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="20" sc="9" el="31" ec="10">UI\WebControls\DnnFileDropDownList.cs</location>
            <body hash="a894a6d14b4086fd23565a563bff065a"><![CDATA[{
            base.OnInit(e);

            SelectItemDefaultText = Localization.GetString("DropDownList.SelectFileDefaultText", Localization.SharedResourceFile);
            Services.GetTreeMethod = "ItemListService/GetFiles";
            Services.SearchTreeMethod = "ItemListService/SearchFiles";
            Services.SortTreeMethod = "ItemListService/SortFiles";
            Services.ServiceRoot = "InternalServices";
            Options.ItemList.DisableUnspecifiedOrder = true;

            FolderId = Null.NullInteger;
        }]]></body>
          </codeblock>
        </method>
        <method name="OnPreRender">
          <declaration><![CDATA[protected override void OnPreRender(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="34" sc="9" el="43" ec="10">UI\WebControls\DnnFileDropDownList.cs</location>
            <body hash="569e31e1df25935dca6f0ebf1dffc7ce"><![CDATA[{
            this.AddCssClass("file");

            if (IncludeNoneSpecificItem)
            {
                UndefinedItem = new ListItem(DynamicSharedConstants.Unspecified, Null.NullInteger.ToString(CultureInfo.InvariantCulture));
            }

            base.OnPreRender(e);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="Filter">
          <declaration><![CDATA[public string Filter]]></declaration>
          <documentation>
          </documentation>
        </property>
        <property name="FolderId">
          <declaration><![CDATA[public int FolderId]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="65" sc="13" el="67" ec="14">UI\WebControls\DnnFileDropDownList.cs</location>
            <body hash="b94bb00eb2f197a8fa81438221983149"><![CDATA[{
                return Services.Parameters.ContainsKey("parentId") ? Convert.ToInt32(Services.Parameters["parentId"]) : Null.NullInteger;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="69" sc="13" el="71" ec="14">UI\WebControls\DnnFileDropDownList.cs</location>
            <body hash="9fd1841d2286280fc2503618b91b5801"><![CDATA[{
                Services.Parameters["parentId"] = value.ToString();
            }]]></body>
          </codeblock>
        </property>
        <property name="IncludeNoneSpecificItem">
          <declaration><![CDATA[public bool IncludeNoneSpecificItem]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="80" sc="47" el="80" ec="51">UI\WebControls\DnnFileDropDownList.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="80" sc="52" el="80" ec="56">UI\WebControls\DnnFileDropDownList.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="SelectedFile">
          <declaration><![CDATA[public IFileInfo SelectedFile]]></declaration>
          <documentation>
            <summary>
 Gets the selected Folder in the control, or selects the Folder in the control.
 </summary>
          </documentation>
          <codeblock>
            <location sl="52" sc="13" el="55" ec="14">UI\WebControls\DnnFileDropDownList.cs</location>
            <body hash="4889032ccd860a1e6ee0e957f43150e4"><![CDATA[{
                var fileId = SelectedItemValueAsInt;
                return (fileId == Null.NullInteger) ? null : FileManager.Instance.GetFile(fileId);
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="57" sc="13" el="59" ec="14">UI\WebControls\DnnFileDropDownList.cs</location>
            <body hash="60e9020229ff916f0e0e553d716dad5b"><![CDATA[{
                SelectedItem = (value != null) ? new ListItem() { Text = value.FileName, Value = value.FileId.ToString(CultureInfo.InvariantCulture) } : null;
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnFileEditControl">
      <declaration><![CDATA[public class DnnFileEditControl : IntegerEditControl]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnFileEditControl()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="CreateChildControls">
          <declaration><![CDATA[protected override void CreateChildControls()]]></declaration>
          <documentation>-----------------------------------------------------------------------------
 <summary>
   Creates the control contained within this control
 </summary>
 -----------------------------------------------------------------------------</documentation>
          <codeblock>
            <location sl="69" sc="9" el="91" ec="10">UI\WebControls\DnnFileEditControl.cs</location>
            <body hash="4a208a4381f5212d05a7d09fd49c96c5"><![CDATA[{
            //First clear the controls collection
            Controls.Clear();

            var userControl = Page.LoadControl("~/controls/filepickeruploader.ascx");
            _fileControl = userControl as DnnFilePickerUploader;

            if (_fileControl != null)
            {
                _fileControl.ID = string.Format("{0}FileControl", ID);
                _fileControl.FileFilter = FileFilter;
                _fileControl.FilePath = FilePath;
                _fileControl.FileID = IntegerValue;
                _fileControl.UsePersonalFolder = true;
                _fileControl.User = User;
	            _fileControl.Required = true;

                //Add table to Control
                Controls.Add(_fileControl);
            }

            base.CreateChildControls();
        }]]></body>
          </codeblock>
        </method>
        <method name="LoadPostData">
          <declaration><![CDATA[public override bool LoadPostData(string postDataKey, NameValueCollection postCollection)]]></declaration>
          <documentation>-----------------------------------------------------------------------------
 <summary>
   Loads the Post Back Data and determines whether the value has change
 </summary>
 <remarks>
   In this case because the <see cref="F:DotNetNuke.Web.UI.WebControls.DnnFileEditControl._fileControl" /> is a contained control, we do not need
   to process the PostBackData (it has been handled by the File Control).  We just use
   this method as the Framework calls it for us.
 </remarks>
 <param name="postDataKey">A key to the PostBack Data to load</param>
 <param name="postCollection">A name value collection of postback data</param>
 -----------------------------------------------------------------------------</documentation>
          <codeblock>
            <location sl="144" sc="9" el="155" ec="10">UI\WebControls\DnnFileEditControl.cs</location>
            <body hash="259ab8759fc29e298cae644ed61abacd"><![CDATA[{
            bool dataChanged = false;
            string presentValue = StringValue;
            //string postedValue = postCollection[string.Format("{0}FileControl$dnnFileUploadFileId", postDataKey)];
            string postedValue = _fileControl.FileID.ToString();
            if (!presentValue.Equals(postedValue))
            {
                Value = postedValue;
                dataChanged = true;
            }
            return dataChanged;
        }]]></body>
          </codeblock>
        </method>
        <method name="OnInit">
          <declaration><![CDATA[protected override void OnInit(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="94" sc="9" el="97" ec="10">UI\WebControls\DnnFileEditControl.cs</location>
            <body hash="0f37591377489f542794effd7f254c6d"><![CDATA[{
            EnsureChildControls();
            base.OnInit(e);
        }]]></body>
          </codeblock>
        </method>
        <method name="OnPreRender">
          <declaration><![CDATA[protected override void OnPreRender(EventArgs e)]]></declaration>
          <documentation>-----------------------------------------------------------------------------
 <summary>
   Runs before the control is rendered.
 </summary>
 -----------------------------------------------------------------------------</documentation>
          <codeblock>
            <location sl="105" sc="9" el="114" ec="10">UI\WebControls\DnnFileEditControl.cs</location>
            <body hash="fd6b68f4ae05d5b604be7ab9be6163ad"><![CDATA[{
            base.OnPreRender(e);

            _fileControl.FileID = IntegerValue;

            if (Page != null)
            {
                Page.RegisterRequiresPostBack(this);
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="RenderEditMode">
          <declaration><![CDATA[protected override void RenderEditMode(HtmlTextWriter writer)]]></declaration>
          <documentation>-----------------------------------------------------------------------------
 <summary>
   Renders the control in edit mode
 </summary>
 <param name="writer">An HtmlTextWriter to render the control to</param>
 -----------------------------------------------------------------------------</documentation>
          <codeblock>
            <location sl="123" sc="9" el="125" ec="10">UI\WebControls\DnnFileEditControl.cs</location>
            <body hash="42fcc3814ddbb2b2a30d58482b7a6866"><![CDATA[{
            RenderChildren(writer);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_fileControl">
          <declaration><![CDATA[private DnnFilePickerUploader _fileControl;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="FileFilter">
          <declaration><![CDATA[public string FileFilter]]></declaration>
          <documentation>-----------------------------------------------------------------------------
 <summary>
   Gets or sets the current file extension filter.
 </summary>
 -----------------------------------------------------------------------------</documentation>
          <codeblock>
            <location sl="50" sc="36" el="50" ec="40">UI\WebControls\DnnFileEditControl.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="50" sc="41" el="50" ec="45">UI\WebControls\DnnFileEditControl.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="FilePath">
          <declaration><![CDATA[public string FilePath]]></declaration>
          <documentation>-----------------------------------------------------------------------------
 <summary>
   Gets or sets the current file path.
 </summary>
 -----------------------------------------------------------------------------</documentation>
          <codeblock>
            <location sl="57" sc="34" el="57" ec="38">UI\WebControls\DnnFileEditControl.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="57" sc="39" el="57" ec="43">UI\WebControls\DnnFileEditControl.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnFilePicker">
      <declaration><![CDATA[public class DnnFilePicker : CompositeControl, ILocalizable]]></declaration>
      <documentation>
        <summary>
   The FilePicker Class provides a File Picker Control for DotNetNuke
 </summary>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[private bool _localize = true;]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="102" sc="3" el="104" ec="31">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="265ffd94a6c4ed2a1646a05c97441d72"><![CDATA[private bool _localize = true;
		private int _maxHeight = 100;
		private int _maxWidth = 135;]]></body>
          </codeblock>
        </constructor>
        <constructor name=".cctor">
          <declaration><![CDATA[static DnnFilePicker()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="50" sc="3" el="50" ec="97">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="36328c9cd523b54ed31c43a2766f4893"><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof (DnnFilePicker))]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="AddButton">
          <declaration><![CDATA[private void AddButton(ref LinkButton button)]]></declaration>
          <documentation>
            <summary>
   AddButton adds a button to the Command Row
 </summary>
 <param name="button">The button to add to the Row</param></documentation>
          <codeblock>
            <location sl="468" sc="3" el="474" ec="4">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="65297a656e8d6205178f319359f01a08"><![CDATA[{
		    button = new LinkButton {EnableViewState = false, CausesValidation = false};
		    button.ControlStyle.CssClass = CommandCssClass;
			button.Visible = false;

			_pnlButtons.Controls.Add(button);
		}]]></body>
          </codeblock>
        </method>
        <method name="AddButtonArea">
          <declaration><![CDATA[private void AddButtonArea()]]></declaration>
          <documentation>
            <summary>
   AddCommandRow adds the Command Row
 </summary>
          </documentation>
          <codeblock>
            <location sl="480" sc="3" el="493" ec="4">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="e1b67ac9e985b0a92286073d2e65092b"><![CDATA[{
		    _pnlButtons = new Panel {Visible = false};

		    AddButton(ref _cmdUpload);
			_cmdUpload.Click += UploadFile;

			AddButton(ref _cmdSave);
			_cmdSave.Click += SaveFile;

			AddButton(ref _cmdCancel);
			_cmdCancel.Click += CancelUpload;

			_pnlLeftDiv.Controls.Add(_pnlButtons);
		}]]></body>
          </codeblock>
        </method>
        <method name="AddFileAndUploadArea">
          <declaration><![CDATA[private void AddFileAndUploadArea()]]></declaration>
          <documentation>
            <summary>
   AddFileRow adds the Files Row
 </summary>
          </documentation>
          <codeblock>
            <location sl="499" sc="3" el="523" ec="4">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="6e23e1b073d1c6e095fe629a17de416b"><![CDATA[{
			//Create Url Div
		    _pnlFile = new Panel {CssClass = "dnnFormItem"};

		    //Create File Label
		    _lblFile = new Label {EnableViewState = false};
		    _pnlFile.Controls.Add(_lblFile);

			//Create Files Combo
		    _cboFiles = new DropDownList {ID = "File", DataTextField = "Text", DataValueField = "Value", AutoPostBack = true};
		    _cboFiles.SelectedIndexChanged += FileChanged;
			_pnlFile.Controls.Add(_cboFiles);

			_pnlLeftDiv.Controls.Add(_pnlFile);

			//Create Upload Div
		    _pnlUpload = new Panel {CssClass = "dnnFormItem"};

		    //Create Upload Box
			_txtFile = new HtmlInputFile();
			_txtFile.Attributes.Add("size", "13");
			_pnlUpload.Controls.Add(_txtFile);

			_pnlLeftDiv.Controls.Add(_pnlUpload);
		}]]></body>
          </codeblock>
        </method>
        <method name="AddFolderArea">
          <declaration><![CDATA[private void AddFolderArea()]]></declaration>
          <documentation>
            <summary>
   AddFolderRow adds the Folders Row
 </summary>
          </documentation>
          <codeblock>
            <location sl="529" sc="3" el="547" ec="4">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="ff9f42413d604396f64cd558311cf136"><![CDATA[{
			//Create Url Div
		    _pnlFolder = new Panel {CssClass = "dnnFormItem"};

		    //Create Folder Label
		    _lblFolder = new Label {EnableViewState = false};
		    _pnlFolder.Controls.Add(_lblFolder);

			//Create Folders Combo
		    _cboFolders = new DropDownList {ID = "Folder", AutoPostBack = true};
		    _cboFolders.SelectedIndexChanged += FolderChanged;
			_pnlFolder.Controls.Add(_cboFolders);

			// add to left div
			_pnlLeftDiv.Controls.Add(_pnlFolder);

			//Load Folders
			LoadFolders();
		}]]></body>
          </codeblock>
        </method>
        <method name="AddMessageRow">
          <declaration><![CDATA[private void AddMessageRow()]]></declaration>
          <documentation>
            <summary>
   AddMessageRow adds the Message Row
 </summary>
          </documentation>
          <codeblock>
            <location sl="562" sc="3" el="570" ec="4">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="ffa667b13bf1fa4cdfc79ba2d4883492"><![CDATA[{
		    _pnlMessage = new Panel {CssClass = "dnnFormMessage dnnFormWarning"};

		    //Create Label
		    _lblMessage = new Label {EnableViewState = false, Text = ""};
		    _pnlMessage.Controls.Add(_lblMessage);

			_pnlLeftDiv.Controls.Add(_pnlMessage);
		}]]></body>
          </codeblock>
        </method>
        <method name="CancelUpload">
          <declaration><![CDATA[private void CancelUpload(object sender, EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="845" sc="3" el="847" ec="4">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="72cdb575c51cc3b173ddeddd088a6d41"><![CDATA[{
			Mode = FileControlMode.Normal;
		}]]></body>
          </codeblock>
        </method>
        <method name="CreateChildControls">
          <declaration><![CDATA[protected override void CreateChildControls()]]></declaration>
          <documentation>
            <summary>
   CreateChildControls overrides the Base class's method to correctly build the
   control based on the configuration
 </summary>
          </documentation>
          <codeblock>
            <location sl="723" sc="3" el="747" ec="4">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="8ed2ee8e59909d6c144d6e6ec279d808"><![CDATA[{
			//First clear the controls collection
			Controls.Clear();

	        _pnlContainer = new Panel {CssClass = "dnnFilePicker"};

	        _pnlLeftDiv = new Panel {CssClass = "dnnLeft"};

	        AddFolderArea();
			AddFileAndUploadArea();
			AddButtonArea();
			AddMessageRow();

			_pnlContainer.Controls.Add(_pnlLeftDiv);

	        _pnlRightDiv = new Panel {CssClass = "dnnLeft"};

	        GeneratePreviewImage();
		
			_pnlContainer.Controls.Add(_pnlRightDiv);

			Controls.Add(_pnlContainer);

			base.CreateChildControls();
		}]]></body>
          </codeblock>
        </method>
        <method name="FileChanged">
          <declaration><![CDATA[private void FileChanged(object sender, EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="850" sc="3" el="852" ec="4">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="543be2239429b3d870e1521251cecb79"><![CDATA[{
			SetFilePath();
		}]]></body>
          </codeblock>
        </method>
        <method name="FolderChanged">
          <declaration><![CDATA[private void FolderChanged(object sender, EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="855" sc="3" el="858" ec="4">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="9058f819663485c1308d133f88e40259"><![CDATA[{
			LoadFiles();
			SetFilePath();
		}]]></body>
          </codeblock>
        </method>
        <method name="GeneratePreviewImage">
          <declaration><![CDATA[private void GeneratePreviewImage()]]></declaration>
          <documentation>
            <summary>

 </summary>
          </documentation>
          <codeblock>
            <location sl="553" sc="3" el="556" ec="4">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="a891af963b6d51c5049a3c34f1d591a5"><![CDATA[{
			_imgPreview = new Image();
			_pnlRightDiv.Controls.Add(_imgPreview);
		}]]></body>
          </codeblock>
        </method>
        <method name="IsUserFolder">
          <declaration><![CDATA[private bool IsUserFolder(string folderPath)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="573" sc="3" el="576" ec="4">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="3f7bf376fb2f46ce94e9721fbf673e88"><![CDATA[{
            UserInfo user = User ?? UserController.Instance.GetCurrentUserInfo();
            return (folderPath.ToLowerInvariant().StartsWith("users/") && folderPath.EndsWith(string.Format("/{0}/", user.UserID)));
		}]]></body>
          </codeblock>
        </method>
        <method name="LoadFiles">
          <declaration><![CDATA[private void LoadFiles()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="579" sc="3" el="587" ec="4">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="c8911f3688d2a32eb321db1c9396b926"><![CDATA[{
		    int effectivePortalId = PortalId;
            if (IsUserFolder(_cboFolders.SelectedItem.Value))
            {
                effectivePortalId = PortalController.GetEffectivePortalId(PortalId);
            }
            _cboFiles.DataSource = Globals.GetFileList(effectivePortalId, FileFilter, !Required, _cboFolders.SelectedItem.Value);							
			_cboFiles.DataBind();
		}]]></body>
          </codeblock>
        </method>
        <method name="LoadFolders">
          <declaration><![CDATA[private void LoadFolders()]]></declaration>
          <documentation>
            <summary>
   LoadFolders fetches the list of folders from the Database
 </summary>
          </documentation>
          <codeblock>
            <location sl="593" sc="3" el="628" ec="4">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="7e7c8c4b68a4c7cafdae72669c86ac55"><![CDATA[{
            UserInfo user = User ?? UserController.Instance.GetCurrentUserInfo();
            _cboFolders.Items.Clear();

			//Add Personal Folder
			if (UsePersonalFolder)
			{
			    var userFolder = FolderManager.Instance.GetUserFolder(user).FolderPath;
				var userFolderItem = _cboFolders.Items.FindByValue(userFolder);
				if (userFolderItem != null)
				{
					userFolderItem.Text = Utilities.GetLocalizedString("MyFolder");
				}
				else
				{
					//Add DummyFolder
					_cboFolders.Items.Add(new ListItem(Utilities.GetLocalizedString("MyFolder"), userFolder));
				}
			}
			else
			{
                var folders = FolderManager.Instance.GetFolders(PortalId, "READ,ADD", user.UserID);
				foreach (FolderInfo folder in folders)
				{
				    var folderItem = new ListItem
				                         {
				                             Text =
				                                 folder.FolderPath == Null.NullString
				                                     ? Utilities.GetLocalizedString("PortalRoot")
				                                     : folder.DisplayPath,
				                             Value = folder.FolderPath
				                         };
				    _cboFolders.Items.Add(folderItem);
				}
			}
		}]]></body>
          </codeblock>
        </method>
        <method name="LocalizeStrings">
          <declaration><![CDATA[public virtual void LocalizeStrings()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="963" sc="3" el="964" ec="4">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="d2c65ffc45d1c7103cabbde916faf7e7"><![CDATA[{
		}]]></body>
          </codeblock>
        </method>
        <method name="OnInit">
          <declaration><![CDATA[protected override void OnInit(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="712" sc="3" el="716" ec="4">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="6cc081c3bded63eb880d903d43dc44d5"><![CDATA[{
			base.OnInit(e);
			LocalResourceFile = Utilities.GetLocalResourceFile(this);
			EnsureChildControls();
		}]]></body>
          </codeblock>
        </method>
        <method name="OnPreRender">
          <declaration><![CDATA[protected override void OnPreRender(EventArgs e)]]></declaration>
          <documentation>
            <summary>
   OnPreRender runs just before the control is rendered
 </summary>
          </documentation>
          <codeblock>
            <location sl="753" sc="3" el="838" ec="4">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="397b00aba494a84d4556b00bb691d0f7"><![CDATA[{
			base.OnPreRender(e);

			if (_cboFolders.Items.Count > 0)
			{
				//Configure Labels
				_lblFolder.Text = Utilities.GetLocalizedString("Folder");
				_lblFolder.CssClass = LabelCssClass;
				_lblFile.Text = Utilities.GetLocalizedString("File");
				_lblFile.CssClass = LabelCssClass;

				//select folder
				string fileName;
				string folderPath;
				if (!string.IsNullOrEmpty(FilePath))
				{
					fileName = FilePath.Substring(FilePath.LastIndexOf("/") + 1);
					folderPath = string.IsNullOrEmpty(fileName) ? FilePath : FilePath.Replace(fileName, "");
				}
				else
				{
					fileName = FilePath;
					folderPath = string.Empty;
				}

				if (_cboFolders.Items.FindByValue(folderPath) != null)
				{
					_cboFolders.SelectedIndex = -1;
					_cboFolders.Items.FindByValue(folderPath).Selected = true;
				}

				//Get Files
				LoadFiles();
				if (_cboFiles.Items.FindByText(fileName) != null)
				{
					_cboFiles.Items.FindByText(fileName).Selected = true;
				}
				if (_cboFiles.SelectedItem == null || string.IsNullOrEmpty(_cboFiles.SelectedItem.Value))
				{
					FileID = -1;
				}
				else
				{
					FileID = Int32.Parse(_cboFiles.SelectedItem.Value);
				}

				if (_cboFolders.Items.Count > 1 && ShowFolders)
				{
					_pnlFolder.Visible = true;
				}
				else
				{
					_pnlFolder.Visible = false;
				}
				//Configure Mode
				switch (Mode)
				{
					case FileControlMode.Normal:
						_pnlFile.Visible = true;
						_pnlUpload.Visible = false;
						_pnlRightDiv.Visible = true;
						ShowImage();

						if ((FolderPermissionController.HasFolderPermission(PortalId, _cboFolders.SelectedItem.Value, "ADD") || IsUserFolder(_cboFolders.SelectedItem.Value)) && ShowUpLoad)
						{
							ShowButton(_cmdUpload, "Upload");
						}
						break;

					case FileControlMode.UpLoadFile:
						_pnlFile.Visible = false;
						_pnlUpload.Visible = true;
                        _pnlRightDiv.Visible = false;
						ShowButton(_cmdSave, "Save");
						ShowButton(_cmdCancel, "Cancel");
						break;
				}
			}
			else
			{
				_lblMessage.Text = Utilities.GetLocalizedString("NoPermission");
			}

			//Show message Row
			_pnlMessage.Visible = (!string.IsNullOrEmpty(_lblMessage.Text));
		}]]></body>
          </codeblock>
        </method>
        <method name="SaveFile">
          <declaration><![CDATA[private void SaveFile(object sender, EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="861" sc="3" el="937" ec="4">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="850b6b2e63b9fd5a3b3080016d014892"><![CDATA[{
			//if file is selected exit
			if (!string.IsNullOrEmpty(_txtFile.PostedFile.FileName))
			{
				var extension = Path.GetExtension(_txtFile.PostedFile.FileName).Replace(".", "");

				if (!string.IsNullOrEmpty(FileFilter) && !FileFilter.ToLower().Contains(extension.ToLower()))
				{
					// trying to upload a file not allowed for current filter
					var localizedString = Localization.GetString("UploadError", LocalResourceFile);
					if(String.IsNullOrEmpty(localizedString))
					{
						localizedString = Utilities.GetLocalizedString("UploadError");
					}

					_lblMessage.Text = string.Format(localizedString, FileFilter, extension);
				}
				else
				{
					var folderManager = FolderManager.Instance;

					var folderPath = PathUtils.Instance.GetRelativePath(PortalId, ParentFolder) + _cboFolders.SelectedItem.Value;

					//Check if this is a User Folder
				    IFolderInfo folder;
					if (IsUserFolder(_cboFolders.SelectedItem.Value))
					{
						//Make sure the user folder exists
                        folder = folderManager.GetFolder(PortalController.GetEffectivePortalId(PortalId), folderPath);
						if (folder == null)
						{
							//Add User folder
                            var user = User ?? UserController.Instance.GetCurrentUserInfo();
                            //fix user's portal id
						    user.PortalID = PortalId;
                            folder = ((FolderManager)folderManager).AddUserFolder(user);
						}
					}
					else
					{
                        folder = folderManager.GetFolder(PortalId, folderPath);
                    }

					var fileName = Path.GetFileName(_txtFile.PostedFile.FileName);

					try
					{
                        FileManager.Instance.AddFile(folder, fileName, _txtFile.PostedFile.InputStream, true);
					}
					catch (PermissionsNotMetException)
					{
                        _lblMessage.Text += "<br />" + string.Format(Localization.GetString("InsufficientFolderPermission"), folder.FolderPath);
					}
					catch (NoSpaceAvailableException)
					{
						_lblMessage.Text += "<br />" + string.Format(Localization.GetString("DiskSpaceExceeded"), fileName);
					}
					catch (InvalidFileExtensionException)
					{
						_lblMessage.Text += "<br />" + string.Format(Localization.GetString("RestrictedFileType"), fileName, Host.AllowedExtensionWhitelist.ToDisplayString());
					}
					catch (Exception ex)
					{
						Logger.Error(ex);

						_lblMessage.Text += "<br />" + string.Format(Localization.GetString("SaveFileError"), fileName);
					}
				}

				if (string.IsNullOrEmpty(_lblMessage.Text))
				{
					var fileName = _txtFile.PostedFile.FileName.Substring(_txtFile.PostedFile.FileName.LastIndexOf("\\") + 1);
					SetFilePath(fileName);
				}
			}
			Mode = FileControlMode.Normal;
		}]]></body>
          </codeblock>
        </method>
        <method name="SetFilePath">
          <declaration><![CDATA[private void SetFilePath()]]></declaration>
          <documentation>
            <summary>
   SetFilePath sets the FilePath property
 </summary>
 <remarks>
   This overload uses the selected item in the Folder combo
 </remarks></documentation>
          <codeblock>
            <location sl="637" sc="3" el="639" ec="4">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="195a54b562d1c8db2c3bc74380bbd80b"><![CDATA[{
			SetFilePath(_cboFiles.SelectedItem.Text);
		}]]></body>
          </codeblock>
        </method>
        <method name="SetFilePath">
          <declaration><![CDATA[private void SetFilePath(string fileName)]]></declaration>
          <documentation>
            <summary>
   SetFilePath sets the FilePath property
 </summary>
 <remarks>
   This overload allows the caller to specify a file
 </remarks>
 <param name="fileName">The filename to use in setting the property</param></documentation>
          <codeblock>
            <location sl="649" sc="3" el="658" ec="4">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="1be8198a4d65f83d6bdfe5ecca1e5d03"><![CDATA[{
			if (string.IsNullOrEmpty(_cboFolders.SelectedItem.Value))
			{
				FilePath = fileName;
			}
			else
			{
				FilePath = (_cboFolders.SelectedItem.Value + "/") + fileName;
			}
		}]]></body>
          </codeblock>
        </method>
        <method name="ShowButton">
          <declaration><![CDATA[private void ShowButton(LinkButton button, string command)]]></declaration>
          <documentation>
            <summary>
   ShowButton configures and displays a button
 </summary>
 <param name="button">The button to configure</param>
 <param name="command">The command name (amd key) of the button</param></documentation>
          <codeblock>
            <location sl="666" sc="3" el="674" ec="4">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="5f254913bb6b164374f18ce93d2115f8"><![CDATA[{
			button.Visible = true;
			if (!string.IsNullOrEmpty(command))
			{
				button.Text = Utilities.GetLocalizedString(command);
			}
			AJAX.RegisterPostBackControl(button);
			_pnlButtons.Visible = true;
		}]]></body>
          </codeblock>
        </method>
        <method name="ShowImage">
          <declaration><![CDATA[private void ShowImage()]]></declaration>
          <documentation>
            <summary>
   ShowImage displays the Preview Image
 </summary>
          </documentation>
          <codeblock>
            <location sl="680" sc="3" el="705" ec="4">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="1ef69374ffb22bf9e20e337f3116f9ed"><![CDATA[{
			var image = (FileInfo)FileManager.Instance.GetFile(FileID);

            if (image != null)
            {
                _imgPreview.ImageUrl = FileManager.Instance.GetUrl(image);
                try
                {
                    Utilities.CreateThumbnail(image, _imgPreview, MaxWidth, MaxHeight);
                }
                catch (Exception)
                {
                    Logger.WarnFormat("Unable to create thumbnail for {0}", image.PhysicalPath);
                    _pnlRightDiv.Visible = false;
                }

            }
            else
            {
                _imgPreview.Visible = false;

                Panel imageHolderPanel = new Panel { CssClass = "dnnFilePickerImageHolder" };
                _pnlRightDiv.Controls.Add(imageHolderPanel);
                _pnlRightDiv.Visible = true;
            }
		}]]></body>
          </codeblock>
        </method>
        <method name="UploadFile">
          <declaration><![CDATA[private void UploadFile(object sender, EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="940" sc="3" el="942" ec="4">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="11cc2094b9528655041181e1719f77b5"><![CDATA[{
			Mode = FileControlMode.UpLoadFile;
		}]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_cboFiles">
          <declaration><![CDATA[private DropDownList _cboFiles;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_cboFolders">
          <declaration><![CDATA[private DropDownList _cboFolders;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_cmdCancel">
          <declaration><![CDATA[private LinkButton _cmdCancel;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_cmdSave">
          <declaration><![CDATA[private LinkButton _cmdSave;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_cmdUpload">
          <declaration><![CDATA[private LinkButton _cmdUpload;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_imgPreview">
          <declaration><![CDATA[private Image _imgPreview;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_lblFile">
          <declaration><![CDATA[private Label _lblFile;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_lblFolder">
          <declaration><![CDATA[private Label _lblFolder;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_lblMessage">
          <declaration><![CDATA[private Label _lblMessage;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_localize">
          <declaration><![CDATA[private bool _localize = true;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_maxHeight">
          <declaration><![CDATA[private int _maxHeight = 100;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_maxWidth">
          <declaration><![CDATA[private int _maxWidth = 135;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_pnlButtons">
          <declaration><![CDATA[private Panel _pnlButtons;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_pnlContainer">
          <declaration><![CDATA[private Panel _pnlContainer;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_pnlFile">
          <declaration><![CDATA[private Panel _pnlFile;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_pnlFolder">
          <declaration><![CDATA[private Panel _pnlFolder;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_pnlLeftDiv">
          <declaration><![CDATA[private Panel _pnlLeftDiv;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_pnlMessage">
          <declaration><![CDATA[private Panel _pnlMessage;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_pnlRightDiv">
          <declaration><![CDATA[private Panel _pnlRightDiv;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_pnlUpload">
          <declaration><![CDATA[private Panel _pnlUpload;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_txtFile">
          <declaration><![CDATA[private HtmlInputFile _txtFile;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="Logger">
          <declaration><![CDATA[private static readonly ILog Logger = LoggerSource.Instance.GetLogger(typeof(DnnFilePicker));]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="CommandCssClass">
          <declaration><![CDATA[public string CommandCssClass]]></declaration>
          <documentation>
            <summary>
   Gets or sets the class to be used for the Labels
 </summary>
 <remarks>
   Defaults to 'CommandButton'
 </remarks>
 <value>A String</value></documentation>
          <codeblock>
            <location sl="233" sc="4" el="236" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="95bb648f6e2804141b55ed02c86c6f86"><![CDATA[{
				var cssClass = Convert.ToString(ViewState["CommandCssClass"]);
				return string.IsNullOrEmpty(cssClass) ? "dnnSecondaryAction" : cssClass;
			}]]></body>
          </codeblock>
          <codeblock>
            <location sl="238" sc="4" el="240" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="4604fc74a54fc527428dd0797b629e99"><![CDATA[{
				ViewState["CommandCssClass"] = value;
			}]]></body>
          </codeblock>
        </property>
        <property name="FileFilter">
          <declaration><![CDATA[public string FileFilter]]></declaration>
          <documentation>
            <summary>
   Gets or sets the file Filter to use
 </summary>
 <remarks>
   Defaults to ''
 </remarks>
 <value>a comma seperated list of file extenstions no wildcards or periods e.g. "jpg,png,gif"</value></documentation>
          <codeblock>
            <location sl="253" sc="4" el="255" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="d0fa39de19f7c9ec78859a73b9827940"><![CDATA[{
				return ViewState["FileFilter"] != null ? (string) ViewState["FileFilter"] : "";
			}]]></body>
          </codeblock>
          <codeblock>
            <location sl="257" sc="4" el="259" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="55bf1d69ad5228c4bac5f4569f8c64d4"><![CDATA[{
				ViewState["FileFilter"] = value;
			}]]></body>
          </codeblock>
        </property>
        <property name="FileID">
          <declaration><![CDATA[public int FileID]]></declaration>
          <documentation>
            <summary>
   Gets or sets the FileID for the control
 </summary>
 <value>An Integer</value></documentation>
          <codeblock>
            <location sl="269" sc="4" el="282" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="450bdb277e1696b066b61c0f9016ff46"><![CDATA[{
				EnsureChildControls();
				if (ViewState["FileID"] == null)
				{
					//Get FileId from the file combo
					var fileId = Null.NullInteger;
					if (_cboFiles.SelectedItem != null)
					{
						fileId = Int32.Parse(_cboFiles.SelectedItem.Value);
					}
					ViewState["FileID"] = fileId;
				}
				return Convert.ToInt32(ViewState["FileID"]);
			}]]></body>
          </codeblock>
          <codeblock>
            <location sl="284" sc="4" el="295" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="5f0518b548633c013b3e15c1e1f45291"><![CDATA[{
				EnsureChildControls();
				ViewState["FileID"] = value;
				if (string.IsNullOrEmpty(FilePath))
				{
					var fileInfo = FileManager.Instance.GetFile(value);
					if (fileInfo != null)
					{
						SetFilePath(fileInfo.Folder + fileInfo.FileName);
					}
				}
			}]]></body>
          </codeblock>
        </property>
        <property name="FilePath">
          <declaration><![CDATA[public string FilePath]]></declaration>
          <documentation>
            <summary>
   Gets or sets the FilePath for the control
 </summary>
 <value>A String</value></documentation>
          <codeblock>
            <location sl="305" sc="4" el="307" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="9ebbb5eb34206dfd01524ec8cee4f3ef"><![CDATA[{
				return Convert.ToString(ViewState["FilePath"]);
			}]]></body>
          </codeblock>
          <codeblock>
            <location sl="309" sc="4" el="311" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="1ff80b0273853efd3b8c04248881f4a4"><![CDATA[{
				ViewState["FilePath"] = value;
			}]]></body>
          </codeblock>
        </property>
        <property name="IsHost">
          <declaration><![CDATA[protected bool IsHost]]></declaration>
          <documentation>
            <summary>
   Gets whether the control is on a Host or Portal Tab
 </summary>
 <value>A Boolean</value></documentation>
          <codeblock>
            <location sl="117" sc="4" el="126" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="e3d8df6f9389678cad1cf93ca4042fd7"><![CDATA[{
				var isHost = Globals.IsHostTab(PortalSettings.ActiveTab.TabID);
                //if not host tab but current edit user is a host user, then return true
                if(!isHost && User != null && User.IsSuperUser)
                {
                    isHost = true;
                }

			    return isHost;
			}]]></body>
          </codeblock>
        </property>
        <property name="LabelCssClass">
          <declaration><![CDATA[public string LabelCssClass]]></declaration>
          <documentation>
            <summary>
   Gets or sets the class to be used for the Labels
 </summary>
 <value>A String</value></documentation>
          <codeblock>
            <location sl="340" sc="4" el="343" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="5424175a926d0d3b0569d52f907a938e"><![CDATA[{
				var cssClass = Convert.ToString(ViewState["LabelCssClass"]);
				return string.IsNullOrEmpty(cssClass) ? "" : cssClass;
			}]]></body>
          </codeblock>
          <codeblock>
            <location sl="345" sc="4" el="347" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="6e97492b61a2656cbc78b9e6338b7120"><![CDATA[{
				ViewState["LabelCssClass"] = value;
			}]]></body>
          </codeblock>
        </property>
        <property name="Localize">
          <declaration><![CDATA[public bool Localize]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="951" sc="4" el="953" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="1538229f9a2e0f30d681a1be58a28652"><![CDATA[{
				return _localize;
			}]]></body>
          </codeblock>
          <codeblock>
            <location sl="955" sc="4" el="957" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="fc08d00571e50b22cab24ff6b3f2945d"><![CDATA[{
				_localize = value;
			}]]></body>
          </codeblock>
        </property>
        <property name="LocalResourceFile">
          <declaration><![CDATA[public string LocalResourceFile]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="960" sc="37" el="960" ec="41">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="960" sc="42" el="960" ec="46">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="MaxHeight">
          <declaration><![CDATA[public int MaxHeight]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="132" sc="4" el="134" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="7ec0fe18097ec1c0607901bb785ae98a"><![CDATA[{
				return _maxHeight;
			}]]></body>
          </codeblock>
          <codeblock>
            <location sl="136" sc="4" el="138" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="0d380012e27d693ac2007e7f224e64c1"><![CDATA[{
				_maxHeight = value;
			}]]></body>
          </codeblock>
        </property>
        <property name="MaxWidth">
          <declaration><![CDATA[public int MaxWidth]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="144" sc="4" el="146" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="92aab0544899f66094d4c99cc3bc0d6b"><![CDATA[{
				return _maxWidth;
			}]]></body>
          </codeblock>
          <codeblock>
            <location sl="148" sc="4" el="150" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="7401de1f043b676eab70f11d95c84f9b"><![CDATA[{
				_maxWidth = value;
			}]]></body>
          </codeblock>
        </property>
        <property name="Mode">
          <declaration><![CDATA[protected DnnFilePicker.FileControlMode Mode]]></declaration>
          <documentation>
            <summary>
   Gets or sets the current mode of the control
 </summary>
 <remarks>
   Defaults to FileControlMode.Normal
 </remarks>
 <value>A FileControlMode enum</value></documentation>
          <codeblock>
            <location sl="163" sc="4" el="165" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="4a2689e17d6ce8580f04d0aedaa02bbc"><![CDATA[{
				return ViewState["Mode"] == null ? FileControlMode.Normal : (FileControlMode) ViewState["Mode"];
			}]]></body>
          </codeblock>
          <codeblock>
            <location sl="167" sc="4" el="169" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="2754bd607c1b30228e562ebf7fe10bbe"><![CDATA[{
				ViewState["Mode"] = value;
			}]]></body>
          </codeblock>
        </property>
        <property name="ParentFolder">
          <declaration><![CDATA[protected string ParentFolder]]></declaration>
          <documentation>
            <summary>
   Gets the root folder for the control
 </summary>
 <value>A String</value></documentation>
          <codeblock>
            <location sl="179" sc="4" el="181" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="098c48c0477e6e2d339432fda1a73529"><![CDATA[{
                return IsHost ? Globals.HostMapPath : PortalSettings.HomeDirectoryMapPath;
			}]]></body>
          </codeblock>
        </property>
        <property name="Permissions">
          <declaration><![CDATA[public string Permissions]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="353" sc="4" el="356" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="3d4159395fa3fc1dbf964f5ec1d5239b"><![CDATA[{
				var permissions = Convert.ToString(ViewState["Permissions"]);
				return string.IsNullOrEmpty(permissions) ? "BROWSE,ADD" : permissions;
			}]]></body>
          </codeblock>
          <codeblock>
            <location sl="358" sc="4" el="360" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="fd049cf2f8d05036722c3f31b18e61bb"><![CDATA[{
				ViewState["Permissions"] = value;
			}]]></body>
          </codeblock>
        </property>
        <property name="PortalId">
          <declaration><![CDATA[protected int PortalId]]></declaration>
          <documentation>
            <summary>
   Gets or sets the file PortalId to use
 </summary>
 <remarks>
   Defaults to PortalSettings.PortalId
 </remarks>
 <value>An Integer</value></documentation>
          <codeblock>
            <location sl="194" sc="4" el="205" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="e43c57fb75399e8a32332d8bf04d1821"><![CDATA[{
                if ((Page.Request.QueryString["pid"] != null) && (Globals.IsHostTab(PortalSettings.ActiveTab.TabID) || UserController.Instance.GetCurrentUserInfo().IsSuperUser))
                {
                    return Int32.Parse(Page.Request.QueryString["pid"]);
                }
			    if (!IsHost)
			    {
			        return PortalSettings.PortalId;
			    }

			    return Null.NullInteger;			    
			}]]></body>
          </codeblock>
        </property>
        <property name="PortalSettings">
          <declaration><![CDATA[protected PortalSettings PortalSettings]]></declaration>
          <documentation>
            <summary>
   Gets the current Portal Settings
 </summary>
          </documentation>
          <codeblock>
            <location sl="214" sc="4" el="216" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="e40e028f1b90df12f60481767a624c1d"><![CDATA[{
				return PortalController.Instance.GetCurrentPortalSettings();
			}]]></body>
          </codeblock>
        </property>
        <property name="Required">
          <declaration><![CDATA[public bool Required]]></declaration>
          <documentation>
            <summary>
   Gets or sets whether the combos have a "Not Specified" option
 </summary>
 <remarks>
   Defaults to True (ie no "Not Specified")
 </remarks>
 <value>A Boolean</value></documentation>
          <codeblock>
            <location sl="373" sc="4" el="375" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="bc284908c7bee8a55fff25532cfd58e6"><![CDATA[{
				return ViewState["Required"] != null && Convert.ToBoolean(ViewState["Required"]);
			}]]></body>
          </codeblock>
          <codeblock>
            <location sl="377" sc="4" el="379" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="857410e4ef82902e79726168cc58a0ec"><![CDATA[{
				ViewState["Required"] = value;
			}]]></body>
          </codeblock>
        </property>
        <property name="ShowDatabase">
          <deprecation>Deprecated in DNN 6.0</deprecation>
          <declaration><![CDATA[public bool ShowDatabase]]></declaration>
          <documentation>
            <summary>
   Gets or sets whether to Show Database Folders
 </summary>
 <remarks>
   Defaults to false
 </remarks>
 <value>A Boolean</value></documentation>
          <codeblock>
            <location sl="393" sc="4" el="399" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="589dc767219af9020f269ff1d9e74ab4"><![CDATA[{
			    if (ViewState["ShowDatabase"] == null)
				{
					return false;
				}
			    return Convert.ToBoolean(ViewState["ShowDatabase"]);
			}]]></body>
          </codeblock>
          <codeblock>
            <location sl="401" sc="4" el="403" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="4cb7831d14c642571f7f18e2461ba2e0"><![CDATA[{
				ViewState["ShowDatabase"] = value;
			}]]></body>
          </codeblock>
        </property>
        <property name="ShowFolders">
          <declaration><![CDATA[public bool ShowFolders]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="409" sc="4" el="411" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="ec5c33e2c44c8eb5a662021aaba66a69"><![CDATA[{
				return ViewState["ShowFolders"] == null || Convert.ToBoolean(ViewState["ShowFolders"]);
			}]]></body>
          </codeblock>
          <codeblock>
            <location sl="413" sc="4" el="415" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="52dee3c49393d086f6233a548fc1d151"><![CDATA[{
				ViewState["ShowFolders"] = value;
			}]]></body>
          </codeblock>
        </property>
        <property name="ShowSecure">
          <deprecation>Deprecated in DNN 6.0</deprecation>
          <declaration><![CDATA[public bool ShowSecure]]></declaration>
          <documentation>
            <summary>
   Gets or sets whether to Show Secure Folders
 </summary>
 <remarks>
   Defaults to false
 </remarks>
 <value>A Boolean</value></documentation>
          <codeblock>
            <location sl="429" sc="4" el="431" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="894b2f4ff59df2fd90176bc7f5540cf8"><![CDATA[{
				return ViewState["ShowSecure"] != null && Convert.ToBoolean(ViewState["ShowSecure"]);
			}]]></body>
          </codeblock>
          <codeblock>
            <location sl="433" sc="4" el="435" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="4c52b7ab206997fe3cb795b9005d7a7a"><![CDATA[{
				ViewState["ShowSecure"] = value;
			}]]></body>
          </codeblock>
        </property>
        <property name="ShowUpLoad">
          <declaration><![CDATA[public bool ShowUpLoad]]></declaration>
          <documentation>
            <summary>
   Gets or sets whether to Show the Upload Button
 </summary>
 <remarks>
   Defaults to True
 </remarks>
 <value>A Boolean</value></documentation>
          <codeblock>
            <location sl="448" sc="4" el="450" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="9e13c6d2e4ebed2c4fb2ca2dc54badce"><![CDATA[{
				return ViewState["ShowUpLoad"] == null || Convert.ToBoolean(ViewState["ShowUpLoad"]);
			}]]></body>
          </codeblock>
          <codeblock>
            <location sl="452" sc="4" el="454" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="67ed594e39760abc88da50c2d0433851"><![CDATA[{
				ViewState["ShowUpLoad"] = value;
			}]]></body>
          </codeblock>
        </property>
        <property name="UsePersonalFolder">
          <declaration><![CDATA[public bool UsePersonalFolder]]></declaration>
          <documentation>
            <summary>
   Gets or sets whether to Include Personal Folder
 </summary>
 <remarks>
   Defaults to false
 </remarks>
 <value>A Boolean</value></documentation>
          <codeblock>
            <location sl="324" sc="4" el="326" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="cee74c44b2b0ad3cf34aae3001d41dba"><![CDATA[{
				return ViewState["UsePersonalFolder"] != null && Convert.ToBoolean(ViewState["UsePersonalFolder"]);
			}]]></body>
          </codeblock>
          <codeblock>
            <location sl="328" sc="4" el="330" ec="5">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="767b92865afe22d00ad0ba128f0612ee"><![CDATA[{
				ViewState["UsePersonalFolder"] = value;
			}]]></body>
          </codeblock>
        </property>
        <property name="User">
          <declaration><![CDATA[public UserInfo User]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="457" sc="32" el="457" ec="36">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="457" sc="37" el="457" ec="41">UI\WebControls\DnnFilePicker.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnFilePickerUploader">
      <declaration><![CDATA[public class DnnFilePickerUploader : UserControl, IFilePickerUploader]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[private int? _portalId = null;]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="48" sc="6" el="52" ec="45">UI\WebControls\DnnFilePickerUploader.cs</location>
            <body hash="adb6e712dd655570bd27b184a2f3efcb"><![CDATA[private int? _portalId = null;

        private string _fileFilter;
        private string _folderPath = String.Empty;
        private bool _folderPathSet = false;]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="LoadFolders">
          <declaration><![CDATA[private void LoadFolders()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="294" sc="9" el="327" ec="10">UI\WebControls\DnnFilePickerUploader.cs</location>
            <body hash="fa5b9c6dec9eeb27dca32670847f1b11"><![CDATA[{
            if (UsePersonalFolder)
            {
                var user = User ?? UserController.Instance.GetCurrentUserInfo();
                var userFolder = FolderManager.Instance.GetUserFolder(user);
                FoldersComboBox.SelectedFolder = userFolder;
            }
            else
            {
                //select folder
                string fileName;
                string folderPath;
                if (!string.IsNullOrEmpty(FilePath))
                {
                    fileName = FilePath.Substring(FilePath.LastIndexOf("/") + 1);
                    folderPath = string.IsNullOrEmpty(fileName) ? FilePath : FilePath.Replace(fileName, "");
                }
                else
                {
                    fileName = FilePath;
                    folderPath = FolderPath;
                }

                FoldersComboBox.SelectedFolder = FolderManager.Instance.GetFolder(PortalId, folderPath);

                if (!string.IsNullOrEmpty(fileName))
                {
                    FilesComboBox.SelectedFile = FileManager.Instance.GetFile(FoldersComboBox.SelectedFolder, fileName);
                }
            }

            FoldersComboBox.Enabled = !UsePersonalFolder;
            FoldersLabel.Visible = UsePersonalFolder;
        }]]></body>
          </codeblock>
        </method>
        <method name="OnLoad">
          <declaration><![CDATA[protected override void OnLoad(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="221" sc="9" el="243" ec="10">UI\WebControls\DnnFilePickerUploader.cs</location>
            <body hash="6a48c0a78af7cd416ebbd83377762dc5"><![CDATA[{
            base.OnLoad(e);

            FoldersComboBox.SelectItemDefaultText = (SupportHost && PortalSettings.Current.ActiveTab.IsSuperTab) ? DynamicSharedConstants.HostRootFolder : DynamicSharedConstants.RootFolder;
            FoldersComboBox.OnClientSelectionChanged.Add("dnn.dnnFileUpload.Folders_Changed");
            FoldersComboBox.Options.Services.Parameters.Add("permission", "READ,ADD");

            FilesComboBox.OnClientSelectionChanged.Add("dnn.dnnFileUpload.Files_Changed");
            FilesComboBox.SelectItemDefaultText = DynamicSharedConstants.Unspecified;
            FilesComboBox.IncludeNoneSpecificItem = true;
            FilesComboBox.Filter = FileFilter;

            if (UrlUtils.InPopUp())
            {
                FileUploadControl.Width = 630;
                FileUploadControl.Height = 400;
            }

            LoadFolders();
            jQuery.RegisterFileUpload(Page);
            JavaScript.RequestRegistration(CommonJs.DnnPlugins);
            ServicesFramework.Instance.RequestAjaxAntiForgerySupport();
        }]]></body>
          </codeblock>
        </method>
        <method name="OnPreRender">
          <declaration><![CDATA[protected override void OnPreRender(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="246" sc="9" el="287" ec="10">UI\WebControls\DnnFilePickerUploader.cs</location>
            <body hash="b6a57987f7dfc745be87361d286c9867"><![CDATA[{
            if (FoldersComboBox.SelectedFolder != null && FoldersComboBox.SelectedFolder.FolderPath.StartsWith("Users/", StringComparison.InvariantCultureIgnoreCase))
            {
                var userFolder = FolderManager.Instance.GetUserFolder(User ?? UserController.Instance.GetCurrentUserInfo());
                if (FoldersComboBox.SelectedFolder.FolderID == userFolder.FolderID)
                {
                    FoldersComboBox.SelectedItem = new ListItem
                                                   {
                                                       Text = FolderManager.Instance.MyFolderName, 
                                                       Value = userFolder.FolderID.ToString(CultureInfo.InvariantCulture)
                                                   };
                }
                else if (UsePersonalFolder) //if UserPersonalFolder is true, make sure the file is under the user folder.
                {
                    FoldersComboBox.SelectedItem = new ListItem
                                                    {
                                                        Text = FolderManager.Instance.MyFolderName,
                                                        Value = userFolder.FolderID.ToString(CultureInfo.InvariantCulture)
                                                    };

                    FilesComboBox.SelectedFile = null;
                }
            }

            FoldersLabel.Text = FolderManager.Instance.MyFolderName;

            FileUploadControl.Options.FolderPicker.Disabled = UsePersonalFolder;
            if (FileUploadControl.Options.FolderPicker.Disabled && FoldersComboBox.SelectedFolder != null)
            {
                var selectedItem = new SerializableKeyValuePair<string, string>(
                    FoldersComboBox.SelectedItem.Value, FoldersComboBox.SelectedItem.Text);

                FileUploadControl.Options.FolderPicker.InitialState = new DnnDropDownListState
                                                                          {
                                                                              SelectedItem = selectedItem
                                                                                  
                                                                          };
                FileUploadControl.Options.FolderPath = FoldersComboBox.SelectedFolder.FolderPath;
            }

            base.OnPreRender(e);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_fileFilter">
          <declaration><![CDATA[private string _fileFilter;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_folderPath">
          <declaration><![CDATA[private string _folderPath = string.Empty;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_folderPathSet">
          <declaration><![CDATA[private bool _folderPathSet = false;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_portalId">
          <declaration><![CDATA[private int? _portalId = null;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="FilesComboBox">
          <declaration><![CDATA[protected DnnFileDropDownList FilesComboBox;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="FileUploadControl">
          <declaration><![CDATA[protected DnnFileUpload FileUploadControl;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="FoldersComboBox">
          <declaration><![CDATA[protected DnnFolderDropDownList FoldersComboBox;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="FoldersLabel">
          <declaration><![CDATA[protected Label FoldersLabel;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="MyFileName">
          <declaration><![CDATA[private const string MyFileName = "filepickeruploader.ascx";]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="DropFileLabel">
          <declaration><![CDATA[protected string DropFileLabel]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="90" sc="13" el="92" ec="14">UI\WebControls\DnnFilePickerUploader.cs</location>
            <body hash="8fb44a17be6d0dbd885b340508b22132"><![CDATA[{
                return Localization.GetString("DropFile", Localization.GetResourceFile(this, MyFileName));
            }]]></body>
          </codeblock>
        </property>
        <property name="FileFilter">
          <declaration><![CDATA[public string FileFilter]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="177" sc="13" el="179" ec="14">UI\WebControls\DnnFilePickerUploader.cs</location>
            <body hash="8c5024d602fca4e9916edfcc99c54ffe"><![CDATA[{
                return _fileFilter;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="181" sc="13" el="191" ec="14">UI\WebControls\DnnFilePickerUploader.cs</location>
            <body hash="0dadfdd6c6de2752923c7a9af71c35fc"><![CDATA[{
                _fileFilter = value;
                if (!string.IsNullOrEmpty(value))
                {
                    FileUploadControl.Options.Extensions = value.Split(',').ToList();
                }
                else
                {
                    FileUploadControl.Options.Extensions.RemoveAll(t => true);
                }
            }]]></body>
          </codeblock>
        </property>
        <property name="FileID">
          <declaration><![CDATA[public int FileID]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="139" sc="13" el="143" ec="14">UI\WebControls\DnnFilePickerUploader.cs</location>
            <body hash="6667ec5a504322c138b4b6e6bfa62518"><![CDATA[{
                EnsureChildControls();
                
                return FilesComboBox.SelectedFile != null ? FilesComboBox.SelectedFile.FileId : Null.NullInteger;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="146" sc="13" el="154" ec="14">UI\WebControls\DnnFilePickerUploader.cs</location>
            <body hash="d5a6beb96c325b2dd02939c4929d34c1"><![CDATA[{
                EnsureChildControls();
                var file = FileManager.Instance.GetFile(value);
                if (file != null)
                {
                    FoldersComboBox.SelectedFolder = FolderManager.Instance.GetFolder(file.FolderId);
                    FilesComboBox.SelectedFile = file;
                }
            }]]></body>
          </codeblock>
        </property>
        <property name="FileLabel">
          <declaration><![CDATA[protected string FileLabel]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="74" sc="13" el="76" ec="14">UI\WebControls\DnnFilePickerUploader.cs</location>
            <body hash="bf373ba2178a4ed425a638f6e0dcbfa8"><![CDATA[{
                return Localization.GetString("File", Localization.GetResourceFile(this, MyFileName));
            }]]></body>
          </codeblock>
        </property>
        <property name="FilePath">
          <declaration><![CDATA[public string FilePath]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="104" sc="13" el="114" ec="14">UI\WebControls\DnnFilePickerUploader.cs</location>
            <body hash="92600efc4b536d31daf63e46d57473aa"><![CDATA[{
                EnsureChildControls();

                var path = string.Empty;
                if (FoldersComboBox.SelectedFolder != null && FilesComboBox.SelectedFile != null)
                {
                    path = FilesComboBox.SelectedFile.RelativePath;
                }

                return path;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="117" sc="13" el="133" ec="14">UI\WebControls\DnnFilePickerUploader.cs</location>
            <body hash="66f35a78983a4c016f264f78b54840da"><![CDATA[{
                EnsureChildControls();
                if (!string.IsNullOrEmpty(value))
                {
                    var file = FileManager.Instance.GetFile(PortalId, value);
                    if (file != null)
                    {
                        FoldersComboBox.SelectedFolder = FolderManager.Instance.GetFolder(file.FolderId);
                        FilesComboBox.SelectedFile = file;
                    }
                }
                else
                {
                    FoldersComboBox.SelectedFolder = null;
                    FilesComboBox.SelectedFile = null;
                }
            }]]></body>
          </codeblock>
        </property>
        <property name="FolderLabel">
          <declaration><![CDATA[protected string FolderLabel]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="66" sc="13" el="68" ec="14">UI\WebControls\DnnFilePickerUploader.cs</location>
            <body hash="4885385773fab97a15d1a770b7b78178"><![CDATA[{
                return Localization.GetString("Folder", Localization.GetResourceFile(this, MyFileName));
            }]]></body>
          </codeblock>
        </property>
        <property name="FolderPath">
          <declaration><![CDATA[public string FolderPath]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="160" sc="13" el="166" ec="14">UI\WebControls\DnnFilePickerUploader.cs</location>
            <body hash="7b5bd2f80b69f4288f41df67bf6c7428"><![CDATA[{
                return _folderPathSet
                            ? _folderPath 
                            : FoldersComboBox.SelectedFolder != null 
                                ? FoldersComboBox.SelectedFolder.FolderPath 
                                : string.Empty; 
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="168" sc="13" el="171" ec="14">UI\WebControls\DnnFilePickerUploader.cs</location>
            <body hash="0e5de0ef0f3033ad8004b3e4693dce1a"><![CDATA[{
                _folderPath = value;
                _folderPathSet = true;
            }]]></body>
          </codeblock>
        </property>
        <property name="PortalId">
          <declaration><![CDATA[public int PortalId]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="201" sc="7" el="203" ec="8">UI\WebControls\DnnFilePickerUploader.cs</location>
            <body hash="ec2437ed39cdf305e3d5d87b312cdd2b"><![CDATA[{
			    return !_portalId.HasValue ? PortalSettings.Current.PortalId : _portalId.Value;
		    }]]></body>
          </codeblock>
          <codeblock>
            <location sl="205" sc="4" el="207" ec="5">UI\WebControls\DnnFilePickerUploader.cs</location>
            <body hash="1f02272fac6c2885f9c4955f3ea85654"><![CDATA[{
				_portalId = value;
			}]]></body>
          </codeblock>
        </property>
        <property name="Required">
          <declaration><![CDATA[public bool Required]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="194" sc="32" el="194" ec="36">UI\WebControls\DnnFilePickerUploader.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="194" sc="37" el="194" ec="41">UI\WebControls\DnnFilePickerUploader.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="SupportHost">
          <declaration><![CDATA[public bool SupportHost]]></declaration>
          <documentation>
          </documentation>
        </property>
        <property name="UploadFileLabel">
          <declaration><![CDATA[protected string UploadFileLabel]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="82" sc="13" el="84" ec="14">UI\WebControls\DnnFilePickerUploader.cs</location>
            <body hash="7cff1909ebb852f603df7ccc894f9ece"><![CDATA[{
                return Localization.GetString("UploadFile", Localization.GetResourceFile(this, MyFileName));
            }]]></body>
          </codeblock>
        </property>
        <property name="UsePersonalFolder">
          <declaration><![CDATA[public bool UsePersonalFolder]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="99" sc="35" el="99" ec="39">UI\WebControls\DnnFilePickerUploader.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="99" sc="40" el="99" ec="44">UI\WebControls\DnnFilePickerUploader.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="User">
          <declaration><![CDATA[public UserInfo User]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="196" sc="32" el="196" ec="36">UI\WebControls\DnnFilePickerUploader.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="196" sc="37" el="196" ec="41">UI\WebControls\DnnFilePickerUploader.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnFileUpload">
      <declaration><![CDATA[public class DnnFileUpload : Control, INamingContainer]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnFileUpload()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="23" sc="9" el="23" ec="129">UI\WebControls\DnnFileUpload.cs</location>
            <body hash="a2e58bc25ad8da657ad0987ae2a23bd4"><![CDATA[private readonly Lazy<DnnFileUploadOptions> _options = new Lazy<DnnFileUploadOptions>(() => new DnnFileUploadOptions())]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="GetCurrent">
          <declaration><![CDATA[public static DnnFileUpload GetCurrent(Page page)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="70" sc="9" el="72" ec="10">UI\WebControls\DnnFileUpload.cs</location>
            <body hash="fd9e483888dcb3a0c76e09377a469ed3"><![CDATA[{
            return page.Items[typeof(DnnFileUpload)] as DnnFileUpload;
        }]]></body>
          </codeblock>
        </method>
        <method name="OnInit">
          <declaration><![CDATA[protected override void OnInit(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="75" sc="9" el="80" ec="10">UI\WebControls\DnnFileUpload.cs</location>
            <body hash="3e8fa3e627a132bd62872571714c1f62"><![CDATA[{
            base.OnInit(e);

            ServicesFramework.Instance.RequestAjaxAntiForgerySupport();
            jQuery.RegisterFileUpload(Page);            
        }]]></body>
          </codeblock>
        </method>
        <method name="OnPreRender">
          <declaration><![CDATA[protected override void OnPreRender(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="83" sc="9" el="88" ec="10">UI\WebControls\DnnFileUpload.cs</location>
            <body hash="cb44a40a3aa0b33507f9090fea366e76"><![CDATA[{
            base.OnPreRender(e);

            RegisterClientScript(Page, Skin);
            RegisterStartupScript();
        }]]></body>
          </codeblock>
        </method>
        <method name="RegisterClientScript">
          <declaration><![CDATA[private static void RegisterClientScript(Page page, string skin)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="91" sc="9" el="105" ec="10">UI\WebControls\DnnFileUpload.cs</location>
            <body hash="5deffd66906ac3d17572d861de4272c8"><![CDATA[{
            DnnDropDownList.RegisterClientScript(page, skin);

            ClientResourceManager.RegisterStyleSheet(page, "~/Resources/Shared/Components/FileUpload/dnn.FileUpload.css", FileOrder.Css.ResourceCss);
            if (!string.IsNullOrEmpty(skin))
            {
                ClientResourceManager.RegisterStyleSheet(page, "~/Resources/Shared/Components/FileUpload/dnn.FileUpload." + skin + ".css", FileOrder.Css.ResourceCss);
            }

            JavaScript.RequestRegistration(CommonJs.jQueryUI);

            ClientResourceManager.RegisterScript(page, "~/Resources/Shared/scripts/dnn.WebResourceUrl.js", FileOrder.Js.DefaultPriority + 2);
            ClientResourceManager.RegisterScript(page, "~/Resources/Shared/scripts/dnn.jquery.extensions.js", FileOrder.Js.DefaultPriority + 3);
            ClientResourceManager.RegisterScript(page, "~/Resources/Shared/Components/FileUpload/dnn.FileUpload.js", FileOrder.Js.DefaultPriority + 4);
        }]]></body>
          </codeblock>
        </method>
        <method name="RegisterStartupScript">
          <declaration><![CDATA[private void RegisterStartupScript()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="108" sc="9" el="160" ec="10">UI\WebControls\DnnFileUpload.cs</location>
            <body hash="2e4560674d6e2a20c489b2248c62b75d"><![CDATA[{
            Options.ClientId = ClientID;

            var portalSettings = PortalSettings.Current;

            if (Options.FolderPicker.InitialState == null)
            {
                var folder = FolderManager.Instance.GetFolder(portalSettings.PortalId, string.Empty);
                var rootFolder = (SupportHost && portalSettings.ActiveTab.IsSuperTab) ? DynamicSharedConstants.HostRootFolder : DynamicSharedConstants.RootFolder;

                Options.FolderPicker.InitialState = new DnnDropDownListState
                {
                    SelectedItem = (folder != null) ? new SerializableKeyValuePair<string, string>(folder.FolderID.ToString(CultureInfo.InvariantCulture), rootFolder) : null
                };
            }

            if (Options.Extensions.Count > 0)
            {
                var extensionsText = Options.Extensions.Aggregate(string.Empty, (current, extension) => current.Append(extension, ", "));
                Options.Resources.InvalidFileExtensions = string.Format(Options.Resources.InvalidFileExtensions, extensionsText);
            }

            if (Options.MaxFiles > 0)
            {
                Options.Resources.TooManyFiles = string.Format(Options.Resources.TooManyFiles, Options.MaxFiles.ToString(CultureInfo.InvariantCulture));
            }

            if (!SupportHost)
            {
                Options.FolderPicker.Services.Parameters["portalId"] = portalSettings.PortalId.ToString();
            }
            Options.FolderPicker.Services.GetTreeMethod = "ItemListService/GetFolders";
            Options.FolderPicker.Services.GetNodeDescendantsMethod = "ItemListService/GetFolderDescendants";
            Options.FolderPicker.Services.SearchTreeMethod = "ItemListService/SearchFolders";
            Options.FolderPicker.Services.GetTreeWithNodeMethod = "ItemListService/GetTreePathForFolder";
            Options.FolderPicker.Services.SortTreeMethod = "ItemListService/SortFolders";
            Options.FolderPicker.Services.ServiceRoot = "InternalServices";

            var optionsAsJsonString = Json.Serialize(Options);

            var script = string.Format("dnn.createFileUpload({0});{1}", optionsAsJsonString, Environment.NewLine);

            if (ScriptManager.GetCurrent(Page) != null)
            {
                // respect MS AJAX
                ScriptManager.RegisterStartupScript(Page, GetType(), ClientID + "DnnFileUpload", script, true);
            }
            else
            {
                Page.ClientScript.RegisterStartupScript(GetType(), ClientID + "DnnFileUpload", script, true);
            }

        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_options">
          <declaration><![CDATA[private readonly Lazy<DnnFileUploadOptions> _options;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="Height">
          <declaration><![CDATA[public int Height]]></declaration>
          <documentation>
          </documentation>
        </property>
        <property name="ModuleId">
          <declaration><![CDATA[public int ModuleId]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="36" sc="13" el="40" ec="14">UI\WebControls\DnnFileUpload.cs</location>
            <body hash="9311f22c34d8d9a41440130f6af0450a"><![CDATA[{
                var moduleIdString = value.ToString(CultureInfo.InvariantCulture);
                Options.ModuleId = moduleIdString;
                Options.FolderPicker.Services.ModuleId = moduleIdString;
            }]]></body>
          </codeblock>
        </property>
        <property name="Options">
          <declaration><![CDATA[public DnnFileUploadOptions Options]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="28" sc="13" el="30" ec="14">UI\WebControls\DnnFileUpload.cs</location>
            <body hash="68db4dc2ebd4390476aa99629566d03c"><![CDATA[{
                return _options.Value;
            }]]></body>
          </codeblock>
        </property>
        <property name="ParentClientId">
          <declaration><![CDATA[public string ParentClientId]]></declaration>
          <documentation>
          </documentation>
        </property>
        <property name="ShowOnStartup">
          <declaration><![CDATA[public bool ShowOnStartup]]></declaration>
          <documentation>
          </documentation>
        </property>
        <property name="Skin">
          <declaration><![CDATA[public string Skin]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="53" sc="30" el="53" ec="34">UI\WebControls\DnnFileUpload.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="53" sc="35" el="53" ec="39">UI\WebControls\DnnFileUpload.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="SupportHost">
          <declaration><![CDATA[public bool SupportHost]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="55" sc="35" el="55" ec="39">UI\WebControls\DnnFileUpload.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="55" sc="40" el="55" ec="44">UI\WebControls\DnnFileUpload.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Width">
          <declaration><![CDATA[public int Width]]></declaration>
          <documentation>
          </documentation>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnFileUploadOptions">
      <declaration><![CDATA[public class DnnFileUploadOptions]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public string ModuleId = string.Empty;]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="97" sc="9" el="175" ec="10">UI\WebControls\DnnFileUploadOptions.cs</location>
            <body hash="f1402d2a3f633b479703088e05727638"><![CDATA[public string ModuleId = string.Empty;

        [DataMember(Name = "parentClientId")]
        public string ParentClientId;

        [DataMember(Name = "showOnStartup")]
        public bool ShowOnStartup;

        [DataMember(Name = "folderPicker")]
        public DnnDropDownListOptions FolderPicker;

        [DataMember(Name = "maxFileSize")]
        public int MaxFileSize;

        [DataMember(Name = "maxFiles")]
        public int MaxFiles = 0;

        [DataMember(Name = "extensions")]
        public List<string> Extensions;

        [DataMember(Name = "resources")]
        public DnnFileUploadResources Resources;

        [DataMember(Name = "width")]
        public int Width;

        [DataMember(Name = "height")]
        public int Height;

        private Dictionary<string, string> _parameters;

        [DataMember(Name = "parameters")]
        public Dictionary<string, string> Parameters
        {
            get
            {
                return _parameters ?? (_parameters = new Dictionary<string, string>());
            }
        }

        [DataMember(Name = "folderPath")]
        public string FolderPath;

        public DnnFileUploadOptions()
        {
            FolderPicker = new DnnDropDownListOptions();
            MaxFileSize = (int)Config.GetMaxUploadSize();
            Extensions = new List<string>();
            Width = DefaultWidth;
            Height = DefaultHeight;
            Resources = new DnnFileUploadResources
            {
                Title = Utilities.GetLocalizedString("FileUpload.Title.Text"),
                DecompressLabel = Utilities.GetLocalizedString("FileUpload.DecompressLabel.Text"),
                UploadToFolderLabel = Utilities.GetLocalizedString("FileUpload.UploadToFolderLabel.Text"),
                DragAndDropAreaTitle = Utilities.GetLocalizedString("FileUpload.DragAndDropAreaTitle.Text"),
                UploadFileMethod = Utilities.GetLocalizedString("FileUpload.UploadFileMethod.Text"),
                UploadFromWebMethod = Utilities.GetLocalizedString("FileUpload.UploadFromWebMethod.Text"),
                CloseButtonText = Utilities.GetLocalizedString("FileUpload.CloseButton.Text"),
                UploadFromWebButtonText = Utilities.GetLocalizedString("FileUpload.UploadFromWebButton.Text"),
                DecompressingFile = Utilities.GetLocalizedString("FileUpload.DecompressingFile.Text"),
                FileIsTooLarge = string.Format(Utilities.GetLocalizedString("FileUpload.FileIsTooLarge.Error") + " Mb", (MaxFileSize / (1024 * 1024)).ToString(CultureInfo.InvariantCulture)),
                FileUploadCancelled = Utilities.GetLocalizedString("FileUpload.FileUploadCancelled.Error"),
                FileUploadFailed = Utilities.GetLocalizedString("FileUpload.FileUploadFailed.Error"),
                TooManyFiles = Utilities.GetLocalizedString("FileUpload.TooManyFiles.Error"),
                InvalidFileExtensions = Utilities.GetLocalizedString("FileUpload.InvalidFileExtensions.Error"),
                FileUploaded = Utilities.GetLocalizedString("FileUpload.FileUploaded.Text"),
                EmptyFileUpload = Utilities.GetLocalizedString("FileUpload.EmptyFileUpload.Error"),
                FileAlreadyExists = Utilities.GetLocalizedString("FileUpload.FileAlreadyExists.Error"),
                ErrorDialogTitle = Utilities.GetLocalizedString("FileUpload.ErrorDialogTitle.Text"),
                UploadStopped = Utilities.GetLocalizedString("FileUpload.UploadStopped.Text"),
                UrlTooltip = Utilities.GetLocalizedString("FileUpload.UrlTooltip.Text"),
                KeepButtonText = Utilities.GetLocalizedString("FileUpload.KeepButton.Text"),
                ReplaceButtonText = Utilities.GetLocalizedString("FileUpload.ReplaceButton.Text"),
                UnzipFilePromptTitle = Utilities.GetLocalizedString("FileUpload.UnzipFilePromptTitle.Text"),
                UnzipFileFailedPromptBody = Utilities.GetLocalizedString("FileUpload.UnzipFileFailedPromptBody.Text"),
                UnzipFileSuccessPromptBody = Utilities.GetLocalizedString("FileUpload.UnzipFileSuccessPromptBody.Text")
            };
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
        <field name="_parameters">
          <declaration><![CDATA[private Dictionary<string, string> _parameters;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ClientId">
          <declaration><![CDATA[public string ClientId;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="DefaultHeight">
          <declaration><![CDATA[private const int DefaultHeight = 630;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="DefaultWidth">
          <declaration><![CDATA[private const int DefaultWidth = 780;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="Extensions">
          <declaration><![CDATA[public List<string> Extensions;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="FolderPath">
          <declaration><![CDATA[public string FolderPath;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="FolderPicker">
          <declaration><![CDATA[public DnnDropDownListOptions FolderPicker;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="Height">
          <declaration><![CDATA[public int Height;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="MaxFiles">
          <declaration><![CDATA[public int MaxFiles = 0;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="MaxFileSize">
          <declaration><![CDATA[public int MaxFileSize;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ModuleId">
          <declaration><![CDATA[public string ModuleId = string.Empty;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ParentClientId">
          <declaration><![CDATA[public string ParentClientId;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="Resources">
          <declaration><![CDATA[public DnnFileUploadResources Resources;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ShowOnStartup">
          <declaration><![CDATA[public bool ShowOnStartup;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="Width">
          <declaration><![CDATA[public int Width;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="Parameters">
          <declaration><![CDATA[public Dictionary<string, string> Parameters]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="132" sc="13" el="134" ec="14">UI\WebControls\DnnFileUploadOptions.cs</location>
            <body hash="d613397a8573a4cdba8e83b390f6eb50"><![CDATA[{
                return _parameters ?? (_parameters = new Dictionary<string, string>());
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnFileUploadResources">
      <declaration><![CDATA[public class DnnFileUploadResources]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnFileUploadResources()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
        <field name="CloseButtonText">
          <declaration><![CDATA[public string CloseButtonText;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="DecompressingFile">
          <declaration><![CDATA[public string DecompressingFile;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="DecompressLabel">
          <declaration><![CDATA[public string DecompressLabel;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="DragAndDropAreaTitle">
          <declaration><![CDATA[public string DragAndDropAreaTitle;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="EmptyFileUpload">
          <declaration><![CDATA[public string EmptyFileUpload;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ErrorDialogTitle">
          <declaration><![CDATA[public string ErrorDialogTitle;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="FileAlreadyExists">
          <declaration><![CDATA[public string FileAlreadyExists;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="FileIsTooLarge">
          <declaration><![CDATA[public string FileIsTooLarge;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="FileUploadCancelled">
          <declaration><![CDATA[public string FileUploadCancelled;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="FileUploaded">
          <declaration><![CDATA[public string FileUploaded;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="FileUploadFailed">
          <declaration><![CDATA[public string FileUploadFailed;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="InvalidFileExtensions">
          <declaration><![CDATA[public string InvalidFileExtensions;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="KeepButtonText">
          <declaration><![CDATA[public string KeepButtonText;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ReplaceButtonText">
          <declaration><![CDATA[public string ReplaceButtonText;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="Title">
          <declaration><![CDATA[public string Title;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="TooManyFiles">
          <declaration><![CDATA[public string TooManyFiles;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="UnzipFileFailedPromptBody">
          <declaration><![CDATA[public string UnzipFileFailedPromptBody;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="UnzipFilePromptTitle">
          <declaration><![CDATA[public string UnzipFilePromptTitle;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="UnzipFileSuccessPromptBody">
          <declaration><![CDATA[public string UnzipFileSuccessPromptBody;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="UploadFileMethod">
          <declaration><![CDATA[public string UploadFileMethod;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="UploadFromWebButtonText">
          <declaration><![CDATA[public string UploadFromWebButtonText;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="UploadFromWebMethod">
          <declaration><![CDATA[public string UploadFromWebMethod;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="UploadStopped">
          <declaration><![CDATA[public string UploadStopped;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="UploadToFolderLabel">
          <declaration><![CDATA[public string UploadToFolderLabel;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="UrlTooltip">
          <declaration><![CDATA[public string UrlTooltip;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnFolderDropDownList">
      <declaration><![CDATA[public class DnnFolderDropDownList : DnnDropDownList]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnFolderDropDownList()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="OnInit">
          <declaration><![CDATA[protected override void OnInit(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="22" sc="9" el="34" ec="10">UI\WebControls\DnnFolderDropDownList.cs</location>
            <body hash="a5c8c77c184d480d2611e3cd00597912"><![CDATA[{
            base.OnInit(e);

            SelectItemDefaultText = Localization.GetString("DropDownList.SelectFolderDefaultText", Localization.SharedResourceFile);
            Services.GetTreeMethod = "ItemListService/GetFolders";
            Services.GetNodeDescendantsMethod = "ItemListService/GetFolderDescendants";
            Services.SearchTreeMethod = "ItemListService/SearchFolders";
            Services.GetTreeWithNodeMethod = "ItemListService/GetTreePathForFolder";
            Services.SortTreeMethod = "ItemListService/SortFolders";
            Services.ServiceRoot = "InternalServices";

            Options.ItemList.DisableUnspecifiedOrder = true;
        }]]></body>
          </codeblock>
        </method>
        <method name="OnPreRender">
          <declaration><![CDATA[protected override void OnPreRender(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="37" sc="9" el="56" ec="10">UI\WebControls\DnnFolderDropDownList.cs</location>
            <body hash="c160ae66144bc500e99b552ba9702dc3"><![CDATA[{
            this.AddCssClass("folder");
            base.OnPreRender(e);

            //add the selected folder's level path so that it can expand to the selected node in client side.
            var selectedFolder = SelectedFolder;
            if (selectedFolder != null && selectedFolder.ParentID > Null.NullInteger)
            {
                var folderLevel = string.Empty;
                var parentFolder = FolderManager.Instance.GetFolder(selectedFolder.ParentID);
                while (parentFolder != null)
                {
                    folderLevel = string.Format("{0},{1}", parentFolder.FolderID, folderLevel);
                    parentFolder = (parentFolder.ParentID < 0) ? null : FolderManager.Instance.GetFolder(parentFolder.ParentID);
                }

                ExpandPath = folderLevel.TrimEnd(',');
            }
            
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="SelectedFolder">
          <declaration><![CDATA[public IFolderInfo SelectedFolder]]></declaration>
          <documentation>
            <summary>
 Gets the selected Folder in the control, or selects the Folder in the control.
 </summary>
          </documentation>
          <codeblock>
            <location sl="65" sc="13" el="68" ec="14">UI\WebControls\DnnFolderDropDownList.cs</location>
            <body hash="ac13c2cf1c338cbbf9caf8ceecfed367"><![CDATA[{
                var folderId = SelectedItemValueAsInt;
                return (folderId == Null.NullInteger) ? null : FolderManager.Instance.GetFolder(folderId);
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="70" sc="13" el="78" ec="14">UI\WebControls\DnnFolderDropDownList.cs</location>
            <body hash="76ff794cc1b04bcd971625359a0010c4"><![CDATA[{
                var folderName = value != null ? value.FolderName : null;
                if (folderName == string.Empty)
                {
                    folderName = PortalSettings.Current.ActiveTab.IsSuperTab ? DynamicSharedConstants.HostRootFolder : DynamicSharedConstants.RootFolder;
                }

                SelectedItem = (value != null) ? new ListItem() { Text = folderName, Value = value.FolderID.ToString(CultureInfo.InvariantCulture) } : null;
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnFormEditControlItem">
      <declaration><![CDATA[public class DnnFormEditControlItem : DnnFormItemBase]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnFormEditControlItem()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="CreateControlInternal">
          <declaration><![CDATA[protected override WebControl CreateControlInternal(Control container)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="41" sc="9" el="61" ec="10">UI\WebControls\DnnFormEditControlItem.cs</location>
            <body hash="41440fe5197a7c86fc12a7947d484cf8"><![CDATA[{
            control = Reflection.CreateObject(ControlType, ControlType) as EditControl;

            if (control != null)
            {
                control.ID = ID + "_Control";
                control.Name = ID;
                control.EditMode = PropertyEditorMode.Edit;
                control.Required = false;
                control.Value = Value;
                control.OldValue = Value;
                control.ValueChanged += ValueChanged;
	            control.DataField = DataField;

                control.CssClass = "dnnFormInput";

                container.Controls.Add(control);
            }

            return control;
        }]]></body>
          </codeblock>
        </method>
        <method name="ValueChanged">
          <declaration><![CDATA[private void ValueChanged(object sender, PropertyEditorEventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="64" sc="9" el="66" ec="10">UI\WebControls\DnnFormEditControlItem.cs</location>
            <body hash="0eae17e8950c425959e2227f47e584b9"><![CDATA[{
            UpdateDataSource(Value, e.Value, DataField);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="control">
          <declaration><![CDATA[private EditControl control;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="ControlType">
          <declaration><![CDATA[public string ControlType]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="38" sc="37" el="38" ec="41">UI\WebControls\DnnFormEditControlItem.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="38" sc="42" el="38" ec="46">UI\WebControls\DnnFormEditControlItem.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnFormEditor">
      <declaration><![CDATA[public class DnnFormEditor : WebControl, INamingContainer]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnFormEditor()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="46" sc="9" el="54" ec="10">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="d03cc2af7f80a8db1636b407aa94d2f0"><![CDATA[public DnnFormEditor()
        {
            Items = new List<DnnFormItemBase>();
            Sections = new List<DnnFormSection>();
            Tabs = new List<DnnFormTab>();

            FormMode = DnnFormMode.Long;
            ViewStateMode = ViewStateMode.Disabled;
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="CreateChildControls">
          <declaration><![CDATA[protected override void CreateChildControls()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="244" sc="9" el="256" ec="10">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="037b1fa3b37ac2251526fa584555ded1"><![CDATA[{
            // CreateChildControls re-creates the children (the items)
            // using the saved view state.
            // First clear any existing child controls.
            Controls.Clear();

            // Create the items only if there is view state
            // corresponding to the children.
            if (_itemCount > 0)
            {
                CreateControlHierarchy(false);
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="CreateControlHierarchy">
          <declaration><![CDATA[protected virtual void CreateControlHierarchy(bool useDataSource)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="283" sc="9" el="293" ec="10">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="928dee29daab53eb295f1cc9030cebe4"><![CDATA[{
        	CssClass = string.IsNullOrEmpty(CssClass) ? "dnnForm" : CssClass.Contains("dnnForm") ? CssClass : string.Format("dnnForm {0}", CssClass);

        	SetUpTabs();

            SetUpSections(Sections, this);

            SetUpItems(Items, this, LocalResourceFile, EncryptIds);

            DataBindItems(useDataSource);
        }]]></body>
          </codeblock>
        </method>
        <method name="DataBind">
          <declaration><![CDATA[public override void DataBind()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="296" sc="9" el="303" ec="10">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="407660263b4fa11f1114dbeb45e457a2"><![CDATA[{
            base.OnDataBinding(EventArgs.Empty);
            Controls.Clear();
            ClearChildViewState();
            TrackViewState();
            CreateControlHierarchy(true);
            ChildControlsCreated = true;
        }]]></body>
          </codeblock>
        </method>
        <method name="DataBindItems">
          <declaration><![CDATA[private void DataBindItems(bool useDataSource)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="259" sc="9" el="280" ec="10">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="b08a6075e7c903c0a7a27ff84da10581"><![CDATA[{
            var items = GetAllItems();

            foreach (DnnFormItemBase item in items)
            {
                if (String.IsNullOrEmpty(item.LocalResourceFile))
                {
                    item.LocalResourceFile = LocalResourceFile;
                }
                if (item.FormMode == DnnFormMode.Inherit)
                {
                    item.FormMode = FormMode;
                }

                if (DataSource != null)
                {
                    item.DataSource = DataSource;
                    item.DataBindItem(useDataSource);
                }
            }
            _itemCount = GetAllItems().Count;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetAllItems">
          <declaration><![CDATA[private List<DnnFormItemBase> GetAllItems()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="123" sc="9" el="146" ec="10">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="e43b01ace6b8ebc200640434b9414d67"><![CDATA[{
            var items = new List<DnnFormItemBase>();

            //iterate over pages
            foreach (DnnFormTab page in Tabs)
            {
                foreach (DnnFormSection section in page.Sections)
                {
                    items.AddRange(section.Items);
                }
                items.AddRange(page.Items);
            }

            //iterate over section
            foreach (DnnFormSection section in Sections)
            {
                items.AddRange(section.Items);
            }

            //Add base items
            items.AddRange(Items);

            return items;
        }]]></body>
          </codeblock>
        </method>
        <method name="LoadControlState">
          <declaration><![CDATA[protected override void LoadControlState(object state)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="310" sc="9" el="315" ec="10">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="3a23cec0065457c4635f333e50a40012"><![CDATA[{
            if (state != null)
            {
                _itemCount = (int) state;
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="OnInit">
          <declaration><![CDATA[protected override void OnInit(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="318" sc="9" el="322" ec="10">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="b1ab46fc69575a471f7dfe312fb85e7c"><![CDATA[{
            Page.RegisterRequiresControlState(this);
            JavaScript.RequestRegistration(CommonJs.DnnPlugins);
            base.OnInit(e);
        }]]></body>
          </codeblock>
        </method>
        <method name="OnPreRender">
          <declaration><![CDATA[protected override void OnPreRender(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="325" sc="9" el="364" ec="10">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="3e20a8ef823b6d21c888b968150f09f3"><![CDATA[{
            base.OnPreRender(e);

            if(Tabs.Count > 0)
            {
                const string scriptName = "FormEditorjQuery";
                ClientScriptManager cs = Page.ClientScript;


                if (!cs.IsClientScriptBlockRegistered(GetType(), scriptName))
                {
                    //Render Script
                    var scriptBuilder = new StringBuilder();
                    scriptBuilder.Append("<script language=\"javascript\" type=\"text/javascript\">\r\n");
                    scriptBuilder.Append("\t(function ($, Sys) {\r\n");
                    scriptBuilder.Append("\t\tfunction setupFormEditor() {\r\n");
                    scriptBuilder.Append("\t\t\t$('#" + ClientID + "').dnnTabs().dnnPanels();\r\n");
                    foreach (DnnFormTab formTab in Tabs)
                    {
                        if (formTab.IncludeExpandAll)
                        {
                            scriptBuilder.Append(formTab.ExpandAllScript);
                        }
                    }
                    scriptBuilder.Append("\t\t}\r\n");
                    scriptBuilder.Append("\t\t$(document).ready(function () {\r\n");
                    scriptBuilder.Append("\t\t\tsetupFormEditor();\r\n");
                    scriptBuilder.Append("\t\t\tif (typeof Sys != 'undefined') {\r\n");
                    scriptBuilder.Append("\t\t\t\tSys.WebForms.PageRequestManager.getInstance().add_endRequest(function () {\r\n");
                    scriptBuilder.Append("\t\t\t\t\tsetupFormEditor();\r\n");
                    scriptBuilder.Append("\t\t\t\t});\r\n");
                    scriptBuilder.Append("\t\t\t}\r\n");
                    scriptBuilder.Append("\t\t});\r\n");
                    scriptBuilder.Append("\t} (jQuery, window.Sys));\r\n");

                    scriptBuilder.Append("</script>\r\n");
                    cs.RegisterClientScriptBlock(GetType(), scriptName, scriptBuilder.ToString());
                }
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="SaveControlState">
          <declaration><![CDATA[protected override object SaveControlState()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="367" sc="9" el="369" ec="10">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="43d7fdfb51654b292df74974d3dc74ec"><![CDATA[{
            return _itemCount > 0 ? (object) _itemCount : null;
        }]]></body>
          </codeblock>
        </method>
        <method name="SetUpItems">
          <deprecation>Obsolted in Platform 7.4.1, please add encryptIds</deprecation>
          <declaration><![CDATA[internal static void SetUpItems(IEnumerable<DnnFormItemBase> items, WebControl parentControl, string localResourceFile)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="152" sc="9" el="154" ec="10">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="3574773ed87f1373c253f112d4c9f478"><![CDATA[{
            SetUpItems(items, parentControl, localResourceFile, false);
        }]]></body>
          </codeblock>
        </method>
        <method name="SetUpItems">
          <declaration><![CDATA[internal static void SetUpItems(IEnumerable<DnnFormItemBase> items, WebControl parentControl, string localResourceFile, bool encryptIds)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="157" sc="9" el="167" ec="10">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="c85c8a5a4cb3544094f1b475a907495e"><![CDATA[{
            foreach (DnnFormItemBase item in items)
            {
                if (encryptIds)
                {
                    item.ID = (Host.GUID.Substring(0, 7) + item.ID + DateTime.Now.Day).GenerateHash();
                }

                parentControl.Controls.Add(item);
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="SetUpSections">
          <declaration><![CDATA[private void SetUpSections(List<DnnFormSection> sections, WebControl parentControl)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="170" sc="9" el="189" ec="10">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="0b4d2cb783a7dfcf0f3151c223a9b9ac"><![CDATA[{
            if (sections.Count > 0)
            {
                foreach (DnnFormSection section in sections)
                {
                    var panel = new DnnFormPanel {CssClass = "dnnFormSectionHead"};
                    parentControl.Controls.Add(panel);

                    var resourceKey = section.ResourceKey;
                    if (String.IsNullOrEmpty(resourceKey))
                    {
                        resourceKey = section.ID;
                    }
                    panel.Text = Localization.GetString(resourceKey, LocalResourceFile);
                    panel.Expanded = section.Expanded;

                    SetUpItems(section.Items, panel, LocalResourceFile, EncryptIds);
                }
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="SetUpTabs">
          <declaration><![CDATA[private void SetUpTabs()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="192" sc="9" el="237" ec="10">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="8141f3f7a5a9ffac732d7ed63042e3ff"><![CDATA[{
            if (Tabs.Count > 0)
            {
                var tabStrip = new DnnFormTabStrip {CssClass = "dnnAdminTabNav dnnClear"};
                Controls.Add(tabStrip);
                tabStrip.Items.Clear();

                foreach (DnnFormTab formTab in Tabs)
                {
                    var resourceKey = formTab.ResourceKey;
                    if (String.IsNullOrEmpty(resourceKey))
                    {
                        resourceKey = formTab.ID;
                    }

                    var tab = new Panel {CssClass = formTab.ID + " dnnClear", ID = "tab_" + formTab.ID};
                    Controls.Add(tab);

                    if (formTab.IncludeExpandAll)
                    {
                        var expandAll = new Panel {CssClass = "dnnFormExpandContent"};
                        string expandAllText = Localization.GetString("ExpandAll", Localization.SharedResourceFile);
                        expandAll.Controls.Add(new LiteralControl("<a href=\"\">" + expandAllText + "</a>"));
                        tab.Controls.Add(expandAll);

                        formTab.ExpandAllScript = "\t\t\t$('#" + tab.ClientID + " .dnnFormExpandContent a').dnnExpandAll({\r\n";
                        formTab.ExpandAllScript += "\t\t\t\texpandText: '" + Localization.GetString("ExpandAll", Localization.SharedResourceFile) + "',\r\n";
                        formTab.ExpandAllScript += "\t\t\t\tcollapseText: '" + Localization.GetString("CollapseAll", Localization.SharedResourceFile) + "',\r\n";
                        formTab.ExpandAllScript += "\t\t\t\ttargetArea: '#" + tab.ClientID + "' });\r\n";
                    }

                    tabStrip.Items.Add(new ListItem(Localization.GetString(resourceKey, LocalResourceFile), "#" + tab.ClientID));

                    if (formTab.Sections.Count > 0)
                    {
                        SetUpSections(formTab.Sections, tab);
                    }
                    else
                    {
                        tab.CssClass += " dnnFormNoSections";
                    }

                    SetUpItems(formTab.Items, tab, LocalResourceFile, EncryptIds);
                }
            }
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_dataSource">
          <declaration><![CDATA[private object _dataSource;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_itemCount">
          <declaration><![CDATA[private int _itemCount;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="DataSource">
          <declaration><![CDATA[public object DataSource]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="75" sc="13" el="77" ec="14">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="0d9b5e692dcd19852549262a6fe00af8"><![CDATA[{
                return _dataSource;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="79" sc="13" el="88" ec="14">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="46edaef8c00527a1927739d4e752fb16"><![CDATA[{
                if (_dataSource != value)
                {
                    _dataSource = value;
                    if (Page.IsPostBack)
                    {
                        DataBindItems(false);
                    }
                }
            }]]></body>
          </codeblock>
        </property>
        <property name="EncryptIds">
          <declaration><![CDATA[public bool EncryptIds]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="93" sc="34" el="93" ec="38">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="93" sc="39" el="93" ec="43">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="FormMode">
          <declaration><![CDATA[public DnnFormMode FormMode]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="91" sc="39" el="91" ec="43">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="91" sc="44" el="91" ec="48">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="IsValid">
          <declaration><![CDATA[public bool IsValid]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="98" sc="13" el="110" ec="14">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="5f132fffe26e9fe0c6ea212437c7ef26"><![CDATA[{
                bool isValid = true;
                foreach (var item in GetAllItems())
                {
                    item.CheckIsValid();
                    if(!item.IsValid)
                    {
                        isValid = false;
                        break;
                    }
                }
                return isValid;
            }]]></body>
          </codeblock>
        </property>
        <property name="Items">
          <declaration><![CDATA[public List<DnnFormItemBase> Items]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="114" sc="46" el="114" ec="50">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="114" sc="51" el="114" ec="63">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="5dbe2cc086ebbf5db6b03610487cca4c"><![CDATA[private set]]></body>
          </codeblock>
        </property>
        <property name="LocalResourceFile">
          <declaration><![CDATA[protected string LocalResourceFile]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="59" sc="13" el="61" ec="14">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="56c4d779dbc7799f018d31a7269cfdf9"><![CDATA[{
                return Utilities.GetLocalResourceFile(this);
            }]]></body>
          </codeblock>
        </property>
        <property name="Sections">
          <declaration><![CDATA[public List<DnnFormSection> Sections]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="117" sc="48" el="117" ec="52">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="117" sc="53" el="117" ec="65">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="5dbe2cc086ebbf5db6b03610487cca4c"><![CDATA[private set]]></body>
          </codeblock>
        </property>
        <property name="Tabs">
          <declaration><![CDATA[public List<DnnFormTab> Tabs]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="120" sc="40" el="120" ec="44">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="120" sc="45" el="120" ec="57">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="5dbe2cc086ebbf5db6b03610487cca4c"><![CDATA[private set]]></body>
          </codeblock>
        </property>
        <property name="TagKey">
          <declaration><![CDATA[protected override HtmlTextWriterTag TagKey]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="67" sc="13" el="69" ec="14">UI\WebControls\DnnFormEditor.cs</location>
            <body hash="8210dac1c0e0b0cb6fea1d2e7e0d9026"><![CDATA[{
                return HtmlTextWriterTag.Div;
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnFormEmptyTemplate">
      <declaration><![CDATA[public class DnnFormEmptyTemplate : WebControl, INamingContainer]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnFormEmptyTemplate()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="TagKey">
          <declaration><![CDATA[protected override HtmlTextWriterTag TagKey]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="36" sc="13" el="38" ec="14">UI\WebControls\DnnFormEmptyTemplate.cs</location>
            <body hash="8210dac1c0e0b0cb6fea1d2e7e0d9026"><![CDATA[{
                return HtmlTextWriterTag.Div;
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnFormItemBase">
      <declaration><![CDATA[public abstract class DnnFormItemBase : WebControl, INamingContainer]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[private string _requiredMessageSuffix = ".Required";]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="45" sc="9" el="54" ec="10">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="1cf04effd2925f81dc79c3715211f4d5"><![CDATA[private string _requiredMessageSuffix = ".Required";
        private string _validationMessageSuffix = ".RegExError";
        
        protected DnnFormItemBase()
        {
            FormMode = DnnFormMode.Inherit;
            IsValid = true;

            Validators = new List<IValidator>();
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="AddValidators">
          <declaration><![CDATA[private void AddValidators(string controlId)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="155" sc="9" el="197" ec="10">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="91445c965d15891c3d7b4f4a5a941cda"><![CDATA[{
            var value = Value as String;
            Validators.Clear();

            //Add Validators
            if (Required)
            {
                var requiredValidator = new RequiredFieldValidator
                                            {
                                                ID = ID + "_Required", 
                                                ErrorMessage = ResourceKey + RequiredMessageSuffix
                                            };
                Validators.Add(requiredValidator);
            }

            if (!String.IsNullOrEmpty(ValidationExpression))
            {
                var regexValidator = new RegularExpressionValidator
                                         {
                                             ID = ID + "_RegEx", 
                                             ErrorMessage = ResourceKey + ValidationMessageSuffix, 
                                             ValidationExpression = ValidationExpression
                                         };
                if (!String.IsNullOrEmpty(value))
                {
                    regexValidator.IsValid = Regex.IsMatch(value, ValidationExpression);
                    IsValid = regexValidator.IsValid;
                }
                Validators.Add(regexValidator);
            }

            if (Validators.Count > 0)
            {
                foreach (BaseValidator validator in Validators)
                {
                    validator.ControlToValidate = controlId;
                    validator.Display = ValidatorDisplay.Dynamic;
                    validator.ErrorMessage = LocalizeString(validator.ErrorMessage);
                    validator.CssClass = "dnnFormMessage dnnFormError";                   
                    Controls.Add(validator);
                }
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="CheckIsValid">
          <declaration><![CDATA[public void CheckIsValid()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="200" sc="9" el="211" ec="10">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="c13baa2a4ce51aca7200d2690b9d3e04"><![CDATA[{
            IsValid = true;
            foreach (BaseValidator validator in Validators)
            {
                validator.Validate();
                if (!validator.IsValid)
                {
                    IsValid = false;
                    break;
                }
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="CreateChildControls">
          <declaration><![CDATA[protected override void CreateChildControls()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="256" sc="9" el="263" ec="10">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="3348a768c42d8bb45e7f374f4d4ec75b"><![CDATA[{
            // CreateChildControls re-creates the children (the items)
            // using the saved view state.
            // First clear any existing child controls.
            Controls.Clear();

            CreateControlHierarchy();
        }]]></body>
          </codeblock>
        </method>
        <method name="CreateControlHierarchy">
          <declaration><![CDATA[protected virtual void CreateControlHierarchy()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="214" sc="9" el="243" ec="10">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="017e51463281d31f4d77163552a47259"><![CDATA[{
            //Load Item Style
            CssClass = "dnnFormItem";
            CssClass += (FormMode == DnnFormMode.Long) ? "" : " dnnFormShort";

            if (String.IsNullOrEmpty(ResourceKey))
            {
                ResourceKey = DataField;
            }

            //Add Label
            var label = new DnnFormLabel 
                                {
                                    LocalResourceFile = LocalResourceFile, 
                                    ResourceKey = ResourceKey + ".Text", 
                                    ToolTipKey = ResourceKey + ".Help",
                                    ViewStateMode = ViewStateMode.Disabled
                                };

            if (Required) {

                label.RequiredField = true;
            }

            Controls.Add(label);

            WebControl inputControl = CreateControlInternal(this);
            label.AssociatedControlID = inputControl.ID;
            AddValidators(inputControl.ID);
        }]]></body>
          </codeblock>
        </method>
        <method name="CreateControlInternal">
          <declaration><![CDATA[protected virtual WebControl CreateControlInternal(Control container)]]></declaration>
          <documentation>
            <summary>
 Use container to add custom control hierarchy to
 </summary>
 <param name="container"></param>
 <returns>An "input" control that can be used for attaching validators</returns></documentation>
          <codeblock>
            <location sl="251" sc="9" el="253" ec="10">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="e58ece320c3127efb710b9676c9d552e"><![CDATA[{
            return null;
        }]]></body>
          </codeblock>
        </method>
        <method name="DataBindInternal">
          <declaration><![CDATA[protected void DataBindInternal(string dataField, ref object value)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="266" sc="9" el="303" ec="10">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="f739601274cb098704219e6395d288ad"><![CDATA[{
            var dictionary = DataSource as IDictionary;
            if (dictionary != null)
            {
                if (!String.IsNullOrEmpty(dataField) && dictionary.Contains(dataField))
                {
                    value = dictionary[dataField];
                }
            }
            else
            {
                if (!String.IsNullOrEmpty(dataField))
                {
                    if (String.IsNullOrEmpty(DataMember))
                    {
                        if (Property != null && Property.GetValue(DataSource, null) != null)
                        {
                            // ReSharper disable PossibleNullReferenceException
                            value = Property.GetValue(DataSource, null);
                            // ReSharper restore PossibleNullReferenceException
                        } 
                    }
                    else
                    {
                        if (Property != null && Property.GetValue(DataSource, null) != null)
                        {
                            // ReSharper disable PossibleNullReferenceException
                            object parentValue = Property.GetValue(DataSource, null);
                            if (ChildProperty != null && ChildProperty.GetValue(parentValue, null) != null)
                            {
                                value = ChildProperty.GetValue(parentValue, null);
                            }
                            // ReSharper restore PossibleNullReferenceException
                        }
                    }
                }
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="DataBindInternal">
          <declaration><![CDATA[protected virtual void DataBindInternal()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="306" sc="9" el="308" ec="10">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="b3725c547b7f3892f1b29833a35e2916"><![CDATA[{
            DataBindInternal(DataField, ref _value);
        }]]></body>
          </codeblock>
        </method>
        <method name="DataBindItem">
          <declaration><![CDATA[public void DataBindItem(bool useDataSource)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="311" sc="9" el="331" ec="10">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="643b29d421c52982ceb5af2cbc2f574c"><![CDATA[{
            if (useDataSource)
            {
                base.OnDataBinding(EventArgs.Empty);
                Controls.Clear();
                ClearChildViewState();
                TrackViewState();

                DataBindInternal();

                CreateControlHierarchy();
                ChildControlsCreated = true;
            }
            else
            {
                if (!String.IsNullOrEmpty(DataField))
                {
                    UpdateDataSourceInternal(null, _value, DataField);
                }
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="LoadControlState">
          <declaration><![CDATA[protected override void LoadControlState(object state)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="421" sc="9" el="423" ec="10">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="ac550e8dccd0283e3c49e1e7b6ef0e78"><![CDATA[{
            _value = state;
        }]]></body>
          </codeblock>
        </method>
        <method name="LocalizeString">
          <declaration><![CDATA[protected string LocalizeString(string key)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="426" sc="9" el="428" ec="10">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="fdb9cfd70aff46a9da06e018de02d9c8"><![CDATA[{
            return Localization.GetString(key, LocalResourceFile);
        }]]></body>
          </codeblock>
        </method>
        <method name="OnInit">
          <declaration><![CDATA[protected override void OnInit(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="431" sc="9" el="434" ec="10">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="01dedbb5287ed6d3e73b4a7e01aa3a45"><![CDATA[{
            Page.RegisterRequiresControlState(this);
            base.OnInit(e);
        }]]></body>
          </codeblock>
        </method>
        <method name="SaveControlState">
          <declaration><![CDATA[protected override object SaveControlState()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="437" sc="9" el="439" ec="10">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="617608755c9b351e4a62981526ddaf47"><![CDATA[{
            return _value;
        }]]></body>
          </codeblock>
        </method>
        <method name="UpdateDataSource">
          <declaration><![CDATA[protected void UpdateDataSource(object oldValue, object newValue, string dataField)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="408" sc="9" el="414" ec="10">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="93df006d175d9715a3ad84f11ddb97e1"><![CDATA[{
            CheckIsValid();

            _value = newValue;

            UpdateDataSourceInternal(oldValue, newValue, dataField);
        }]]></body>
          </codeblock>
        </method>
        <method name="UpdateDataSourceInternal">
          <declaration><![CDATA[private void UpdateDataSourceInternal(object oldValue, object newValue, string dataField)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="334" sc="9" el="405" ec="10">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="1ba286584d4e13501eb5a86607735665"><![CDATA[{
            if (DataSource != null)
            {
                if (DataSource is IDictionary<string, string>)
                {
                    var dictionary = DataSource as IDictionary<string, string>;
                    if (dictionary.ContainsKey(dataField) && !ReferenceEquals(newValue, oldValue))
                    {
                        dictionary[dataField] = newValue as string;
                    }
                }
                else if(DataSource is IIndexable)
                {
                    var indexer = DataSource as IIndexable;
                    indexer[dataField] = newValue;
                }
                else
                {
                    if (String.IsNullOrEmpty(DataMember))
                    {
                        if (Property != null)
                        {
                            if (!ReferenceEquals(newValue, oldValue))
                            {
                                if (Property.PropertyType.IsEnum)
                                {
                                    Property.SetValue(DataSource, Enum.Parse(Property.PropertyType, newValue.ToString()), null);
                                }
                                else
                                {
                                    Property.SetValue(DataSource, Convert.ChangeType(newValue, Property.PropertyType), null);
                                }
                            }
                        }
                    }
                    else
                    {
                        if (Property != null)
                        {
                            object parentValue = Property.GetValue(DataSource, null);
                            if (parentValue != null)
                            {
                                if (parentValue is IDictionary<string, string>)
                                {
                                    var dictionary = parentValue as IDictionary<string, string>;
                                    if (dictionary.ContainsKey(dataField) && !ReferenceEquals(newValue, oldValue))
                                    {
                                        dictionary[dataField] = newValue as string;
                                    }
                                }
                                else if (parentValue is IIndexable)
                                {
                                    var indexer = parentValue as IIndexable;
                                    indexer[dataField] = newValue;
                                }
                                else if (ChildProperty != null)
                                {
                                    if (Property.PropertyType.IsEnum)
                                    {
                                        ChildProperty.SetValue(parentValue, Enum.Parse(ChildProperty.PropertyType, newValue.ToString()), null);
                                    }
                                    else
                                    {
                                        ChildProperty.SetValue(parentValue, Convert.ChangeType(newValue, ChildProperty.PropertyType), null);
                                    }
                                }
                            }
                        }
                    }
                }
            }           
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_requiredMessageSuffix">
          <declaration><![CDATA[private string _requiredMessageSuffix = ".Required";]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_validationMessageSuffix">
          <declaration><![CDATA[private string _validationMessageSuffix = ".RegExError";]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_value">
          <declaration><![CDATA[private object _value;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="ChildProperty">
          <declaration><![CDATA[protected PropertyInfo ChildProperty]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="61" sc="13" el="65" ec="14">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="490ecb94e7b114103fca9c3f69cc4304"><![CDATA[{
                Type type = Property.PropertyType;
                IList<PropertyInfo> props = new List<PropertyInfo>(type.GetProperties(BindingFlags.Public | BindingFlags.Instance | BindingFlags.Static));
                return props.SingleOrDefault(p => p.Name == DataField);
            }]]></body>
          </codeblock>
        </property>
        <property name="DataField">
          <declaration><![CDATA[public string DataField]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="103" sc="35" el="103" ec="39">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="103" sc="40" el="103" ec="44">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="DataMember">
          <declaration><![CDATA[public string DataMember]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="105" sc="36" el="105" ec="40">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="105" sc="41" el="105" ec="45">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="DataSource">
          <declaration><![CDATA[internal object DataSource]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="107" sc="38" el="107" ec="42">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="107" sc="43" el="107" ec="47">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="FormMode">
          <declaration><![CDATA[public DnnFormMode FormMode]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="109" sc="39" el="109" ec="43">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="109" sc="44" el="109" ec="48">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="IsValid">
          <declaration><![CDATA[public bool IsValid]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="111" sc="31" el="111" ec="35">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="111" sc="36" el="111" ec="48">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="5dbe2cc086ebbf5db6b03610487cca4c"><![CDATA[private set]]></body>
          </codeblock>
        </property>
        <property name="LocalResourceFile">
          <declaration><![CDATA[public string LocalResourceFile]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="115" sc="43" el="115" ec="47">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="115" sc="48" el="115" ec="52">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="OnClientClicked">
          <declaration><![CDATA[public string OnClientClicked]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="113" sc="41" el="113" ec="45">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="113" sc="46" el="113" ec="50">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="PortalSettings">
          <declaration><![CDATA[protected PortalSettings PortalSettings]]></declaration>
          <documentation>
          </documentation>
        </property>
        <property name="Property">
          <declaration><![CDATA[protected PropertyInfo Property]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="76" sc="13" el="82" ec="14">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="c9e3089bbc839c05f8f8fec89807213e"><![CDATA[{
                Type type = DataSource.GetType();
                IList<PropertyInfo> props = new List<PropertyInfo>(type.GetProperties(BindingFlags.Public | BindingFlags.Instance | BindingFlags.Static));
                return !String.IsNullOrEmpty(DataMember) 
                           ? props.SingleOrDefault(p => p.Name == DataMember) 
                           : props.SingleOrDefault(p => p.Name == DataField);
            }]]></body>
          </codeblock>
        </property>
        <property name="Required">
          <declaration><![CDATA[public bool Required]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="117" sc="32" el="117" ec="36">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="117" sc="37" el="117" ec="41">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="RequiredMessageSuffix">
          <declaration><![CDATA[public string RequiredMessageSuffix]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="124" sc="13" el="126" ec="14">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="e27793cdd87436e0c2b7a3ea146e7325"><![CDATA[{
                return _requiredMessageSuffix;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="128" sc="13" el="130" ec="14">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="e73be193615cda760fbfa71198959c40"><![CDATA[{
                _requiredMessageSuffix = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="ResourceKey">
          <declaration><![CDATA[public string ResourceKey]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="119" sc="37" el="119" ec="41">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="119" sc="42" el="119" ec="46">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="TagKey">
          <declaration><![CDATA[protected override HtmlTextWriterTag TagKey]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="88" sc="13" el="90" ec="14">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="8210dac1c0e0b0cb6fea1d2e7e0d9026"><![CDATA[{
                return HtmlTextWriterTag.Div;
            }]]></body>
          </codeblock>
        </property>
        <property name="ValidationExpression">
          <declaration><![CDATA[public string ValidationExpression]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="148" sc="46" el="148" ec="50">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="148" sc="51" el="148" ec="55">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="ValidationMessageSuffix">
          <declaration><![CDATA[public string ValidationMessageSuffix]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="136" sc="13" el="138" ec="14">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="f5b2f9708d39d30289b763518875f039"><![CDATA[{
                return _validationMessageSuffix;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="140" sc="13" el="142" ec="14">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="666576074d25967f91df6587f559a2c0"><![CDATA[{
                _validationMessageSuffix = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="Validators">
          <declaration><![CDATA[public List<IValidator> Validators]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="146" sc="46" el="146" ec="50">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="146" sc="51" el="146" ec="63">UI\WebControls\DnnFormItemBase.cs</location>
            <body hash="5dbe2cc086ebbf5db6b03610487cca4c"><![CDATA[private set]]></body>
          </codeblock>
        </property>
        <property name="Value">
          <declaration><![CDATA[public object Value]]></declaration>
          <documentation>
          </documentation>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnFormLabel">
      <declaration><![CDATA[public class DnnFormLabel : Panel]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnFormLabel()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="CreateChildControls">
          <declaration><![CDATA[protected override void CreateChildControls()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="50" sc="3" el="97" ec="4">UI\WebControls\DnnFormLabel.cs</location>
            <body hash="bc105089c9dd8316d5eed8ca212dd72f"><![CDATA[{
			string toolTipText = LocalizeString(ToolTipKey);
            if (string.IsNullOrEmpty(CssClass))
                CssClass = "dnnLabel";

            else if (!CssClass.Contains("dnnLabel"))                           
                CssClass += " dnnLabel";
            

            //var outerPanel = new Panel();
            //outerPanel.CssClass = "dnnLabel";
            //Controls.Add(outerPanel);            

            var outerLabel = new System.Web.UI.HtmlControls.HtmlGenericControl { TagName = "label" };
            Controls.Add(outerLabel);
            
            var label = new Label { ID = "Label", Text = LocalizeString(ResourceKey) };
            if (RequiredField)
            {
                label.CssClass += " dnnFormRequired";
            }
		    outerLabel.Controls.Add(label);			

            var link = new LinkButton { ID = "Link", CssClass = "dnnFormHelp", TabIndex = -1 };
            Controls.Add(link);
			
			if (!String.IsNullOrEmpty(toolTipText))
			{
				//CssClass += "dnnLabel";

			    var tooltipPanel = new Panel() { CssClass = "dnnTooltip"};
                Controls.Add(tooltipPanel);

				var panel = new Panel { ID = "Help", CssClass = "dnnFormHelpContent dnnClear" };				
                tooltipPanel.Controls.Add(panel);
				
				var helpLabel = new Label { ID = "Text", CssClass="dnnHelpText", Text = LocalizeString(ToolTipKey) };
				panel.Controls.Add(helpLabel);

				var pinLink = new HyperLink {CssClass = "pinHelp"};
			    pinLink.Attributes.Add("href", "#");
				panel.Controls.Add(pinLink);

                JavaScript.RegisterClientReference(Page, ClientAPI.ClientNamespaceReferences.dnn);
                JavaScript.RequestRegistration(CommonJs.DnnPlugins);
                //ClientResourceManager.RegisterScript(this.Page, "~/Resources/Shared/Scripts/initTooltips.js");
			}
		}]]></body>
          </codeblock>
        </method>
        <method name="LocalizeString">
          <declaration><![CDATA[protected string LocalizeString(string key)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="100" sc="3" el="102" ec="4">UI\WebControls\DnnFormLabel.cs</location>
            <body hash="b76cfeec95b8e8b8890b94fcb9beb1c8"><![CDATA[{
			return Localization.GetString(key, LocalResourceFile);
		}]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="AssociatedControlID">
          <declaration><![CDATA[public string AssociatedControlID]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="39" sc="39" el="39" ec="43">UI\WebControls\DnnFormLabel.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="39" sc="44" el="39" ec="48">UI\WebControls\DnnFormLabel.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="LocalResourceFile">
          <declaration><![CDATA[public string LocalResourceFile]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="41" sc="37" el="41" ec="41">UI\WebControls\DnnFormLabel.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="41" sc="42" el="41" ec="46">UI\WebControls\DnnFormLabel.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="RequiredField">
          <declaration><![CDATA[public bool RequiredField]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="47" sc="37" el="47" ec="41">UI\WebControls\DnnFormLabel.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="47" sc="42" el="47" ec="46">UI\WebControls\DnnFormLabel.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="ResourceKey">
          <declaration><![CDATA[public string ResourceKey]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="43" sc="31" el="43" ec="35">UI\WebControls\DnnFormLabel.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="43" sc="36" el="43" ec="40">UI\WebControls\DnnFormLabel.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="ToolTipKey">
          <declaration><![CDATA[public string ToolTipKey]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="45" sc="30" el="45" ec="34">UI\WebControls\DnnFormLabel.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="45" sc="35" el="45" ec="39">UI\WebControls\DnnFormLabel.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnFormListItemBase">
      <declaration><![CDATA[public abstract class DnnFormListItemBase : DnnFormItemBase]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[protected DnnFormListItemBase()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="BindList">
          <declaration><![CDATA[protected virtual void BindList()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="56" sc="9" el="57" ec="10">UI\WebControls\DnnFormListItemBase.cs</location>
            <body hash="539fa760ca172337a931519768c64187"><![CDATA[{
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_listSource">
          <declaration><![CDATA[private IEnumerable _listSource;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="DefaultValue">
          <declaration><![CDATA[public string DefaultValue]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="33" sc="38" el="33" ec="42">UI\WebControls\DnnFormListItemBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="33" sc="43" el="33" ec="47">UI\WebControls\DnnFormListItemBase.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="ListSource">
          <declaration><![CDATA[public IEnumerable ListSource]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="38" sc="13" el="40" ec="14">UI\WebControls\DnnFormListItemBase.cs</location>
            <body hash="73b4460f074dba4bc7e73de7ba4e0709"><![CDATA[{
                return _listSource;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="42" sc="13" el="48" ec="14">UI\WebControls\DnnFormListItemBase.cs</location>
            <body hash="f3775b3b0301e1217218e65c4dbdff36"><![CDATA[{
                if (_listSource != value)
                {
                    _listSource = value;
                    BindList();
                }
            }]]></body>
          </codeblock>
        </property>
        <property name="ListTextField">
          <declaration><![CDATA[public string ListTextField]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="51" sc="39" el="51" ec="43">UI\WebControls\DnnFormListItemBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="51" sc="44" el="51" ec="48">UI\WebControls\DnnFormListItemBase.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="ListValueField">
          <declaration><![CDATA[public string ListValueField]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="53" sc="40" el="53" ec="44">UI\WebControls\DnnFormListItemBase.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="53" sc="45" el="53" ec="49">UI\WebControls\DnnFormListItemBase.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnFormLiteralItem">
      <declaration><![CDATA[public class DnnFormLiteralItem : DnnFormItemBase]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnFormLiteralItem()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="33" sc="39" el="36" ec="10">UI\WebControls\DnnFormLiteralItem.cs</location>
            <body hash="a89a5f86377e8f0f0f34a1e4fd4fa8cc"><![CDATA[base()
        {
            ViewStateMode = ViewStateMode.Disabled;    
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="CreateControlInternal">
          <declaration><![CDATA[protected override WebControl CreateControlInternal(Control container)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="39" sc="9" el="43" ec="10">UI\WebControls\DnnFormLiteralItem.cs</location>
            <body hash="538b80c9e5e0b1e8b681555174119cd0"><![CDATA[{
            var literal = new Label {ID = ID + "_Label", Text = Convert.ToString(Value)};
            container.Controls.Add(literal);
            return literal;
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnFormMode">
      <declaration><![CDATA[public enum DnnFormMode]]></declaration>
      <documentation>
      </documentation>
      <constructors>
      </constructors>
      <methods>
      </methods>
      <fields>
        <field name="Inherit">
          <declaration><![CDATA[public const DnnFormMode Inherit = 0;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="Long">
          <declaration><![CDATA[public const DnnFormMode Long = 2;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="Short">
          <declaration><![CDATA[public const DnnFormMode Short = 1;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnFormPanel">
      <declaration><![CDATA[public class DnnFormPanel : WebControl]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnFormPanel()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="Render">
          <declaration><![CDATA[protected override void Render(HtmlTextWriter writer)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="35" sc="9" el="54" ec="10">UI\WebControls\DnnFormPanel.cs</location>
            <body hash="185c369da51954351ac7382e0d7033be"><![CDATA[{
            writer.AddAttribute(HtmlTextWriterAttribute.Class, CssClass);
            writer.RenderBeginTag(HtmlTextWriterTag.H2);

            if (Expanded)
            {
                writer.AddAttribute(HtmlTextWriterAttribute.Class, "dnnSectionExpanded");
            }
            writer.RenderBeginTag(HtmlTextWriterTag.A);
            writer.Write(Text);
            writer.RenderEndTag();

            writer.RenderEndTag();

            writer.RenderBeginTag(HtmlTextWriterTag.Fieldset);

            RenderChildren(writer);

            writer.RenderEndTag();
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="Expanded">
          <declaration><![CDATA[public bool Expanded]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="30" sc="32" el="30" ec="36">UI\WebControls\DnnFormPanel.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="30" sc="37" el="30" ec="41">UI\WebControls\DnnFormPanel.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Text">
          <declaration><![CDATA[public string Text]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="32" sc="30" el="32" ec="34">UI\WebControls\DnnFormPanel.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="32" sc="35" el="32" ec="39">UI\WebControls\DnnFormPanel.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnFormPasswordItem">
      <declaration><![CDATA[public class DnnFormPasswordItem : DnnFormItemBase]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnFormPasswordItem()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="CreateControlInternal">
          <declaration><![CDATA[protected override WebControl CreateControlInternal(Control container)]]></declaration>
          <documentation>
            <summary>
 Use container to add custom control hierarchy to
 </summary>
 <param name="container"></param>
 <returns>An "input" control that can be used for attaching validators</returns></documentation>
          <codeblock>
            <location sl="75" sc="9" el="96" ec="10">UI\WebControls\DnnFormPasswordItem.cs</location>
            <body hash="cf502800a1f5e9907bfb26c5712132fb"><![CDATA[{
            _password = new TextBox()
            {
                ID = ID + "_TextBox",
                TextMode = TextBoxMode.Password,
                CssClass = TextBoxCssClass,
                MaxLength = 39, //ensure password cannot be cut if too long
                Text = Convert.ToString(Value) // Load from ControlState
            };
            _password.Attributes.Add("autocomplete", "off");
            _password.TextChanged += TextChanged;

            var passwordContainer = new Panel() { ID = "passwordContainer", CssClass = ContainerCssClass };

            // add control hierarchy to the container
            container.Controls.Add(passwordContainer);

            passwordContainer.Controls.Add(_password);

            // return input control that can be used for validation
            return _password;
        }]]></body>
          </codeblock>
        </method>
        <method name="OnInit">
          <declaration><![CDATA[protected override void OnInit(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="99" sc="9" el="108" ec="10">UI\WebControls\DnnFormPasswordItem.cs</location>
            <body hash="04278191a6083b8e6ad3bcba94d1e542"><![CDATA[{
            base.OnInit(e);
            ClientResourceManager.RegisterScript(Page, "~/Resources/Shared/scripts/dnn.jquery.extensions.js");
            ClientResourceManager.RegisterScript(Page, "~/Resources/Shared/scripts/dnn.jquery.tooltip.js");
            ClientResourceManager.RegisterScript(Page, "~/Resources/Shared/scripts/dnn.PasswordStrength.js");

			ClientResourceManager.RegisterStyleSheet(Page, "~/Resources/Shared/stylesheets/dnn.PasswordStrength.css", FileOrder.Css.ResourceCss);

            JavaScript.RequestRegistration(CommonJs.DnnPlugins);
        }]]></body>
          </codeblock>
        </method>
        <method name="OnPreRender">
          <declaration><![CDATA[protected override void OnPreRender(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="111" sc="9" el="129" ec="10">UI\WebControls\DnnFormPasswordItem.cs</location>
            <body hash="4033a52e108f869e0e439f2f5baa23b5"><![CDATA[{
            base.OnPreRender(e);

            var options = new DnnPaswordStrengthOptions();
            var optionsAsJsonString = Json.Serialize(options);
            var script = string.Format("dnn.initializePasswordStrength('.{0}', {1});{2}",
                TextBoxCssClass, optionsAsJsonString, Environment.NewLine);

            if (ScriptManager.GetCurrent(Page) != null)
            {
                // respect MS AJAX
                ScriptManager.RegisterStartupScript(Page, GetType(), "PasswordStrength", script, true);
            }
            else
            {
                Page.ClientScript.RegisterStartupScript(GetType(), "PasswordStrength", script, true);
            }

        }]]></body>
          </codeblock>
        </method>
        <method name="TextChanged">
          <declaration><![CDATA[private void TextChanged(object sender, EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="65" sc="9" el="67" ec="10">UI\WebControls\DnnFormPasswordItem.cs</location>
            <body hash="cd1775e87bbf2b13b41b730d73036ee0"><![CDATA[{
            UpdateDataSource(Value, _password.Text, DataField);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_password">
          <declaration><![CDATA[private TextBox _password;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="ContainerCssClass">
          <declaration><![CDATA[public string ContainerCssClass]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="55" sc="13" el="57" ec="14">UI\WebControls\DnnFormPasswordItem.cs</location>
            <body hash="921875825b32faf921b3d6d720aba444"><![CDATA[{
                return ViewState.GetValue("ContainerCssClass", string.Empty);
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="59" sc="13" el="61" ec="14">UI\WebControls\DnnFormPasswordItem.cs</location>
            <body hash="f5e6354b3664dbfe57e55612ff2b236a"><![CDATA[{
                ViewState.SetValue("ContainerCssClass", value, string.Empty);
            }]]></body>
          </codeblock>
        </property>
        <property name="TextBoxCssClass">
          <declaration><![CDATA[public string TextBoxCssClass]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="43" sc="13" el="45" ec="14">UI\WebControls\DnnFormPasswordItem.cs</location>
            <body hash="a737e7fd349a196fff7a4f36d812ff60"><![CDATA[{
                return ViewState.GetValue("TextBoxCssClass", string.Empty);
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="47" sc="13" el="49" ec="14">UI\WebControls\DnnFormPasswordItem.cs</location>
            <body hash="430b818f7c68f4b2236ed269c41e6bff"><![CDATA[{
                ViewState.SetValue("TextBoxCssClass", value, string.Empty);
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnFormRadioButtonListItem">
      <declaration><![CDATA[public class DnnFormRadioButtonListItem : DnnFormListItemBase]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnFormRadioButtonListItem()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="BindList">
          <declaration><![CDATA[protected override void BindList()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="37" sc="9" el="77" ec="10">UI\WebControls\DnnFormRadioButtonListItem.cs</location>
            <body hash="50f1a23ac1dc975b910ed1b9af9777bf"><![CDATA[{
            if (_radioButtonList != null)
            {
                string selectedValue = !_radioButtonList.Page.IsPostBack ? Convert.ToString(Value) : _radioButtonList.Page.Request.Form[_radioButtonList.UniqueID];

                if (ListSource is Dictionary<string, string>)
                {
                    var items = ListSource as Dictionary<string, string>;
                    foreach (var item in items)
                    {
                        var listItem = new ListItem(item.Key, item.Value);
                        listItem.Attributes.Add("onClick", OnClientClicked);

                        _radioButtonList.Items.Add(listItem);
                    }
                }
                else
                {
                    _radioButtonList.DataTextField = ListTextField;
                    _radioButtonList.DataValueField = ListValueField;
                    _radioButtonList.DataSource = ListSource;

                    _radioButtonList.DataBind();
                }
                if (String.IsNullOrEmpty(selectedValue))
                {
                    selectedValue = DefaultValue;
                }

                //Reset SelectedValue
                if (_radioButtonList.Items.FindByValue(selectedValue) != null)
                {
                    _radioButtonList.Items.FindByValue(selectedValue).Selected = true;
                }

                if (selectedValue != Convert.ToString(Value))
                {
                    UpdateDataSource(Value, selectedValue, DataField);
                }
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="CreateControlInternal">
          <declaration><![CDATA[protected override WebControl CreateControlInternal(Control container)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="80" sc="9" el="91" ec="10">UI\WebControls\DnnFormRadioButtonListItem.cs</location>
            <body hash="7f92767d8679b00b8044ba6b846c7b90"><![CDATA[{
            _radioButtonList = new RadioButtonList  { ID = ID + "_RadioButtonList", RepeatColumns = 1, RepeatDirection = RepeatDirection.Vertical, RepeatLayout = RepeatLayout.Flow};

            container.Controls.Add(_radioButtonList);

            if (ListSource != null)
            {
                BindList();
            }

            return _radioButtonList;
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_radioButtonList">
          <declaration><![CDATA[private RadioButtonList _radioButtonList;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnFormSection">
      <declaration><![CDATA[public class DnnFormSection : WebControl, INamingContainer]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnFormSection()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="35" sc="9" el="38" ec="10">UI\WebControls\DnnFormSection.cs</location>
            <body hash="a3065e5ed6b493eb9cac05da42ada2dc"><![CDATA[public DnnFormSection()
        {
            Items = new List<DnnFormItemBase>();
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="Expanded">
          <declaration><![CDATA[public bool Expanded]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="40" sc="32" el="40" ec="36">UI\WebControls\DnnFormSection.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="40" sc="37" el="40" ec="41">UI\WebControls\DnnFormSection.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Items">
          <declaration><![CDATA[public List<DnnFormItemBase> Items]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="43" sc="46" el="43" ec="50">UI\WebControls\DnnFormSection.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="43" sc="51" el="43" ec="63">UI\WebControls\DnnFormSection.cs</location>
            <body hash="5dbe2cc086ebbf5db6b03610487cca4c"><![CDATA[private set]]></body>
          </codeblock>
        </property>
        <property name="ResourceKey">
          <declaration><![CDATA[public string ResourceKey]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="45" sc="37" el="45" ec="41">UI\WebControls\DnnFormSection.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="45" sc="42" el="45" ec="46">UI\WebControls\DnnFormSection.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnFormSectionTemplate">
      <declaration><![CDATA[internal class DnnFormSectionTemplate : ITemplate]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnFormSectionTemplate()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="33" sc="9" el="36" ec="10">UI\WebControls\DnnFormSectionTemplate.cs</location>
            <body hash="04c50d926cfe06fc7622c5bdb1a1d546"><![CDATA[public DnnFormSectionTemplate()
        {
            Items = new List<DnnFormItemBase>();
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="InstantiateIn">
          <declaration><![CDATA[public void InstantiateIn(Control container)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="45" sc="9" el="51" ec="10">UI\WebControls\DnnFormSectionTemplate.cs</location>
            <body hash="361e13ed1d79a7263433e6301371499c"><![CDATA[{
            var webControl = container as WebControl;
            if (webControl != null)
            {
                DnnFormEditor.SetUpItems(Items, webControl, LocalResourceFile, false);
            }
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="Items">
          <declaration><![CDATA[public List<DnnFormItemBase> Items]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="38" sc="46" el="38" ec="50">UI\WebControls\DnnFormSectionTemplate.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="38" sc="51" el="38" ec="63">UI\WebControls\DnnFormSectionTemplate.cs</location>
            <body hash="5dbe2cc086ebbf5db6b03610487cca4c"><![CDATA[private set]]></body>
          </codeblock>
        </property>
        <property name="LocalResourceFile">
          <declaration><![CDATA[public string LocalResourceFile]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="40" sc="43" el="40" ec="47">UI\WebControls\DnnFormSectionTemplate.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="40" sc="48" el="40" ec="52">UI\WebControls\DnnFormSectionTemplate.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnFormTab">
      <declaration><![CDATA[public class DnnFormTab : WebControl, INamingContainer]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnFormTab()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="35" sc="9" el="39" ec="10">UI\WebControls\DnnFormTab.cs</location>
            <body hash="3fdc99311f90e9dc91d72ca0794325b6"><![CDATA[public DnnFormTab()
        {
            Sections = new List<DnnFormSection>();
            Items = new List<DnnFormItemBase>();
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="ExpandAllScript">
          <declaration><![CDATA[internal string ExpandAllScript]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="43" sc="43" el="43" ec="47">UI\WebControls\DnnFormTab.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="43" sc="48" el="43" ec="52">UI\WebControls\DnnFormTab.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="IncludeExpandAll">
          <declaration><![CDATA[public bool IncludeExpandAll]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="41" sc="40" el="41" ec="44">UI\WebControls\DnnFormTab.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="41" sc="45" el="41" ec="49">UI\WebControls\DnnFormTab.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Items">
          <declaration><![CDATA[public List<DnnFormItemBase> Items]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="46" sc="46" el="46" ec="50">UI\WebControls\DnnFormTab.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="46" sc="51" el="46" ec="63">UI\WebControls\DnnFormTab.cs</location>
            <body hash="5dbe2cc086ebbf5db6b03610487cca4c"><![CDATA[private set]]></body>
          </codeblock>
        </property>
        <property name="ResourceKey">
          <declaration><![CDATA[public string ResourceKey]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="51" sc="37" el="51" ec="41">UI\WebControls\DnnFormTab.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="51" sc="42" el="51" ec="46">UI\WebControls\DnnFormTab.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Sections">
          <declaration><![CDATA[public List<DnnFormSection> Sections]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="49" sc="48" el="49" ec="52">UI\WebControls\DnnFormTab.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="49" sc="53" el="49" ec="65">UI\WebControls\DnnFormTab.cs</location>
            <body hash="5dbe2cc086ebbf5db6b03610487cca4c"><![CDATA[private set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnFormTabStrip">
      <declaration><![CDATA[public class DnnFormTabStrip : ListControl]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnFormTabStrip()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="Render">
          <declaration><![CDATA[protected override void Render(HtmlTextWriter writer)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="31" sc="9" el="49" ec="10">UI\WebControls\DnnFormTabStrip.cs</location>
            <body hash="79c318d76e2cdb45c6e7bd0b577b29de"><![CDATA[{
            writer.AddAttribute(HtmlTextWriterAttribute.Class, CssClass);
            writer.RenderBeginTag(HtmlTextWriterTag.Ul);

            foreach (ListItem item in Items)
            {
                writer.RenderBeginTag(HtmlTextWriterTag.Li);
                
                writer.AddAttribute(HtmlTextWriterAttribute.Href, item.Value);
                writer.RenderBeginTag(HtmlTextWriterTag.A);
                writer.Write(item.Text);

                writer.RenderEndTag();

                writer.RenderEndTag();
            }

            writer.RenderEndTag();
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnFormTemplateItem">
      <declaration><![CDATA[public class DnnFormTemplateItem : DnnFormItemBase]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnFormTemplateItem()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="CreateControlHierarchy">
          <declaration><![CDATA[protected override void CreateControlHierarchy()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="38" sc="9" el="45" ec="10">UI\WebControls\DnnFormTemplateItem.cs</location>
            <body hash="91ff29dee97ca3a40f9dc178b14f6207"><![CDATA[{
            CssClass += " dnnFormItem";
            CssClass += (FormMode == DnnFormMode.Long) ? " dnnFormLong" : " dnnFormShort";

            var template = new DnnFormEmptyTemplate();
            ItemTemplate.InstantiateIn(template);
            Controls.Add(template);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="ItemTemplate">
          <declaration><![CDATA[public ITemplate ItemTemplate]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="35" sc="41" el="35" ec="45">UI\WebControls\DnnFormTemplateItem.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="35" sc="46" el="35" ec="50">UI\WebControls\DnnFormTemplateItem.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnFormTextBoxItem">
      <declaration><![CDATA[public class DnnFormTextBoxItem : DnnFormItemBase]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnFormTextBoxItem()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="CreateControlInternal">
          <declaration><![CDATA[protected override WebControl CreateControlInternal(Control container)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="70" sc="9" el="95" ec="10">UI\WebControls\DnnFormTextBoxItem.cs</location>
            <body hash="5b2f298f17f40918078514cd241c961e"><![CDATA[{

            _textBox = new TextBox { ID = ID + "_TextBox" };

            _textBox.Rows = Rows;
            _textBox.Columns = Columns;
            _textBox.TextMode = TextMode;
            _textBox.CssClass = TextBoxCssClass;
            _textBox.AutoCompleteType = AutoCompleteType;
            _textBox.TextChanged += TextChanged;

            //Load from ControlState
            _textBox.Text = Convert.ToString(Value);
            if (TextMode == TextBoxMode.Password)
            {
                _textBox.Attributes.Add("autocomplete", "off");
            }
            if (MaxLength > 0)
            {
                _textBox.MaxLength = MaxLength;
            }

            container.Controls.Add(_textBox);

            return _textBox;
        }]]></body>
          </codeblock>
        </method>
        <method name="OnPreRender">
          <declaration><![CDATA[protected override void OnPreRender(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="98" sc="9" el="105" ec="10">UI\WebControls\DnnFormTextBoxItem.cs</location>
            <body hash="dddd75d5cd2601ab07f1b8b76e3d114a"><![CDATA[{
            base.OnPreRender(e);

            if (TextMode == TextBoxMode.Password && !ClearContentInPasswordMode)
            {
                _textBox.Attributes.Add("value", Convert.ToString(Value));
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="TextChanged">
          <declaration><![CDATA[private void TextChanged(object sender, EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="65" sc="9" el="67" ec="10">UI\WebControls\DnnFormTextBoxItem.cs</location>
            <body hash="250ec58c80b3fc26d171ec6161905181"><![CDATA[{
            UpdateDataSource(Value, _textBox.Text, DataField);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_textBox">
          <declaration><![CDATA[private TextBox _textBox;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="AutoCompleteType">
          <declaration><![CDATA[public AutoCompleteType AutoCompleteType]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="37" sc="52" el="37" ec="56">UI\WebControls\DnnFormTextBoxItem.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="37" sc="57" el="37" ec="61">UI\WebControls\DnnFormTextBoxItem.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="ClearContentInPasswordMode">
          <declaration><![CDATA[public bool ClearContentInPasswordMode]]></declaration>
          <documentation>
            <summary>
 do not output field's value after post back when text mode set to password mode.
 </summary>
          </documentation>
          <codeblock>
            <location sl="62" sc="47" el="62" ec="51">UI\WebControls\DnnFormTextBoxItem.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="62" sc="52" el="62" ec="56">UI\WebControls\DnnFormTextBoxItem.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Columns">
          <declaration><![CDATA[public int Columns]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="41" sc="30" el="41" ec="34">UI\WebControls\DnnFormTextBoxItem.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="41" sc="35" el="41" ec="39">UI\WebControls\DnnFormTextBoxItem.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="MaxLength">
          <declaration><![CDATA[public int MaxLength]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="39" sc="32" el="39" ec="36">UI\WebControls\DnnFormTextBoxItem.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="39" sc="37" el="39" ec="41">UI\WebControls\DnnFormTextBoxItem.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Rows">
          <declaration><![CDATA[public int Rows]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="43" sc="27" el="43" ec="31">UI\WebControls\DnnFormTextBoxItem.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="43" sc="32" el="43" ec="36">UI\WebControls\DnnFormTextBoxItem.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="TextBoxCssClass">
          <declaration><![CDATA[public string TextBoxCssClass]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="48" sc="13" el="50" ec="14">UI\WebControls\DnnFormTextBoxItem.cs</location>
            <body hash="a737e7fd349a196fff7a4f36d812ff60"><![CDATA[{
                return ViewState.GetValue("TextBoxCssClass", string.Empty);
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="52" sc="13" el="54" ec="14">UI\WebControls\DnnFormTextBoxItem.cs</location>
            <body hash="430b818f7c68f4b2236ed269c41e6bff"><![CDATA[{
                ViewState.SetValue("TextBoxCssClass", value, string.Empty);
            }]]></body>
          </codeblock>
        </property>
        <property name="TextMode">
          <declaration><![CDATA[public TextBoxMode TextMode]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="57" sc="39" el="57" ec="43">UI\WebControls\DnnFormTextBoxItem.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="57" sc="44" el="57" ec="48">UI\WebControls\DnnFormTextBoxItem.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnGenericHiddenField&lt;T&gt;">
      <declaration><![CDATA[public class DnnGenericHiddenField<T> : HiddenField where T : class, new()]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[private T _typedValue = default(T);]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="13" sc="9" el="15" ec="49">UI\WebControls\DnnGenericHiddenField.cs</location>
            <body hash="58a4e6dcd5ac833f49f92da96f64cca8"><![CDATA[private T _typedValue = null;

        private bool _isValueSerialized = false;]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="EnsureValue">
          <declaration><![CDATA[private void EnsureValue()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="70" sc="9" el="75" ec="10">UI\WebControls\DnnGenericHiddenField.cs</location>
            <body hash="2137184b277019938db89f0cce09fb8c"><![CDATA[{
            if (!_isValueSerialized)
            {
                SerializeValue();
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="LoadPostData">
          <declaration><![CDATA[protected override bool LoadPostData(string postDataKey, NameValueCollection postCollection)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="55" sc="9" el="62" ec="10">UI\WebControls\DnnGenericHiddenField.cs</location>
            <body hash="62a001c5517741c2f1c534f9821214d7"><![CDATA[{
            var controlsStateChanged = base.LoadPostData(postDataKey, postCollection);
            if (controlsStateChanged)
            {
                SetTypedValue();
            }
            return controlsStateChanged;
        }]]></body>
          </codeblock>
        </method>
        <method name="LoadViewState">
          <declaration><![CDATA[protected override void LoadViewState(object savedState)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="49" sc="9" el="52" ec="10">UI\WebControls\DnnGenericHiddenField.cs</location>
            <body hash="a79bc0d68beb0896e683b312aaa29e05"><![CDATA[{
            base.LoadViewState(savedState);
            SetTypedValue();
        }]]></body>
          </codeblock>
        </method>
        <method name="RenderControl">
          <declaration><![CDATA[public override void RenderControl(HtmlTextWriter writer)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="90" sc="9" el="93" ec="10">UI\WebControls\DnnGenericHiddenField.cs</location>
            <body hash="431199bb1352061c0898d5090f0fc352"><![CDATA[{
            EnsureValue();
            base.RenderControl(writer);
        }]]></body>
          </codeblock>
        </method>
        <method name="SaveViewState">
          <declaration><![CDATA[protected override object SaveViewState()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="43" sc="9" el="46" ec="10">UI\WebControls\DnnGenericHiddenField.cs</location>
            <body hash="0ce48c782e7aec4e8542dba05c4ae31e"><![CDATA[{
            EnsureValue();
            return base.SaveViewState();
        }]]></body>
          </codeblock>
        </method>
        <method name="SerializeValue">
          <declaration><![CDATA[private void SerializeValue()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="78" sc="9" el="81" ec="10">UI\WebControls\DnnGenericHiddenField.cs</location>
            <body hash="73ffa19d550b04878b5aad91290c2b5d"><![CDATA[{
            Value = _typedValue == null ? string.Empty : Json.Serialize(_typedValue);
            _isValueSerialized = true;
        }]]></body>
          </codeblock>
        </method>
        <method name="SetTypedValue">
          <declaration><![CDATA[private void SetTypedValue()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="65" sc="9" el="67" ec="10">UI\WebControls\DnnGenericHiddenField.cs</location>
            <body hash="9861d554f934bf048a1d86eb13daf186"><![CDATA[{
            _typedValue = string.IsNullOrEmpty(Value) ? null : Json.Deserialize<T>(Value);
        }]]></body>
          </codeblock>
        </method>
        <method name="TrackViewState">
          <declaration><![CDATA[protected override void TrackViewState()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="84" sc="9" el="87" ec="10">UI\WebControls\DnnGenericHiddenField.cs</location>
            <body hash="afa423a1e725739c53e8d44708498177"><![CDATA[{
            EnsureValue();
            base.TrackViewState();
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_isValueSerialized">
          <declaration><![CDATA[private bool _isValueSerialized = false;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_typedValue">
          <declaration><![CDATA[private T _typedValue = default(T);]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="HasValue">
          <declaration><![CDATA[public bool HasValue]]></declaration>
          <documentation>
          </documentation>
        </property>
        <property name="TypedValue">
          <declaration><![CDATA[public T TypedValue]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="19" sc="13" el="21" ec="14">UI\WebControls\DnnGenericHiddenField.cs</location>
            <body hash="ef8a82cd326eddf99a7de75bf5b96a72"><![CDATA[{
                return _typedValue;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="23" sc="13" el="26" ec="14">UI\WebControls\DnnGenericHiddenField.cs</location>
            <body hash="b9ae780d21466815a12e98cbb3a4cd24"><![CDATA[{
                _typedValue = value;
                _isValueSerialized = false;
            }]]></body>
          </codeblock>
        </property>
        <property name="TypedValueOrDefault">
          <declaration><![CDATA[public T TypedValueOrDefault]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="32" sc="13" el="34" ec="14">UI\WebControls\DnnGenericHiddenField.cs</location>
            <body hash="1c279afea0a1330605f87911e4f90837"><![CDATA[{
                return TypedValue ?? (TypedValue = new T());
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnImage">
      <declaration><![CDATA[public class DnnImage : Image]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnImage()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="OnPreRender">
          <declaration><![CDATA[protected override void OnPreRender(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="46" sc="9" el="50" ec="10">UI\WebControls\DnnImage.cs</location>
            <body hash="d88a22b60d27ebea79ff5db8c4017087"><![CDATA[{
            base.OnPreRender(e);
            if (string.IsNullOrEmpty(ImageUrl))
                ImageUrl = Entities.Icons.IconController.IconURL(IconKey, IconSize, IconStyle);            
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="IconKey">
          <declaration><![CDATA[public string IconKey]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="37" sc="33" el="37" ec="37">UI\WebControls\DnnImage.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="37" sc="38" el="37" ec="42">UI\WebControls\DnnImage.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="IconSize">
          <declaration><![CDATA[public string IconSize]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="38" sc="34" el="38" ec="38">UI\WebControls\DnnImage.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="38" sc="39" el="38" ec="43">UI\WebControls\DnnImage.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="IconStyle">
          <declaration><![CDATA[public string IconStyle]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="39" sc="35" el="39" ec="39">UI\WebControls\DnnImage.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="39" sc="40" el="39" ec="44">UI\WebControls\DnnImage.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnImageButton">
      <declaration><![CDATA[public class DnnImageButton : ImageButton]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnImageButton()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="OnPreRender">
          <declaration><![CDATA[protected override void OnPreRender(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="46" sc="9" el="50" ec="10">UI\WebControls\DnnImageButton.cs</location>
            <body hash="d88a22b60d27ebea79ff5db8c4017087"><![CDATA[{
            base.OnPreRender(e);
            if (string.IsNullOrEmpty(ImageUrl))
                ImageUrl = Entities.Icons.IconController.IconURL(IconKey, IconSize, IconStyle);            
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="IconKey">
          <declaration><![CDATA[public string IconKey]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="37" sc="33" el="37" ec="37">UI\WebControls\DnnImageButton.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="37" sc="38" el="37" ec="42">UI\WebControls\DnnImageButton.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="IconSize">
          <declaration><![CDATA[public string IconSize]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="38" sc="34" el="38" ec="38">UI\WebControls\DnnImageButton.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="38" sc="39" el="38" ec="43">UI\WebControls\DnnImageButton.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="IconStyle">
          <declaration><![CDATA[public string IconStyle]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="39" sc="35" el="39" ec="39">UI\WebControls\DnnImageButton.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="39" sc="40" el="39" ec="44">UI\WebControls\DnnImageButton.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnImageEditControl">
      <declaration><![CDATA[public class DnnImageEditControl : DnnFileEditControl]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnImageEditControl()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="28" sc="9" el="31" ec="10">UI\WebControls\DnnImageEditControl.cs</location>
            <body hash="7281d0bdaf28bcb08a213066e540cd5a"><![CDATA[public DnnImageEditControl()
        {
            FileFilter = Globals.glbImageFileTypes;
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnLabel">
      <declaration><![CDATA[public class DnnLabel : Label, ILocalizable]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[private bool _localize = true;]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="36" sc="9" el="43" ec="10">UI\WebControls\DnnLabel.cs</location>
            <body hash="7bbcf2ec1a4ca28a81255cc4410814a9"><![CDATA[private bool _localize = true;

        #region Constructors

        public DnnLabel()
        {
            CssClass = "dnnFormLabel";
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="LocalizeStrings">
          <declaration><![CDATA[public virtual void LocalizeStrings()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="80" sc="9" el="100" ec="10">UI\WebControls\DnnLabel.cs</location>
            <body hash="fddaada1c8a1167c8797266f59bbd317"><![CDATA[{
            if (Localize)
            {
                if (!string.IsNullOrEmpty(ToolTip))
                {
                    ToolTip = Localization.GetString(ToolTip, LocalResourceFile);
                }

                if (!string.IsNullOrEmpty(Text))
                {
                    var unLocalized = Text;

                    Text = Localization.GetString(unLocalized, LocalResourceFile);

                    if (string.IsNullOrEmpty(ToolTip))
                    {
                        ToolTip = Localization.GetString(unLocalized + ".ToolTip", LocalResourceFile);
                    }
                }
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="OnPreRender">
          <declaration><![CDATA[protected override void OnPreRender(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="50" sc="9" el="53" ec="10">UI\WebControls\DnnLabel.cs</location>
            <body hash="28617cbf340629c44366dabf2669a8b0"><![CDATA[{
            base.OnPreRender(e);
            LocalResourceFile = Utilities.GetLocalResourceFile(this);
        }]]></body>
          </codeblock>
        </method>
        <method name="Render">
          <declaration><![CDATA[protected override void Render(HtmlTextWriter writer)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="56" sc="9" el="59" ec="10">UI\WebControls\DnnLabel.cs</location>
            <body hash="8f3fb37b7748da233ed1fda25b8594e9"><![CDATA[{
            LocalizeStrings();
            base.Render(writer);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_localize">
          <declaration><![CDATA[private bool _localize = true;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="Localize">
          <declaration><![CDATA[public bool Localize]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="68" sc="13" el="70" ec="14">UI\WebControls\DnnLabel.cs</location>
            <body hash="345f59f8e63a50cdfdef58f0e1f36f82"><![CDATA[{
                return !DesignMode && _localize;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="72" sc="13" el="74" ec="14">UI\WebControls\DnnLabel.cs</location>
            <body hash="813e2e62bb125b8b10afa2a23aaa0b90"><![CDATA[{
                _localize = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="LocalResourceFile">
          <declaration><![CDATA[public string LocalResourceFile]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="77" sc="43" el="77" ec="47">UI\WebControls\DnnLabel.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="77" sc="48" el="77" ec="52">UI\WebControls\DnnLabel.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnLanguageLabel">
      <declaration><![CDATA[public class DnnLanguageLabel : CompositeControl, ILocalizable]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnLanguageLabel()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="46" sc="9" el="49" ec="10">UI\WebControls\DnnLanguageLabel.cs</location>
            <body hash="50dd8f405a25debcb0181df6b46912e3"><![CDATA[public DnnLanguageLabel()
        {
            Localize = true;
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="CreateChildControls">
          <declaration><![CDATA[protected override void CreateChildControls()]]></declaration>
          <documentation>-----------------------------------------------------------------------------
 <summary>
   CreateChildControls overrides the Base class's method to correctly build the
   control based on the configuration
 </summary>
 -----------------------------------------------------------------------------</documentation>
          <codeblock>
            <location sl="84" sc="9" el="100" ec="10">UI\WebControls\DnnLanguageLabel.cs</location>
            <body hash="f94a9e7913b518c02dea1aaa12402cd2"><![CDATA[{
            //First clear the controls collection
            Controls.Clear();

            _Flag = new Image {ViewStateMode = ViewStateMode.Disabled};
            Controls.Add(_Flag);

            Controls.Add(new LiteralControl("&nbsp;"));

            _Label = new Label();
            _Label.ViewStateMode = ViewStateMode.Disabled;
            Controls.Add(_Label);

            //Call base class's method

            base.CreateChildControls();
        }]]></body>
          </codeblock>
        </method>
        <method name="LocalizeStrings">
          <declaration><![CDATA[public virtual void LocalizeStrings()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="161" sc="9" el="162" ec="10">UI\WebControls\DnnLanguageLabel.cs</location>
            <body hash="539fa760ca172337a931519768c64187"><![CDATA[{
        }]]></body>
          </codeblock>
        </method>
        <method name="OnInit">
          <declaration><![CDATA[protected override void OnInit(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="72" sc="9" el="75" ec="10">UI\WebControls\DnnLanguageLabel.cs</location>
            <body hash="29e819885fcea74f96cf89993a8f3777"><![CDATA[{
            base.OnInit(e);
            LocalResourceFile = Utilities.GetLocalResourceFile(this);
        }]]></body>
          </codeblock>
        </method>
        <method name="OnPreRender">
          <declaration><![CDATA[protected override void OnPreRender(EventArgs e)]]></declaration>
          <documentation>-----------------------------------------------------------------------------
 <summary>
   OnPreRender runs just before the control is rendered
 </summary>
 -----------------------------------------------------------------------------</documentation>
          <codeblock>
            <location sl="108" sc="9" el="150" ec="10">UI\WebControls\DnnLanguageLabel.cs</location>
            <body hash="ebc1140bf0255fb8a069bc5bc21cd2aa"><![CDATA[{
            base.OnPreRender(e);

            if (string.IsNullOrEmpty(Language))
            {
                _Flag.ImageUrl = "~/images/Flags/none.gif";
            }
            else
            {
                _Flag.ImageUrl = string.Format("~/images/Flags/{0}.gif", Language);
            }

            if (DisplayType == 0)
            {
                PortalSettings _PortalSettings = PortalController.Instance.GetCurrentPortalSettings();
                string _ViewTypePersonalizationKey = "ViewType" + _PortalSettings.PortalId;
                string _ViewType = Convert.ToString(Personalization.GetProfile("LanguageDisplayMode", _ViewTypePersonalizationKey));
                switch (_ViewType)
                {
                    case "NATIVE":
                        DisplayType = CultureDropDownTypes.NativeName;
                        break;
                    case "ENGLISH":
                        DisplayType = CultureDropDownTypes.EnglishName;
                        break;
                    default:
                        DisplayType = CultureDropDownTypes.DisplayName;
                        break;
                }
            }

            string localeName = null;
            if (string.IsNullOrEmpty(Language))
            {
                localeName = Localization.GetString("NeutralCulture", Localization.GlobalResourceFile);
            }
            else
            {
                localeName = Localization.GetLocaleName(Language, DisplayType);
            }
            _Label.Text = localeName;
            _Flag.AlternateText = localeName;
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_Flag">
          <declaration><![CDATA[private Image _Flag;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_Label">
          <declaration><![CDATA[private Label _Label;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="DisplayType">
          <declaration><![CDATA[public CultureDropDownTypes DisplayType]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="53" sc="51" el="53" ec="55">UI\WebControls\DnnLanguageLabel.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="53" sc="56" el="53" ec="60">UI\WebControls\DnnLanguageLabel.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Language">
          <declaration><![CDATA[public string Language]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="58" sc="13" el="60" ec="14">UI\WebControls\DnnLanguageLabel.cs</location>
            <body hash="7c28d52e3d5e4e7264f3e71d527cb554"><![CDATA[{
                return (string) ViewState["Language"];
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="62" sc="13" el="64" ec="14">UI\WebControls\DnnLanguageLabel.cs</location>
            <body hash="82f53cb6396fdb8e725cd7822692e250"><![CDATA[{
                ViewState["Language"] = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="Localize">
          <declaration><![CDATA[public bool Localize]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="156" sc="32" el="156" ec="36">UI\WebControls\DnnLanguageLabel.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="156" sc="37" el="156" ec="41">UI\WebControls\DnnLanguageLabel.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="LocalResourceFile">
          <declaration><![CDATA[public string LocalResourceFile]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="158" sc="43" el="158" ec="47">UI\WebControls\DnnLanguageLabel.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="158" sc="48" el="158" ec="52">UI\WebControls\DnnLanguageLabel.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnLiteral">
      <declaration><![CDATA[public class DnnLiteral : Literal, ILocalizable]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[private bool _Localize = true;]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="35" sc="9" el="35" ec="39">UI\WebControls\DnnLiteral.cs</location>
            <body hash="0c5b88a2588e4ec21ecda1326463d7a0"><![CDATA[private bool _Localize = true]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="LocalizeStrings">
          <declaration><![CDATA[public virtual void LocalizeStrings()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="70" sc="9" el="78" ec="10">UI\WebControls\DnnLiteral.cs</location>
            <body hash="4eb63b654ba57819d7076e3e361a7e73"><![CDATA[{
            if ((Localize))
            {
                if ((!string.IsNullOrEmpty(Text)))
                {
                    Text = Localization.GetString(Text, LocalResourceFile);
                }
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="OnPreRender">
          <declaration><![CDATA[protected override void OnPreRender(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="40" sc="9" el="43" ec="10">UI\WebControls\DnnLiteral.cs</location>
            <body hash="28617cbf340629c44366dabf2669a8b0"><![CDATA[{
            base.OnPreRender(e);
            LocalResourceFile = Utilities.GetLocalResourceFile(this);
        }]]></body>
          </codeblock>
        </method>
        <method name="Render">
          <declaration><![CDATA[protected override void Render(HtmlTextWriter writer)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="46" sc="9" el="49" ec="10">UI\WebControls\DnnLiteral.cs</location>
            <body hash="8f3fb37b7748da233ed1fda25b8594e9"><![CDATA[{
            LocalizeStrings();
            base.Render(writer);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_Localize">
          <declaration><![CDATA[private bool _Localize = true;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="Localize">
          <declaration><![CDATA[public bool Localize]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="58" sc="13" el="60" ec="14">UI\WebControls\DnnLiteral.cs</location>
            <body hash="91fdcb757a9542c3f089e769a677bf83"><![CDATA[{
                return _Localize;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="62" sc="13" el="64" ec="14">UI\WebControls\DnnLiteral.cs</location>
            <body hash="7f442eb778feef34982862b7cb2a1f38"><![CDATA[{
                _Localize = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="LocalResourceFile">
          <declaration><![CDATA[public string LocalResourceFile]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="67" sc="43" el="67" ec="47">UI\WebControls\DnnLiteral.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="67" sc="48" el="67" ec="52">UI\WebControls\DnnLiteral.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnMemberListControl">
      <declaration><![CDATA[public class DnnMemberListControl : WebControl]]></declaration>
      <documentation>
        <summary>
 This control is used for displaying a template based list of users based upon various filter and sorting capabilities.
 </summary>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnMemberListControl()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="OnInit">
          <declaration><![CDATA[protected override void OnInit(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="153" sc="9" el="158" ec="10">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="b587f6978845da2dc9a530c02ea1471a"><![CDATA[{
            base.OnInit(e);
            
            _currentUser = UserController.Instance.GetCurrentUserInfo();
            _relationshipController = new RelationshipController();
        }]]></body>
          </codeblock>
        </method>
        <method name="Render">
          <declaration><![CDATA[protected override void Render(HtmlTextWriter writer)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="161" sc="9" el="217" ec="10">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="a81168c51cec4214b875f9210b5b66df"><![CDATA[{
            if (ItemTemplate == "") return;

            writer.Write(HeaderTemplate);

            // Filters
            if (Filters == null) Filters = new Dictionary<string, string>();
            var additionalFilters = new Dictionary<string, string>();
            additionalFilters.Add("Records", PageSize.ToString());
            additionalFilters.Add("PageIndex", PageIndex.ToString());
            additionalFilters.Add("Rowsize", RowSize.ToString());
            additionalFilters.Add("SortBy", SortBy);
            additionalFilters.Add("SortAscending", SortAscending.ToString());

            // Currently Not Used by the SPROC
            var filterUser = Filters.ContainsKey("UserId") && Filters["UserId"] != null ? new UserInfo() { UserID = int.Parse(Filters["UserId"]) } : new UserInfo() { PortalID = _currentUser.PortalID };
            var role = Filters.ContainsKey("RoleId") && Filters["RoleId"] != null ? new UserRoleInfo() { RoleID = int.Parse(Filters["RoleId"]) } : null;
            var relationship = Filters.ContainsKey("RelationshipTypeId") && Filters["RelationshipTypeId"] != null ? new RelationshipType() { RelationshipTypeId = int.Parse(Filters["RelationshipTypeId"]) } : null;
            
            foreach (var filter in Filters.Where(filter => !additionalFilters.ContainsKey(filter.Key)))
            {
                additionalFilters.Add(filter.Key, filter.Value);
            }

            var row = 0;
            var users = new DataTable();

            //users.Load(_relationshipController.GetUsersAdvancedSearch(_currentUser, filterUser, role, relationship, Filters, additionalFilters));

            if (users.Rows.Count > 0)
            {
                foreach (DataRow user in users.Rows)
                {
                    //Row Header
                    writer.Write(string.IsNullOrEmpty(AlternatingRowHeaderTemplate) || row%2 == 0 ? RowHeaderTemplate : AlternatingRowHeaderTemplate);

                    var tokenReplace = new TokenReplace();
                    var tokenKeyValues = new Dictionary<string, string>();

                    foreach (var col in user.Table.Columns.Cast<DataColumn>().Where(col => !tokenKeyValues.ContainsKey(col.ColumnName)))
                    {
                        tokenKeyValues.Add(col.ColumnName, user[col.ColumnName].ToString());
                    }

                    var listItem = string.IsNullOrEmpty(AlternatingItemTemplate) || row%2 == 0 ? ItemTemplate : AlternatingItemTemplate;
                    listItem = tokenReplace.ReplaceEnvironmentTokens(listItem, tokenKeyValues, "Member");
                    writer.Write(listItem);

                    //Row Footer
                    writer.Write(string.IsNullOrEmpty(AlternatingRowFooterTemplate) || row%2 == 0 ? RowFooterTemplate : AlternatingRowFooterTemplate);

                    row++;
                }
            }

            writer.Write(FooterTemplate);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_currentUser">
          <declaration><![CDATA[private UserInfo _currentUser;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_relationshipController">
          <declaration><![CDATA[private RelationshipController _relationshipController;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="AlternatingItemTemplate">
          <declaration><![CDATA[public string AlternatingItemTemplate]]></declaration>
          <documentation>
            <summary>
 Gets or sets the template for displaying the alternating items in a DnnMemberListControl object.
 </summary>
          </documentation>
          <codeblock>
            <location sl="90" sc="49" el="90" ec="53">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="90" sc="54" el="90" ec="58">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="AlternatingRowFooterTemplate">
          <declaration><![CDATA[public string AlternatingRowFooterTemplate]]></declaration>
          <documentation>
            <summary>
 Gets or sets the template for displaying the alternating row footers in a DnnMemberListControl object.
 </summary>
          </documentation>
          <codeblock>
            <location sl="96" sc="54" el="96" ec="58">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="96" sc="59" el="96" ec="63">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="AlternatingRowHeaderTemplate">
          <declaration><![CDATA[public string AlternatingRowHeaderTemplate]]></declaration>
          <documentation>
            <summary>
 Gets or sets the template for displaying the alternating row headers in a DnnMemberListControl object.
 </summary>
          </documentation>
          <codeblock>
            <location sl="84" sc="54" el="84" ec="58">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="84" sc="59" el="84" ec="63">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Filters">
          <declaration><![CDATA[public IDictionary<string, string> Filters]]></declaration>
          <documentation>
            <summary>
 Gets or sets the collection of filters to apply when getting the list of members.
 </summary>
 <remarks>
 Posible keys are: RoleId, RelationshipTypeId, UserId, Profile:PropertyName, FirstName, LastName, DisplayName, Username, Email.
 </remarks></documentation>
          <codeblock>
            <location sl="144" sc="54" el="144" ec="58">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="144" sc="59" el="144" ec="63">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="FooterTemplate">
          <declaration><![CDATA[public string FooterTemplate]]></declaration>
          <documentation>
            <summary>
 Gets or sets the template for displaying the footer section of a DnnMemberListControl object.
 </summary>
          </documentation>
          <codeblock>
            <location sl="102" sc="40" el="102" ec="44">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="102" sc="45" el="102" ec="49">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="HeaderTemplate">
          <declaration><![CDATA[public string HeaderTemplate]]></declaration>
          <documentation>
            <summary>
 Gets or sets the template for displaying the header section of a DnnMemberListControl object.
 </summary>
          </documentation>
          <codeblock>
            <location sl="60" sc="40" el="60" ec="44">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="60" sc="45" el="60" ec="49">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="ItemTemplate">
          <declaration><![CDATA[public string ItemTemplate]]></declaration>
          <documentation>
            <summary>
 Gets or sets the template for displaying an item in a DnnMemberListControl object.
 </summary>
          </documentation>
          <codeblock>
            <location sl="72" sc="38" el="72" ec="42">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="72" sc="43" el="72" ec="47">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="PageIndex">
          <declaration><![CDATA[public int PageIndex]]></declaration>
          <documentation>
            <summary>
 Gets or sets the index of the currently displayed page.
 </summary>
          </documentation>
          <codeblock>
            <location sl="112" sc="32" el="112" ec="36">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="112" sc="37" el="112" ec="41">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="PageSize">
          <declaration><![CDATA[public int PageSize]]></declaration>
          <documentation>
            <summary>
 Gets or sets the number of records to display on a page in a DnnMemberListControl object.
 </summary>
          </documentation>
          <codeblock>
            <location sl="118" sc="31" el="118" ec="35">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="118" sc="36" el="118" ec="40">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="RowFooterTemplate">
          <declaration><![CDATA[public string RowFooterTemplate]]></declaration>
          <documentation>
            <summary>
 Gets or sets the template for the row footer.
 </summary>
          </documentation>
          <codeblock>
            <location sl="78" sc="43" el="78" ec="47">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="78" sc="48" el="78" ec="52">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="RowHeaderTemplate">
          <declaration><![CDATA[public string RowHeaderTemplate]]></declaration>
          <documentation>
            <summary>
 Gets or sets the template for the row header.
 </summary>
          </documentation>
          <codeblock>
            <location sl="66" sc="43" el="66" ec="47">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="66" sc="48" el="66" ec="52">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="RowSize">
          <declaration><![CDATA[public int RowSize]]></declaration>
          <documentation>
            <summary>
 Gets or sets the number of items displayed on each row.
 </summary>
          </documentation>
          <codeblock>
            <location sl="124" sc="30" el="124" ec="34">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="124" sc="35" el="124" ec="39">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="SortAscending">
          <declaration><![CDATA[public bool SortAscending]]></declaration>
          <documentation>
            <summary>
 Gets or sets the sort direction
 </summary>
          </documentation>
          <codeblock>
            <location sl="136" sc="37" el="136" ec="41">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="136" sc="42" el="136" ec="46">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="SortBy">
          <declaration><![CDATA[public string SortBy]]></declaration>
          <documentation>
            <summary>
 Sets the property value to sort by.
 </summary>
          </documentation>
          <codeblock>
            <location sl="130" sc="32" el="130" ec="36">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="130" sc="37" el="130" ec="41">UI\WebControls\DnnMemberListControl.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnPageDropDownList">
      <declaration><![CDATA[public class DnnPageDropDownList : DnnDropDownList]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnPageDropDownList()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="OnInit">
          <declaration><![CDATA[protected override void OnInit(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="23" sc="9" el="35" ec="10">UI\WebControls\DnnPageDropDownList.cs</location>
            <body hash="7da6cd1d23cdc4107cec857f9b9e2480"><![CDATA[{
            base.OnInit(e);

            Roles = new List<int>();

            SelectItemDefaultText = Localization.GetString("DropDownList.SelectWebPageDefaultText", Localization.SharedResourceFile);
            Services.GetTreeMethod = "ItemListService/GetPages";
            Services.GetNodeDescendantsMethod = "ItemListService/GetPageDescendants";
            Services.SearchTreeMethod = "ItemListService/SearchPages";
            Services.GetTreeWithNodeMethod = "ItemListService/GetTreePathForPage";
            Services.ServiceRoot = "InternalServices";
            Services.SortTreeMethod = "ItemListService/SortPages";
        }]]></body>
          </codeblock>
        </method>
        <method name="OnPreRender">
          <declaration><![CDATA[protected override void OnPreRender(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="38" sc="9" el="68" ec="10">UI\WebControls\DnnPageDropDownList.cs</location>
            <body hash="dc03fc1234140c259f674690faab44e7"><![CDATA[{
            this.AddCssClass("page");
            if (InternalPortalId.HasValue)
            {
                Services.Parameters.Add("PortalId", InternalPortalId.Value.ToString(CultureInfo.InvariantCulture));
			}

			Services.Parameters.Add("includeDisabled", IncludeDisabledTabs.ToString().ToLowerInvariant());
			Services.Parameters.Add("includeAllTypes", IncludeAllTabTypes.ToString().ToLowerInvariant());
            Services.Parameters.Add("includeActive", IncludeActiveTab.ToString().ToLowerInvariant());
            Services.Parameters.Add("disabledNotSelectable", DisabledNotSelectable.ToString().ToLowerInvariant());
            Services.Parameters.Add("includeHostPages", (IncludeHostPages && UserController.Instance.GetCurrentUserInfo().IsSuperUser).ToString().ToLowerInvariant());
            Services.Parameters.Add("roles", string.Join(";", Roles.ToArray()));

            base.OnPreRender(e);

            //add the selected folder's level path so that it can expand to the selected node in client side.
            var selectedPage = SelectedPage;
            if (selectedPage != null && selectedPage.ParentId > Null.NullInteger)
            {
                var tabLevel = string.Empty;
                var parentTab = TabController.Instance.GetTab(selectedPage.ParentId, PortalId, false);
                while (parentTab != null)
                {
                    tabLevel = string.Format("{0},{1}", parentTab.TabID, tabLevel);
                    parentTab = TabController.Instance.GetTab(parentTab.ParentId, PortalId, false);
                }

                ExpandPath = tabLevel.TrimEnd(',');
            }
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="DisabledNotSelectable">
          <declaration><![CDATA[public bool DisabledNotSelectable]]></declaration>
          <documentation>
            <summary>
 Whether disabled pages are not selectable
 Please note: IncludeDisabledTabs needs also be set to true to include disabled pages
 </summary>
          </documentation>
          <codeblock>
            <location sl="74" sc="45" el="74" ec="49">UI\WebControls\DnnPageDropDownList.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="74" sc="50" el="74" ec="54">UI\WebControls\DnnPageDropDownList.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="IncludeActiveTab">
          <declaration><![CDATA[public bool IncludeActiveTab]]></declaration>
          <documentation>
            <summary>
 Whether include active page.
 </summary>
          </documentation>
          <codeblock>
            <location sl="79" sc="40" el="79" ec="44">UI\WebControls\DnnPageDropDownList.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="79" sc="45" el="79" ec="49">UI\WebControls\DnnPageDropDownList.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="IncludeAllTabTypes">
          <declaration><![CDATA[public bool IncludeAllTabTypes]]></declaration>
          <documentation>
            <summary>
 Whether include pages which tab type is not normal.
 </summary>
          </documentation>
          <codeblock>
            <location sl="89" sc="36" el="89" ec="40">UI\WebControls\DnnPageDropDownList.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="89" sc="41" el="89" ec="45">UI\WebControls\DnnPageDropDownList.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="IncludeDisabledTabs">
          <declaration><![CDATA[public bool IncludeDisabledTabs]]></declaration>
          <documentation>
            <summary>
 Whether include pages which are disabled.
 </summary>
          </documentation>
          <codeblock>
            <location sl="84" sc="37" el="84" ec="41">UI\WebControls\DnnPageDropDownList.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="84" sc="42" el="84" ec="46">UI\WebControls\DnnPageDropDownList.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="IncludeHostPages">
          <declaration><![CDATA[public bool IncludeHostPages]]></declaration>
          <documentation>
            <summary>
 Whether include Host Pages
 </summary>
          </documentation>
          <codeblock>
            <location sl="94" sc="40" el="94" ec="44">UI\WebControls\DnnPageDropDownList.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="94" sc="45" el="94" ec="49">UI\WebControls\DnnPageDropDownList.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="InternalPortalId">
          <declaration><![CDATA[private int? InternalPortalId]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="115" sc="13" el="117" ec="14">UI\WebControls\DnnPageDropDownList.cs</location>
            <body hash="a640e1702e8258d37ce76843f2f412cb"><![CDATA[{
                return ViewState.GetValue<int?>("PortalId", null);
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="119" sc="13" el="121" ec="14">UI\WebControls\DnnPageDropDownList.cs</location>
            <body hash="c28f23a33c491d4780b79f736239c2ed"><![CDATA[{
                ViewState.SetValue<int?>("PortalId", value, null);
            }]]></body>
          </codeblock>
        </property>
        <property name="PortalId">
          <declaration><![CDATA[public int PortalId]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="99" sc="13" el="105" ec="14">UI\WebControls\DnnPageDropDownList.cs</location>
            <body hash="e3aaf22d1c6f7cd1cb69cf1be5b44b2c"><![CDATA[{
                if (InternalPortalId.HasValue)
                {
                    return InternalPortalId.Value;
                }
                return PortalSettings.Current.ActiveTab.IsSuperTab ? -1 : PortalSettings.Current.PortalId;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="107" sc="13" el="109" ec="14">UI\WebControls\DnnPageDropDownList.cs</location>
            <body hash="e3bbc7be0ac02b61e547ac00f7814b68"><![CDATA[{
                InternalPortalId = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="Roles">
          <declaration><![CDATA[public IList<int> Roles]]></declaration>
          <documentation>
            <summary>
 Specific to only show tabs which have view permission on these roles.
 </summary>
          </documentation>
          <codeblock>
            <location sl="144" sc="35" el="144" ec="39">UI\WebControls\DnnPageDropDownList.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="144" sc="40" el="144" ec="44">UI\WebControls\DnnPageDropDownList.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="SelectedPage">
          <declaration><![CDATA[public TabInfo SelectedPage]]></declaration>
          <documentation>
            <summary>
 Gets the selected Page in the control, or selects the Page in the control.
 </summary>
          </documentation>
          <codeblock>
            <location sl="131" sc="13" el="134" ec="14">UI\WebControls\DnnPageDropDownList.cs</location>
            <body hash="073768b88fb9d765f2747ec38442a8d6"><![CDATA[{
                var pageId = SelectedItemValueAsInt;
                return (pageId == Null.NullInteger) ? null : TabController.Instance.GetTab(pageId, PortalId, false);
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="136" sc="13" el="138" ec="14">UI\WebControls\DnnPageDropDownList.cs</location>
            <body hash="7621ab6451f3bd969c675e34df076d30"><![CDATA[{
                SelectedItem = (value != null) ? new ListItem() { Text = value.IndentedTabName, Value = value.TabID.ToString(CultureInfo.InvariantCulture) } : null;
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnPaswordStrengthOptions">
      <declaration><![CDATA[public class DnnPaswordStrengthOptions]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnPaswordStrengthOptions()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="60" sc="9" el="80" ec="10">UI\WebControls\DnnPaswordStrengthOptions.cs</location>
            <body hash="83edb5196ef4f0ea81b966b7d025c339"><![CDATA[public DnnPaswordStrengthOptions()
        {
            // all the PasswordStrength related resources are located under the Website\App_GlobalResources\WebControls.resx
            MinLengthText = Utilities.GetLocalizedString("PasswordStrengthMinLength");
            WeakText = Utilities.GetLocalizedString("PasswordStrengthWeak");
            FairText = Utilities.GetLocalizedString("PasswordStrengthFair"); ;
            StrongText = Utilities.GetLocalizedString("PasswordStrengthStrong"); ;

            CriteriaAtLeastNCharsText = Utilities.GetLocalizedString("CriteriaAtLeastNChars");
            CriteriaAtLeastNSpecialCharsText = Utilities.GetLocalizedString("CriteriaAtLeastNSpecialChars");
            CriteriaValidationExpressionText = Utilities.GetLocalizedString("CriteriaValidationExpression");
            
			PasswordRulesHeadText = Utilities.GetLocalizedString("PasswordRulesHeadText");

            WeakColor = "#ed1e24";
            FairColor = "#f6d50a";
            StrongColor = "#69bd44";

            LabelCss = "min-length-text";
            MeterCss = "meter";
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="OnSerializing">
          <declaration><![CDATA[public void OnSerializing(StreamingContext context)]]></declaration>
          <documentation>
            <summary>
 To avoid fetching data from the database in constructor, the OnSerializing method is consumed
 </summary>
 <param name="context"></param></documentation>
          <codeblock>
            <location sl="88" sc="9" el="100" ec="10">UI\WebControls\DnnPaswordStrengthOptions.cs</location>
            <body hash="cbeaf304738a7716a8aec0c9b42ec8a7"><![CDATA[{
            int portalId = (PortalController.Instance.GetCurrentPortalSettings()) != null ? (PortalController.Instance.GetCurrentPortalSettings().PortalId) : -1;
            var settings = new MembershipPasswordSettings(portalId);

            MinLength = settings.MinPasswordLength;
            CriteriaAtLeastNCharsText = string.Format(CriteriaAtLeastNCharsText, MinLength);

            MinNumberOfSpecialChars = settings.MinNonAlphanumericCharacters;
            CriteriaAtLeastNSpecialCharsText = string.Format(CriteriaAtLeastNSpecialCharsText, MinNumberOfSpecialChars);

            ValidationExpression = settings.ValidationExpression;
            CriteriaValidationExpressionText = string.Format(CriteriaValidationExpressionText, ValidationExpression);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="CriteriaAtLeastNCharsText">
          <declaration><![CDATA[public string CriteriaAtLeastNCharsText;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="CriteriaAtLeastNSpecialCharsText">
          <declaration><![CDATA[public string CriteriaAtLeastNSpecialCharsText;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="CriteriaValidationExpressionText">
          <declaration><![CDATA[public string CriteriaValidationExpressionText;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="FairColor">
          <declaration><![CDATA[public string FairColor;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="FairText">
          <declaration><![CDATA[public string FairText;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="LabelCss">
          <declaration><![CDATA[public string LabelCss;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="MeterCss">
          <declaration><![CDATA[public string MeterCss;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="MinLength">
          <declaration><![CDATA[public int MinLength;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="MinLengthText">
          <declaration><![CDATA[public string MinLengthText;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="MinNumberOfSpecialChars">
          <declaration><![CDATA[public int MinNumberOfSpecialChars;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="PasswordRulesHeadText">
          <declaration><![CDATA[public string PasswordRulesHeadText;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="StrongColor">
          <declaration><![CDATA[public string StrongColor;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="StrongText">
          <declaration><![CDATA[public string StrongText;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ValidationExpression">
          <declaration><![CDATA[public string ValidationExpression;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="WeakColor">
          <declaration><![CDATA[public string WeakColor;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="WeakText">
          <declaration><![CDATA[public string WeakText;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnPortalPageDropDownList">
      <declaration><![CDATA[public class DnnPortalPageDropDownList : DnnDropDownList]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnPortalPageDropDownList()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="18" sc="9" el="18" ec="152">UI\WebControls\DnnPortalPageDropDownList.cs</location>
            <body hash="605b688258f18dd9b24176a58d0311f3"><![CDATA[private readonly Lazy<int> _portalId = new Lazy<int>(() => PortalSettings.Current.ActiveTab.IsSuperTab ? -1 : PortalSettings.Current.PortalId)]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="OnInit">
          <declaration><![CDATA[protected override void OnInit(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="21" sc="9" el="31" ec="10">UI\WebControls\DnnPortalPageDropDownList.cs</location>
            <body hash="7165184677c213081726119407adbe6d"><![CDATA[{
            base.OnInit(e);

            SelectItemDefaultText = Localization.GetString("DropDownList.SelectWebPageDefaultText", Localization.SharedResourceFile);
            Services.GetTreeMethod = "ItemListService/GetPagesInPortalGroup";
            Services.GetNodeDescendantsMethod = "ItemListService/GetPageDescendantsInPortalGroup";
            Services.SearchTreeMethod = "ItemListService/SearchPagesInPortalGroup";
            Services.GetTreeWithNodeMethod = "ItemListService/GetTreePathForPageInPortalGroup";
            Services.SortTreeMethod = "ItemListService/SortPagesInPortalGroup";
            Services.ServiceRoot = "InternalServices";
        }]]></body>
          </codeblock>
        </method>
        <method name="OnPreRender">
          <declaration><![CDATA[protected override void OnPreRender(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="34" sc="9" el="37" ec="10">UI\WebControls\DnnPortalPageDropDownList.cs</location>
            <body hash="d8e9d8d390c110045361babefca47622"><![CDATA[{
            this.AddCssClass("page");
            base.OnPreRender(e);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_portalId">
          <declaration><![CDATA[private readonly Lazy<int> _portalId;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="SelectedPage">
          <declaration><![CDATA[public TabInfo SelectedPage]]></declaration>
          <documentation>
            <summary>
 Gets the selected Page in the control, or selects the Page in the control.
 </summary>
          </documentation>
          <codeblock>
            <location sl="46" sc="13" el="49" ec="14">UI\WebControls\DnnPortalPageDropDownList.cs</location>
            <body hash="02aa1c2c463ad45371a782fb6c66d576"><![CDATA[{
                var pageId = SelectedItemValueAsInt;
                return (pageId == Null.NullInteger) ? null : TabController.Instance.GetTab(pageId, _portalId.Value, false);
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="51" sc="13" el="53" ec="14">UI\WebControls\DnnPortalPageDropDownList.cs</location>
            <body hash="7621ab6451f3bd969c675e34df076d30"><![CDATA[{
                SelectedItem = (value != null) ? new ListItem() { Text = value.IndentedTabName, Value = value.TabID.ToString(CultureInfo.InvariantCulture) } : null;
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnRadioButton">
      <declaration><![CDATA[public class DnnRadioButton : RadioButton, ILocalizable]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[private bool _Localize = true;]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="35" sc="9" el="42" ec="10">UI\WebControls\DnnRadioButton.cs</location>
            <body hash="46578f72cd024153174eee39f5e15e5b"><![CDATA[private bool _Localize = true;

        #region "Constructors"

        public DnnRadioButton()
        {
            CssClass = "SubHead dnnLabel";
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="LocalizeStrings">
          <declaration><![CDATA[public virtual void LocalizeStrings()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="79" sc="9" el="97" ec="10">UI\WebControls\DnnRadioButton.cs</location>
            <body hash="80b4175751a148f83bb243e6fbd8b536"><![CDATA[{
            if ((Localize))
            {
                if ((!string.IsNullOrEmpty(ToolTip)))
                {
                    ToolTip = Localization.GetString(ToolTip, LocalResourceFile);
                }

                if ((!string.IsNullOrEmpty(Text)))
                {
                    Text = Localization.GetString(Text, LocalResourceFile);

                    if ((string.IsNullOrEmpty(ToolTip)))
                    {
                        ToolTip = Localization.GetString(Text + ".ToolTip", LocalResourceFile);
                    }
                }
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="OnPreRender">
          <declaration><![CDATA[protected override void OnPreRender(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="49" sc="9" el="52" ec="10">UI\WebControls\DnnRadioButton.cs</location>
            <body hash="28617cbf340629c44366dabf2669a8b0"><![CDATA[{
            base.OnPreRender(e);
            LocalResourceFile = Utilities.GetLocalResourceFile(this);
        }]]></body>
          </codeblock>
        </method>
        <method name="Render">
          <declaration><![CDATA[protected override void Render(HtmlTextWriter writer)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="55" sc="9" el="58" ec="10">UI\WebControls\DnnRadioButton.cs</location>
            <body hash="8f3fb37b7748da233ed1fda25b8594e9"><![CDATA[{
            LocalizeStrings();
            base.Render(writer);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_Localize">
          <declaration><![CDATA[private bool _Localize = true;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="Localize">
          <declaration><![CDATA[public bool Localize]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="67" sc="13" el="69" ec="14">UI\WebControls\DnnRadioButton.cs</location>
            <body hash="91fdcb757a9542c3f089e769a677bf83"><![CDATA[{
                return _Localize;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="71" sc="13" el="73" ec="14">UI\WebControls\DnnRadioButton.cs</location>
            <body hash="7f442eb778feef34982862b7cb2a1f38"><![CDATA[{
                _Localize = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="LocalResourceFile">
          <declaration><![CDATA[public string LocalResourceFile]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="76" sc="43" el="76" ec="47">UI\WebControls\DnnRadioButton.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="76" sc="48" el="76" ec="52">UI\WebControls\DnnRadioButton.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnRibbonBar">
      <declaration><![CDATA[public class DnnRibbonBar : WebControl]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnRibbonBar() : base("div")]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="36" sc="33" el="41" ec="10">UI\WebControls\DnnRibbonBar.cs</location>
            <body hash="39a53719c016f6d916796c89a8200297"><![CDATA[base("div")
        {
            CssClass = "dnnRibbon";
            Control control = this;
            Utilities.ApplySkin(control, "", "RibbonBar", "RibbonBar");
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="AddParsedSubObject">
          <declaration><![CDATA[protected override void AddParsedSubObject(object obj)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="53" sc="9" el="62" ec="10">UI\WebControls\DnnRibbonBar.cs</location>
            <body hash="774e63265e432a94a32c3621b7338399"><![CDATA[{
            if (obj is DnnRibbonBarGroup)
            {
                base.AddParsedSubObject(obj);
            }
            else
            {
                throw new NotSupportedException("DnnRibbonBarGroupCollection must contain controls of type DnnRibbonBarGroup");
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="CreateControlCollection">
          <declaration><![CDATA[protected override ControlCollection CreateControlCollection()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="65" sc="9" el="67" ec="10">UI\WebControls\DnnRibbonBar.cs</location>
            <body hash="578a48d9b7b848a1274c4bd906b563dc"><![CDATA[{
            return new DnnRibbonBarGroupCollection(this);
        }]]></body>
          </codeblock>
        </method>
        <method name="OnPreRender">
          <declaration><![CDATA[protected override void OnPreRender(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="70" sc="9" el="76" ec="10">UI\WebControls\DnnRibbonBar.cs</location>
            <body hash="ed717ebdb9ea49f9303dc7646f5a65a8"><![CDATA[{
            base.OnPreRender(e);
            if (Visible)
            {
                Utilities.ApplySkin(this, "", "RibbonBar", "RibbonBar");
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="Render">
          <declaration><![CDATA[protected override void Render(HtmlTextWriter writer)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="79" sc="9" el="124" ec="10">UI\WebControls\DnnRibbonBar.cs</location>
            <body hash="7dfc4fa682bbb16b844851857f8a5122"><![CDATA[{
            if ((Groups.Count > 0))
            {
                Groups[0].CssClass = Groups[0].CssClass + " " + Groups[0].CssClass.Trim() + "First";
                Groups[Groups.Count - 1].CssClass = Groups[Groups.Count - 1].CssClass + " " + Groups[Groups.Count - 1].CssClass.Trim() + "Last";
            }

            base.RenderBeginTag(writer);

            writer.AddAttribute("class", "barContent");
            writer.RenderBeginTag("div");

            writer.AddAttribute("cellpadding", "0");
            writer.AddAttribute("cellspacing", "0");
            writer.AddAttribute("border", "0");
            writer.RenderBeginTag("table");
            writer.RenderBeginTag("tr");

            foreach (DnnRibbonBarGroup grp in Groups)
            {
                if ((grp.Visible))
                {
                    writer.RenderBeginTag("td");
                    grp.RenderControl(writer);
                    writer.RenderEndTag();
                }
            }
            //MyBase.RenderChildren(writer)

            writer.RenderEndTag();
            //tr
            writer.RenderEndTag();
            //table
            writer.RenderEndTag();
            //div

            writer.AddAttribute("class", "barBottomLeft");
            writer.RenderBeginTag("div");
            writer.RenderEndTag();

            writer.AddAttribute("class", "barBottomRight");
            writer.RenderBeginTag("div");
            writer.RenderEndTag();

            base.RenderEndTag(writer);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="Groups">
          <declaration><![CDATA[public DnnRibbonBarGroupCollection Groups]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="47" sc="13" el="49" ec="14">UI\WebControls\DnnRibbonBar.cs</location>
            <body hash="ab9e71c46059543482239cd678ad9e46"><![CDATA[{
                return (DnnRibbonBarGroupCollection) Controls;
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnRibbonBarGroup">
      <declaration><![CDATA[public class DnnRibbonBarGroup : WebControl]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[private bool _CheckToolVisibility = true;]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="34" sc="9" el="40" ec="10">UI\WebControls\DnnRibbonBarGroup.cs</location>
            <body hash="f225f35c50848193e710544966a59bde"><![CDATA[private bool _CheckToolVisibility = true;
        private HtmlGenericControl _contentContainer;

        public DnnRibbonBarGroup() : base("div")
        {
            CssClass = "dnnRibbonGroup";
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="AreChildToolsVisible">
          <declaration><![CDATA[private bool AreChildToolsVisible(ref ControlCollection children, ref bool foundTool)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="121" sc="9" el="155" ec="10">UI\WebControls\DnnRibbonBarGroup.cs</location>
            <body hash="4cfb9e57126f03adc501b97ddce282a4"><![CDATA[{
            bool returnValue = false;

            foreach (Control ctrl in children)
            {
                if ((ctrl is IDnnRibbonBarTool))
                {
                    foundTool = true;
                    if ((ctrl.Visible))
                    {
                        returnValue = true;
                        break;
                    }
                }
                else
                {
                    ControlCollection controls = ctrl.Controls;
                    if ((AreChildToolsVisible(ref controls, ref foundTool)))
                    {
                        if ((foundTool))
                        {
                            returnValue = true;
                            break;
                        }
                    }
                }
            }

            if ((!foundTool))
            {
                return true;
            }

            return returnValue;
        }]]></body>
          </codeblock>
        </method>
        <method name="CheckVisibility">
          <declaration><![CDATA[private bool CheckVisibility()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="108" sc="9" el="118" ec="10">UI\WebControls\DnnRibbonBarGroup.cs</location>
            <body hash="69ff2646c0ba740ce96c38e6f427936f"><![CDATA[{
            bool returnValue = true;
            if ((Visible && CheckToolVisibility))
            {
                //Hide group if all tools are invisible
                bool foundTool = false;
                ControlCollection controls = _contentContainer.Controls;
                returnValue = AreChildToolsVisible(ref controls, ref foundTool);
            }
            return returnValue;
        }]]></body>
          </codeblock>
        </method>
        <method name="CreateChildControls">
          <declaration><![CDATA[protected override void CreateChildControls()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="70" sc="9" el="105" ec="10">UI\WebControls\DnnRibbonBarGroup.cs</location>
            <body hash="b80432a45ce188c70f9fe598478c299f"><![CDATA[{
            Controls.Clear();

            HtmlGenericControl topLeft = new HtmlGenericControl("div");
            topLeft.Attributes.Add("class", "topLeft");
            HtmlGenericControl topRight = new HtmlGenericControl("div");
            topRight.Attributes.Add("class", "topRight");

            HtmlGenericControl bottomLeft = new HtmlGenericControl("div");
            bottomLeft.Attributes.Add("class", "bottomLeft");
            HtmlGenericControl bottomRight = new HtmlGenericControl("div");
            bottomRight.Attributes.Add("class", "bottomRight");

            _contentContainer = new HtmlGenericControl("div");
            _contentContainer.Attributes.Add("class", "content");

            HtmlGenericControl footerContainer = new HtmlGenericControl("div");
            footerContainer.Attributes.Add("class", "footer");

            Controls.Add(topLeft);
            Controls.Add(topRight);
            Controls.Add(_contentContainer);
            Controls.Add(footerContainer);
            Controls.Add(bottomLeft);
            Controls.Add(bottomRight);

            if (Content != null)
            {
                Content.InstantiateIn(_contentContainer);
            }

            if (Footer != null)
            {
                Footer.InstantiateIn(footerContainer);
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="FindControl">
          <declaration><![CDATA[public override Control FindControl(string id)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="158" sc="9" el="161" ec="10">UI\WebControls\DnnRibbonBarGroup.cs</location>
            <body hash="44e97ba0ead7c2d29dd09b98fae3d80e"><![CDATA[{
            EnsureChildControls();
            return base.FindControl(id);
        }]]></body>
          </codeblock>
        </method>
        <method name="RenderControl">
          <declaration><![CDATA[public override void RenderControl(HtmlTextWriter writer)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="164" sc="9" el="171" ec="10">UI\WebControls\DnnRibbonBarGroup.cs</location>
            <body hash="49c08133651038e93cdaf513c8562100"><![CDATA[{
            if ((CheckVisibility()))
            {
                base.RenderBeginTag(writer);
                base.RenderChildren(writer);
                base.RenderEndTag(writer);
            }
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_CheckToolVisibility">
          <declaration><![CDATA[private bool _CheckToolVisibility = true;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_contentContainer">
          <declaration><![CDATA[private HtmlGenericControl _contentContainer;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="CheckToolVisibility">
          <declaration><![CDATA[public virtual bool CheckToolVisibility]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="60" sc="13" el="62" ec="14">UI\WebControls\DnnRibbonBarGroup.cs</location>
            <body hash="5acb6c36e4891e67bd1b2a7a70805def"><![CDATA[{
                return _CheckToolVisibility;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="64" sc="13" el="66" ec="14">UI\WebControls\DnnRibbonBarGroup.cs</location>
            <body hash="9702a5322b606f8fc8aad3387292036b"><![CDATA[{
                _CheckToolVisibility = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="Content">
          <declaration><![CDATA[public virtual ITemplate Content]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="55" sc="44" el="55" ec="48">UI\WebControls\DnnRibbonBarGroup.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="55" sc="49" el="55" ec="53">UI\WebControls\DnnRibbonBarGroup.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Controls">
          <declaration><![CDATA[public override ControlCollection Controls]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="45" sc="13" el="48" ec="14">UI\WebControls\DnnRibbonBarGroup.cs</location>
            <body hash="9454f31a88317c388a43ae1cd4816179"><![CDATA[{
                EnsureChildControls();
                return base.Controls;
            }]]></body>
          </codeblock>
        </property>
        <property name="Footer">
          <declaration><![CDATA[public virtual ITemplate Footer]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="52" sc="43" el="52" ec="47">UI\WebControls\DnnRibbonBarGroup.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="52" sc="48" el="52" ec="52">UI\WebControls\DnnRibbonBarGroup.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnRibbonBarGroupCollection">
      <declaration><![CDATA[public class DnnRibbonBarGroupCollection : ControlCollection]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnRibbonBarGroupCollection(Control owner) : base(owner)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="33" sc="61" el="35" ec="10">UI\WebControls\DnnRibbonBarGroupCollection.cs</location>
            <body hash="6bc9b76184c2536df13db4ccf49ad071"><![CDATA[base(owner)
        {
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="Add">
          <declaration><![CDATA[public override void Add(Control child)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="46" sc="9" el="55" ec="10">UI\WebControls\DnnRibbonBarGroupCollection.cs</location>
            <body hash="5d435bea41b0716b7a5a9712371ca281"><![CDATA[{
            if (child is DnnRibbonBarGroup)
            {
                base.Add(child);
            }
            else
            {
                throw new ArgumentException("DnnRibbonBarGroupCollection must contain controls of type DnnRibbonBarGroup");
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="AddAt">
          <declaration><![CDATA[public override void AddAt(int index, Control child)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="58" sc="9" el="67" ec="10">UI\WebControls\DnnRibbonBarGroupCollection.cs</location>
            <body hash="fed1d29f58e67bd86c33010641caf9ec"><![CDATA[{
            if (child is DnnRibbonBarGroup)
            {
                base.AddAt(index, child);
            }
            else
            {
                throw new ArgumentException("DnnRibbonBarGroupCollection must contain controls of type DnnRibbonBarGroup");
            }
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="Item">
          <declaration><![CDATA[public new DnnRibbonBarGroup this[int index]]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="40" sc="13" el="42" ec="14">UI\WebControls\DnnRibbonBarGroupCollection.cs</location>
            <body hash="78d34cff270a28936bf61c84eda7f8e5"><![CDATA[{
                return (DnnRibbonBarGroup) base[index];
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnRibbonBarTool">
      <declaration><![CDATA[public class DnnRibbonBarTool : Control, IDnnRibbonBarTool]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnRibbonBarTool()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="ActiveTabHasChildren">
          <declaration><![CDATA[protected virtual bool ActiveTabHasChildren()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="580" sc="9" el="589" ec="10">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="62e6f6fffe758536e47b804deccbc55d"><![CDATA[{
            var children = TabController.GetTabsByParent(PortalSettings.ActiveTab.TabID, PortalSettings.ActiveTab.PortalID);

            if (((children == null) || children.Count < 1))
            {
                return false;
            }

            return true;
        }]]></body>
          </codeblock>
        </method>
        <method name="BuildToolUrl">
          <declaration><![CDATA[protected virtual string BuildToolUrl()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="455" sc="9" el="512" ec="10">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="c5386e886c5f01bed3c905b50eedaf13"><![CDATA[{
            if ((ToolInfo.IsHostTool && !UserController.Instance.GetCurrentUserInfo().IsSuperUser))
            {
                return "javascript:void(0);";
            }

            if ((!string.IsNullOrEmpty(NavigateUrl)))
            {
                return NavigateUrl;
            }

            string returnValue = "javascript:void(0);";
            switch (ToolInfo.ToolName)
            {
                case "PageSettings":
                    returnValue = TestableGlobals.Instance.NavigateURL(PortalSettings.ActiveTab.TabID, "Tab", "action=edit");
                    break;

                case "CopyPage":
                    returnValue = TestableGlobals.Instance.NavigateURL(PortalSettings.ActiveTab.TabID, "Tab", "action=copy");
                    break;

                case "DeletePage":
                    returnValue = TestableGlobals.Instance.NavigateURL(PortalSettings.ActiveTab.TabID, "Tab", "action=delete");
                    break;

                case "ImportPage":
                    returnValue = TestableGlobals.Instance.NavigateURL(PortalSettings.ActiveTab.TabID, "ImportTab");
                    break;

                case "ExportPage":
                    returnValue = Globals.NavigateURL(PortalSettings.ActiveTab.TabID, "ExportTab");
                    break;

                case "NewPage":
                    returnValue = TestableGlobals.Instance.NavigateURL("Tab");
                    break;
                case "Help":
                    if (!string.IsNullOrEmpty(Host.HelpURL))
                    {
                        var version = Globals.FormatVersion(DotNetNukeContext.Current.Application.Version, false);
                        returnValue = TestableGlobals.Instance.FormatHelpUrl(Host.HelpURL, PortalSettings, "Home", version);
                    }
                    break;
				case "UploadFile":
				case "HostUploadFile":
                    returnValue = TestableGlobals.Instance.NavigateURL(PortalSettings.ActiveTab.TabID, "WebUpload");
                    break;
                default:
                    if ((!string.IsNullOrEmpty(ToolInfo.ModuleFriendlyName)))
                    {
                        var additionalParams = new List<string>();
                        returnValue = GetTabURL(additionalParams);
                    }
                    break;
            }
            return returnValue;
        }]]></body>
          </codeblock>
        </method>
        <method name="ClearCache">
          <declaration><![CDATA[protected virtual void ClearCache()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="602" sc="9" el="604" ec="10">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="5f0bd3b2efc0a68cc835fd9e9250607a"><![CDATA[{
            DataCache.ClearCache();
        }]]></body>
          </codeblock>
        </method>
        <method name="ControlPanelTool_OnClick">
          <declaration><![CDATA[public virtual void ControlPanelTool_OnClick(object sender, EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="229" sc="9" el="269" ec="10">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="384613a1f09c06abb50075e2937d3536"><![CDATA[{
            switch (ToolInfo.ToolName)
            {
                case "DeletePage":
                    if ((HasToolPermissions("DeletePage")))
                    {
                        string url = TestableGlobals.Instance.NavigateURL(PortalSettings.ActiveTab.TabID, "Tab", "action=delete");
                        Page.Response.Redirect(url, true);                        
                    }
                    break;
                case "CopyPermissionsToChildren":
                    if ((HasToolPermissions("CopyPermissionsToChildren")))
                    {
                        TabController.CopyPermissionsToChildren(PortalSettings.ActiveTab, PortalSettings.ActiveTab.TabPermissions);
                        Page.Response.Redirect(Page.Request.RawUrl);
                    }
                    break;
                case "CopyDesignToChildren":
                    if ((HasToolPermissions("CopyDesignToChildren")))
                    {
                        TabController.CopyDesignToChildren(PortalSettings.ActiveTab, PortalSettings.ActiveTab.SkinSrc, PortalSettings.ActiveTab.ContainerSrc);
                        Page.Response.Redirect(Page.Request.RawUrl);
                    }
                    break;
                case "ClearCache":
                    if ((HasToolPermissions("ClearCache")))
                    {
                        ClearCache();
						ClientResourceManager.ClearCache();
                        Page.Response.Redirect(Page.Request.RawUrl);
                    }
                    break;
                case "RecycleApp":
                    if ((HasToolPermissions("RecycleApp")))
                    {
                        RestartApplication();
                        Page.Response.Redirect(Page.Request.RawUrl);
                    }
                    break;
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="CreateChildControls">
          <declaration><![CDATA[protected override void CreateChildControls()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="209" sc="9" el="213" ec="10">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="22dd5dd0a58611843d6118dbd2e64efc"><![CDATA[{
            Controls.Clear();
            Controls.Add(DnnLinkButton);
            Controls.Add(DnnLink);
        }]]></body>
          </codeblock>
        </method>
        <method name="EnableTool">
          <declaration><![CDATA[protected virtual bool EnableTool()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="338" sc="9" el="363" ec="10">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="beb3ae277d9cb43adddad0bfd0adf1d7"><![CDATA[{
            bool returnValue = true;

            switch (ToolInfo.ToolName)
            {
                case "DeletePage":
                    if ((TabController.IsSpecialTab(TabController.CurrentPage.TabID, PortalSettings.PortalId)))
                    {
                        returnValue = false;
                    }
                    break;
                case "CopyDesignToChildren":
                case "CopyPermissionsToChildren":
                    returnValue = ActiveTabHasChildren();
                    if ((returnValue && ToolInfo.ToolName == "CopyPermissionsToChildren"))
                    {
                        if ((PortalSettings.ActiveTab.IsSuperTab))
                        {
                            returnValue = false;
                        }
                    }
                    break;
            }

            return returnValue;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetInstalledModule">
          <declaration><![CDATA[private static ModuleInfo GetInstalledModule(int portalID, string friendlyName)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="597" sc="9" el="599" ec="10">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="803b04722d82ee49170039a0586e3240"><![CDATA[{
            return ModuleController.Instance.GetModuleByDefinition(portalID, friendlyName);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetString">
          <declaration><![CDATA[protected virtual string GetString(string key)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="592" sc="9" el="594" ec="10">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="4277045a320cdbb39d4c12e7db60f567"><![CDATA[{
            return Utilities.GetLocalizedStringFromParent(key, this);
        }]]></body>
          </codeblock>
        </method>
        <method name="GetTabURL">
          <declaration><![CDATA[protected virtual string GetTabURL(List<string> additionalParams)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="548" sc="9" el="577" ec="10">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="f139e57fac99dad3f2fa94d992c2f256"><![CDATA[{
            int portalId = (ToolInfo.IsHostTool) ? Null.NullInteger : PortalSettings.PortalId;

            string strURL = string.Empty;

            if (((additionalParams == null)))
            {
                additionalParams = new List<string>();
            }

            var moduleInfo = ModuleController.Instance.GetModuleByDefinition(portalId, ToolInfo.ModuleFriendlyName);

            if (((moduleInfo != null)))
            {
                bool isHostPage = (portalId == Null.NullInteger);
                if ((!string.IsNullOrEmpty(ToolInfo.ControlKey)))
                {
                    additionalParams.Insert(0, "mid=" + moduleInfo.ModuleID);
                    if (ToolInfo.ShowAsPopUp && PortalSettings.EnablePopUps)
                    {
                        additionalParams.Add("popUp=true");
                    }
                }

                string currentCulture = Thread.CurrentThread.CurrentCulture.Name;
                strURL = Globals.NavigateURL(moduleInfo.TabID, isHostPage, PortalSettings, ToolInfo.ControlKey, currentCulture, additionalParams.ToArray());
            }

            return strURL;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetText">
          <declaration><![CDATA[protected virtual string GetText()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="515" sc="9" el="522" ec="10">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="9e2e3a0655ab5fb0c0401b5e18e2b3ca"><![CDATA[{
            if ((string.IsNullOrEmpty(Text)))
            {
                return GetString(string.Format("Tool.{0}.Text", ToolInfo.ToolName));
            }

            return Text;
        }]]></body>
          </codeblock>
        </method>
        <method name="GetToolTip">
          <declaration><![CDATA[protected virtual string GetToolTip()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="525" sc="9" el="545" ec="10">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="3a3b771f25978f37a3e04bee85cc41f9"><![CDATA[{
            if ((ToolInfo.ToolName == "DeletePage"))
            {
                if ((TabController.IsSpecialTab(TabController.CurrentPage.TabID, PortalSettings.PortalId)))
                {
                    return GetString("Tool.DeletePage.Special.ToolTip");
                }
            }

            if ((string.IsNullOrEmpty(Text)))
            {
                string tip = GetString(string.Format("Tool.{0}.ToolTip", ToolInfo.ToolName));
                if ((string.IsNullOrEmpty(tip)))
                {
                    tip = GetString(string.Format("Tool.{0}.Text", ToolInfo.ToolName));
                }
                return tip;
            }

            return ToolTip;
        }]]></body>
          </codeblock>
        </method>
        <method name="HasToolPermissions">
          <declaration><![CDATA[protected virtual bool HasToolPermissions(string toolName)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="366" sc="9" el="452" ec="10">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="c51edd784813349e93002193471049b5"><![CDATA[{
            bool isHostTool = false;
            if ((ToolInfo.ToolName == toolName))
            {
                isHostTool = ToolInfo.IsHostTool;
            }
            else if ((AllTools.ContainsKey(toolName)))
            {
                isHostTool = AllTools[toolName].IsHostTool;
            }

            if ((isHostTool && !UserController.Instance.GetCurrentUserInfo().IsSuperUser))
            {
                return false;
            }

            bool returnValue = true;
            switch (toolName)
            {
                case "PageSettings":
                case "CopyDesignToChildren":
                case "CopyPermissionsToChildren":
                    returnValue = TabPermissionController.CanManagePage();

                    if ((returnValue && toolName == "CopyPermissionsToChildren"))
                    {
                        if ((!PortalSecurity.IsInRole("Administrators")))
                        {
                            returnValue = false;
                        }
                    }
                    break;
                case "CopyPage":
                    returnValue = TabPermissionController.CanCopyPage();
                    break;
                case "DeletePage":
                    returnValue = (TabPermissionController.CanDeletePage());
                    break;
                case "ImportPage":
                    returnValue = TabPermissionController.CanImportPage();
                    break;
                case "ExportPage":
                    returnValue = TabPermissionController.CanExportPage();
                    break;
                case "NewPage":
                    returnValue = TabPermissionController.CanAddPage();
                    break;
                case "Help":
                    returnValue = !string.IsNullOrEmpty(Host.HelpURL);
                    break;
                default:
                    //if it has a module definition, look it up and check permissions
                    //if it doesn't exist, assume no permission
                    string friendlyName = "";
                    if ((ToolInfo.ToolName == toolName))
                    {
                        friendlyName = ToolInfo.ModuleFriendlyName;
                    }
                    else if ((AllTools.ContainsKey(toolName)))
                    {
                        friendlyName = AllTools[toolName].ModuleFriendlyName;
                    }

                    if ((!string.IsNullOrEmpty(friendlyName)))
                    {
                        returnValue = false;
                        ModuleInfo moduleInfo;

                        if ((isHostTool))
                        {
                            moduleInfo = GetInstalledModule(Null.NullInteger, friendlyName);
                        }
                        else
                        {
                            moduleInfo = GetInstalledModule(PortalSettings.PortalId, friendlyName);
                        }

                        if ((moduleInfo != null))
                        {
                            returnValue = ModulePermissionController.CanViewModule(moduleInfo);
                        }
                    }
                    break;
            }

            return returnValue;
        }]]></body>
          </codeblock>
        </method>
        <method name="OnInit">
          <declaration><![CDATA[protected override void OnInit(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="216" sc="9" el="219" ec="10">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="e264b281544f534fa242c180875cedab"><![CDATA[{
            EnsureChildControls();
            DnnLinkButton.Click += ControlPanelTool_OnClick;
        }]]></body>
          </codeblock>
        </method>
        <method name="OnPreRender">
          <declaration><![CDATA[protected override void OnPreRender(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="222" sc="9" el="226" ec="10">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="db9783e8db9093ac3b1fa00e1ac17ef6"><![CDATA[{
            ProcessTool();
            Visible = (DnnLink.Visible || DnnLinkButton.Visible);
            base.OnPreRender(e);
        }]]></body>
          </codeblock>
        </method>
        <method name="ProcessTool">
          <declaration><![CDATA[protected virtual void ProcessTool()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="276" sc="9" el="335" ec="10">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="bb66e70d3e24bd9b502e35d8926ce6ff"><![CDATA[{
            DnnLink.Visible = false;
            DnnLinkButton.Visible = false;

            if ((!string.IsNullOrEmpty(ToolInfo.ToolName)))
            {
                if ((ToolInfo.UseButton))
                {
                    DnnLinkButton.Visible = HasToolPermissions(ToolInfo.ToolName);
                    DnnLinkButton.Enabled = EnableTool();
                    DnnLinkButton.Localize = false;

                    DnnLinkButton.CssClass = ToolCssClass;
                    DnnLinkButton.DisabledCssClass = ToolCssClass + " dnnDisabled";

                    DnnLinkButton.Text = GetText();
                    DnnLinkButton.ToolTip = GetToolTip();
                }
                else
                {
                    DnnLink.Visible = HasToolPermissions(ToolInfo.ToolName);
                    DnnLink.Enabled = EnableTool();
                    DnnLink.Localize = false;

                    if ((DnnLink.Enabled))
                    {
                        DnnLink.NavigateUrl = BuildToolUrl();

                        //can't find the page, disable it?
                        if ((string.IsNullOrEmpty(DnnLink.NavigateUrl)))
                        {
                            DnnLink.Enabled = false;
                        }
                        //create popup event 
                        else if (ToolInfo.ShowAsPopUp && PortalSettings.EnablePopUps)
                        {
                            // Prevent PageSettings in a popup if SSL is enabled and enforced, which causes redirection/javascript broswer security issues.
                            if (ToolInfo.ToolName == "PageSettings" || ToolInfo.ToolName == "CopyPage" || ToolInfo.ToolName == "NewPage")
                            {
                                if (!(PortalSettings.SSLEnabled && PortalSettings.SSLEnforced))
                                {
                                    DnnLink.Attributes.Add("onclick", "return " + UrlUtils.PopUpUrl(DnnLink.NavigateUrl, this, PortalSettings, true, false));
                                }
                            }
                            else
                            {
                                DnnLink.Attributes.Add("onclick", "return " + UrlUtils.PopUpUrl(DnnLink.NavigateUrl, this, PortalSettings, true, false));
                            }
                        }
                    }

                    DnnLink.CssClass = ToolCssClass;
                    DnnLink.DisabledCssClass = ToolCssClass + " dnnDisabled";

                    DnnLink.Text = GetText();
                    DnnLink.ToolTip = GetToolTip();
                    DnnLink.Target = ToolInfo.LinkWindowTarget;
                }
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="RestartApplication">
          <declaration><![CDATA[protected virtual void RestartApplication()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="607" sc="9" el="612" ec="10">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="14294cccbca41707d503704a5810b5d3"><![CDATA[{
            var log = new LogInfo { BypassBuffering = true, LogTypeKey = EventLogController.EventLogType.HOST_ALERT.ToString() };
            log.AddProperty("Message", GetString("UserRestart"));
            LogController.Instance.AddLog(log);
            Config.Touch();
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_allTools">
          <declaration><![CDATA[private IDictionary<string, RibbonBarToolInfo> _allTools;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_dnnLink">
          <declaration><![CDATA[private DnnTextLink _dnnLink;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_dnnLinkButton">
          <declaration><![CDATA[private DnnTextButton _dnnLinkButton;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="AllTools">
          <declaration><![CDATA[protected virtual IDictionary<string, RibbonBarToolInfo> AllTools]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="147" sc="13" el="174" ec="14">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="c43b636399dad0122b87bd3b81dd022b"><![CDATA[{
                if (_allTools == null)
                {
                    _allTools = new Dictionary<string, RibbonBarToolInfo>
                                    {
										//Framework
                                        {"PageSettings", new RibbonBarToolInfo("PageSettings", false, false, "", "", "", true)},
                                        {"CopyPage", new RibbonBarToolInfo("CopyPage", false, false, "", "", "", true)},
                                        {"DeletePage", new RibbonBarToolInfo("DeletePage", false, true, "", "", "", true)},
                                        {"ImportPage", new RibbonBarToolInfo("ImportPage", false, false, "", "", "", true)},
                                        {"ExportPage", new RibbonBarToolInfo("ExportPage", false, false, "", "", "", true)},
                                        {"NewPage", new RibbonBarToolInfo("NewPage", false, false, "", "", "", true)},
                                        {"CopyPermissionsToChildren", new RibbonBarToolInfo("CopyPermissionsToChildren", false, true, "", "", "", false)},
                                        {"CopyDesignToChildren", new RibbonBarToolInfo("CopyDesignToChildren", false, true, "", "", "", false)},
                                        {"Help", new RibbonBarToolInfo("Help", false, false, "_Blank", "", "", false)},
										//Modules On Tabs
                                        {"Console", new RibbonBarToolInfo("Console", false, false, "", "Console", "", false)},
                                        {"HostConsole", new RibbonBarToolInfo("HostConsole", true, false, "", "Console", "", false)},
                                        {"UploadFile", new RibbonBarToolInfo("UploadFile", false, false, "", "", "WebUpload", true)},
                                        {"NewRole", new RibbonBarToolInfo("NewRole", false, false, "", "Security Roles", "Edit", true)},
                                        {"NewUser", new RibbonBarToolInfo("NewUser", false, false, "", "User Accounts", "Edit", true)},
                                        {"ClearCache", new RibbonBarToolInfo("ClearCache", true, true, "", "", "", false)},
                                        {"RecycleApp", new RibbonBarToolInfo("RecycleApp", true, true, "", "", "", false)}
                                    };
                }

                return _allTools;
            }]]></body>
          </codeblock>
        </property>
        <property name="DnnLink">
          <declaration><![CDATA[protected virtual DnnTextLink DnnLink]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="135" sc="13" el="141" ec="14">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="382fea3c4440f505ccaf937b05d89fad"><![CDATA[{
                if ((_dnnLink == null))
                {
                    _dnnLink = new DnnTextLink();
                }
                return _dnnLink;
            }]]></body>
          </codeblock>
        </property>
        <property name="DnnLinkButton">
          <declaration><![CDATA[protected virtual DnnTextButton DnnLinkButton]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="122" sc="13" el="129" ec="14">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="c3c24cac06f982cba4436c18162cab95"><![CDATA[{
                if ((_dnnLinkButton == null))
                {
                    // Appending _CPCommandBtn is also assumed in the RibbonBar.ascx. If changed, one would need to change in both places.
                    _dnnLinkButton = new DnnTextButton {ID = ID + "_CPCommandBtn"};
                }
                return _dnnLinkButton;
            }]]></body>
          </codeblock>
        </property>
        <property name="NavigateUrl">
          <declaration><![CDATA[public virtual string NavigateUrl]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="74" sc="13" el="76" ec="14">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="8122209c5490f0ddd3fd3cec2f1f2954"><![CDATA[{
                return Utilities.GetViewStateAsString(ViewState["NavigateUrl"], Null.NullString);
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="78" sc="13" el="80" ec="14">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="8a4255dd2b4d3a4f94a8a417749c7e06"><![CDATA[{
                ViewState["NavigateUrl"] = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="PortalSettings">
          <declaration><![CDATA[private static PortalSettings PortalSettings]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="180" sc="13" el="182" ec="14">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="de88f44ddad615520ed6ac528455cb0e"><![CDATA[{
                return PortalSettings.Current;
            }]]></body>
          </codeblock>
        </property>
        <property name="Text">
          <declaration><![CDATA[public virtual string Text]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="98" sc="13" el="100" ec="14">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="8bb825650bd6f5461b38e8c5e397228c"><![CDATA[{
                return Utilities.GetViewStateAsString(ViewState["Text"], Null.NullString);
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="102" sc="13" el="104" ec="14">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="dc9e6c53e4f7e25ad23eda57795e9e26"><![CDATA[{
                ViewState["Text"] = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="ToolCssClass">
          <declaration><![CDATA[public virtual string ToolCssClass]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="86" sc="13" el="88" ec="14">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="e7969a1c76375bb5c7f26e351fcacd4a"><![CDATA[{
                return Utilities.GetViewStateAsString(ViewState["ToolCssClass"], Null.NullString);
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="90" sc="13" el="92" ec="14">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="b067d16409e22ad748808d88622c12b0"><![CDATA[{
                ViewState["ToolCssClass"] = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="ToolInfo">
          <declaration><![CDATA[public virtual RibbonBarToolInfo ToolInfo]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="58" sc="13" el="64" ec="14">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="39cce92882a271ce28a1cf6bd713cf65"><![CDATA[{
                if ((ViewState["ToolInfo"] == null))
                {
                    ViewState.Add("ToolInfo", new RibbonBarToolInfo());
                }
                return (RibbonBarToolInfo) ViewState["ToolInfo"];
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="66" sc="13" el="68" ec="14">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="291f64aea89a792183f42c9ec1edb950"><![CDATA[{
                ViewState["ToolInfo"] = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="ToolName">
          <declaration><![CDATA[public virtual string ToolName]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="188" sc="13" el="190" ec="14">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="0cb2cced6797e623d58ef3c77a8462e7"><![CDATA[{
                return ToolInfo.ToolName;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="192" sc="13" el="201" ec="14">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="49f861b227dbeb6d89c9c1cafb1ad7f4"><![CDATA[{
                if ((AllTools.ContainsKey(value)))
                {
                    ToolInfo = AllTools[value];
                }
                else
                {
                    throw new NotSupportedException("Tool not found [" + value + "]");
                }
            }]]></body>
          </codeblock>
        </property>
        <property name="ToolTip">
          <declaration><![CDATA[public virtual string ToolTip]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="110" sc="13" el="112" ec="14">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="32810e100f54c3a510b8241573643091"><![CDATA[{
                return Utilities.GetViewStateAsString(ViewState["ToolTip"], Null.NullString);
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="114" sc="13" el="116" ec="14">UI\WebControls\DnnRibbonBarTool.cs</location>
            <body hash="5b1868ce4ba7dcacd4779c4ef001966f"><![CDATA[{
                ViewState["ToolTip"] = value;
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnTab">
      <declaration><![CDATA[public class DnnTab : WebControl]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnTab() : base("div")]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="33" sc="27" el="35" ec="10">UI\WebControls\DnnTab.cs</location>
            <body hash="58fa1f39805545e464c6f31bcafd1a52"><![CDATA[base("div")
        {
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="CreateChildControls">
          <declaration><![CDATA[protected override void CreateChildControls()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="53" sc="9" el="60" ec="10">UI\WebControls\DnnTab.cs</location>
            <body hash="2a35a30bb4bea202ee7767100158c3ec"><![CDATA[{
            Controls.Clear();

            if (Content != null)
            {
                Content.InstantiateIn(this);
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="FindControl">
          <declaration><![CDATA[public override Control FindControl(string id)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="63" sc="9" el="66" ec="10">UI\WebControls\DnnTab.cs</location>
            <body hash="44e97ba0ead7c2d29dd09b98fae3d80e"><![CDATA[{
            EnsureChildControls();
            return base.FindControl(id);
        }]]></body>
          </codeblock>
        </method>
        <method name="Render">
          <declaration><![CDATA[protected override void Render(HtmlTextWriter writer)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="69" sc="9" el="73" ec="10">UI\WebControls\DnnTab.cs</location>
            <body hash="f7131c131222e8daf71ca07df7f00d79"><![CDATA[{
            base.RenderBeginTag(writer);
            base.RenderChildren(writer);
            base.RenderEndTag(writer);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="Content">
          <declaration><![CDATA[public virtual ITemplate Content]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="50" sc="44" el="50" ec="48">UI\WebControls\DnnTab.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="50" sc="49" el="50" ec="53">UI\WebControls\DnnTab.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Controls">
          <declaration><![CDATA[public override ControlCollection Controls]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="40" sc="13" el="43" ec="14">UI\WebControls\DnnTab.cs</location>
            <body hash="9454f31a88317c388a43ae1cd4816179"><![CDATA[{
                EnsureChildControls();
                return base.Controls;
            }]]></body>
          </codeblock>
        </property>
        <property name="Header">
          <declaration><![CDATA[public virtual ITemplate Header]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="47" sc="43" el="47" ec="47">UI\WebControls\DnnTab.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="47" sc="48" el="47" ec="52">UI\WebControls\DnnTab.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnTabCollection">
      <declaration><![CDATA[public class DnnTabCollection : ControlCollection]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnTabCollection(Control owner) : base(owner)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="33" sc="50" el="35" ec="10">UI\WebControls\DnnTabCollection.cs</location>
            <body hash="6bc9b76184c2536df13db4ccf49ad071"><![CDATA[base(owner)
        {
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="Add">
          <declaration><![CDATA[public override void Add(Control child)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="46" sc="9" el="55" ec="10">UI\WebControls\DnnTabCollection.cs</location>
            <body hash="a1496e6a5f071e41edb83c45ee3de82e"><![CDATA[{
            if (child is DnnTab)
            {
                base.Add(child);
            }
            else
            {
                throw new ArgumentException("DnnTabCollection must contain controls of type DnnTab");
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="AddAt">
          <declaration><![CDATA[public override void AddAt(int index, Control child)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="58" sc="9" el="67" ec="10">UI\WebControls\DnnTabCollection.cs</location>
            <body hash="b8fd1e4fbdad362539b6ef8cd57591cb"><![CDATA[{
            if (child is DnnTab)
            {
                base.AddAt(index, child);
            }
            else
            {
                throw new ArgumentException("DnnTabCollection must contain controls of type DnnTab");
            }
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="Item">
          <declaration><![CDATA[public new DnnTab this[int index]]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="40" sc="13" el="42" ec="14">UI\WebControls\DnnTabCollection.cs</location>
            <body hash="82ab19357768001a90d6c45caa2905c3"><![CDATA[{
                return (DnnTab) base[index];
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnTextButton">
      <declaration><![CDATA[public class DnnTextButton : LinkButton, ILocalizable]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[private bool _localize = true;]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="35" sc="9" el="35" ec="39">UI\WebControls\DnnTextButton.cs</location>
            <body hash="b24348cd5aa4ddf90f133e03dabe85ad"><![CDATA[private bool _localize = true]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="LocalizeStrings">
          <declaration><![CDATA[public virtual void LocalizeStrings()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="140" sc="9" el="163" ec="10">UI\WebControls\DnnTextButton.cs</location>
            <body hash="2d86c0e922f2df1b72054dd71a32b2b9"><![CDATA[{
            if ((Localize))
            {
                if ((!string.IsNullOrEmpty(ToolTip)))
                {
                    ToolTip = Localization.GetString(ToolTip, LocalResourceFile);
                }

                if ((!string.IsNullOrEmpty(Text)))
                {
                    Text = Localization.GetString(Text, LocalResourceFile);

                    if ((string.IsNullOrEmpty(ToolTip)))
                    {
                        ToolTip = Localization.GetString(string.Format("{0}.ToolTip", Text), LocalResourceFile);
                    }

                    if ((string.IsNullOrEmpty(ToolTip)))
                    {
                        ToolTip = Text;
                    }
                }
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="OnPreRender">
          <declaration><![CDATA[protected override void OnPreRender(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="106" sc="9" el="110" ec="10">UI\WebControls\DnnTextButton.cs</location>
            <body hash="dacd2a41c6652d610a14cc67d79cb667"><![CDATA[{
            base.OnPreRender(e);

            LocalResourceFile = Utilities.GetLocalResourceFile(this);
        }]]></body>
          </codeblock>
        </method>
        <method name="Render">
          <declaration><![CDATA[protected override void Render(HtmlTextWriter writer)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="113" sc="9" el="121" ec="10">UI\WebControls\DnnTextButton.cs</location>
            <body hash="7605cdbc506db17516392245239b6f27"><![CDATA[{
            LocalizeStrings();
            if (!Enabled && !string.IsNullOrEmpty(DisabledCssClass))
            {
                CssClass = DisabledCssClass;
            }
            writer.AddAttribute("class", CssClass.Trim());
            base.Render(writer);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_localize">
          <declaration><![CDATA[private bool _localize = true;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="ConfirmMessage">
          <declaration><![CDATA[public string ConfirmMessage]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="46" sc="13" el="48" ec="14">UI\WebControls\DnnTextButton.cs</location>
            <body hash="b3f60faf7acd2cf7514e70aca3206345"><![CDATA[{
                return ViewState["ConfirmMessage"] == null ? string.Empty : (string) ViewState["ConfirmMessage"];
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="50" sc="13" el="52" ec="14">UI\WebControls\DnnTextButton.cs</location>
            <body hash="946474c48c9cab94e54cd15fdd49b9aa"><![CDATA[{
                ViewState["ConfirmMessage"] = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="CssClass">
          <declaration><![CDATA[public override string CssClass]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="62" sc="13" el="64" ec="14">UI\WebControls\DnnTextButton.cs</location>
            <body hash="1aea95097909ff8f50733d977f49773a"><![CDATA[{
                return ViewState["CssClass"] == null ? string.Empty : (string) ViewState["CssClass"];
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="66" sc="13" el="68" ec="14">UI\WebControls\DnnTextButton.cs</location>
            <body hash="f12a5b454c270d2c3ebb9c7477ca10fe"><![CDATA[{
                ViewState["CssClass"] = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="DisabledCssClass">
          <declaration><![CDATA[public new string DisabledCssClass]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="78" sc="13" el="80" ec="14">UI\WebControls\DnnTextButton.cs</location>
            <body hash="21fde0e730c52d2cc1c09047c04a1672"><![CDATA[{
                return ViewState["DisabledCssClass"] == null ? string.Empty : (string) ViewState["DisabledCssClass"];
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="82" sc="13" el="84" ec="14">UI\WebControls\DnnTextButton.cs</location>
            <body hash="bdfc97101fa8b5551d08172d46da84a5"><![CDATA[{
                ViewState["DisabledCssClass"] = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="Localize">
          <declaration><![CDATA[public bool Localize]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="128" sc="13" el="130" ec="14">UI\WebControls\DnnTextButton.cs</location>
            <body hash="c62d334545a882a2a299f0633bdbb890"><![CDATA[{
                return _localize;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="132" sc="13" el="134" ec="14">UI\WebControls\DnnTextButton.cs</location>
            <body hash="813e2e62bb125b8b10afa2a23aaa0b90"><![CDATA[{
                _localize = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="LocalResourceFile">
          <declaration><![CDATA[public string LocalResourceFile]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="137" sc="43" el="137" ec="47">UI\WebControls\DnnTextButton.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="137" sc="48" el="137" ec="52">UI\WebControls\DnnTextButton.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Text">
          <declaration><![CDATA[public new string Text]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="94" sc="13" el="96" ec="14">UI\WebControls\DnnTextButton.cs</location>
            <body hash="761f1f706c0e9ee2adb8ff61697b55bc"><![CDATA[{
                return ViewState["Text"] == null ? string.Empty : (string) ViewState["Text"];
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="98" sc="13" el="100" ec="14">UI\WebControls\DnnTextButton.cs</location>
            <body hash="dc9e6c53e4f7e25ad23eda57795e9e26"><![CDATA[{
                ViewState["Text"] = value;
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnTextLink">
      <declaration><![CDATA[public class DnnTextLink : WebControl, ILocalizable]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[private bool _localize = true;]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="35" sc="9" el="42" ec="10">UI\WebControls\DnnTextLink.cs</location>
            <body hash="283892945a6b48cfbffeb874b01d7949"><![CDATA[private bool _localize = true;
        private HyperLink _textHyperlinkControl;

        public DnnTextLink() : base("span")
        {
            CssClass = "dnnTextLink";
            DisabledCssClass = "dnnTextLink disabled";
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="CreateChildControls">
          <declaration><![CDATA[protected override void CreateChildControls()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="137" sc="9" el="140" ec="10">UI\WebControls\DnnTextLink.cs</location>
            <body hash="b50a1009268379255b99e1fcd1a1c417"><![CDATA[{
            Controls.Clear();
            Controls.Add(TextHyperlinkControl);
        }]]></body>
          </codeblock>
        </method>
        <method name="LocalizeStrings">
          <declaration><![CDATA[public virtual void LocalizeStrings()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="187" sc="9" el="210" ec="10">UI\WebControls\DnnTextLink.cs</location>
            <body hash="2d86c0e922f2df1b72054dd71a32b2b9"><![CDATA[{
            if ((Localize))
            {
                if ((!string.IsNullOrEmpty(ToolTip)))
                {
                    ToolTip = Localization.GetString(ToolTip, LocalResourceFile);
                }

                if ((!string.IsNullOrEmpty(Text)))
                {
                    Text = Localization.GetString(Text, LocalResourceFile);

                    if ((string.IsNullOrEmpty(ToolTip)))
                    {
                        ToolTip = Localization.GetString(string.Format("{0}.ToolTip", Text), LocalResourceFile);
                    }

                    if ((string.IsNullOrEmpty(ToolTip)))
                    {
                        ToolTip = Text;
                    }
                }
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="OnPreRender">
          <declaration><![CDATA[protected override void OnPreRender(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="145" sc="9" el="148" ec="10">UI\WebControls\DnnTextLink.cs</location>
            <body hash="28617cbf340629c44366dabf2669a8b0"><![CDATA[{
            base.OnPreRender(e);
            LocalResourceFile = Utilities.GetLocalResourceFile(this);
        }]]></body>
          </codeblock>
        </method>
        <method name="Render">
          <declaration><![CDATA[protected override void Render(HtmlTextWriter writer)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="151" sc="9" el="166" ec="10">UI\WebControls\DnnTextLink.cs</location>
            <body hash="4fe4186af4a937697c8fdf26e1459881"><![CDATA[{
            LocalizeStrings();

            if ((!Enabled))
            {
                if ((!string.IsNullOrEmpty(DisabledCssClass)))
                {
                    CssClass = DisabledCssClass;
                }
                NavigateUrl = "javascript:void(0);";
            }

            base.RenderBeginTag(writer);
            base.RenderChildren(writer);
            base.RenderEndTag(writer);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_localize">
          <declaration><![CDATA[private bool _localize = true;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_textHyperlinkControl">
          <declaration><![CDATA[private HyperLink _textHyperlinkControl;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="DisabledCssClass">
          <declaration><![CDATA[public new string DisabledCssClass]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="115" sc="13" el="117" ec="14">UI\WebControls\DnnTextLink.cs</location>
            <body hash="21fde0e730c52d2cc1c09047c04a1672"><![CDATA[{
                return ViewState["DisabledCssClass"] == null ? string.Empty : (string) ViewState["DisabledCssClass"];
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="119" sc="13" el="121" ec="14">UI\WebControls\DnnTextLink.cs</location>
            <body hash="bdfc97101fa8b5551d08172d46da84a5"><![CDATA[{
                ViewState["DisabledCssClass"] = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="Localize">
          <declaration><![CDATA[public bool Localize]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="175" sc="13" el="177" ec="14">UI\WebControls\DnnTextLink.cs</location>
            <body hash="c62d334545a882a2a299f0633bdbb890"><![CDATA[{
                return _localize;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="179" sc="13" el="181" ec="14">UI\WebControls\DnnTextLink.cs</location>
            <body hash="813e2e62bb125b8b10afa2a23aaa0b90"><![CDATA[{
                _localize = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="LocalResourceFile">
          <declaration><![CDATA[public string LocalResourceFile]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="184" sc="43" el="184" ec="47">UI\WebControls\DnnTextLink.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="184" sc="48" el="184" ec="52">UI\WebControls\DnnTextLink.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="NavigateUrl">
          <declaration><![CDATA[public string NavigateUrl]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="83" sc="13" el="85" ec="14">UI\WebControls\DnnTextLink.cs</location>
            <body hash="947148f7d6169faa723bffa3d19f5492"><![CDATA[{
                return TextHyperlinkControl.NavigateUrl;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="87" sc="13" el="89" ec="14">UI\WebControls\DnnTextLink.cs</location>
            <body hash="2b7c9c1da8c85c26511ac0784ce46c32"><![CDATA[{
                TextHyperlinkControl.NavigateUrl = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="Target">
          <declaration><![CDATA[public string Target]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="99" sc="13" el="101" ec="14">UI\WebControls\DnnTextLink.cs</location>
            <body hash="51e084f9ca34a17db2cb1fa810e70f88"><![CDATA[{
                return TextHyperlinkControl.Target;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="103" sc="13" el="105" ec="14">UI\WebControls\DnnTextLink.cs</location>
            <body hash="7073559c184e118eb28c9d13b2728467"><![CDATA[{
                TextHyperlinkControl.Target = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="Text">
          <declaration><![CDATA[public string Text]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="51" sc="13" el="53" ec="14">UI\WebControls\DnnTextLink.cs</location>
            <body hash="81560eb6751c10346d3384287d09478a"><![CDATA[{
                return TextHyperlinkControl.Text;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="55" sc="13" el="57" ec="14">UI\WebControls\DnnTextLink.cs</location>
            <body hash="d9156747912a5435eb7410247b1d33e7"><![CDATA[{
                TextHyperlinkControl.Text = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="TextHyperlinkControl">
          <declaration><![CDATA[private HyperLink TextHyperlinkControl]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="127" sc="13" el="133" ec="14">UI\WebControls\DnnTextLink.cs</location>
            <body hash="4923ebbba5ba708f1d51811139fb3a84"><![CDATA[{
                if (_textHyperlinkControl == null)
                {
                    _textHyperlinkControl = new HyperLink();
                }
                return _textHyperlinkControl;
            }]]></body>
          </codeblock>
        </property>
        <property name="ToolTip">
          <declaration><![CDATA[public override string ToolTip]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="67" sc="13" el="69" ec="14">UI\WebControls\DnnTextLink.cs</location>
            <body hash="2f38a991bb466bf79ce739f247ccdffa"><![CDATA[{
                return TextHyperlinkControl.ToolTip;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="71" sc="13" el="73" ec="14">UI\WebControls\DnnTextLink.cs</location>
            <body hash="548478054a92e54a2f34322b2c5bfabc"><![CDATA[{
                TextHyperlinkControl.ToolTip = value;
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnTimeZoneComboBox">
      <declaration><![CDATA[public class DnnTimeZoneComboBox : DropDownList]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnTimeZoneComboBox()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="OnInit">
          <declaration><![CDATA[protected override void OnInit(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="35" sc="9" el="44" ec="10">UI\WebControls\DnnTimeZoneComboBox.cs</location>
            <body hash="d8e705211a5a1d4927436b6af525c40d"><![CDATA[{
            //Utilities.ApplySkin(this);
            base.OnInit(e);

            this.DataTextField = "DisplayName";
            this.DataValueField = "Id";

            this.DataSource = TimeZoneInfo.GetSystemTimeZones();
			this.DataBind();
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnTimeZoneEditControl">
      <declaration><![CDATA[public class DnnTimeZoneEditControl : TextEditControl]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnTimeZoneEditControl()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="41" sc="9" el="43" ec="10">UI\WebControls\DnnTimeZoneEditControl.cs</location>
            <body hash="886d777afafac9a819ffbac2231c4249"><![CDATA[public DnnTimeZoneEditControl()
        {
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="CreateChildControls">
          <declaration><![CDATA[protected override void CreateChildControls()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="57" sc="9" el="65" ec="10">UI\WebControls\DnnTimeZoneEditControl.cs</location>
            <body hash="881b920098ac77a1373769f9dab4ef09"><![CDATA[{
            TimeZones = new DnnTimeZoneComboBox();
            TimeZones.ViewStateMode = ViewStateMode.Disabled;

            Controls.Clear();
            Controls.Add(TimeZones);

            base.CreateChildControls();
        }]]></body>
          </codeblock>
        </method>
        <method name="LoadPostData">
          <declaration><![CDATA[public override bool LoadPostData(string postDataKey, NameValueCollection postCollection)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="68" sc="9" el="79" ec="10">UI\WebControls\DnnTimeZoneEditControl.cs</location>
            <body hash="1ebe9f216f891be4028eac484a58cf08"><![CDATA[{
            bool dataChanged = false;
            string presentValue = StringValue;
            string postedValue = TimeZones.SelectedValue;
            if (!presentValue.Equals(postedValue))
            {
                Value = postedValue;
                dataChanged = true;
            }

            return dataChanged;
        }]]></body>
          </codeblock>
        </method>
        <method name="OnDataChanged">
          <declaration><![CDATA[protected override void OnDataChanged(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="82" sc="9" el="88" ec="10">UI\WebControls\DnnTimeZoneEditControl.cs</location>
            <body hash="b6ff01999b1bf00e3aceedfd99a6732e"><![CDATA[{
            var args = new PropertyEditorEventArgs(Name);
            args.Value = TimeZoneInfo.FindSystemTimeZoneById(StringValue);
            args.OldValue = OldStringValue;
            args.StringValue = StringValue;
            base.OnValueChanged(args);
        }]]></body>
          </codeblock>
        </method>
        <method name="OnInit">
          <declaration><![CDATA[protected override void OnInit(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="91" sc="9" el="94" ec="10">UI\WebControls\DnnTimeZoneEditControl.cs</location>
            <body hash="a6b3f7009441f18a8d5494d716fe41f0"><![CDATA[{
            this.EnsureChildControls();
            base.OnInit(e);
        }]]></body>
          </codeblock>
        </method>
        <method name="OnPreRender">
          <declaration><![CDATA[protected override void OnPreRender(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="97" sc="9" el="106" ec="10">UI\WebControls\DnnTimeZoneEditControl.cs</location>
            <body hash="91f63768be336cfeaf7ce0e7d421b4dd"><![CDATA[{
            base.OnPreRender(e);

            TimeZones.DataBind(StringValue);

            if ((Page != null) && this.EditMode == PropertyEditorMode.Edit)
            {
                this.Page.RegisterRequiresPostBack(this);
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="RenderEditMode">
          <declaration><![CDATA[protected override void RenderEditMode(HtmlTextWriter writer)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="109" sc="9" el="111" ec="10">UI\WebControls\DnnTimeZoneEditControl.cs</location>
            <body hash="561efa7f9895a43a295a0e8682c946e1"><![CDATA[{
            this.RenderChildren(writer);
        }]]></body>
          </codeblock>
        </method>
        <method name="RenderViewMode">
          <declaration><![CDATA[protected override void RenderViewMode(HtmlTextWriter writer)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="114" sc="9" el="120" ec="10">UI\WebControls\DnnTimeZoneEditControl.cs</location>
            <body hash="202a96e4ec8382d019ac4d9596fed3e2"><![CDATA[{
            string propValue = this.Page.Server.HtmlDecode(Convert.ToString(this.Value));
            ControlStyle.AddAttributesToRender(writer);
            writer.RenderBeginTag(HtmlTextWriterTag.Span);
            writer.Write(propValue);
            writer.RenderEndTag();
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="TimeZones">
          <declaration><![CDATA[private DnnTimeZoneComboBox TimeZones;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="EditControlClientId">
          <declaration><![CDATA[public override string EditControlClientId]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="48" sc="7" el="51" ec="8">UI\WebControls\DnnTimeZoneEditControl.cs</location>
            <body hash="728cd8b3e388a51ec3ffed1051f10d04"><![CDATA[{
			    EnsureChildControls();
			    return TimeZones.ClientID;
		    }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnUnsortedList">
      <declaration><![CDATA[public class DnnUnsortedList : WebControl, INamingContainer]]></declaration>
      <documentation>
        <summary>
 Creates a control that renders its childs as a bulleted list.
 </summary>
 <remarks>
 Control renders an unordered list HTML contol.
 Each child control in <see cref="T:DotNetNuke.Web.UI.WebControls.DnnUnsortedList" /> is rendered as a separate list item.
 To obtain a control over list item style, add a <see cref="T:DotNetNuke.Web.UI.WebControls.DnnUnsortedListItem" /> to a controls list,
 and tune this object appropriately.
 </remarks></documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[private UniformControlCollection<DnnUnsortedList, DnnUnsortedListItem> _listItems = null;]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="19" sc="9" el="23" ec="10">UI\WebControls\DnnUnsortedList.cs</location>
            <body hash="d4dea05f1f8c04db48cf91aab37e678c"><![CDATA[private UniformControlCollection<DnnUnsortedList, DnnUnsortedListItem> _listItems = null;

        public DnnUnsortedList() : base(HtmlTextWriterTag.Ul)
        {
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="AddAttributesToRender">
          <declaration><![CDATA[protected override void AddAttributesToRender(HtmlTextWriter writer)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="40" sc="9" el="46" ec="10">UI\WebControls\DnnUnsortedList.cs</location>
            <body hash="35e175e296db70609aa0839abdacd277"><![CDATA[{
            writer.AddAttribute(HtmlTextWriterAttribute.Id, ClientID);
            if (!string.IsNullOrEmpty(CssClass))
            {
                writer.AddAttribute(HtmlTextWriterAttribute.Class, CssClass);
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="AddListItem">
          <declaration><![CDATA[public void AddListItem(params Control[] listItemControls)]]></declaration>
          <documentation>
            <summary>
 A "macro" that adds a set of controls or control as a single list item (li).  Use ListItems.Add(UnsortedListItem) method
 </summary>
 <remarks>
 All controls from the list will be rendered as a childs of a single list item.
 </remarks></documentation>
          <codeblock>
            <location sl="55" sc="9" el="59" ec="10">UI\WebControls\DnnUnsortedList.cs</location>
            <body hash="c5ee5c4dad79b9f456e06cf9c017c98a"><![CDATA[{
            var listItem = new DnnUnsortedListItem();
            listItem.AddControls(listItemControls);
            ListItems.Add(listItem);
        }]]></body>
          </codeblock>
        </method>
        <method name="CreateControlCollection">
          <declaration><![CDATA[protected sealed override ControlCollection CreateControlCollection()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="26" sc="9" el="28" ec="10">UI\WebControls\DnnUnsortedList.cs</location>
            <body hash="f078de5e36a1dfc4cd1aa6e5b3309cb9"><![CDATA[{
            return new TypedControlCollection<DnnUnsortedListItem>(this);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_listItems">
          <declaration><![CDATA[private UniformControlCollection<DnnUnsortedList, DnnUnsortedListItem> _listItems = null;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="ListItems">
          <declaration><![CDATA[public virtual UniformControlCollection<DnnUnsortedList, DnnUnsortedListItem> ListItems]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="34" sc="13" el="36" ec="14">UI\WebControls\DnnUnsortedList.cs</location>
            <body hash="afd14949ab372c167403f2b1c5a61c3c"><![CDATA[{
                return _listItems ?? (_listItems = new UniformControlCollection<DnnUnsortedList, DnnUnsortedListItem>(this));
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnUnsortedListItem">
      <declaration><![CDATA[public class DnnUnsortedListItem : WebControl]]></declaration>
      <documentation>
        <summary>
 Creates a control that render one item in a list ($lt;li&gt; control).
 </summary>
 <remarks></remarks></documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DnnUnsortedListItem() : base(HtmlTextWriterTag.Li)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="15" sc="40" el="17" ec="10">UI\WebControls\DnnUnsortedListItem.cs</location>
            <body hash="1b13b62cca74a459a5f3945060569e4a"><![CDATA[base(HtmlTextWriterTag.Li)
        {
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="AddAttributesToRender">
          <declaration><![CDATA[protected override void AddAttributesToRender(HtmlTextWriter writer)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="31" sc="9" el="41" ec="10">UI\WebControls\DnnUnsortedListItem.cs</location>
            <body hash="e4e8537f75620917706f69dbd577231f"><![CDATA[{
            writer.AddAttribute(HtmlTextWriterAttribute.Id, ClientID);
            if (!string.IsNullOrEmpty(CssClass))
            {
                writer.AddAttribute(HtmlTextWriterAttribute.Class, CssClass);
            }
            if (!string.IsNullOrEmpty(ToolTip))
            {
                writer.AddAttribute(HtmlTextWriterAttribute.Title, ToolTip);
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="AddControls">
          <declaration><![CDATA[public void AddControls(params Control[] childControls)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="20" sc="9" el="28" ec="10">UI\WebControls\DnnUnsortedListItem.cs</location>
            <body hash="d3f84c21c65bbe7f10fe548ab6188f20"><![CDATA[{
            foreach (var childControl in childControls)
            {
                if (childControl != null)
                {
                    Controls.Add(childControl);
                }
            }
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="DnnUrlControl">
      <declaration><![CDATA[public abstract class DnnUrlControl : UserControlBase]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[protected DnnUrlControl()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="cmdAdd_Click">
          <declaration><![CDATA[protected void cmdAdd_Click(object sender, EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="1057" sc="9" el="1066" ec="10">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="8c0657d17d198a4a3ee72810007f4edb"><![CDATA[{
            cboUrls.Visible = false;
            cmdSelect.Visible = true;
            txtUrl.Visible = true;
            cmdAdd.Visible = false;
            cmdDelete.Visible = false;
            _doRenderTypeControls = false; //Must not render on this postback
            _doRenderTypes = false;
            _doChangeURL = false;
        }]]></body>
          </codeblock>
        </method>
        <method name="cmdDelete_Click">
          <declaration><![CDATA[protected void cmdDelete_Click(object sender, EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="1069" sc="9" el="1079" ec="10">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="158057d1a17fecc494be3cff00f57cef"><![CDATA[{
            if (cboUrls.SelectedItem != null)
            {
                var objUrls = new UrlController();
                objUrls.DeleteUrl(_objPortal.PortalID, cboUrls.SelectedItem.Value);
                LoadUrls(); //we must reload the url list
            }
            _doRenderTypeControls = false; //Must not render on this postback
            _doRenderTypes = false;
            _doChangeURL = false;
        }]]></body>
          </codeblock>
        </method>
        <method name="cmdSelect_Click">
          <declaration><![CDATA[protected void cmdSelect_Click(object sender, EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="1082" sc="9" el="1097" ec="10">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="0e8e5e1c5581fc36cd5859e7b3aeaeeb"><![CDATA[{
            cboUrls.Visible = true;
            cmdSelect.Visible = false;
            txtUrl.Visible = false;
            cmdAdd.Visible = true;
            cmdDelete.Visible = PortalSecurity.IsInRole(_objPortal.AdministratorRoleName);
            LoadUrls();
            if (cboUrls.Items.FindByValue(txtUrl.Text) != null)
            {
                cboUrls.ClearSelection();
                cboUrls.Items.FindByValue(txtUrl.Text).Selected = true;
            }
            _doRenderTypeControls = false; //Must not render on this postback
            _doRenderTypes = false;
            _doChangeURL = false;
        }]]></body>
          </codeblock>
        </method>
        <method name="DoChangeURL">
          <declaration><![CDATA[private void DoChangeURL()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="576" sc="9" el="673" ec="10">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="a0c05a4dead85421862fd7b92e56ef52"><![CDATA[{
            string _Url = Convert.ToString(ViewState["Url"]);
            string _Urltype = Convert.ToString(ViewState["UrlType"]);
            if (!String.IsNullOrEmpty(_Url))
            {
                var objUrls = new UrlController();
                string TrackingUrl = _Url;

                _Urltype = Globals.GetURLType(_Url).ToString("g").Substring(0, 1);
                if (_Urltype == "U" && (_Url.StartsWith("~/" + PortalSettings.DefaultIconLocation, StringComparison.InvariantCultureIgnoreCase)))
                {
                    _Urltype = "I";
                }
                ViewState["UrlType"] = _Urltype;
                if (_Urltype == "F")
                {
                    if (_Url.ToLower().StartsWith("fileid="))
                    {
                        TrackingUrl = _Url;
                        var objFile = FileManager.Instance.GetFile(int.Parse(_Url.Substring(7)));
                        if (objFile != null)
                        {
                            _Url = objFile.Folder + objFile.FileName;
                        }
                    }
                    else
                    {
                        //to handle legacy scenarios before the introduction of the FileServerHandler
                        var fileName = Path.GetFileName(_Url);
                        var folderPath = _Url.Substring(0, _Url.LastIndexOf(fileName));
                        var folder = FolderManager.Instance.GetFolder(_objPortal.PortalID, folderPath);
                        var fileId = -1;
                        if (folder != null)
                        {
                            var file = FileManager.Instance.GetFile(folder, fileName);
                            if (file != null)
                            {
                                fileId = file.FileId;
                            }
                        }
                        TrackingUrl = "FileID=" + fileId.ToString();
                    }
                }
                if (_Urltype == "M")
                {
                    if (_Url.ToLower().StartsWith("userid="))
                    {
                        UserInfo objUser = UserController.GetUserById(_objPortal.PortalID, int.Parse(_Url.Substring(7)));
                        if (objUser != null)
                        {
                            _Url = objUser.Username;
                        }
                    }
                }
                UrlTrackingInfo objUrlTracking = objUrls.GetUrlTracking(_objPortal.PortalID, TrackingUrl, ModuleID);
                if (objUrlTracking != null)
                {
                    chkNewWindow.Checked = objUrlTracking.NewWindow;
                    chkTrack.Checked = objUrlTracking.TrackClicks;
                    chkLog.Checked = objUrlTracking.LogActivity;
                }
                else //the url does not exist in the tracking table
                {
                    chkTrack.Checked = false;
                    chkLog.Checked = false;
                }
                ViewState["Url"] = _Url;
            }
            else
            {
                if (!String.IsNullOrEmpty(_Urltype))
                {
                    optType.ClearSelection();
                    if (optType.Items.FindByValue(_Urltype) != null)
                    {
                        optType.Items.FindByValue(_Urltype).Selected = true;
                    }
                    else
                    {
                        optType.Items[0].Selected = true;
                    }
                }
                else
                {
                    if (optType.Items.Count > 0)
                    {
                        optType.ClearSelection();
                        optType.Items[0].Selected = true;
                    }
                }
                chkNewWindow.Checked = false; //Need check
                chkTrack.Checked = false; //Need check
                chkLog.Checked = false; //Need check
            }

            //Url type changed, then we must draw the controlos for that type
            _doRenderTypeControls = true;
        }]]></body>
          </codeblock>
        </method>
        <method name="DoCorrectRadioButtonList">
          <declaration><![CDATA[private void DoCorrectRadioButtonList()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="796" sc="9" el="822" ec="10">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="031ea01bf59e2665ed3f747bc3025218"><![CDATA[{
            string _Urltype = Convert.ToString(ViewState["UrlType"]);

            if (optType.Items.Count > 0)
            {
                optType.ClearSelection();
                if (!String.IsNullOrEmpty(_Urltype))
                {
                    if (optType.Items.FindByValue(_Urltype) != null)
                    {
                        optType.Items.FindByValue(_Urltype).Selected = true;
                    }
                    else
                    {
                        optType.Items[0].Selected = true;
                        _Urltype = optType.Items[0].Value;
                        ViewState["UrlType"] = _Urltype;
                    }
                }
                else
                {
                    optType.Items[0].Selected = true;
                    _Urltype = optType.Items[0].Value;
                    ViewState["UrlType"] = _Urltype;
                }
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="DoRenderTypeControls">
          <declaration><![CDATA[private void DoRenderTypeControls()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="825" sc="9" el="965" ec="10">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="ded74f9f754e43e7c7bb6e06208e5c37"><![CDATA[{
            string _Url = Convert.ToString(ViewState["Url"]);
            string _Urltype = Convert.ToString(ViewState["UrlType"]);
            var objUrls = new UrlController();
            if (!String.IsNullOrEmpty(_Urltype))
            {
                //load listitems
                switch (optType.SelectedItem.Value)
                {
                    case "N": //None
                        URLRow.Visible = false;
                        TabRow.Visible = false;
                        FileRow.Visible = false;
                        UserRow.Visible = false;
                        ImagesRow.Visible = false;
                        break;
                    case "I": //System Image
                        URLRow.Visible = false;
                        TabRow.Visible = false;
                        FileRow.Visible = false;
                        UserRow.Visible = false;
                        ImagesRow.Visible = true;

                        cboImages.Items.Clear();

                        string strImagesFolder = Path.Combine(Globals.ApplicationMapPath, PortalSettings.DefaultIconLocation.Replace('/', '\\'));
                        foreach (string strImage in Directory.GetFiles(strImagesFolder))
                        {
                            string img = strImage.Replace(strImagesFolder, "").Trim('/').Trim('\\');
                            cboImages.Items.Add(new ListItem(img, string.Format("~/{0}/{1}", PortalSettings.DefaultIconLocation, img).ToLower()));
                        }

                        ListItem selecteItem = cboImages.Items.FindByValue(_Url.ToLower());
                        if (selecteItem != null)
                        {
                            selecteItem.Selected = true;
                        }
                        break;

                    case "U": //Url
                        URLRow.Visible = true;
                        TabRow.Visible = false;
                        FileRow.Visible = false;
                        UserRow.Visible = false;
                        ImagesRow.Visible = false;
                        if (String.IsNullOrEmpty(txtUrl.Text))
                        {
                            txtUrl.Text = _Url;
                        }
                        if (String.IsNullOrEmpty(txtUrl.Text))
                        {
                            txtUrl.Text = "http://";
                        }
                        txtUrl.Visible = true;

                        cmdSelect.Visible = true;

                        cboUrls.Visible = false;
                        cmdAdd.Visible = false;
                        cmdDelete.Visible = false;
                        break;
                    case "T": //tab
                        URLRow.Visible = false;
                        TabRow.Visible = true;
                        FileRow.Visible = false;
                        UserRow.Visible = false;
                        ImagesRow.Visible = false;

                        cboTabs.IncludeAllTabTypes = false;
                        cboTabs.IncludeActiveTab = IncludeActiveTab;
                        cboTabs.UndefinedItem = new ListItem(DynamicSharedConstants.Unspecified, string.Empty);

                        if (!string.IsNullOrEmpty(_Url))
                        {
                            PortalSettings _settings = PortalController.Instance.GetCurrentPortalSettings();
                            var tabId = Int32.Parse(_Url);
                            var page = TabController.Instance.GetTab(tabId, _settings.PortalId);
                            cboTabs.SelectedPage = page;
                        }
                        break;
                    case "F": //file
                        URLRow.Visible = false;
                        TabRow.Visible = false;
                        FileRow.Visible = true;
                        UserRow.Visible = false;
                        ImagesRow.Visible = false;

                        //select folder
                        //We Must check if selected folder has changed because of a property change (Secure, Database)
                        string FileName = string.Empty;
                        string FolderPath = string.Empty;
                        string LastFileName = string.Empty;
                        string LastFolderPath = string.Empty;
                        //Let's try to remember last selection
                        if (ViewState["LastFolderPath"] != null)
                        {
                            LastFolderPath = Convert.ToString(ViewState["LastFolderPath"]);
                        }
                        if (ViewState["LastFileName"] != null)
                        {
                            LastFileName = Convert.ToString(ViewState["LastFileName"]);
                        }
                        if (_Url != string.Empty)
                        {
                            //Let's use the new URL
                            FileName = _Url.Substring(_Url.LastIndexOf("/") + 1);
                            FolderPath = _Url.Replace(FileName, "");
                        }
                        else
                        {
                            //Use last settings
                            FileName = LastFileName;
                            FolderPath = LastFolderPath;
                        }

                        ctlFile.FilePath = FolderPath + FileName;

                        txtUrl.Visible = false;
                        break;
                    case "M": //membership users
                        URLRow.Visible = false;
                        TabRow.Visible = false;
                        FileRow.Visible = false;
                        UserRow.Visible = true;
                        ImagesRow.Visible = false;
                        if (String.IsNullOrEmpty(txtUser.Text))
                        {
                            txtUser.Text = _Url;
                        }
                        break;
                }
            }
            else
            {
                URLRow.Visible = false;
                ImagesRow.Visible = false;
                TabRow.Visible = false;
                FileRow.Visible = false;
                UserRow.Visible = false;
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="DoRenderTypes">
          <declaration><![CDATA[private void DoRenderTypes()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="676" sc="9" el="793" ec="10">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="bf9f5e576181963468d020cb2987630f"><![CDATA[{
            //We must clear the list to keep the same item order
            string strCurrent = "";
            if (optType.SelectedIndex >= 0)
            {
                strCurrent = optType.SelectedItem.Value; //Save current selected value
            }
            optType.Items.Clear();
            if (ShowNone)
            {
                if (optType.Items.FindByValue("N") == null)
                {
                    optType.Items.Add(new ListItem(Localization.GetString("NoneType", LocalResourceFile), "N"));
                }
            }
            else
            {
                if (optType.Items.FindByValue("N") != null)
                {
                    optType.Items.Remove(optType.Items.FindByValue("N"));
                }
            }
            if (ShowUrls)
            {
                if (optType.Items.FindByValue("U") == null)
                {
                    optType.Items.Add(new ListItem(Localization.GetString("URLType", LocalResourceFile), "U"));
                }
            }
            else
            {
                if (optType.Items.FindByValue("U") != null)
                {
                    optType.Items.Remove(optType.Items.FindByValue("U"));
                }
            }
            if (ShowTabs)
            {
                if (optType.Items.FindByValue("T") == null)
                {
                    optType.Items.Add(new ListItem(Localization.GetString("TabType", LocalResourceFile), "T"));
                }
            }
            else
            {
                if (optType.Items.FindByValue("T") != null)
                {
                    optType.Items.Remove(optType.Items.FindByValue("T"));
                }
            }
            if (ShowFiles)
            {
                if (optType.Items.FindByValue("F") == null)
                {
                    optType.Items.Add(new ListItem(Localization.GetString("FileType", LocalResourceFile), "F"));
                }
            }
            else
            {
                if (optType.Items.FindByValue("F") != null)
                {
                    optType.Items.Remove(optType.Items.FindByValue("F"));
                }
            }
            if (ShowImages)
            {
                if (optType.Items.FindByValue("I") == null)
                {
                    optType.Items.Add(new ListItem(Localization.GetString("ImageType", LocalResourceFile), "I"));
                }
            }
            else
            {
                if (optType.Items.FindByValue("I") != null)
                {
                    optType.Items.Remove(optType.Items.FindByValue("I"));
                }
            }
            if (ShowUsers)
            {
                if (optType.Items.FindByValue("M") == null)
                {
                    optType.Items.Add(new ListItem(Localization.GetString("UserType", LocalResourceFile), "M"));
                }
            }
            else
            {
                if (optType.Items.FindByValue("M") != null)
                {
                    optType.Items.Remove(optType.Items.FindByValue("M"));
                }
            }
            if (optType.Items.Count > 0)
            {
                if (!String.IsNullOrEmpty(strCurrent))
                {
                    if (optType.Items.FindByValue(strCurrent) != null)
                    {
                        optType.Items.FindByValue(strCurrent).Selected = true;
                    }
                    else
                    {
                        optType.Items[0].Selected = true;
                        _doRenderTypeControls = true; //Type changed, re-draw
                    }
                }
                else
                {
                    optType.Items[0].Selected = true;
                    _doRenderTypeControls = true; //Type changed, re-draw
                }
                TypeRow.Visible = optType.Items.Count > 1;
            }
            else
            {
                TypeRow.Visible = false;
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="LoadUrls">
          <declaration><![CDATA[private void LoadUrls()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="568" sc="9" el="573" ec="10">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="3bd1f16487a2b3ee0b8a97534bb4d5ea"><![CDATA[{
            var objUrls = new UrlController();
            cboUrls.Items.Clear();
            cboUrls.DataSource = objUrls.GetUrls(_objPortal.PortalID);
            cboUrls.DataBind();
        }]]></body>
          </codeblock>
        </method>
        <method name="OnInit">
          <declaration><![CDATA[protected override void OnInit(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="972" sc="9" el="982" ec="10">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="a691bc1bcaa2799dc6c2a91caada2678"><![CDATA[{
            base.OnInit(e);

            //prevent unauthorized access
            if (Request.IsAuthenticated == false)
            {
                Visible = false;
            }

            ClientResourceManager.EnableAsyncPostBackHandler();
        }]]></body>
          </codeblock>
        </method>
        <method name="OnLoad">
          <declaration><![CDATA[protected override void OnLoad(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="985" sc="9" el="1022" ec="10">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="ddf90ba7369bfa80aa168dd8763e4c76"><![CDATA[{
            base.OnLoad(e);

            optType.SelectedIndexChanged += optType_SelectedIndexChanged;
            cmdAdd.Click += cmdAdd_Click;
            cmdDelete.Click += cmdDelete_Click;
            cmdSelect.Click += cmdSelect_Click;

            ErrorRow.Visible = false;

            try
            {
                if ((Request.QueryString["pid"] != null) && (Globals.IsHostTab(PortalSettings.ActiveTab.TabID) || UserController.Instance.GetCurrentUserInfo().IsSuperUser))
                {
                    _objPortal = PortalController.Instance.GetPortal(Int32.Parse(Request.QueryString["pid"]));
                }
                else
                {
                    _objPortal = PortalController.Instance.GetPortal(PortalSettings.PortalId);
                }
                if (ViewState["IsUrlControlLoaded"] == null)
                {
                    //If Not Page.IsPostBack Then
                    //let's make at least an initialization
                    //The type radio button must be initialized
                    //The url must be initialized no matter its value
                    _doRenderTypes = true;
                    _doChangeURL = true;
                    ClientAPI.AddButtonConfirm(cmdDelete, Localization.GetString("DeleteItem"));
                    //The following line was mover to the pre-render event to ensure render for the first time
                    //ViewState("IsUrlControlLoaded") = "Loaded"
                }
            }
            catch (Exception exc) //Module failed to load
            {
                Exceptions.ProcessModuleLoadException(this, exc);
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="OnPreRender">
          <declaration><![CDATA[protected override void OnPreRender(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="1025" sc="9" el="1054" ec="10">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="2c8d4f090aa7750a989948f78528b769"><![CDATA[{
            base.OnPreRender(e);

            try
            {
                if (_doRenderTypes)
                {
                    DoRenderTypes();
                }
                if (_doChangeURL)
                {
                    DoChangeURL();
                }
                DoCorrectRadioButtonList();

                if (_doRenderTypeControls)
                {
                    DoRenderTypeControls();
                }
                ViewState["Url"] = null;
                ViewState["IsUrlControlLoaded"] = "Loaded";

                ctlFile.FileFilter = FileFilter;
            }
            catch (Exception exc)
            {
                //Let's detect possible problems
                Exceptions.LogException(new Exception("Error rendering URLControl subcontrols.", exc));
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="optType_SelectedIndexChanged">
          <declaration><![CDATA[protected void optType_SelectedIndexChanged(object sender, EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="1100" sc="9" el="1104" ec="10">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="6e01814bebace5b217148d444c2c87b0"><![CDATA[{
            //Type changed, render the correct control set
            ViewState["UrlType"] = optType.SelectedItem.Value;
            _doRenderTypeControls = true;
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_doChangeURL">
          <declaration><![CDATA[private bool _doChangeURL;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_doRenderTypeControls">
          <declaration><![CDATA[private bool _doRenderTypeControls;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_doRenderTypes">
          <declaration><![CDATA[private bool _doRenderTypes;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_localResourceFile">
          <declaration><![CDATA[private string _localResourceFile;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_objPortal">
          <declaration><![CDATA[private PortalInfo _objPortal;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="cboImages">
          <declaration><![CDATA[protected DropDownList cboImages;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="cboTabs">
          <declaration><![CDATA[protected DnnPageDropDownList cboTabs;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="cboUrls">
          <declaration><![CDATA[protected DropDownList cboUrls;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="chkLog">
          <declaration><![CDATA[protected CheckBox chkLog;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="chkNewWindow">
          <declaration><![CDATA[protected CheckBox chkNewWindow;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="chkTrack">
          <declaration><![CDATA[protected CheckBox chkTrack;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="cmdAdd">
          <declaration><![CDATA[protected LinkButton cmdAdd;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="cmdDelete">
          <declaration><![CDATA[protected LinkButton cmdDelete;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="cmdSelect">
          <declaration><![CDATA[protected LinkButton cmdSelect;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ctlFile">
          <declaration><![CDATA[protected DnnFilePickerUploader ctlFile;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ErrorRow">
          <declaration><![CDATA[protected Panel ErrorRow;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="FileRow">
          <declaration><![CDATA[protected Panel FileRow;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ImagesRow">
          <declaration><![CDATA[protected Panel ImagesRow;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="lblImages">
          <declaration><![CDATA[protected Label lblImages;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="lblMessage">
          <declaration><![CDATA[protected Label lblMessage;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="lblTab">
          <declaration><![CDATA[protected Label lblTab;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="lblURL">
          <declaration><![CDATA[protected Label lblURL;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="lblURLType">
          <declaration><![CDATA[protected Label lblURLType;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="lblUser">
          <declaration><![CDATA[protected Label lblUser;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="optType">
          <declaration><![CDATA[protected RadioButtonList optType;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="TabRow">
          <declaration><![CDATA[protected Panel TabRow;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="txtUrl">
          <declaration><![CDATA[protected TextBox txtUrl;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="txtUser">
          <declaration><![CDATA[protected TextBox txtUser;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="TypeRow">
          <declaration><![CDATA[protected Panel TypeRow;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="URLRow">
          <declaration><![CDATA[protected Panel URLRow;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="UserRow">
          <declaration><![CDATA[protected Panel UserRow;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="FileFilter">
          <declaration><![CDATA[public string FileFilter]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="90" sc="13" el="97" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="32101b5a346431949956a167c0613a2b"><![CDATA[{
                if (ViewState["FileFilter"] != null)
                {
                    return ViewState["FileFilter"].ToString();
                }

                return string.Empty;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="99" sc="13" el="101" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="972f99f9c390dd572e31e55ce7221bfa"><![CDATA[{
                ViewState["FileFilter"] = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="IncludeActiveTab">
          <declaration><![CDATA[public bool IncludeActiveTab]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="107" sc="13" el="116" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="2739d3ba9b4cf209a96c1ff32935adf4"><![CDATA[{
                if (ViewState["IncludeActiveTab"] != null)
                {
                    return Convert.ToBoolean(ViewState["IncludeActiveTab"]);
                }
                else
                {
                    return false; //Set as default
                }
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="118" sc="13" el="124" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="aa0d576414d3233a6f747ffc40c1d8b2"><![CDATA[{
                ViewState["IncludeActiveTab"] = value;
                if (IsTrackingViewState)
                {
                    _doRenderTypeControls = true;
                }
            }]]></body>
          </codeblock>
        </property>
        <property name="LocalResourceFile">
          <declaration><![CDATA[public string LocalResourceFile]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="130" sc="13" el="141" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="9663bc4926db41813a21940ed83b57ac"><![CDATA[{
                string fileRoot;
                if (String.IsNullOrEmpty(_localResourceFile))
                {
                    fileRoot = TemplateSourceDirectory + "/" + Localization.LocalResourceDirectory + "/URLControl.ascx";
                }
                else
                {
                    fileRoot = _localResourceFile;
                }
                return fileRoot;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="143" sc="13" el="145" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="e60ba7145a1304e2111e5932f2fe5b70"><![CDATA[{
                _localResourceFile = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="Log">
          <declaration><![CDATA[public bool Log]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="151" sc="13" el="160" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="c5f63b9c8d6f4eec4a6ccba80c06c1f8"><![CDATA[{
                if (chkLog.Visible)
                {
                    return chkLog.Checked;
                }
                else
                {
                    return false;
                }
            }]]></body>
          </codeblock>
        </property>
        <property name="ModuleID">
          <declaration><![CDATA[public int ModuleID]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="166" sc="13" el="177" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="e9aebe645ce6e3b9cfec4ee9af9c5ac1"><![CDATA[{
                int myMid = -2;
                if (ViewState["ModuleId"] != null)
                {
                    myMid = Convert.ToInt32(ViewState["ModuleId"]);
                }
                else if (Request.QueryString["mid"] != null)
                {
                    Int32.TryParse(Request.QueryString["mid"], out myMid);
                }
                return myMid;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="179" sc="13" el="181" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="cb1b663f0ebb5176997ae2215b634e0c"><![CDATA[{
                ViewState["ModuleId"] = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="NewWindow">
          <declaration><![CDATA[public bool NewWindow]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="187" sc="13" el="189" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="32b79bced8bc9248dab8f4e61e6e7d9d"><![CDATA[{
                return chkNewWindow.Visible && chkNewWindow.Checked;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="191" sc="13" el="193" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="2101a2feed477bb877b8be2e402979f5"><![CDATA[{
                chkNewWindow.Checked = chkNewWindow.Visible && value;
            }]]></body>
          </codeblock>
        </property>
        <property name="Required">
          <declaration><![CDATA[public bool Required]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="199" sc="13" el="208" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="06ba9ddf36b034ce95d239b31f990360"><![CDATA[{
                if (ViewState["Required"] != null)
                {
                    return Convert.ToBoolean(ViewState["Required"]);
                }
                else
                {
                    return true; //Set as default in the old variable
                }
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="210" sc="13" el="216" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="2b4639458023c22b609f62622fda5e61"><![CDATA[{
                ViewState["Required"] = value;
                if (IsTrackingViewState)
                {
                    _doRenderTypeControls = true;
                }
            }]]></body>
          </codeblock>
        </property>
        <property name="ShowFiles">
          <declaration><![CDATA[public bool ShowFiles]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="222" sc="13" el="231" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="db0a2f305ae658aabf31254aa4ea9c37"><![CDATA[{
                if (ViewState["ShowFiles"] != null)
                {
                    return Convert.ToBoolean(ViewState["ShowFiles"]);
                }
                else
                {
                    return true; //Set as default in the old variable
                }
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="233" sc="13" el="239" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="634e46bf3e59cbcd0f6fa1bc48c8c53a"><![CDATA[{
                ViewState["ShowFiles"] = value;
                if (IsTrackingViewState)
                {
                    _doRenderTypes = true;
                }
            }]]></body>
          </codeblock>
        </property>
        <property name="ShowImages">
          <declaration><![CDATA[public bool ShowImages]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="245" sc="13" el="254" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="a5f16de6312c055b2b5ae7d3763e2ed5"><![CDATA[{
                if (ViewState["ShowImages"] != null)
                {
                    return Convert.ToBoolean(ViewState["ShowImages"]);
                }
                else
                {
                    return false;
                }
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="256" sc="13" el="262" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="45bb1c3cc9fa79d48beb3fd16854c0ef"><![CDATA[{
                ViewState["ShowImages"] = value;
                if (IsTrackingViewState)
                {
                    _doRenderTypes = true;
                }
            }]]></body>
          </codeblock>
        </property>
        <property name="ShowLog">
          <declaration><![CDATA[public bool ShowLog]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="268" sc="13" el="270" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="8886761bc60a9f263322611ca3ace088"><![CDATA[{
                return chkLog.Visible;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="272" sc="13" el="274" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="3f6afaf0db1363415bc462ff864cb221"><![CDATA[{
                chkLog.Visible = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="ShowNewWindow">
          <declaration><![CDATA[public bool ShowNewWindow]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="280" sc="13" el="282" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="7789cd8686c9d3b156ff97b54a982a7a"><![CDATA[{
                return chkNewWindow.Visible;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="284" sc="13" el="286" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="05068526fa6ba700da1bb8cd3f239283"><![CDATA[{
                chkNewWindow.Visible = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="ShowNone">
          <declaration><![CDATA[public bool ShowNone]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="292" sc="13" el="301" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="675fed79b6c260b321b4f820c54e00c2"><![CDATA[{
                if (ViewState["ShowNone"] != null)
                {
                    return Convert.ToBoolean(ViewState["ShowNone"]);
                }
                else
                {
                    return false; //Set as default in the old variable
                }
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="303" sc="13" el="309" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="025bf05fd38916c26f1f159e8aeddad7"><![CDATA[{
                ViewState["ShowNone"] = value;
                if (IsTrackingViewState)
                {
                    _doRenderTypes = true;
                }
            }]]></body>
          </codeblock>
        </property>
        <property name="ShowTabs">
          <declaration><![CDATA[public bool ShowTabs]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="315" sc="13" el="324" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="45e1f4109de095ea7175067d17cc1806"><![CDATA[{
                if (ViewState["ShowTabs"] != null)
                {
                    return Convert.ToBoolean(ViewState["ShowTabs"]);
                }
                else
                {
                    return true; //Set as default in the old variable
                }
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="326" sc="13" el="332" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="943c1b32c672d2d83edd0bd75d7e7ae1"><![CDATA[{
                ViewState["ShowTabs"] = value;
                if (IsTrackingViewState)
                {
                    _doRenderTypes = true;
                }
            }]]></body>
          </codeblock>
        </property>
        <property name="ShowTrack">
          <declaration><![CDATA[public bool ShowTrack]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="338" sc="13" el="340" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="ce19e9818454d487d091df33d71bac9b"><![CDATA[{
                return chkTrack.Visible;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="342" sc="13" el="344" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="a1f5354ebc38b88e1279b49c30759fb4"><![CDATA[{
                chkTrack.Visible = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="ShowUpLoad">
          <declaration><![CDATA[public bool ShowUpLoad]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="350" sc="13" el="359" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="fa15e8a8ad28d540c342a43c1b9d76e7"><![CDATA[{
                if (ViewState["ShowUpLoad"] != null)
                {
                    return Convert.ToBoolean(ViewState["ShowUpLoad"]);
                }
                else
                {
                    return true; //Set as default in the old variable
                }
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="361" sc="13" el="367" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="2d776c29c1f0f17a5bdc890141a7d6e0"><![CDATA[{
                ViewState["ShowUpLoad"] = value;
                if (IsTrackingViewState)
                {
                    _doRenderTypeControls = true;
                }
            }]]></body>
          </codeblock>
        </property>
        <property name="ShowUrls">
          <declaration><![CDATA[public bool ShowUrls]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="373" sc="13" el="382" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="bcdf2f990b2933f331383a2adbe8b4f7"><![CDATA[{
                if (ViewState["ShowUrls"] != null)
                {
                    return Convert.ToBoolean(ViewState["ShowUrls"]);
                }
                else
                {
                    return true; //Set as default in the old variable
                }
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="384" sc="13" el="390" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="7212a7a08d1e4c24d68d02a06d5f5709"><![CDATA[{
                ViewState["ShowUrls"] = value;
                if (IsTrackingViewState)
                {
                    _doRenderTypes = true;
                }
            }]]></body>
          </codeblock>
        </property>
        <property name="ShowUsers">
          <declaration><![CDATA[public bool ShowUsers]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="396" sc="13" el="405" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="d9c01ac1f63a9c11147eef339379965d"><![CDATA[{
                if (ViewState["ShowUsers"] != null)
                {
                    return Convert.ToBoolean(ViewState["ShowUsers"]);
                }
                else
                {
                    return false; //Set as default in the old variable
                }
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="407" sc="13" el="413" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="f908273d89487d4157fa8216a34cb527"><![CDATA[{
                ViewState["ShowUsers"] = value;
                if (IsTrackingViewState)
                {
                    _doRenderTypes = true;
                }
            }]]></body>
          </codeblock>
        </property>
        <property name="Track">
          <declaration><![CDATA[public bool Track]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="419" sc="13" el="428" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="8da9e04d4ccf14979fb5cdbf0d454346"><![CDATA[{
                if (chkTrack.Visible)
                {
                    return chkTrack.Checked;
                }
                else
                {
                    return false;
                }
            }]]></body>
          </codeblock>
        </property>
        <property name="Url">
          <declaration><![CDATA[public string Url]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="434" sc="13" el="511" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="ef89e5e7b13e8ccd2f3928ff16ca212a"><![CDATA[{
                string r = "";
                string strCurrentType = "";
                if (optType.Items.Count > 0 && optType.SelectedIndex >= 0)
                {
                    strCurrentType = optType.SelectedItem.Value;
                }
                switch (strCurrentType)
                {
                    case "I":
                        if (cboImages.SelectedItem != null)
                        {
                            r = cboImages.SelectedItem.Value;
                        }
                        break;
                    case "U":
                        if (cboUrls.Visible)
                        {
                            if (cboUrls.SelectedItem != null)
                            {
                                r = cboUrls.SelectedItem.Value;
                                txtUrl.Text = r;
                            }
                        }
                        else
                        {
                            string mCustomUrl = txtUrl.Text;
                            if (mCustomUrl.ToLower() == "http://")
                            {
                                r = "";
                            }
                            else
                            {
                                r = Globals.AddHTTP(mCustomUrl);
                            }
                        }
                        break;
                    case "T":
                        string strTab = "";
                        if (cboTabs.SelectedItem != null)
                        {
                            strTab = cboTabs.SelectedItem.Value;
                            int id;
                            if (int.TryParse(strTab,out id) && id >= 0)
                            {
                                r = strTab;
                            }
                        }
                        break;
                    case "F":
                        if (ctlFile.FileID > Null.NullInteger)
                        {
                            r = "FileID=" + ctlFile.FileID;
                        }
                        else
                        {
                            r = "";
                        }
                        break;
                    case "M":
                        if (!String.IsNullOrEmpty(txtUser.Text))
                        {
                            UserInfo objUser = UserController.GetCachedUser(_objPortal.PortalID, txtUser.Text);
                            if (objUser != null)
                            {
                                r = "UserID=" + objUser.UserID;
                            }
                            else
                            {
                                lblMessage.Text = Localization.GetString("NoUser", LocalResourceFile);
                                ErrorRow.Visible = true;
                                txtUser.Text = "";
                            }
                        }
                        break;
                }
                return r;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="513" sc="13" el="521" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="19c803a23b31043dfb3c8d34fdafc87a"><![CDATA[{
                ViewState["Url"] = value;
				txtUrl.Text = string.Empty;

                if (IsTrackingViewState)
                {
                    _doChangeURL = true;
                }
            }]]></body>
          </codeblock>
        </property>
        <property name="UrlType">
          <declaration><![CDATA[public string UrlType]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="527" sc="13" el="529" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="8f65aefb596b3da51a917fd8beb3332e"><![CDATA[{
                return Convert.ToString(ViewState["UrlType"]);
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="531" sc="13" el="540" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="bb86ad5b81d761df33f6df8a819e718c"><![CDATA[{
                if (value != null && !String.IsNullOrEmpty(value.Trim()))
                {
                    ViewState["UrlType"] = value;
                    if (IsTrackingViewState)
                    {
                        _doChangeURL = true;
                    }
                }
            }]]></body>
          </codeblock>
        </property>
        <property name="Width">
          <declaration><![CDATA[public string Width]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="546" sc="13" el="548" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="82f4bc762f561ea5ae0ec1a1640960ac"><![CDATA[{
                return Convert.ToString(ViewState["SkinControlWidth"]);
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="550" sc="13" el="560" ec="14">UI\WebControls\DnnUrlControl.cs</location>
            <body hash="2ab306d82df18db4ad3f69d40044427a"><![CDATA[{
                if (!String.IsNullOrEmpty(value))
                {
                    cboUrls.Width = Unit.Parse(value);
                    txtUrl.Width = Unit.Parse(value);
                    cboImages.Width = Unit.Parse(value);
                    cboTabs.Width = Unit.Parse(value);
                    txtUser.Width = Unit.Parse(value);
                    ViewState["SkinControlWidth"] = value;
                }
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="IDnnRibbonBarTool">
      <declaration><![CDATA[public interface IDnnRibbonBarTool]]></declaration>
      <documentation>
      </documentation>
      <constructors>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="ToolName">
          <declaration><![CDATA[string ToolName]]></declaration>
          <documentation>
          </documentation>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="ItemListOptions">
      <declaration><![CDATA[public class ItemListOptions]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public ItemListOptions()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="52" sc="9" el="66" ec="10">UI\WebControls\ItemListOptions.cs</location>
            <body hash="103175c21165c7b83ff48a8da1ad482e"><![CDATA[public ItemListOptions()
        {
            // all the resources are located under the Website\App_GlobalResources\SharedResources.resx
            SortAscendingButtonTitle = Localization.GetString("DropDownList.SortAscendingButtonTitle", Localization.SharedResourceFile);
            UnsortedOrderButtonTooltip = Localization.GetString("DropDownList.UnsortedOrderButtonTooltip", Localization.SharedResourceFile);
            SortAscendingButtonTooltip = Localization.GetString("DropDownList.SortAscendingButtonTooltip", Localization.SharedResourceFile);
            SortDescendingButtonTooltip = Localization.GetString("DropDownList.SortDescendingButtonTooltip", Localization.SharedResourceFile);
            SelectedItemExpandTooltip = Localization.GetString("DropDownList.SelectedItemExpandTooltip", Localization.SharedResourceFile);
            SelectedItemCollapseTooltip = Localization.GetString("DropDownList.SelectedItemCollapseTooltip", Localization.SharedResourceFile);
            SearchInputPlaceHolder = Localization.GetString("DropDownList.SearchInputPlaceHolder", Localization.SharedResourceFile);
            ClearButtonTooltip = Localization.GetString("DropDownList.ClearButtonTooltip", Localization.SharedResourceFile);
            SearchButtonTooltip = Localization.GetString("DropDownList.SearchButtonTooltip", Localization.SharedResourceFile);
            LoadingResultText = Localization.GetString("DropDownList.LoadingResultText", Localization.SharedResourceFile);
            ResultsText = Localization.GetString("DropDownList.Results", Localization.SharedResourceFile);
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
        <field name="ClearButtonTooltip">
          <declaration><![CDATA[public string ClearButtonTooltip;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="DisableUnspecifiedOrder">
          <declaration><![CDATA[public bool DisableUnspecifiedOrder;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="FirstItem">
          <declaration><![CDATA[public SerializableKeyValuePair<string, string> FirstItem;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="LoadingResultText">
          <declaration><![CDATA[public string LoadingResultText;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ResultsText">
          <declaration><![CDATA[public string ResultsText;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="SearchButtonTooltip">
          <declaration><![CDATA[public string SearchButtonTooltip;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="SearchInputPlaceHolder">
          <declaration><![CDATA[public string SearchInputPlaceHolder;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="SelectedItemCollapseTooltip">
          <declaration><![CDATA[public string SelectedItemCollapseTooltip;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="SelectedItemExpandTooltip">
          <declaration><![CDATA[public string SelectedItemExpandTooltip;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="SortAscendingButtonTitle">
          <declaration><![CDATA[public string SortAscendingButtonTitle;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="SortAscendingButtonTooltip">
          <declaration><![CDATA[public string SortAscendingButtonTooltip;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="SortDescendingButtonTooltip">
          <declaration><![CDATA[public string SortDescendingButtonTooltip;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="UnsortedOrderButtonTooltip">
          <declaration><![CDATA[public string UnsortedOrderButtonTooltip;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="ItemListServicesOptions">
      <declaration><![CDATA[public class ItemListServicesOptions]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public string ModuleId = string.Empty;]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="11" sc="9" el="43" ec="39">UI\WebControls\ItemListServicesOptions.cs</location>
            <body hash="e088fb50c4f72bca1ee5f754cfe3d2cc"><![CDATA[public string ModuleId = string.Empty;

        [DataMember(Name = "serviceRoot")]
        public string ServiceRoot;

        [DataMember(Name = "getTreeMethod")]
        public string GetTreeMethod;

        [DataMember(Name = "sortTreeMethod")]
        public string SortTreeMethod;

        [DataMember(Name = "getNodeDescendantsMethod")]
        public string GetNodeDescendantsMethod;

        [DataMember(Name = "searchTreeMethod")]
        public string SearchTreeMethod;

        [DataMember(Name = "getTreeWithNodeMethod")]
        public string GetTreeWithNodeMethod;

        private Dictionary<string, string> _parameters;

        [DataMember(Name = "parameters")]
        public Dictionary<string, string> Parameters
        {
            get
            {
                return _parameters ?? (_parameters = new Dictionary<string, string>());
            }
        }

        [DataMember(Name = "rootId")]
        public string RootId = "Root";]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
        <field name="_parameters">
          <declaration><![CDATA[private Dictionary<string, string> _parameters;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="GetNodeDescendantsMethod">
          <declaration><![CDATA[public string GetNodeDescendantsMethod;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="GetTreeMethod">
          <declaration><![CDATA[public string GetTreeMethod;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="GetTreeWithNodeMethod">
          <declaration><![CDATA[public string GetTreeWithNodeMethod;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ModuleId">
          <declaration><![CDATA[public string ModuleId = string.Empty;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="RootId">
          <declaration><![CDATA[public string RootId = "Root";]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="SearchTreeMethod">
          <declaration><![CDATA[public string SearchTreeMethod;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="ServiceRoot">
          <declaration><![CDATA[public string ServiceRoot;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="SortTreeMethod">
          <declaration><![CDATA[public string SortTreeMethod;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="Parameters">
          <declaration><![CDATA[public Dictionary<string, string> Parameters]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="37" sc="13" el="39" ec="14">UI\WebControls\ItemListServicesOptions.cs</location>
            <body hash="d613397a8573a4cdba8e83b390f6eb50"><![CDATA[{
                return _parameters ?? (_parameters = new Dictionary<string, string>());
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="RibbonBarToolInfo">
      <declaration><![CDATA[public class RibbonBarToolInfo]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public RibbonBarToolInfo()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="32" sc="9" el="38" ec="10">UI\WebControls\RibbonBarToolInfo.cs</location>
            <body hash="66882c5abef87ce30b24bca1ff6e2474"><![CDATA[public RibbonBarToolInfo()
        {
            ControlKey = "";
            ModuleFriendlyName = "";
            LinkWindowTarget = "";
            ToolName = "";
        }]]></body>
          </codeblock>
        </constructor>
        <constructor name=".ctor">
          <declaration><![CDATA[public RibbonBarToolInfo(string toolName, bool isHostTool, bool useButton, string linkWindowTarget, string moduleFriendlyName, string controlKey, bool showAsPopUp)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="40" sc="9" el="49" ec="10">UI\WebControls\RibbonBarToolInfo.cs</location>
            <body hash="ea90c81ea3159fd40be61f48d6c35418"><![CDATA[public RibbonBarToolInfo(string toolName, bool isHostTool, bool useButton, string linkWindowTarget, string moduleFriendlyName, string controlKey, bool showAsPopUp)
        {
            ToolName = toolName;
            IsHostTool = isHostTool;
            UseButton = useButton;
            LinkWindowTarget = linkWindowTarget;
            ModuleFriendlyName = moduleFriendlyName;
            ControlKey = controlKey;
            ShowAsPopUp = showAsPopUp;
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="ControlKey">
          <declaration><![CDATA[public string ControlKey]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="51" sc="36" el="51" ec="40">UI\WebControls\RibbonBarToolInfo.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="51" sc="41" el="51" ec="45">UI\WebControls\RibbonBarToolInfo.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="IsHostTool">
          <declaration><![CDATA[public bool IsHostTool]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="53" sc="34" el="53" ec="38">UI\WebControls\RibbonBarToolInfo.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="53" sc="39" el="53" ec="43">UI\WebControls\RibbonBarToolInfo.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="LinkWindowTarget">
          <declaration><![CDATA[public string LinkWindowTarget]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="55" sc="42" el="55" ec="46">UI\WebControls\RibbonBarToolInfo.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="55" sc="47" el="55" ec="51">UI\WebControls\RibbonBarToolInfo.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="ModuleFriendlyName">
          <declaration><![CDATA[public string ModuleFriendlyName]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="57" sc="44" el="57" ec="48">UI\WebControls\RibbonBarToolInfo.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="57" sc="49" el="57" ec="53">UI\WebControls\RibbonBarToolInfo.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="ShowAsPopUp">
          <declaration><![CDATA[public bool ShowAsPopUp]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="59" sc="35" el="59" ec="39">UI\WebControls\RibbonBarToolInfo.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="59" sc="40" el="59" ec="44">UI\WebControls\RibbonBarToolInfo.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="ToolName">
          <declaration><![CDATA[public string ToolName]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="61" sc="34" el="61" ec="38">UI\WebControls\RibbonBarToolInfo.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="61" sc="39" el="61" ec="43">UI\WebControls\RibbonBarToolInfo.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="UseButton">
          <declaration><![CDATA[public bool UseButton]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="63" sc="33" el="63" ec="37">UI\WebControls\RibbonBarToolInfo.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="63" sc="38" el="63" ec="42">UI\WebControls\RibbonBarToolInfo.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="Tags">
      <declaration><![CDATA[public class Tags : WebControl, IPostBackEventHandler, IPostBackDataHandler]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[private string _RepeatDirection = "Horizontal";]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="44" sc="9" el="45" ec="47">UI\WebControls\Tags.cs</location>
            <body hash="252e56499c3c160c8b978659fceb1056"><![CDATA[private string _RepeatDirection = "Horizontal";
        private string _Separator = ",&nbsp;";]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="add_TagsUpdated">
          <declaration><![CDATA[public void add_TagsUpdated(EventHandler<EventArgs> value)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="LoadPostData">
          <declaration><![CDATA[public bool LoadPostData(string postDataKey, NameValueCollection postCollection)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="364" sc="9" el="368" ec="10">UI\WebControls\Tags.cs</location>
            <body hash="ce167a34bd998a38418648f51ebbb6f3"><![CDATA[{
            _Tags = postCollection[postDataKey];

            return true;
        }]]></body>
          </codeblock>
        </method>
        <method name="LocalizeString">
          <declaration><![CDATA[private string LocalizeString(string key)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="122" sc="9" el="134" ec="10">UI\WebControls\Tags.cs</location>
            <body hash="b77d1eb12be9eb1393718095ef543620"><![CDATA[{
            string LocalResourceFile = Utilities.GetLocalResourceFile(this);
            string localizedString = null;
            if (!string.IsNullOrEmpty(key) && !string.IsNullOrEmpty(LocalResourceFile))
            {
                localizedString = Localization.GetString(key, LocalResourceFile);
            }
            else
            {
                localizedString = Null.NullString;
            }
            return localizedString;
        }]]></body>
          </codeblock>
        </method>
        <method name="OnPreRender">
          <declaration><![CDATA[protected override void OnPreRender(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="226" sc="9" el="248" ec="10">UI\WebControls\Tags.cs</location>
            <body hash="4a08ff0fd6d0c0efc3b2aa8b56ca6a6a"><![CDATA[{
            base.OnPreRender(e);

            if ((!Page.ClientScript.IsClientScriptBlockRegistered(UniqueID)))
            {
                StringBuilder sb = new StringBuilder();

                sb.Append("<script language='javascript' type='text/javascript' >");
                sb.Append(Environment.NewLine);
                sb.Append("function disableEnterKey(e)");
                sb.Append("{");
                sb.Append("var key;");
                sb.Append("if(window.event)");
                sb.Append("key = window.event.keyCode;");
                sb.Append("else ");
                sb.Append("key = e.which;");
                sb.Append("return (key != 13);");
                sb.Append("}");
                sb.Append("</script>");

                Page.ClientScript.RegisterClientScriptBlock(GetType(), UniqueID, sb.ToString());
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="OnTagsUpdate">
          <declaration><![CDATA[protected void OnTagsUpdate(EventArgs e)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="216" sc="9" el="221" ec="10">UI\WebControls\Tags.cs</location>
            <body hash="cff088d1cdc0f7f8cbcd5fa53600518c"><![CDATA[{
            if (TagsUpdated != null)
            {
                TagsUpdated(this, e);
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="RaisePostBackEvent">
          <declaration><![CDATA[public void RaisePostBackEvent(string eventArgument)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="380" sc="9" el="396" ec="10">UI\WebControls\Tags.cs</location>
            <body hash="fb5709a21284cef73677ec5a76f5c847"><![CDATA[{
            switch (eventArgument)
            {
                case "Add":
                    IsEditMode = true;
                    break;
                case "Cancel":
                    IsEditMode = false;
                    break;
                case "Save":
                    SaveTags();
                    break;
                default:
                    IsEditMode = false;
                    break;
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="RaisePostDataChangedEvent">
          <declaration><![CDATA[public void RaisePostDataChangedEvent()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="372" sc="9" el="373" ec="10">UI\WebControls\Tags.cs</location>
            <body hash="539fa760ca172337a931519768c64187"><![CDATA[{
        }]]></body>
          </codeblock>
        </method>
        <method name="remove_TagsUpdated">
          <declaration><![CDATA[public void remove_TagsUpdated(EventHandler<EventArgs> value)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="RenderButton">
          <declaration><![CDATA[private void RenderButton(HtmlTextWriter writer, string buttonType, string imageUrl)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="137" sc="9" el="152" ec="10">UI\WebControls\Tags.cs</location>
            <body hash="d8db2df65d6a1d5ec50ddb3c24a353d8"><![CDATA[{
            writer.AddAttribute(HtmlTextWriterAttribute.Title, LocalizeString(string.Format("{0}.ToolTip", buttonType)));
            writer.AddAttribute(HtmlTextWriterAttribute.Href, Page.ClientScript.GetPostBackClientHyperlink(this, buttonType));
            writer.RenderBeginTag(HtmlTextWriterTag.A);

            //Image
            if (!string.IsNullOrEmpty(imageUrl))
            {
                writer.AddAttribute(HtmlTextWriterAttribute.Src, ResolveUrl(imageUrl));
                writer.RenderBeginTag(HtmlTextWriterTag.Img);
                writer.RenderEndTag();
            }

            writer.Write(LocalizeString(buttonType));
            writer.RenderEndTag();
        }]]></body>
          </codeblock>
        </method>
        <method name="RenderControl">
          <declaration><![CDATA[public override void RenderControl(HtmlTextWriter writer)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="252" sc="9" el="357" ec="10">UI\WebControls\Tags.cs</location>
            <body hash="dd696a1c6ab2c7852a745f2ae987ce24"><![CDATA[{
            //Render Outer Div
            writer.AddAttribute(HtmlTextWriterAttribute.Class, RepeatDirection.ToLower());
            writer.RenderBeginTag(HtmlTextWriterTag.Div);

            //Render Categories
            if (ShowCategories)
            {
                //Render UL
                writer.AddAttribute(HtmlTextWriterAttribute.Class, "categories");
                writer.AddAttribute(HtmlTextWriterAttribute.Title, LocalizeString("Category.ToolTip"));
                writer.RenderBeginTag(HtmlTextWriterTag.Ul);

                //Render Category Links
                var categories = (from cat in ContentItem.Terms where cat.VocabularyId != TagVocabulary.VocabularyId select cat);

                for (int i = 0; i <= categories.Count() - 1; i++)
                {
                    if (i == 0)
                    {
                        //First Category
                        writer.AddAttribute(HtmlTextWriterAttribute.Class, "first_tag");
                    }
                    else if (i == categories.Count() - 1)
                    {
                        //Last Category
                        writer.AddAttribute(HtmlTextWriterAttribute.Class, "last_tag");
                    }
                    writer.RenderBeginTag(HtmlTextWriterTag.Li);

                    RenderTerm(writer, categories.ToList()[i], i < categories.Count() - 1 && RepeatDirection.ToLower() == "horizontal");

                    writer.RenderEndTag();
                }

                writer.RenderEndTag();
            }

            if (ShowTags)
            {
                //Render UL
                writer.AddAttribute(HtmlTextWriterAttribute.Class, "tags");
                writer.AddAttribute(HtmlTextWriterAttribute.Title, LocalizeString("Tag.ToolTip"));
                writer.RenderBeginTag(HtmlTextWriterTag.Ul);

                //Render Tag Links
                var tags = (from cat in ContentItem.Terms where cat.VocabularyId == TagVocabulary.VocabularyId select cat);

                for (int i = 0; i <= tags.Count() - 1; i++)
                {
                    if (i == 0)
                    {
                        //First Tag
                        writer.AddAttribute(HtmlTextWriterAttribute.Class, "first_tag");
                    }
                    else if (i == tags.Count() - 1)
                    {
                        //Last Tag
                        writer.AddAttribute(HtmlTextWriterAttribute.Class, "last_tag");
                    }
                    writer.RenderBeginTag(HtmlTextWriterTag.Li);

                    RenderTerm(writer, tags.ToList()[i], i < tags.Count() - 1 && RepeatDirection.ToLower() == "horizontal");

                    writer.RenderEndTag();
                }

                if (AllowTagging)
                {
                    writer.RenderBeginTag(HtmlTextWriterTag.Li);

                    if (IsEditMode)
                    {
                        writer.Write("&nbsp;&nbsp;");

                        writer.AddAttribute(HtmlTextWriterAttribute.Name, UniqueID);
                        writer.AddAttribute("OnKeyPress", "return disableEnterKey(event)");
                        writer.RenderBeginTag(HtmlTextWriterTag.Input);
                        writer.RenderEndTag();

                        writer.Write("&nbsp;&nbsp;");

                        //Render Save Button
                        RenderButton(writer, "Save", SaveImageUrl);

                        writer.Write("&nbsp;&nbsp;");

                        //Render Add Button
                        RenderButton(writer, "Cancel", CancelImageUrl);
                    }
                    else
                    {
                        writer.Write("&nbsp;&nbsp;");

                        //Render Add Button
                        RenderButton(writer, "Add", AddImageUrl);
                    }

                    writer.RenderEndTag();
                }

                writer.RenderEndTag();
            }

            writer.RenderEndTag();
        }]]></body>
          </codeblock>
        </method>
        <method name="RenderTerm">
          <declaration><![CDATA[private void RenderTerm(HtmlTextWriter writer, Term term, bool renderSeparator)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="155" sc="9" el="167" ec="10">UI\WebControls\Tags.cs</location>
            <body hash="a30b317b3f6d372b4e2b59c813fb3e4d"><![CDATA[{
            writer.AddAttribute(HtmlTextWriterAttribute.Href, string.Format(NavigateUrlFormatString, term.Name));
            writer.AddAttribute(HtmlTextWriterAttribute.Title, term.Name);
            writer.AddAttribute(HtmlTextWriterAttribute.Rel, "tag");
            writer.RenderBeginTag(HtmlTextWriterTag.A);
            writer.Write(term.Name);
            writer.RenderEndTag();

            if (renderSeparator)
            {
                writer.Write(Separator);
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="SaveTags">
          <declaration><![CDATA[private void SaveTags()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="170" sc="9" el="209" ec="10">UI\WebControls\Tags.cs</location>
            <body hash="bc92d9f1b69e68c373cc8c8456078c57"><![CDATA[{
            string tags = _Tags;

            if (!string.IsNullOrEmpty(tags))
            {
                foreach (string t in tags.Split(','))
                {
                    if (!string.IsNullOrEmpty(t))
                    {
                        string tagName = t.Trim(' ');
                        Term existingTerm = (from term in ContentItem.Terms.AsQueryable() where term.Name.Equals(tagName, StringComparison.CurrentCultureIgnoreCase) select term).SingleOrDefault();

                        if (existingTerm == null)
                        {
                            //Not tagged
                            TermController termController = new TermController();
                            Term term =
                                (from te in termController.GetTermsByVocabulary(TagVocabulary.VocabularyId) where te.Name.Equals(tagName, StringComparison.CurrentCultureIgnoreCase) select te).
                                    SingleOrDefault();
                            if (term == null)
                            {
                                //Add term
                                term = new Term(TagVocabulary.VocabularyId);
                                term.Name = tagName;
                                termController.AddTerm(term);
                            }

                            //Add term to content
                            ContentItem.Terms.Add(term);
                            termController.AddTermToContent(term, ContentItem);
                        }
                    }
                }
            }

            IsEditMode = false;

            //Raise the Tags Updated Event
            OnTagsUpdate(EventArgs.Empty);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_RepeatDirection">
          <declaration><![CDATA[private string _RepeatDirection = "Horizontal";]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_Separator">
          <declaration><![CDATA[private string _Separator = ",&nbsp;";]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="_Tags">
          <declaration><![CDATA[private string _Tags;]]></declaration>
          <documentation>
          </documentation>
        </field>
        <field name="TagsUpdated">
          <declaration><![CDATA[private EventHandler<EventArgs> TagsUpdated;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="AddImageUrl">
          <declaration><![CDATA[public string AddImageUrl]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="60" sc="37" el="60" ec="41">UI\WebControls\Tags.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="60" sc="42" el="60" ec="46">UI\WebControls\Tags.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="AllowTagging">
          <declaration><![CDATA[public bool AllowTagging]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="62" sc="36" el="62" ec="40">UI\WebControls\Tags.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="62" sc="41" el="62" ec="45">UI\WebControls\Tags.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="CancelImageUrl">
          <declaration><![CDATA[public string CancelImageUrl]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="64" sc="40" el="64" ec="44">UI\WebControls\Tags.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="64" sc="45" el="64" ec="49">UI\WebControls\Tags.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="ContentItem">
          <declaration><![CDATA[public ContentItem ContentItem]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="66" sc="42" el="66" ec="46">UI\WebControls\Tags.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="66" sc="47" el="66" ec="51">UI\WebControls\Tags.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="IsEditMode">
          <declaration><![CDATA[public bool IsEditMode]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="71" sc="13" el="78" ec="14">UI\WebControls\Tags.cs</location>
            <body hash="79836fcb7e240d81d99d0aa888ac4e1a"><![CDATA[{
                bool _IsEditMode = false;
                if (ViewState["IsEditMode"] != null)
                {
                    _IsEditMode = Convert.ToBoolean(ViewState["IsEditMode"]);
                }
                return _IsEditMode;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="80" sc="13" el="82" ec="14">UI\WebControls\Tags.cs</location>
            <body hash="84448558c079c4016f8a9b2c807af72d"><![CDATA[{
                ViewState["IsEditMode"] = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="NavigateUrlFormatString">
          <declaration><![CDATA[public string NavigateUrlFormatString]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="85" sc="49" el="85" ec="53">UI\WebControls\Tags.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="85" sc="54" el="85" ec="58">UI\WebControls\Tags.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="RepeatDirection">
          <declaration><![CDATA[public string RepeatDirection]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="90" sc="13" el="92" ec="14">UI\WebControls\Tags.cs</location>
            <body hash="1e45f633d8546ff4c1107ba51da1709b"><![CDATA[{
                return _RepeatDirection;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="94" sc="13" el="96" ec="14">UI\WebControls\Tags.cs</location>
            <body hash="2621413c4582c09a1b88139612d38b65"><![CDATA[{
                _RepeatDirection = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="SaveImageUrl">
          <declaration><![CDATA[public string SaveImageUrl]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="99" sc="38" el="99" ec="42">UI\WebControls\Tags.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="99" sc="43" el="99" ec="47">UI\WebControls\Tags.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Separator">
          <declaration><![CDATA[public string Separator]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="104" sc="13" el="106" ec="14">UI\WebControls\Tags.cs</location>
            <body hash="f1083196f0705ded507d8cf02eb88c65"><![CDATA[{
                return _Separator;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="108" sc="13" el="110" ec="14">UI\WebControls\Tags.cs</location>
            <body hash="cd7c3b5a9d7ec2f1e88dd4fea042ab78"><![CDATA[{
                _Separator = value;
            }]]></body>
          </codeblock>
        </property>
        <property name="ShowCategories">
          <declaration><![CDATA[public bool ShowCategories]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="113" sc="38" el="113" ec="42">UI\WebControls\Tags.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="113" sc="43" el="113" ec="47">UI\WebControls\Tags.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="ShowTags">
          <declaration><![CDATA[public bool ShowTags]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="115" sc="32" el="115" ec="36">UI\WebControls\Tags.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="115" sc="37" el="115" ec="41">UI\WebControls\Tags.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="TagVocabulary">
          <declaration><![CDATA[private Vocabulary TagVocabulary]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="52" sc="13" el="55" ec="14">UI\WebControls\Tags.cs</location>
            <body hash="be27dcec67596a0172945c296f67a424"><![CDATA[{
                VocabularyController vocabularyController = new VocabularyController();
                return (from v in vocabularyController.GetVocabularies() where v.IsSystem && v.Name == "Tags" select v).SingleOrDefault();
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
        <event name="TagsUpdated">
          <declaration><![CDATA[public event EventHandler<EventArgs> TagsUpdated;]]></declaration>
          <documentation>
          </documentation>
        </event>
      </events>
    </class>
    <class name="TermsEventArgs">
      <declaration><![CDATA[public class TermsEventArgs : EventArgs]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public TermsEventArgs(Term selectedTerm)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="37" sc="9" el="40" ec="10">UI\WebControls\TermsEventArgs.cs</location>
            <body hash="d8e8f33bda097ff2ff4e525bfcd35260"><![CDATA[public TermsEventArgs(Term selectedTerm)
        {
            _SelectedTerm = selectedTerm;
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
        <field name="_SelectedTerm">
          <declaration><![CDATA[private readonly Term _SelectedTerm;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="SelectedTerm">
          <declaration><![CDATA[public Term SelectedTerm]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="49" sc="13" el="51" ec="14">UI\WebControls\TermsEventArgs.cs</location>
            <body hash="b5b3b8debc77144e75b87c34fc1f8a30"><![CDATA[{
                return _SelectedTerm;
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="TypedControlCollection&lt;T&gt;">
      <declaration><![CDATA[public sealed class TypedControlCollection<T> : ControlCollection where T : Control]]></declaration>
      <documentation>
        <summary>
 Restricts the client to add only controls of specific type into the control collection
 </summary>
 <remarks></remarks></documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public TypedControlCollection(Control owner) : base(owner)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="13" sc="56" el="15" ec="10">UI\WebControls\TypedControlCollection.cs</location>
            <body hash="6bc9b76184c2536df13db4ccf49ad071"><![CDATA[base(owner)
        {
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="Add">
          <declaration><![CDATA[public override void Add(Control child)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="18" sc="9" el="24" ec="10">UI\WebControls\TypedControlCollection.cs</location>
            <body hash="9ef5884fea260669ddf5c6f4f4854f89"><![CDATA[{
            if (!(child is T))
            {
                throw new InvalidOperationException("Not supported");
            }
            base.Add(child);
        }]]></body>
          </codeblock>
        </method>
        <method name="AddAt">
          <declaration><![CDATA[public override void AddAt(int index, Control child)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="27" sc="9" el="33" ec="10">UI\WebControls\TypedControlCollection.cs</location>
            <body hash="4a53b574487a01b465433ce915c39d1e"><![CDATA[{
            if (!(child is T))
            {
                throw new InvalidOperationException("Not supported");
            }
            base.AddAt(index, child);
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="TChildren&gt;">
      <declaration><![CDATA[public sealed class UniformControlCollection<TOwner, TChildren> : IList<TChildren>, ICollection<TChildren>, IEnumerable<TChildren>, IEnumerable where TOwner : Control where TChildren : Control]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[internal UniformControlCollection(TOwner owner)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="15" sc="9" el="18" ec="10">UI\WebControls\UniformControlCollection.cs</location>
            <body hash="ec6676485bbe96cacc70fd477e612013"><![CDATA[internal UniformControlCollection(TOwner owner)
        {
            _owner = owner;
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="Add">
          <declaration><![CDATA[public void Add(TChildren item)]]></declaration>
          <documentation>
            <summary>
 Adds an item to the <see cref="T:System.Collections.Generic.ICollection`1" />.
 </summary>
 <param name="item">
 The object to add to the <see cref="T:System.Collections.Generic.ICollection`1" />.
 </param>
 <exception cref="T:System.NotSupportedException">
 The <see cref="T:System.Collections.Generic.ICollection`1" /> is read-only.
 </exception></documentation>
          <codeblock>
            <location sl="187" sc="9" el="189" ec="10">UI\WebControls\UniformControlCollection.cs</location>
            <body hash="bc5dd581d483b98fa81f086fe5d9109f"><![CDATA[{
            _owner.Controls.Add(item);
        }]]></body>
          </codeblock>
        </method>
        <method name="AddAt">
          <declaration><![CDATA[public void AddAt(int index, TChildren childControl)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="21" sc="9" el="23" ec="10">UI\WebControls\UniformControlCollection.cs</location>
            <body hash="b361069bb12911f23fc79922eb0c326b"><![CDATA[{
            _owner.Controls.AddAt(index, childControl);
        }]]></body>
          </codeblock>
        </method>
        <method name="Clear">
          <declaration><![CDATA[public void Clear()]]></declaration>
          <documentation>
            <summary>
 Removes all items from the <see cref="T:System.Collections.Generic.ICollection`1" />.
 </summary>
 <exception cref="T:System.NotSupportedException">
 The <see cref="T:System.Collections.Generic.ICollection`1" /> is read-only.
 </exception></documentation>
          <codeblock>
            <location sl="170" sc="9" el="175" ec="10">UI\WebControls\UniformControlCollection.cs</location>
            <body hash="d2b1d5f1e7f13cd782838decb9c3228d"><![CDATA[{
            if (_owner.HasControls())
            {
                _owner.Controls.Clear();
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="Contains">
          <declaration><![CDATA[public bool Contains(TChildren item)]]></declaration>
          <documentation>
            <summary>
 Determines whether the <see cref="T:System.Collections.Generic.ICollection`1" /> contains a specific value.
 </summary>
 <returns>
 true if <paramref name="item" /> is found in the <see cref="T:System.Collections.Generic.ICollection`1" />; otherwise, false.
 </returns>
 <param name="item">
 The object to locate in the <see cref="T:System.Collections.Generic.ICollection`1" />.
 </param></documentation>
          <codeblock>
            <location sl="231" sc="9" el="233" ec="10">UI\WebControls\UniformControlCollection.cs</location>
            <body hash="d7496a59f7afa69578bdc03b4e2f2e28"><![CDATA[{
            return _owner.Controls.Contains(item);
        }]]></body>
          </codeblock>
        </method>
        <method name="CopyTo">
          <declaration><![CDATA[public void CopyTo(TChildren[] array, int arrayIndex)]]></declaration>
          <documentation>
            <summary>
 Copies the elements of the <see cref="T:System.Collections.Generic.ICollection`1" /> to an <see cref="T:System.Array" />, starting at a particular <see cref="T:System.Array" /> index.
 </summary>
 <param name="array">
 The one-dimensional <see cref="T:System.Array" /> that is the destination of the elements copied from <see cref="T:System.Collections.Generic.ICollection`1" />. The <see cref="T:System.Array" /> must have zero-based indexing.
 </param>
 <param name="arrayIndex">
 The zero-based index in <paramref name="array" /> at which copying begins.
 </param>
 <exception cref="T:System.ArgumentNullException"><paramref name="array" /> is null.
 </exception>
 <exception cref="T:System.ArgumentOutOfRangeException"><paramref name="arrayIndex" /> is less than 0.
 </exception>
 <exception cref="T:System.ArgumentException"><paramref name="array" /> is multidimensional.
 -or-
 <paramref name="arrayIndex" /> is equal to or greater than the length of <paramref name="array" />.
 -or-
 The number of elements in the source <see cref="T:System.Collections.Generic.ICollection`1" /> is greater than the available space from <paramref name="arrayIndex" /> to the end of the destination <paramref name="array" />.
 -or-
 Type paramref name="T" cannot be cast automatically to the type of the destination <paramref name="array" />.
 </exception></documentation>
          <codeblock>
            <location sl="213" sc="9" el="219" ec="10">UI\WebControls\UniformControlCollection.cs</location>
            <body hash="c147960a14ef3e8aea7b7ba0d124743e"><![CDATA[{
            var enumerator = GetEnumerator();
            while (enumerator.MoveNext())
            {
                array.SetValue(enumerator.Current, Math.Max(Interlocked.Increment(ref arrayIndex), arrayIndex - 1));
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="EnumerableGetEnumerator">
          <declaration><![CDATA[private IEnumerator EnumerableGetEnumerator()]]></declaration>
          <documentation>
            <summary>
 Returns an enumerator that iterates through a collection.
 </summary>
 <returns>
 An <see cref="T:System.Collections.IEnumerator" /> object that can be used to iterate through the collection.
 </returns>
 <filterpriority>2</filterpriority></documentation>
          <codeblock>
            <location sl="243" sc="9" el="245" ec="10">UI\WebControls\UniformControlCollection.cs</location>
            <body hash="251165555bb8233a533f6f26e703d947"><![CDATA[{
            return _owner.Controls.GetEnumerator();
        }]]></body>
          </codeblock>
        </method>
        <method name="GetEnumerator">
          <declaration><![CDATA[public IEnumerator<TChildren> GetEnumerator()]]></declaration>
          <documentation>
            <summary>
 Returns an enumerator that iterates through the collection.
 </summary>
 <returns>
 A <see cref="T:System.Collections.Generic.IEnumerator`1" /> that can be used to iterate through the collection.
 </returns>
 <filterpriority>1</filterpriority></documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="IndexOf">
          <declaration><![CDATA[public int IndexOf(TChildren item)]]></declaration>
          <documentation>
            <summary>
 Determines the index of a specific item in the <see cref="T:System.Collections.Generic.IList`1" />.
 </summary>
 <returns>
 The index of <paramref name="item" /> if found in the list; otherwise, -1.
 </returns>
 <param name="item">
 The object to locate in the <see cref="T:System.Collections.Generic.IList`1" />.
 </param></documentation>
          <codeblock>
            <location sl="35" sc="9" el="37" ec="10">UI\WebControls\UniformControlCollection.cs</location>
            <body hash="a181e9b062683c6838955d18def67671"><![CDATA[{
            return _owner.Controls.IndexOf(item);
        }]]></body>
          </codeblock>
        </method>
        <method name="Insert">
          <declaration><![CDATA[public void Insert(int index, TChildren item)]]></declaration>
          <documentation>
            <summary>
  Inserts an item to the <see cref="T:System.Collections.Generic.IList`1" /> at the specified index.
 </summary>
 <param name="index">
  The zero-based index at which <paramref name="item" /> should be inserted.
 </param>
 <param name="item">
  The object to insert into the <see cref="T:System.Collections.Generic.IList`1" />.
 </param>
 <exception cref="T:System.ArgumentOutOfRangeException"><paramref name="index" /> is not a valid index in the <see cref="T:System.Collections.Generic.IList`1" />.
 </exception>
 <exception cref="T:System.NotSupportedException">
 The <see cref="T:System.Collections.Generic.IList`1" /> is read-only.
 </exception></documentation>
          <codeblock>
            <location sl="54" sc="9" el="56" ec="10">UI\WebControls\UniformControlCollection.cs</location>
            <body hash="e22139037df466e2c79460a00e08cbc2"><![CDATA[{
            _owner.Controls.AddAt(index, item);
        }]]></body>
          </codeblock>
        </method>
        <method name="Remove">
          <declaration><![CDATA[public bool Remove(TChildren item)]]></declaration>
          <documentation>
            <summary>
 Removes the first occurrence of a specific object from the <see cref="T:System.Collections.Generic.ICollection`1" />.
 </summary>
 <returns>
 true if <paramref name="item" /> was successfully removed from the <see cref="T:System.Collections.Generic.ICollection`1" />; otherwise, false. This method also returns false if <paramref name="item" /> is not found in the original <see cref="T:System.Collections.Generic.ICollection`1" />.
 </returns>
 <param name="item">
 The object to remove from the <see cref="T:System.Collections.Generic.ICollection`1" />.
 </param>
 <exception cref="T:System.NotSupportedException">
 The <see cref="T:System.Collections.Generic.ICollection`1" /> is read-only.
 </exception></documentation>
          <codeblock>
            <location sl="128" sc="9" el="131" ec="10">UI\WebControls\UniformControlCollection.cs</location>
            <body hash="c6999d5d7760fede3aa62c731c787939"><![CDATA[{
            _owner.Controls.Remove(item);
            return true;
        }]]></body>
          </codeblock>
        </method>
        <method name="RemoveAt">
          <declaration><![CDATA[public void RemoveAt(int index)]]></declaration>
          <documentation>
            <summary>
 Removes the <see cref="T:System.Collections.Generic.IList`1" /> item at the specified index.
 </summary>
 <param name="index">
 The zero-based index of the item to remove.
 </param>
 <exception cref="T:System.ArgumentOutOfRangeException"><paramref name="index" /> is not a valid index in the <see cref="T:System.Collections.Generic.IList`1" />.
 </exception>
 <exception cref="T:System.NotSupportedException">
 The <see cref="T:System.Collections.Generic.IList`1" /> is read-only.
 </exception></documentation>
          <codeblock>
            <location sl="70" sc="9" el="72" ec="10">UI\WebControls\UniformControlCollection.cs</location>
            <body hash="9beb34ab3dc9a171330e42e2cdc39d55"><![CDATA[{
            _owner.Controls.RemoveAt(index);
        }]]></body>
          </codeblock>
        </method>
        <method name="System.Collections.IEnumerable.GetEnumerator">
          <declaration><![CDATA[IEnumerator IEnumerable.GetEnumerator()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="248" sc="9" el="250" ec="10">UI\WebControls\UniformControlCollection.cs</location>
            <body hash="aea49d2e7b57e449800372649d5a1f6f"><![CDATA[{
            return EnumerableGetEnumerator();
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_owner">
          <declaration><![CDATA[private readonly TOwner _owner;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="Count">
          <declaration><![CDATA[public int Count]]></declaration>
          <documentation>
            <summary>
 Gets the number of elements contained in the <see cref="T:System.Collections.Generic.ICollection`1" />.
 </summary>
 <returns>
 The number of elements contained in the <see cref="T:System.Collections.Generic.ICollection`1" />.
 </returns></documentation>
          <codeblock>
            <location sl="110" sc="13" el="112" ec="14">UI\WebControls\UniformControlCollection.cs</location>
            <body hash="28747f094ea8b2cb982cf50edfbda50b"><![CDATA[{
                return _owner.HasControls() ? _owner.Controls.Count : 0;
            }]]></body>
          </codeblock>
        </property>
        <property name="IsReadOnly">
          <declaration><![CDATA[public bool IsReadOnly]]></declaration>
          <documentation>
            <summary>
 Gets a value indicating whether the <see cref="T:System.Collections.Generic.ICollection`1" /> is read-only.
 </summary>
 <returns>
 true if the <see cref="T:System.Collections.Generic.ICollection`1" /> is read-only; otherwise, false.
 </returns></documentation>
          <codeblock>
            <location sl="142" sc="13" el="144" ec="14">UI\WebControls\UniformControlCollection.cs</location>
            <body hash="479cced518a49e9e626d5350fca9bbad"><![CDATA[{
                return false;
            }]]></body>
          </codeblock>
        </property>
        <property name="Item">
          <declaration><![CDATA[public TChildren this[int index]]]></declaration>
          <documentation>
            <summary>
 Gets or sets the element at the specified index.
 </summary>
 <returns>
 The element at the specified index.
 </returns>
 <param name="index">
 The zero-based index of the element to get or set.
 </param>
 <exception cref="T:System.ArgumentOutOfRangeException"><paramref name="index" /> is not a valid index in the <see cref="T:System.Collections.Generic.IList`1" />.
 </exception>
 <exception cref="T:System.NotSupportedException">
 The property is set and the <see cref="T:System.Collections.Generic.IList`1" /> is read-only.
 </exception></documentation>
          <codeblock>
            <location sl="91" sc="13" el="93" ec="14">UI\WebControls\UniformControlCollection.cs</location>
            <body hash="8e295659ba1035f4eb0ea6211b4a8068"><![CDATA[{
                return _owner.Controls[index] as TChildren;
            }]]></body>
          </codeblock>
          <codeblock>
            <location sl="95" sc="13" el="98" ec="14">UI\WebControls\UniformControlCollection.cs</location>
            <body hash="d6c47f1552469930f9a1abde208617c0"><![CDATA[{
                RemoveAt(index);
                AddAt(index, value);
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
  </namespace>
  <namespace name="DotNetNuke.Web.UI.WebControls.Extensions">
    <class name="ListControlExtensions">
      <declaration><![CDATA[public static class ListControlExtensions]]></declaration>
      <documentation>
      </documentation>
      <constructors>
      </constructors>
      <methods>
        <method name="AddItem">
          <declaration><![CDATA[public static void AddItem(this ListControl control, string text, string value)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="30" sc="9" el="32" ec="10">UI\WebControls\Extensions\ListControlExtensions.cs</location>
            <body hash="08509fee212759a7a13232809af2e1b0"><![CDATA[{
            control.Items.Add(new ListItem(text, value));
        }]]></body>
          </codeblock>
        </method>
        <method name="DataBind">
          <declaration><![CDATA[public static void DataBind(this ListControl control, string initialValue)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="40" sc="9" el="42" ec="10">UI\WebControls\Extensions\ListControlExtensions.cs</location>
            <body hash="934dacef49957d0c43844545e35286fa"><![CDATA[{
            DataBind(control, initialValue, false);
        }]]></body>
          </codeblock>
        </method>
        <method name="DataBind">
          <declaration><![CDATA[public static void DataBind(this ListControl control, string initial, bool findByText)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="45" sc="9" el="49" ec="10">UI\WebControls\Extensions\ListControlExtensions.cs</location>
            <body hash="cc7fc91ca85052192ecd556e81f914c1"><![CDATA[{
            control.DataBind();

            Select(control, initial, findByText);
        }]]></body>
          </codeblock>
        </method>
        <method name="FindByTextWithIgnoreCase">
          <declaration><![CDATA[public static ListItem FindByTextWithIgnoreCase(this ListItemCollection listItems, string text)]]></declaration>
          <documentation>
            <summary>
 Use this method instead of ListItemCollection.FindByText to find the specific item with case-insensitive.
 </summary>
 <param name="listItems">the items.</param>
 <param name="text">the item with this text want to find.</param>
 <returns>the specific item or null if didn't match the text with any item.</returns></documentation>
          <codeblock>
            <location sl="94" sc="3" el="96" ec="4">UI\WebControls\Extensions\ListControlExtensions.cs</location>
            <body hash="9d453ed4d56d7b45d8bb45e4be0521fe"><![CDATA[{
			return listItems.Cast<ListItem>().FirstOrDefault(item => item.Text.Equals(text, StringComparison.InvariantCultureIgnoreCase));
		}]]></body>
          </codeblock>
        </method>
        <method name="FindByValueWithIgnoreCase">
          <declaration><![CDATA[public static ListItem FindByValueWithIgnoreCase(this ListItemCollection listItems, string value)]]></declaration>
          <documentation>
            <summary>
 Use this method instead of ListItemCollection.FindBValue to find the specific item with case-insensitive.
 </summary>
 <param name="listItems">the items.</param>
 <param name="value">the item with this value want to find.</param>
 <returns>the specific item or null if didn't match the value with any item.</returns></documentation>
          <codeblock>
            <location sl="105" sc="3" el="107" ec="4">UI\WebControls\Extensions\ListControlExtensions.cs</location>
            <body hash="d031f44631a343d5592917bdd38c9332"><![CDATA[{
			return listItems.Cast<ListItem>().FirstOrDefault(item => item.Value.Equals(value, StringComparison.InvariantCultureIgnoreCase));
		}]]></body>
          </codeblock>
        </method>
        <method name="InsertItem">
          <declaration><![CDATA[public static void InsertItem(this ListControl control, int index, string text, string value)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="35" sc="9" el="37" ec="10">UI\WebControls\Extensions\ListControlExtensions.cs</location>
            <body hash="49bf5d8eef368cf6ad712831a8fb0bc4"><![CDATA[{
            control.Items.Insert(index, new ListItem(text, value));
        }]]></body>
          </codeblock>
        </method>
        <method name="Select">
          <declaration><![CDATA[public static void Select(this ListControl control, string initial)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="52" sc="9" el="54" ec="10">UI\WebControls\Extensions\ListControlExtensions.cs</location>
            <body hash="62d2eae2805f295be0bdd1a52cd45541"><![CDATA[{
            Select(control, initial, false, -1);
        }]]></body>
          </codeblock>
        </method>
        <method name="Select">
          <declaration><![CDATA[public static void Select(this ListControl control, string initial, bool findByText)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="57" sc="9" el="59" ec="10">UI\WebControls\Extensions\ListControlExtensions.cs</location>
            <body hash="9d1f62fdf5a8f14619ee0215e3f70efe"><![CDATA[{
            Select(control, initial, findByText, -1);
        }]]></body>
          </codeblock>
        </method>
        <method name="Select">
          <declaration><![CDATA[public static void Select(this ListControl control, string initial, bool findByText, int fallbackIndex)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="62" sc="9" el="86" ec="10">UI\WebControls\Extensions\ListControlExtensions.cs</location>
            <body hash="b58ce8c350984fe433761cb6c97bc277"><![CDATA[{
            control.ClearSelection(); 
            if (findByText)
            {
				if (control.Items.FindByTextWithIgnoreCase(initial) != null)
                {
					control.Items.FindByTextWithIgnoreCase(initial).Selected = true;
                }
                else if (fallbackIndex > -1)
                {
                    control.Items[fallbackIndex].Selected = true;
                }
            }
            else
            {
				if (control.Items.FindByValueWithIgnoreCase(initial) != null)
                {
					control.Items.FindByValueWithIgnoreCase(initial).Selected = true;
                }
                else if (fallbackIndex > -1)
                {
                    control.Items[fallbackIndex].Selected = true;
                }
            }
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="WebControlExtensions">
      <declaration><![CDATA[public static class WebControlExtensions]]></declaration>
      <documentation>
      </documentation>
      <constructors>
      </constructors>
      <methods>
        <method name="AddCssClass">
          <declaration><![CDATA[public static void AddCssClass(this WebControl control, string cssClass)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="11" sc="9" el="26" ec="10">UI\WebControls\Extensions\WebControlExtensions.cs</location>
            <body hash="59b9d7c741c4176f6e0545b4a77f1b8e"><![CDATA[{
            if (string.IsNullOrEmpty(control.CssClass))
            {
                control.CssClass = cssClass;
            }
            else
            {
                var cssClasses = control.CssClass.Split(' ');
                var classExists = cssClasses.Any(@class => @class == cssClass);

                if (!classExists)
                {
                    control.CssClass += " " + cssClass;
                }
            }
        }]]></body>
          </codeblock>
        </method>
        <method name="Orientation">
          <declaration><![CDATA[public static Orientation Orientation(this Size size)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="38" sc="9" el="41" ec="10">UI\WebControls\Extensions\WebControlExtensions.cs</location>
            <body hash="cc0e296324b4a8a7356e1accf591c368"><![CDATA[{
            return size.Width > size.Height ?
                System.Web.UI.WebControls.Orientation.Horizontal : System.Web.UI.WebControls.Orientation.Vertical;
        }]]></body>
          </codeblock>
        </method>
        <method name="RemoveCssClass">
          <declaration><![CDATA[public static void RemoveCssClass(this WebControl control, string cssClass)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="29" sc="9" el="35" ec="10">UI\WebControls\Extensions\WebControlExtensions.cs</location>
            <body hash="5866ca476bc5a1ebd0043ee1b669fc29"><![CDATA[{
            if (!string.IsNullOrEmpty(control.CssClass))
            {
                var cssClasses = control.CssClass.Split(' ');
                control.CssClass = string.Join(" ", cssClasses.Where(@class => @class != cssClass).ToArray());
            }
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
  </namespace>
  <namespace name="DotNetNuke.Web.Validators">
    <class name="AttributeBasedObjectValidator&lt;TAttribute&gt;">
      <declaration><![CDATA[public abstract class AttributeBasedObjectValidator<TAttribute> : PropertyBasedObjectValidator where TAttribute : Attribute]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[protected AttributeBasedObjectValidator()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="ValidateAttribute">
          <declaration><![CDATA[protected abstract ValidationResult ValidateAttribute(object target, PropertyInfo targetProperty, TAttribute attribute);]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
        <method name="ValidateProperty">
          <declaration><![CDATA[protected override ValidationResult ValidateProperty(object target, PropertyInfo targetProperty)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="34" sc="9" el="38" ec="10">Validators\AttributeBasedObjectValidator.cs</location>
            <body hash="05cd244c359de6a9e375fe2375a2d898"><![CDATA[{
            return targetProperty.GetCustomAttributes(true).OfType<TAttribute>().Aggregate(ValidationResult.Successful,
                                                                                           (result, attribute) =>
                                                                                           result.CombineWith(ValidateAttribute(target, targetProperty, attribute) ?? ValidationResult.Successful));
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="DataAnnotationsObjectValidator">
      <declaration><![CDATA[public class DataAnnotationsObjectValidator : AttributeBasedObjectValidator<ValidationAttribute>]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public DataAnnotationsObjectValidator()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="CreateError">
          <declaration><![CDATA[protected virtual ValidationError CreateError(string propertyName, ValidationAttribute attribute)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="39" sc="9" el="41" ec="10">Validators\DataAnnotationsObjectValidator.cs</location>
            <body hash="6e18280d7bcaf6daed53462c8b7a8666"><![CDATA[{
            return new ValidationError {ErrorMessage = attribute.FormatErrorMessage(propertyName), PropertyName = propertyName, Validator = attribute};
        }]]></body>
          </codeblock>
        </method>
        <method name="ValidateAttribute">
          <declaration><![CDATA[protected override ValidationResult ValidateAttribute(object target, PropertyInfo targetProperty, ValidationAttribute attribute)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="33" sc="9" el="35" ec="10">Validators\DataAnnotationsObjectValidator.cs</location>
            <body hash="c7c6359e17c9d133baadabd7c0123caa"><![CDATA[{
            return !attribute.IsValid(targetProperty.GetValue(target, new object[] {})) ? new ValidationResult(new[] {CreateError(targetProperty.Name, attribute)}) : ValidationResult.Successful;
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="ObjectValidator">
      <declaration><![CDATA[public abstract class ObjectValidator]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[protected ObjectValidator()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="ValidateObject">
          <declaration><![CDATA[public abstract ValidationResult ValidateObject(object target);]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="PropertyBasedObjectValidator">
      <declaration><![CDATA[public abstract class PropertyBasedObjectValidator : ObjectValidator]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[protected PropertyBasedObjectValidator()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="ValidateObject">
          <declaration><![CDATA[public override ValidationResult ValidateObject(object target)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="33" sc="9" el="35" ec="10">Validators\PropertyBasedObjectValidator.cs</location>
            <body hash="095ce68bd4a7c4ef38f3f5f26b284d2a"><![CDATA[{
            return target.GetType().GetProperties().Aggregate(ValidationResult.Successful, (result, member) => result.CombineWith(ValidateProperty(target, member) ?? ValidationResult.Successful));
        }]]></body>
          </codeblock>
        </method>
        <method name="ValidateProperty">
          <declaration><![CDATA[protected abstract ValidationResult ValidateProperty(object target, PropertyInfo targetProperty);]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
      </fields>
      <properties>
      </properties>
      <events>
      </events>
    </class>
    <class name="ValidationError">
      <declaration><![CDATA[public class ValidationError]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public ValidationError()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="2147483647" sc="0" el="0" ec="0">
            </location>
            <body hash="d41d8cd98f00b204e9800998ecf8427e"><![CDATA[]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
      </methods>
      <fields>
      </fields>
      <properties>
        <property name="ErrorMessage">
          <declaration><![CDATA[public string ErrorMessage]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="27" sc="38" el="27" ec="42">Validators\ValidationError.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="27" sc="43" el="27" ec="47">Validators\ValidationError.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="PropertyName">
          <declaration><![CDATA[public string PropertyName]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="29" sc="38" el="29" ec="42">Validators\ValidationError.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="29" sc="43" el="29" ec="47">Validators\ValidationError.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
        <property name="Validator">
          <declaration><![CDATA[public object Validator]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="31" sc="35" el="31" ec="39">Validators\ValidationError.cs</location>
            <body hash="b5eda0a74558a342cf659187f06f746f"><![CDATA[get]]></body>
          </codeblock>
          <codeblock>
            <location sl="31" sc="40" el="31" ec="44">Validators\ValidationError.cs</location>
            <body hash="cdaeeeba9b4a4c5ebf042c0215a7bb0e"><![CDATA[set]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="ValidationResult">
      <declaration><![CDATA[public class ValidationResult]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public ValidationResult()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="39" sc="9" el="42" ec="10">Validators\ValidationResult.cs</location>
            <body hash="dd9b2e48382aaec0157696a745e7f2f9"><![CDATA[public ValidationResult()
        {
            _Errors = Enumerable.Empty<ValidationError>();
        }]]></body>
          </codeblock>
        </constructor>
        <constructor name=".ctor">
          <declaration><![CDATA[public ValidationResult(IEnumerable<ValidationError> errors)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="44" sc="9" el="48" ec="10">Validators\ValidationResult.cs</location>
            <body hash="3472d8fae094f4e01d12b0e8ad0e7b7e"><![CDATA[public ValidationResult(IEnumerable<ValidationError> errors)
        {
            Requires.NotNull("errors", errors);
            _Errors = errors;
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="CombineWith">
          <declaration><![CDATA[public ValidationResult CombineWith(ValidationResult other)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="83" sc="9" el="88" ec="10">Validators\ValidationResult.cs</location>
            <body hash="be79391f785039382a9e7b548d1b28ae"><![CDATA[{
            Requires.NotNull("other", other);

            //Just concatenate the errors collection
            return new ValidationResult(_Errors.Concat(other.Errors));
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_Errors">
          <declaration><![CDATA[private readonly IEnumerable<ValidationError> _Errors;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="Errors">
          <declaration><![CDATA[public IEnumerable<ValidationError> Errors]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="57" sc="13" el="59" ec="14">Validators\ValidationResult.cs</location>
            <body hash="17d379580da6e6981211db3c53a9156a"><![CDATA[{
                return _Errors;
            }]]></body>
          </codeblock>
        </property>
        <property name="IsValid">
          <declaration><![CDATA[public bool IsValid]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="65" sc="13" el="67" ec="14">Validators\ValidationResult.cs</location>
            <body hash="6328b39ca7af46bfc2573c236f9d46da"><![CDATA[{
                return (_Errors.Count() == 0);
            }]]></body>
          </codeblock>
        </property>
        <property name="Successful">
          <declaration><![CDATA[public static ValidationResult Successful]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="73" sc="13" el="75" ec="14">Validators\ValidationResult.cs</location>
            <body hash="819fd16f3570b585ea9745396404730a"><![CDATA[{
                return new ValidationResult();
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
    <class name="Validator">
      <declaration><![CDATA[public class Validator]]></declaration>
      <documentation>
      </documentation>
      <constructors>
        <constructor name=".ctor">
          <declaration><![CDATA[public Validator()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="34" sc="9" el="37" ec="10">Validators\Validator.cs</location>
            <body hash="fa5ecb96552e138f9c25d9802eb9ded6"><![CDATA[public Validator()
        {
            _Validators = new List<ObjectValidator>();
        }]]></body>
          </codeblock>
        </constructor>
        <constructor name=".ctor">
          <declaration><![CDATA[public Validator(ObjectValidator validator) : this()]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="39" sc="55" el="42" ec="10">Validators\Validator.cs</location>
            <body hash="1905ae23da2e7bfb1b34e51b19f2864e"><![CDATA[this()
        {
            _Validators.Add(validator);
        }]]></body>
          </codeblock>
        </constructor>
      </constructors>
      <methods>
        <method name="ValidateObject">
          <declaration><![CDATA[public ValidationResult ValidateObject(object target)]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="53" sc="9" el="55" ec="10">Validators\Validator.cs</location>
            <body hash="b23ae655e41aaf34c2a76d77cd0ef2a5"><![CDATA[{
            return _Validators.Aggregate(ValidationResult.Successful, (result, validator) => result.CombineWith(validator.ValidateObject(target) ?? ValidationResult.Successful));
        }]]></body>
          </codeblock>
        </method>
      </methods>
      <fields>
        <field name="_Validators">
          <declaration><![CDATA[private readonly IList<ObjectValidator> _Validators;]]></declaration>
          <documentation>
          </documentation>
        </field>
      </fields>
      <properties>
        <property name="Validators">
          <declaration><![CDATA[public IList<ObjectValidator> Validators]]></declaration>
          <documentation>
          </documentation>
          <codeblock>
            <location sl="47" sc="13" el="49" ec="14">Validators\Validator.cs</location>
            <body hash="1f42ecfe6a780316447c534e2db6a3bc"><![CDATA[{
                return _Validators;
            }]]></body>
          </codeblock>
        </property>
      </properties>
      <events>
      </events>
    </class>
  </namespace>
</root>